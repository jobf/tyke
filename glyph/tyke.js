/*
 howler.js v2.1.1 | (c) 2013-2018, James Simpson of GoldFire Studios | MIT License | howlerjs.com  Spatial Plugin  @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(I){var m=0;return function(){return m<I.length?{done:!1,value:I[m++]}:{done:!0}}};$jscomp.arrayIterator=function(I){return{next:$jscomp.arrayIteratorImpl(I)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(I,m,w){I!=Array.prototype&&I!=Object.prototype&&(I[m]=w.value)};$jscomp.getGlobal=function(I){I=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,I];for(var m=0;m<I.length;++m){var w=I[m];if(w&&w.Math==Math)return w}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.SymbolClass=function(I,m){this.$jscomp$symbol$id_=I;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:m})};$jscomp.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};
$jscomp.Symbol=function(){function I(w){if(this instanceof I)throw new TypeError("Symbol is not a constructor");return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX+(w||"")+"_"+m++,w)}var m=0;return I}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var I=$jscomp.global.Symbol.iterator;I||(I=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[I]&&$jscomp.defineProperty(Array.prototype,I,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var I=$jscomp.global.Symbol.asyncIterator;I||(I=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("Symbol.asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(I){$jscomp.initSymbolIterator();I={next:I};I[$jscomp.global.Symbol.iterator]=function(){return this};return I};
$jscomp.iteratorFromArray=function(I,m){$jscomp.initSymbolIterator();I instanceof String&&(I+="");var w=0,y={next:function(){if(w<I.length){var A=w++;return{value:m(A,I[A]),done:!1}}y.next=function(){return{done:!0,value:void 0}};return y.next()}};y[Symbol.iterator]=function(){return y};return y};
$jscomp.polyfill=function(I,m,w,y){if(m){w=$jscomp.global;I=I.split(".");for(y=0;y<I.length-1;y++){var A=I[y];A in w||(w[A]={});w=w[A]}I=I[I.length-1];y=w[I];m=m(y);m!=y&&null!=m&&$jscomp.defineProperty(w,I,{configurable:!0,writable:!0,value:m})}};$jscomp.polyfill("Array.prototype.values",function(I){return I?I:function(){return $jscomp.iteratorFromArray(this,function(m,w){return w})}},"es8","es3");
$jscomp.checkStringArgs=function(I,m,w){if(null==I)throw new TypeError("The 'this' value for String.prototype."+w+" must not be null or undefined");if(m instanceof RegExp)throw new TypeError("First argument to String.prototype."+w+" must not be a regular expression");return I+""};
$jscomp.polyfill("String.prototype.startsWith",function(I){return I?I:function(m,w){var y=$jscomp.checkStringArgs(this,m,"startsWith");m+="";var A=y.length,D=m.length;w=Math.max(0,Math.min(w|0,y.length));for(var x=0;x<D&&w<A;)if(y[w++]!=m[x++])return!1;return x>=D}},"es6","es3");$jscomp.polyfill("Array.prototype.keys",function(I){return I?I:function(){return $jscomp.iteratorFromArray(this,function(m){return m})}},"es6","es3");
$jscomp.polyfill("String.fromCodePoint",function(I){return I?I:function(m){for(var w="",y=0;y<arguments.length;y++){var A=Number(arguments[y]);if(0>A||1114111<A||A!==Math.floor(A))throw new RangeError("invalid_code_point "+A);65535>=A?w+=String.fromCharCode(A):(A-=65536,w+=String.fromCharCode(A>>>10&1023|55296),w+=String.fromCharCode(A&1023|56320))}return w}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(I){return I?I:function(m,w){var y=$jscomp.checkStringArgs(this,m,"endsWith");m+="";void 0===w&&(w=y.length);w=Math.max(0,Math.min(w|0,y.length));for(var A=m.length;0<A&&0<w;)if(y[--w]!=m[--A])return!1;return 0>=A}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(I){return I?I:function(m,w,y){var A=this.length||0;0>w&&(w=Math.max(0,A+w));if(null==y||y>A)y=A;y=Number(y);0>y&&(y=Math.max(0,A+y));for(w=Number(w||0);w<y;w++)this[w]=m;return this}},"es6","es3");
(function(I,m){I.lime=I.lime||{};I.lime.$scripts=I.lime.$scripts||{};I.lime.$scripts.tyke=function(m,y){(function(m,w){function x(a,b){a=Object.create(a);for(var c in b)a[c]=b[c];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}function y(a){return a instanceof Array?new ed(a):a.iterator()}function n(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=w.$haxeUID++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=b.bind(a),a.hx__closures__[b.__id__]=
c);return c}m.echo=m.echo||{};m.lime=m.lime||{};var k={},d=function(){return na.__string_rec(this,"")},v=v||{},g,Q=function(){};k["lime.app.IModule"]=Q;Q.__name__=!0;Q.__isInterface__=!0;var ca=function(){this.onExit=new zc};k["lime.app.Module"]=ca;ca.__name__=!0;ca.__interfaces__=[Q];ca.prototype={__class__:ca};var S=function(a){this.gameDeviceCache=new Bb;this.parent=a;this.nextUpdate=this.lastUpdate=this.currentUpdate=0;this.framePeriod=-1;Fc.init();this.accelerometer=lc.registerSensor(Ve.ACCELEROMETER,
0)};k["lime._internal.backend.html5.HTML5Application"]=S;S.__name__=!0;S.prototype={convertKeyCode:function(a){if(65<=a&&90>=a)return a+32;switch(a){case 12:return 1073741980;case 16:return 1073742049;case 17:return 1073742048;case 18:return 1073742050;case 19:return 1073741896;case 20:return 1073741881;case 33:return 1073741899;case 34:return 1073741902;case 35:return 1073741901;case 36:return 1073741898;case 37:return 1073741904;case 38:return 1073741906;case 39:return 1073741903;case 40:return 1073741905;
case 41:return 1073741943;case 43:return 1073741940;case 44:return 1073741894;case 45:return 1073741897;case 46:return 127;case 91:return 1073742051;case 92:return 1073742055;case 93:return 1073742055;case 95:return 1073742106;case 96:return 1073741922;case 97:return 1073741913;case 98:return 1073741914;case 99:return 1073741915;case 100:return 1073741916;case 101:return 1073741917;case 102:return 1073741918;case 103:return 1073741919;case 104:return 1073741920;case 105:return 1073741921;case 106:return 1073741909;
case 107:return 1073741911;case 108:return 1073741923;case 109:return 1073741910;case 110:return 1073741923;case 111:return 1073741908;case 112:return 1073741882;case 113:return 1073741883;case 114:return 1073741884;case 115:return 1073741885;case 116:return 1073741886;case 117:return 1073741887;case 118:return 1073741888;case 119:return 1073741889;case 120:return 1073741890;case 121:return 1073741891;case 122:return 1073741892;case 123:return 1073741893;case 124:return 1073741928;case 125:return 1073741929;
case 126:return 1073741930;case 127:return 1073741931;case 128:return 1073741932;case 129:return 1073741933;case 130:return 1073741934;case 131:return 1073741935;case 132:return 1073741936;case 133:return 1073741937;case 134:return 1073741938;case 135:return 1073741939;case 144:return 1073741907;case 145:return 1073741895;case 160:return 94;case 161:return 33;case 163:return 35;case 164:return 36;case 166:return 1073742094;case 167:return 1073742095;case 168:return 1073742097;case 169:return 41;case 170:return 42;
case 171:return 96;case 172:return 1073741898;case 173:return 45;case 174:return 1073741953;case 175:return 1073741952;case 176:return 1073742082;case 177:return 1073742083;case 178:return 1073742084;case 179:return 1073742085;case 180:return 1073742089;case 181:return 1073742086;case 182:return 1073741953;case 183:return 1073741952;case 186:return 59;case 187:return 61;case 188:return 44;case 189:return 45;case 190:return 46;case 191:return 47;case 192:return 96;case 193:return 63;case 194:return 1073741923;
case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39;case 223:return 96;case 224:return 1073742051;case 226:return 92}return a},exec:function(){window.addEventListener("keydown",n(this,this.handleKeyEvent),!1);window.addEventListener("keyup",n(this,this.handleKeyEvent),!1);window.addEventListener("focus",n(this,this.handleWindowEvent),!1);window.addEventListener("blur",n(this,this.handleWindowEvent),!1);window.addEventListener("resize",n(this,this.handleWindowEvent),!1);window.addEventListener("beforeunload",
n(this,this.handleWindowEvent),!1);window.addEventListener("devicemotion",n(this,this.handleSensorEvent),!1);CanvasRenderingContext2D.prototype.isPointInStroke||(CanvasRenderingContext2D.prototype.isPointInStroke=function(a,b,c){return!1});CanvasRenderingContext2D.prototype.isPointInPath||(CanvasRenderingContext2D.prototype.isPointInPath=function(a,b,c){return!1});0=="performance"in window&&(window.performance={});if(0=="now"in window.performance){var a=Date.now();performance.timing&&performance.timing.navigationStart&&
(a=performance.timing.navigationStart);window.performance.now=function(){return Date.now()-a}}for(var b=0,c=["ms","moz","webkit","o"],e=0;e<c.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[c[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[e]+"CancelAnimationFrame"]||window[c[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,c){var e=(new Date).getTime(),f=Math.max(0,16-(e-b));c=window.setTimeout(function(){a(e+
f)},f);b=e+f;return c});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});window.requestAnimFrame=window.requestAnimationFrame;this.lastUpdate=(new Date).getTime();this.handleApplicationEvent();return 0},exit:function(){},handleApplicationEvent:function(a){a=0;for(var b=this.parent.__windows;a<b.length;){var c=b[a];++a;c.__backend.updateSize()}this.updateGameDevices();this.currentUpdate=(new Date).getTime();if(this.currentUpdate>=this.nextUpdate){this.deltaTime=
this.currentUpdate-this.lastUpdate;a=0;for(b=this.parent.__windows;a<b.length;)c=b[a],++a,this.parent.onUpdate.dispatch(this.deltaTime|0),null!=c.context&&c.onRender.dispatch(c.context);this.nextUpdate=0>this.framePeriod?this.currentUpdate:this.currentUpdate-this.currentUpdate%this.framePeriod+this.framePeriod;this.lastUpdate=this.currentUpdate}window.requestAnimationFrame(n(this,this.handleApplicationEvent))},handleKeyEvent:function(a){if(null!=this.parent.__window){var b=this.convertKeyCode(null!=
a.keyCode?a.keyCode:a.which),c=(a.shiftKey?3:0)|(a.ctrlKey?192:0)|(a.altKey?768:0)|(a.metaKey?3072:0);"keydown"==a.type?(this.parent.__window.onKeyDown.dispatch(b,c),this.parent.__window.onKeyDown.canceled&&a.cancelable&&a.preventDefault()):(this.parent.__window.onKeyUp.dispatch(b,c),this.parent.__window.onKeyUp.canceled&&a.cancelable&&a.preventDefault())}},handleSensorEvent:function(a){this.accelerometer.onUpdate.dispatch(a.accelerationIncludingGravity.x,a.accelerationIncludingGravity.y,a.accelerationIncludingGravity.z)},
handleWindowEvent:function(a){if(null!=this.parent.__window)switch(a.type){case "blur":this.hidden||(this.parent.__window.onFocusOut.dispatch(),this.parent.__window.onDeactivate.dispatch(),this.hidden=!0);break;case "focus":this.hidden&&(this.parent.__window.onFocusIn.dispatch(),this.parent.__window.onActivate.dispatch(),this.hidden=!1);break;case "resize":this.parent.__window.__backend.handleResizeEvent(a);break;case "visibilitychange":window.document.hidden?this.hidden||(this.parent.__window.onFocusOut.dispatch(),
this.parent.__window.onDeactivate.dispatch(),this.hidden=!0):this.hidden&&(this.parent.__window.onFocusIn.dispatch(),this.parent.__window.onActivate.dispatch(),this.hidden=!1)}},updateGameDevices:function(){var a=fb.__getDeviceData();if(null!=a)for(var b,c,e,f,h,t=0,l=a.length;t<l;)if(b=t++,f=a[b],null!=f){if(!this.gameDeviceCache.h.hasOwnProperty(b)){h=new Td;h.id=b;h.connected=f.connected;c=0;for(e=f.buttons.length;c<e;){var d=c++;h.buttons.push(f.buttons[d].value)}c=0;for(e=f.axes.length;c<e;)d=
c++,h.axes.push(f.axes[d]);"standard"==f.mapping&&(h.isGamepad=!0);this.gameDeviceCache.h[b]=h;f.connected&&(fb.__connect(b),h.isGamepad&&Ra.__connect(b))}h=this.gameDeviceCache.h[b];e=fb.devices.h[b];c=Ra.devices.h[b];if(f.connected){for(var g=0,C=f.buttons.length;g<C;){var q=g++;d=f.buttons[q].value;if(d!=h.buttons[q]){if(6==q)e.onAxisMove.dispatch(f.axes.length,d),null!=c&&c.onAxisMove.dispatch(4,d);else if(7==q)e.onAxisMove.dispatch(f.axes.length+1,d),null!=c&&c.onAxisMove.dispatch(5,d);else if(0<
d?e.onButtonDown.dispatch(q):e.onButtonUp.dispatch(q),null!=c){switch(q){case 0:b=0;break;case 1:b=1;break;case 2:b=2;break;case 3:b=3;break;case 4:b=9;break;case 5:b=10;break;case 8:b=4;break;case 9:b=6;break;case 10:b=7;break;case 11:b=8;break;case 12:b=11;break;case 13:b=12;break;case 14:b=13;break;case 15:b=14;break;case 16:b=5;break;default:continue}0<d?c.onButtonDown.dispatch(b):c.onButtonUp.dispatch(b)}h.buttons[q]=d}}b=0;for(d=f.axes.length;b<d;)g=b++,f.axes[g]!=h.axes[g]&&(e.onAxisMove.dispatch(g,
f.axes[g]),null!=c&&c.onAxisMove.dispatch(g,f.axes[g]),h.axes[g]=f.axes[g])}else h.connected&&(h.connected=!1,fb.__disconnect(b),Ra.__disconnect(b))}},__class__:S};var da=function(){this.onCreateWindow=new Ud;this.onUpdate=new zc;this.onExit=new zc;null==da.current&&(da.current=this);this.meta=new W;this.modules=[];this.__windowByID=new Bb;this.__windows=[];this.__backend=new S(this);this.__registerLimeModule(this);this.__preloader=new Vd;this.__preloader.onProgress.add(n(this,this.onPreloadProgress));
this.__preloader.onComplete.add(n(this,this.onPreloadComplete))};k["lime.app.Application"]=da;da.__name__=!0;da.__super__=ca;da.prototype=x(ca.prototype,{createWindow:function(a){a=this.__createWindow(a);this.__addWindow(a);return a},exec:function(){da.current=this;return this.__backend.exec()},onGamepadAxisMove:function(a,b,c){},onGamepadButtonDown:function(a,b){},onGamepadButtonUp:function(a,b){},onGamepadConnect:function(a){},onGamepadDisconnect:function(a){},onJoystickAxisMove:function(a,b,c){},
onJoystickButtonDown:function(a,b){},onJoystickButtonUp:function(a,b){},onJoystickConnect:function(a){},onJoystickDisconnect:function(a){},onJoystickHatMove:function(a,b,c){},onJoystickTrackballMove:function(a,b,c,e){},onKeyDown:function(a,b){},onKeyUp:function(a,b){},onModuleExit:function(a){},onMouseDown:function(a,b,c){},onMouseMove:function(a,b){},onMouseMoveRelative:function(a,b){},onMouseUp:function(a,b,c){},onMouseWheel:function(a,b,c){},onPreloadComplete:function(){},onPreloadProgress:function(a,
b){},onRenderContextLost:function(){},onRenderContextRestored:function(a){},onTextEdit:function(a,b,c){},onTextInput:function(a){},onTouchCancel:function(a){},onTouchEnd:function(a){},onTouchMove:function(a){},onTouchStart:function(a){},onWindowActivate:function(){},onWindowClose:function(){},onWindowCreate:function(){},onWindowDeactivate:function(){},onWindowDropFile:function(a){},onWindowEnter:function(){},onWindowExpose:function(){},onWindowFocusIn:function(){},onWindowFocusOut:function(){},onWindowFullscreen:function(){},
onWindowLeave:function(){},onWindowMove:function(a,b){},onWindowMinimize:function(){},onWindowResize:function(a,b){},onWindowRestore:function(){},render:function(a){},update:function(a){},__addWindow:function(a){if(null!=a){this.__windows.push(a);this.__windowByID.h[a.id]=a;var b=n(this,this.__onWindowClose);a.onClose.add(function(){b(a)},!1,-1E4);null==this.__window&&(this.__window=a,a.onActivate.add(n(this,this.onWindowActivate)),a.onRenderContextLost.add(n(this,this.onRenderContextLost)),a.onRenderContextRestored.add(n(this,
this.onRenderContextRestored)),a.onDeactivate.add(n(this,this.onWindowDeactivate)),a.onDropFile.add(n(this,this.onWindowDropFile)),a.onEnter.add(n(this,this.onWindowEnter)),a.onExpose.add(n(this,this.onWindowExpose)),a.onFocusIn.add(n(this,this.onWindowFocusIn)),a.onFocusOut.add(n(this,this.onWindowFocusOut)),a.onFullscreen.add(n(this,this.onWindowFullscreen)),a.onKeyDown.add(n(this,this.onKeyDown)),a.onKeyUp.add(n(this,this.onKeyUp)),a.onLeave.add(n(this,this.onWindowLeave)),a.onMinimize.add(n(this,
this.onWindowMinimize)),a.onMouseDown.add(n(this,this.onMouseDown)),a.onMouseMove.add(n(this,this.onMouseMove)),a.onMouseMoveRelative.add(n(this,this.onMouseMoveRelative)),a.onMouseUp.add(n(this,this.onMouseUp)),a.onMouseWheel.add(n(this,this.onMouseWheel)),a.onMove.add(n(this,this.onWindowMove)),a.onRender.add(n(this,this.render)),a.onResize.add(n(this,this.onWindowResize)),a.onRestore.add(n(this,this.onWindowRestore)),a.onTextEdit.add(n(this,this.onTextEdit)),a.onTextInput.add(n(this,this.onTextInput)),
this.onWindowCreate());this.onCreateWindow.dispatch(a)}},__createWindow:function(a){a=new Wd(this,a);return-1==a.id?null:a},__registerLimeModule:function(a){a.onUpdate.add(n(this,this.update));a.onExit.add(n(this,this.onModuleExit),!1,0);a.onExit.add(n(this,this.__onModuleExit),!1,0);for(a=Ra.devices.iterator();a.hasNext();){var b=a.next();this.__onGamepadConnect(b)}Ra.onConnect.add(n(this,this.__onGamepadConnect));for(a=fb.devices.iterator();a.hasNext();)b=a.next(),this.__onJoystickConnect(b);fb.onConnect.add(n(this,
this.__onJoystickConnect));Eb.onCancel.add(n(this,this.onTouchCancel));Eb.onStart.add(n(this,this.onTouchStart));Eb.onMove.add(n(this,this.onTouchMove));Eb.onEnd.add(n(this,this.onTouchEnd))},__removeWindow:function(a){null!=a&&this.__windowByID.h.hasOwnProperty(a.id)&&(this.__window==a&&(this.__window=null),F.remove(this.__windows,a),this.__windowByID.remove(a.id),a.close(),0==this.__windows.length&&wb.exit(0))},__onGamepadConnect:function(a){this.onGamepadConnect(a);var b=n(this,this.onGamepadAxisMove),
c=function(c,e){b(a,c,e)};a.onAxisMove.add(c);var e=n(this,this.onGamepadButtonDown);c=function(b){e(a,b)};a.onButtonDown.add(c);var f=n(this,this.onGamepadButtonUp);c=function(b){f(a,b)};a.onButtonUp.add(c);var h=n(this,this.onGamepadDisconnect);a.onDisconnect.add(function(){h(a)})},__onJoystickConnect:function(a){this.onJoystickConnect(a);var b=n(this,this.onJoystickAxisMove),c=function(c,e){b(a,c,e)};a.onAxisMove.add(c);var e=n(this,this.onJoystickButtonDown);c=function(b){e(a,b)};a.onButtonDown.add(c);
var f=n(this,this.onJoystickButtonUp);c=function(b){f(a,b)};a.onButtonUp.add(c);var h=n(this,this.onJoystickDisconnect);a.onDisconnect.add(function(){h(a)});var t=n(this,this.onJoystickHatMove);c=function(b,c){t(a,b,c)};a.onHatMove.add(c);var l=n(this,this.onJoystickTrackballMove);c=function(b,c,e){l(a,b,c,e)};a.onTrackballMove.add(c)},__onModuleExit:function(a){this.__backend.exit()},__onWindowClose:function(a){if(this.__window==a)this.onWindowClose();this.__removeWindow(a)},__class__:da});var A=
function(){this.isReadyForUpdate=!1;da.call(this)};k["ob.gum.backends.App"]=A;A.__name__=!0;A.__super__=da;A.prototype=x(da.prototype,{init:function(a,b){this.gum=new Xd(a,b);this.isReadyForUpdate=!0},onWindowCreate:function(){ia.trace("App onWindowCreate",{fileName:"ob/gum/backends/Lime.hx",lineNumber:22,className:"ob.gum.backends.App",methodName:"onWindowCreate"});switch(this.__window.context.type){case "opengl":case "opengles":case "webgl":try{this.init(this.__window)}catch(b){var a=B.caught(b);
ia.trace(Gc.toString(Gc.exceptionStack()),{fileName:"ob/gum/backends/Lime.hx",lineNumber:28,className:"ob.gum.backends.App",methodName:"onWindowCreate",customParams:[a]})}break;default:throw B.thrown("Sorry, only works with OpenGL.");}},update:function(a){if(this.isReadyForUpdate)this.gum.onUpdate(a)},onKeyDown:function(a,b){this.gum.onKeyDown(a,b)},onKeyUp:function(a,b){this.gum.onKeyUp(a,b)},onMouseMove:function(a,b){this.gum.onMouseMove(a,b)},onMouseDown:function(a,b,c){this.gum.onMouseDown(a,
b,c)},onMouseUp:function(a,b,c){this.gum.onMouseUp(a,b,c)},onMouseWheel:function(a,b,c){this.gum.onMouseScroll(a,b,c)},onWindowResize:function(a,b){da.prototype.onWindowResize.call(this,a,b);this.gum.onWindowResize(a,b)},__class__:A});var D=function(){this.config=new Yd(40,40);A.call(this)};k.SampleApp=D;D.__name__=!0;D.__super__=A;D.prototype=x(A.prototype,{init:function(a,b){A.prototype.init.call(this,a,{framesPerSecond:30,drawOnlyWhenRequested:!0,displayWidth:800,displayHeight:600,displayIsScaled:!0});
this.initLoop()},initLoop:function(){},__class__:D});var I=function(){D.call(this)};k.GlyphDemoApp=I;I.__name__=!0;I.__super__=D;I.prototype=x(D.prototype,{initLoop:function(){D.prototype.initLoop.call(this);this.gum.changeLoop(new fd(this.config,new Zd({fonts:["assets/fonts/tiled/hack_ascii.json"],images:["assets/images/bit-bonanza-food.png"]})))},__class__:I});var ra=function(){};k.ApplicationMain=ra;ra.__name__=!0;ra.main=function(){wb.__registerEntryPoint("tyke",ra.create)};ra.create=function(a){O.init(a);
var b=new I;b.meta.h.build="1";b.meta.h.company="ob";b.meta.h.file="tyke";b.meta.h.name="tyke";b.meta.h.packageName="tyke";b.meta.h.version="0.0.1";var c={allowHighDPI:!1,alwaysOnTop:!1,borderless:!1,element:null,frameRate:61,height:0,hidden:!1,maximized:!1,minimized:!1,parameters:{},resizable:!0,title:"tyke",width:0,x:null,y:null,context:{antialiasing:0,background:16777215,colorDepth:32,depth:!0,hardware:!0,stencil:!0,type:null,vsync:!1}};if(null==b.__window&&null!=a)for(var e=0,f=G.fields(a);e<
f.length;){var h=f[e];++e;Object.prototype.hasOwnProperty.call(c,h)?c[h]=G.field(a,h):Object.prototype.hasOwnProperty.call(c.context,h)&&(c.context[h]=G.field(a,h))}b.createWindow(c);e=0;for(f=O.preloadLibraries;e<f.length;)a=f[e],++e,b.__preloader.addLibrary(a);e=0;for(f=O.preloadLibraryNames;e<f.length;)a=f[e],++e,b.__preloader.addLibraryName(a);b.__preloader.load();ra.start(b)};ra.start=function(a){a.exec()};var Z=function(a,b){this.r=new RegExp(a,b.split("u").join(""))};k.EReg=Z;Z.__name__=!0;
Z.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw B.thrown("EReg::matched");},matchedRight:function(){if(null==this.r.m)throw B.thrown("No string matched");var a=this.r.m.index+this.r.m[0].length;return F.substr(this.r.s,a,this.r.s.length-a)},matchedPos:function(){if(null==this.r.m)throw B.thrown("No string matched");return{pos:this.r.m.index,
len:this.r.m[0].length}},matchSub:function(a,b,c){null==c&&(c=-1);if(this.r.global){if(this.r.lastIndex=b,this.r.m=this.r.exec(0>c?a:F.substr(a,0,b+c)),c=null!=this.r.m)this.r.s=a}else if(c=this.match(0>c?F.substr(a,b,null):F.substr(a,b,c)))this.r.s=a,this.r.m.index+=b;return c},map:function(a,b){for(var c=0,e="";!(c>=a.length);){if(!this.matchSub(a,c)){e+=z.string(F.substr(a,c,null));break}var f=this.matchedPos();e+=z.string(F.substr(a,c,f.pos-c));e+=z.string(b(this));0==f.len?(e+=z.string(F.substr(a,
f.pos,1)),c=f.pos+1):c=f.pos+f.len;if(!this.r.global)break}!this.r.global&&0<c&&c<a.length&&(e+=z.string(F.substr(a,c,null)));return e},__class__:Z};var F=function(){};k.HxOverrides=F;F.__name__=!0;F.strDate=function(a){switch(a.length){case 8:a=a.split(":");var b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return a=a.split(" "),b=a[0].split("-"),a=a[1].split(":"),new Date(b[0],
b[1]-1,b[2],a[0],a[1],a[2]);default:throw B.thrown("Invalid date format : "+a);}};F.cca=function(a,b){a=a.charCodeAt(b);if(a==a)return a};F.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c)if(0==b)c=a.length+c;else return"";return a.substr(b,c)};F.remove=function(a,b){b=a.indexOf(b);if(-1==b)return!1;a.splice(b,1);return!0};F.now=function(){return Date.now()};var M=function(a,b,c){this.errors=a;this.putils=b;this.errorType=c};k["json2object.reader.BaseParser"]=M;M.__name__=!0;M.prototype=
{fromJson:function(a,b){null==b&&(b="");this.putils=new $d(a);this.errors=[];try{var c=(new ae(a,b)).doParse();this.loadJson(c)}catch(e){if(ka.lastError=e,a=B.caught(e).unwrap(),a instanceof sc)this.errors.push(ua.ParserError(a.message,this.putils.convertPosition(a.pos)));else throw e;}return this.value},loadJson:function(a,b){null==b&&(b="");var c=this.putils.convertPosition(a.pos);a=a.value;switch(a._hx_index){case 0:this.loadJsonString(a.s,c,b);break;case 1:this.loadJsonNumber(a.s,c,b);break;case 2:this.loadJsonObject(a.fields,
c,b);break;case 3:this.loadJsonArray(a.values,c,b);break;case 4:this.loadJsonBool(a.b,c,b);break;case 5:this.loadJsonNull(c,b)}return this.value},loadJsonNull:function(a,b){this.onIncorrectType(a,b)},loadJsonString:function(a,b,c){this.onIncorrectType(b,c)},loadJsonNumber:function(a,b,c){this.onIncorrectType(b,c)},loadJsonUInt:function(a,b,c,e){var f=0;a=X.trim(a);"-"==a.charAt(0)&&(a=F.substr(a,1,null));var h=X.startsWith(a,"0x");h&&(a=F.substr(a,2,null));for(var t=h?16:10,l=1,d=a.length-1;0<=d;){var g=
h?z.parseInt("0x"+a.charAt(d)):z.parseInt(a.charAt(d));if(null==g)return this.onIncorrectType(b,c),e;f+=l*g;l*=t;--d}return f},loadJsonInt:function(a,b,c,e){if(null!=z.parseInt(a)&&z.parseInt(a)==parseFloat(a))return z.parseInt(a);this.onIncorrectType(b,c);return e},loadJsonFloat:function(a,b,c,e){if(null!=z.parseInt(a))return parseFloat(a);this.onIncorrectType(b,c);return e},loadJsonBool:function(a,b,c){this.onIncorrectType(b,c)},loadJsonArray:function(a,b,c){this.onIncorrectType(b,c)},loadJsonArrayValue:function(a,
b,c){for(var e=[],f=0;f<a.length;){var h=a[f];++f;try{var t=b(h,c)}catch(l){if(ka.lastError=l,h=B.caught(l).unwrap(),na.__instanceof(h,Ib)){if(h!=Ib.ParsingThrow)throw B.thrown(h);continue}else throw l;}e.push(t)}return e},loadJsonObject:function(a,b,c){this.onIncorrectType(b,c)},loadObjectField:function(a,b,c,e,f,h){try{var t=a(b.value,b.name);this.mapSet(e,c,!0);return t}catch(l){if(ka.lastError=l,a=B.caught(l).unwrap(),na.__instanceof(a,Ib)){if(a!=Ib.ParsingThrow)throw B.thrown(a);}else this.errors.push(ua.CustomFunctionException(a,
h))}return f},objectSetupAssign:function(a,b,c){for(var e=0,f=b.length;e<f;){var h=e++;this.mapSet(a,b[h],c[h])}},objectErrors:function(a,b){b=this.putils.convertPosition(new fa(b.file,b.max-1,b.max-1));for(var c=Object.keys(a.h),e=c.length,f=0;f<e;){var h=c[f++];a.h[h]||this.errors.push(ua.UninitializedVariable(h,b))}},onIncorrectType:function(a,b){this.parsingThrow()},parsingThrow:function(){if(0!=this.errorType)throw B.thrown(Ib.ParsingThrow);},mapSet:function(a,b,c){a.h[b]=c},__class__:M};var N=
function(a,b,c){null==c&&(c=0);M.call(this,a,b,c)};k.JsonParser_0=N;N.__name__=!0;N.__super__=M;N.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"peote.text.FontConfig",a));M.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new W;this.objectSetupAssign(c,"packed distancefield kerning width height color bgColor line tiles rangeSplitSize ranges".split(" "),[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,
!1]);this.value=this.getAuto();for(var e=0;e<a.length;){var f=a[e];++e;switch(f.name){case "bgColor":this.value.bgColor=this.loadObjectField((g=new xa(this.errors,this.putils,1),n(g,g.loadJson)),f,"bgColor",c,this.value.bgColor,b);break;case "color":this.value.color=this.loadObjectField((g=new xa(this.errors,this.putils,1),n(g,g.loadJson)),f,"color",c,this.value.color,b);break;case "distancefield":this.value.distancefield=this.loadObjectField((g=new Ta(this.errors,this.putils,1),n(g,g.loadJson)),
f,"distancefield",c,this.value.distancefield,b);break;case "height":this.value.height=this.loadObjectField((g=new p(this.errors,this.putils,1),n(g,g.loadJson)),f,"height",c,this.value.height,b);break;case "kerning":this.value.kerning=this.loadObjectField((g=new gb(this.errors,this.putils,1),n(g,g.loadJson)),f,"kerning",c,this.value.kerning,b);break;case "line":this.value.line=this.loadObjectField((g=new La(this.errors,this.putils,1),n(g,g.loadJson)),f,"line",c,this.value.line,b);break;case "packed":this.value.packed=
this.loadObjectField((g=new Ta(this.errors,this.putils,1),n(g,g.loadJson)),f,"packed",c,this.value.packed,b);break;case "rangeSplitSize":this.value.rangeSplitSize=this.loadObjectField((g=new V(this.errors,this.putils,1),n(g,g.loadJson)),f,"rangeSplitSize",c,this.value.rangeSplitSize,b);break;case "ranges":this.value.ranges=this.loadObjectField((g=new T(this.errors,this.putils,1),n(g,g.loadJson)),f,"ranges",c,this.value.ranges,b);break;case "tiles":this.value.tiles=this.loadObjectField((g=new ha(this.errors,
this.putils,1),n(g,g.loadJson)),f,"tiles",c,this.value.tiles,b);break;case "width":this.value.width=this.loadObjectField((g=new p(this.errors,this.putils,1),n(g,g.loadJson)),f,"width",c,this.value.width,b);break;default:this.errors.push(ua.UnknownVariable(f.name,this.putils.convertPosition(f.namePos)))}}this.objectErrors(c,b)},getAuto:function(){var a=Object.create(be.prototype);a.packed=!1;a.distancefield=!1;a.kerning=null;a.width=16;a.height=16;a.color=-1;a.bgColor=0;a.line=null;a.tiles=null;a.rangeSplitSize=
4096;a.ranges=(new T([],this.putils,0)).loadJson(new Ca(ya.JNull,new fa("",0,1)));return a},__class__:N});var T=function(a,b,c){null==c&&(c=0);M.call(this,a,b,c)};k.JsonParser_1=T;T.__name__=!0;T.__super__=M;T.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"Array<{ ?tiles : Null<{ y : Int, x : Int }>, slot : { width : Int, height : Int }, range : peote.text.Range, ?line : Null<{ height : Float, base : Float }>, image : String, ?data : Null<String> }>",a));
M.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonArray:function(a,b,c){this.value=this.loadJsonArrayValue(a,(g=new R(this.errors,this.putils,2),n(g,g.loadJson)),c)},__class__:T});var ma=function(a,b,c){null==c&&(c=0);M.call(this,a,b,c);this.value=0};k.JsonParser_10=ma;ma.__name__=!0;ma.__super__=M;ma.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"UInt",a));M.prototype.onIncorrectType.call(this,a,b)},loadJsonNumber:function(a,
b,c){this.value=this.loadJsonUInt(a,b,c,this.value)},__class__:ma});var R=function(a,b,c){null==c&&(c=0);M.call(this,a,b,c)};k.JsonParser_11=R;R.__name__=!0;R.__super__=M;R.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"{ ?tiles : Null<{ y : Int, x : Int }>, slot : { width : Int, height : Int }, range : peote.text.Range, ?line : Null<{ height : Float, base : Float }>, image : String, ?data : Null<String> }",a));M.prototype.onIncorrectType.call(this,a,b)},
loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new W;this.objectSetupAssign(c,"data image line range slot tiles".split(" "),[!0,!1,!0,!1,!1,!0]);this.value=this.getAuto();for(var e=0;e<a.length;){var f=a[e];++e;switch(f.name){case "data":this.value.data=this.loadObjectField((g=new U(this.errors,this.putils,1),n(g,g.loadJson)),f,"data",c,this.value.data,b);break;case "image":this.value.image=this.loadObjectField((g=new Pa(this.errors,this.putils,1),n(g,g.loadJson)),f,
"image",c,this.value.image,b);break;case "line":this.value.line=this.loadObjectField((g=new Da(this.errors,this.putils,1),n(g,g.loadJson)),f,"line",c,this.value.line,b);break;case "range":this.value.range=this.loadObjectField((g=new Xa(this.errors,this.putils,1),n(g,g.loadJson)),f,"range",c,this.value.range,b);break;case "slot":this.value.slot=this.loadObjectField((g=new Ga(this.errors,this.putils,1),n(g,g.loadJson)),f,"slot",c,this.value.slot,b);break;case "tiles":this.value.tiles=this.loadObjectField((g=
new Ea(this.errors,this.putils,1),n(g,g.loadJson)),f,"tiles",c,this.value.tiles,b);break;default:this.errors.push(ua.UnknownVariable(f.name,this.putils.convertPosition(f.namePos)))}}this.objectErrors(c,b)},getAuto:function(){return{data:(new U([],this.putils,0)).loadJson(new Ca(ya.JNull,new fa("",0,1))),image:(new Pa([],this.putils,0)).loadJson(new Ca(ya.JNull,new fa("",0,1))),line:(new Da([],this.putils,0)).loadJson(new Ca(ya.JNull,new fa("",0,1))),range:(new Xa([],this.putils,0)).loadJson(new Ca(ya.JNull,
new fa("",0,1))),slot:(new Ga([],this.putils,0)).loadJson(new Ca(ya.JNull,new fa("",0,1))),tiles:(new Ea([],this.putils,0)).loadJson(new Ca(ya.JNull,new fa("",0,1)))}},__class__:R});var U=function(a,b,c){null==c&&(c=0);M.call(this,a,b,c)};k.JsonParser_13=U;U.__name__=!0;U.__super__=M;U.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"String",a));M.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonString:function(a,
b,c){this.value=a},__class__:U});var Pa=function(a,b,c){null==c&&(c=0);M.call(this,a,b,c)};k.JsonParser_14=Pa;Pa.__name__=!0;Pa.__super__=M;Pa.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"String",a));M.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonString:function(a,b,c){this.value=a},__class__:Pa});var Da=function(a,b,c){null==c&&(c=0);M.call(this,a,b,c)};k.JsonParser_16=Da;Da.__name__=!0;Da.__super__=M;
Da.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"{ height : Float, base : Float }",a));M.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new W;this.objectSetupAssign(c,["base","height"],[!1,!1]);this.value=this.getAuto();for(var e=0;e<a.length;){var f=a[e];++e;switch(f.name){case "base":this.value.base=this.loadObjectField((g=new p(this.errors,this.putils,1),n(g,g.loadJson)),f,"base",
c,this.value.base,b);break;case "height":this.value.height=this.loadObjectField((g=new p(this.errors,this.putils,1),n(g,g.loadJson)),f,"height",c,this.value.height,b);break;default:this.errors.push(ua.UnknownVariable(f.name,this.putils.convertPosition(f.namePos)))}}this.objectErrors(c,b)},getAuto:function(){return{base:(new p([],this.putils,0)).loadJson(new Ca(ya.JNull,new fa("",0,1))),height:(new p([],this.putils,0)).loadJson(new Ca(ya.JNull,new fa("",0,1)))}},__class__:Da});var Xa=function(a,b,
c){null==c&&(c=0);M.call(this,a,b,c)};k.JsonParser_17=Xa;Xa.__name__=!0;Xa.__super__=M;Xa.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"peote.text.Range",a));M.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new W;this.objectSetupAssign(c,["min","max"],[!1,!1]);this.value=this.getAuto();for(var e=0;e<a.length;){var f=a[e];++e;switch(f.name){case "max":this.value.max=this.loadObjectField((g=
new V(this.errors,this.putils,1),n(g,g.loadJson)),f,"max",c,this.value.max,b);break;case "min":this.value.min=this.loadObjectField((g=new V(this.errors,this.putils,1),n(g,g.loadJson)),f,"min",c,this.value.min,b);break;default:this.errors.push(ua.UnknownVariable(f.name,this.putils.convertPosition(f.namePos)))}}this.objectErrors(c,b)},getAuto:function(){var a=Object.create(ce.prototype);a.min=(new V([],this.putils,0)).loadJson(new Ca(ya.JNull,new fa("",0,1)));a.max=(new V([],this.putils,0)).loadJson(new Ca(ya.JNull,
new fa("",0,1)));return a},__class__:Xa});var Ga=function(a,b,c){null==c&&(c=0);M.call(this,a,b,c)};k.JsonParser_18=Ga;Ga.__name__=!0;Ga.__super__=M;Ga.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"{ width : Int, height : Int }",a));M.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new W;this.objectSetupAssign(c,["height","width"],[!1,!1]);this.value=this.getAuto();for(var e=0;e<a.length;){var f=
a[e];++e;switch(f.name){case "height":this.value.height=this.loadObjectField((g=new V(this.errors,this.putils,1),n(g,g.loadJson)),f,"height",c,this.value.height,b);break;case "width":this.value.width=this.loadObjectField((g=new V(this.errors,this.putils,1),n(g,g.loadJson)),f,"width",c,this.value.width,b);break;default:this.errors.push(ua.UnknownVariable(f.name,this.putils.convertPosition(f.namePos)))}}this.objectErrors(c,b)},getAuto:function(){return{height:(new V([],this.putils,0)).loadJson(new Ca(ya.JNull,
new fa("",0,1))),width:(new V([],this.putils,0)).loadJson(new Ca(ya.JNull,new fa("",0,1)))}},__class__:Ga});var Ta=function(a,b,c){null==c&&(c=0);M.call(this,a,b,c);this.value=!1};k.JsonParser_2=Ta;Ta.__name__=!0;Ta.__super__=M;Ta.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"Bool",a));M.prototype.onIncorrectType.call(this,a,b)},loadJsonBool:function(a,b,c){this.value=a},__class__:Ta});var Ea=function(a,b,c){null==c&&(c=0);M.call(this,a,b,c)};k.JsonParser_20=
Ea;Ea.__name__=!0;Ea.__super__=M;Ea.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"{ y : Int, x : Int }",a));M.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new W;this.objectSetupAssign(c,["x","y"],[!1,!1]);this.value=this.getAuto();for(var e=0;e<a.length;){var f=a[e];++e;switch(f.name){case "x":this.value.x=this.loadObjectField((g=new V(this.errors,this.putils,1),n(g,g.loadJson)),
f,"x",c,this.value.x,b);break;case "y":this.value.y=this.loadObjectField((g=new V(this.errors,this.putils,1),n(g,g.loadJson)),f,"y",c,this.value.y,b);break;default:this.errors.push(ua.UnknownVariable(f.name,this.putils.convertPosition(f.namePos)))}}this.objectErrors(c,b)},getAuto:function(){return{x:(new V([],this.putils,0)).loadJson(new Ca(ya.JNull,new fa("",0,1))),y:(new V([],this.putils,0)).loadJson(new Ca(ya.JNull,new fa("",0,1)))}},__class__:Ea});var gb=function(a,b,c){null==c&&(c=0);M.call(this,
a,b,c)};k.JsonParser_4=gb;gb.__name__=!0;gb.__super__=M;gb.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"Bool",a));M.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonBool:function(a,b,c){this.value=a},__class__:gb});var p=function(a,b,c){null==c&&(c=0);M.call(this,a,b,c);this.value=0};k.JsonParser_5=p;p.__name__=!0;p.__super__=M;p.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,
"Float",a));M.prototype.onIncorrectType.call(this,a,b)},loadJsonNumber:function(a,b,c){this.value=this.loadJsonFloat(a,b,c,this.value)},__class__:p});var xa=function(a,b,c){null==c&&(c=0);M.call(this,a,b,c)};k.JsonParser_6=xa;xa.__name__=!0;xa.__super__=M;xa.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"peote.view.Color",a));M.prototype.onIncorrectType.call(this,a,b)},loadJsonNumber:function(a,b,c){this.value=(new ma(this.errors,this.putils,0)).loadJson(new Ca(ya.JNumber(a),
new fa(b.file,b.min-1,b.max-1)),c)},__class__:xa});var La=function(a,b,c){null==c&&(c=0);M.call(this,a,b,c)};k.JsonParser_7=La;La.__name__=!0;La.__super__=M;La.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"{ height : Float, base : Float }",a));M.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new W;this.objectSetupAssign(c,["base","height"],[!1,!1]);this.value=this.getAuto();for(var e=
0;e<a.length;){var f=a[e];++e;switch(f.name){case "base":this.value.base=this.loadObjectField((g=new p(this.errors,this.putils,1),n(g,g.loadJson)),f,"base",c,this.value.base,b);break;case "height":this.value.height=this.loadObjectField((g=new p(this.errors,this.putils,1),n(g,g.loadJson)),f,"height",c,this.value.height,b);break;default:this.errors.push(ua.UnknownVariable(f.name,this.putils.convertPosition(f.namePos)))}}this.objectErrors(c,b)},getAuto:function(){return{base:(new p([],this.putils,0)).loadJson(new Ca(ya.JNull,
new fa("",0,1))),height:(new p([],this.putils,0)).loadJson(new Ca(ya.JNull,new fa("",0,1)))}},__class__:La});var ha=function(a,b,c){null==c&&(c=0);M.call(this,a,b,c)};k.JsonParser_8=ha;ha.__name__=!0;ha.__super__=M;ha.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"{ y : Int, x : Int }",a));M.prototype.onIncorrectType.call(this,a,b)},loadJsonNull:function(a,b){this.value=null},loadJsonObject:function(a,b,c){c=new W;this.objectSetupAssign(c,["x","y"],[!1,
!1]);this.value=this.getAuto();for(var e=0;e<a.length;){var f=a[e];++e;switch(f.name){case "x":this.value.x=this.loadObjectField((g=new V(this.errors,this.putils,1),n(g,g.loadJson)),f,"x",c,this.value.x,b);break;case "y":this.value.y=this.loadObjectField((g=new V(this.errors,this.putils,1),n(g,g.loadJson)),f,"y",c,this.value.y,b);break;default:this.errors.push(ua.UnknownVariable(f.name,this.putils.convertPosition(f.namePos)))}}this.objectErrors(c,b)},getAuto:function(){return{x:(new V([],this.putils,
0)).loadJson(new Ca(ya.JNull,new fa("",0,1))),y:(new V([],this.putils,0)).loadJson(new Ca(ya.JNull,new fa("",0,1)))}},__class__:ha});var V=function(a,b,c){null==c&&(c=0);M.call(this,a,b,c);this.value=0};k.JsonParser_9=V;V.__name__=!0;V.__super__=M;V.prototype=x(M.prototype,{onIncorrectType:function(a,b){this.errors.push(ua.IncorrectType(b,"Int",a));M.prototype.onIncorrectType.call(this,a,b)},loadJsonNumber:function(a,b,c){this.value=this.loadJsonInt(a,b,c,this.value)},__class__:V});var O=function(){};
k.ManifestResources=O;O.__name__=!0;O.init=function(a){O.preloadLibraries=[];O.preloadLibraryNames=[];O.rootPath=null;null!=a&&Object.prototype.hasOwnProperty.call(a,"rootPath")&&(O.rootPath=G.field(a,"rootPath"));null==O.rootPath&&(O.rootPath="./");a=Fb.parse('{"name":null,"assets":"aoy4:pathy39:assets%2Ffonts%2Ftiled%2Fhack_ascii.pngy4:sizei12425y4:typey5:IMAGEy2:idR1y7:preloadtgoR0y40:assets%2Ffonts%2Ftiled%2Fhack_ascii.jsonR2i1258R3y4:TEXTR5R7R6tgoR0y27:assets%2Fimages%2Freadme.mdR2i225R3R8R5R9R6tgoR0y38:assets%2Fimages%2Fbit-bonanza-food.pngR2i25790R3R4R5R10R6tgh","rootPath":null,"version":2,"libraryArgs":[],"libraryType":null}',
O.rootPath);a=Wb.fromManifest(a);ba.registerLibrary("default",a);a=ba.getLibrary("default");null!=a?O.preloadLibraries.push(a):O.preloadLibraryNames.push("default")};Math.__name__=!0;var G=function(){};k.Reflect=G;G.__name__=!0;G.field=function(a,b){try{return a[b]}catch(c){return ka.lastError=c,null}};G.getProperty=function(a,b){var c;if(null==a)return null;var e=a.__properties__?c=a.__properties__["get_"+b]:!1;return e?a[c]():a[b]};G.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,
e;for(e in a)"__id__"!=e&&"hx__closures__"!=e&&c.call(a,e)&&b.push(e)}return b};G.isFunction=function(a){return"function"==typeof a?!(a.__name__||a.__ename__):!1};G.compareMethods=function(a,b){return a==b?!0:G.isFunction(a)&&G.isFunction(b)?a.scope==b.scope&&a.method==b.method?null!=a.method:!1:!1};G.copy=function(a){if(null==a)return null;for(var b={},c=0,e=G.fields(a);c<e.length;){var f=e[c];++c;b[f]=G.field(a,f)}return b};var z=function(){};k.Std=z;z.__name__=!0;z.string=function(a){return na.__string_rec(a,
"")};z.parseInt=function(a){if(null!=a)for(var b=0,c=a.length;b<c;){var e=b++,f=a.charCodeAt(e);if(8>=f||14<=f&&32!=f&&45!=f)if(b=a.charCodeAt(e+1),a=parseInt(a,120==b||88==b?16:10),isNaN(a))break;else return a}return null};var E=function(){};k["_String.String_Impl_"]=E;E.__name__=!0;E.fromCharCode=function(a){return String.fromCodePoint(a)};var Ua=function(){this.b=""};k.StringBuf=Ua;Ua.__name__=!0;Ua.prototype={__class__:Ua};var X=function(){};k.StringTools=X;X.__name__=!0;X.startsWith=function(a,
b){return a.length>=b.length?0==a.lastIndexOf(b,0):!1};X.endsWith=function(a,b){var c=b.length,e=a.length;return e>=c?a.indexOf(b,e-c)==e-c:!1};X.isSpace=function(a,b){a=F.cca(a,b);return 8<a&&14>a?!0:32==a};X.ltrim=function(a){for(var b=a.length,c=0;c<b&&X.isSpace(a,c);)++c;return 0<c?F.substr(a,c,b-c):a};X.rtrim=function(a){for(var b=a.length,c=0;c<b&&X.isSpace(a,b-c-1);)++c;return 0<c?F.substr(a,0,b-c):a};X.trim=function(a){return X.ltrim(X.rtrim(a))};X.replace=function(a,b,c){return a.split(b).join(c)};
var ja=function(){};k.Type=ja;ja.__name__=!0;ja.createInstance=function(a,b){return new (Function.prototype.bind.apply(a,[null].concat(b)))};ja.createEnum=function(a,b,c){var e=G.field(a,b);if(null==e)throw B.thrown("No such constructor "+b);if(G.isFunction(e)){if(null==c)throw B.thrown("Constructor "+b+" need parameters");return e.apply(a,c)}if(null!=c&&0!=c.length)throw B.thrown("Constructor "+b+" does not need parameters");return e};var la={toFloat:function(a){return 0>a?4294967296+a:a+0}},u=function(){};
k["echo.util.Disposable"]=u;u.__name__=!0;u.__isInterface__=!0;var ea=function(a){this.transform=new gd;this.layer_mask=Ye._new();this.layers=Ye._new();var b=new P(0,0);this.drag=b;this.max_velocity=b=new P(0,0);this.torque=0;this.acceleration=b=new P(0,0);this.velocity=b=new P(0,0);this.material=$a.global;this.id=++ea.ids;this.active=!0;this.shapes=[];this.data={};this.disposed=!1;this.transform.on_dirty=n(this,this.on_dirty);this.load_options(a)};k["echo.Body"]=ea;ea.__name__=!0;ea.__interfaces__=
[u];ea.__properties__={get_defaults:"get_defaults"};ea.get_defaults=function(){return{kinematic:!1,mass:ea.default_mass,x:0,y:0,rotation:0,scale_x:1,scale_y:1,velocity_x:0,velocity_y:0,rotational_velocity:0,max_velocity_x:0,max_velocity_y:0,max_velocity_length:0,max_rotational_velocity:1E4,drag_x:0,drag_y:0,drag_length:0,rotational_drag:0}};ea.prototype={load_options:function(a){a=zd.copy_fields(a,ea.get_defaults());for(var b=0,c=this.shapes;b<c.length;){var e=c[b];++b;e.put()}this.shapes.length=
0;c=a.x;b=this.transform;b.dirty||b.set_dirty();b.local_x=c;if(null!=this.on_move)this.on_move(this.transform.local_x,this.transform.local_y);c=a.y;b=this.transform;b.dirty||b.set_dirty();b.local_y=c;if(null!=this.on_move)this.on_move(this.transform.local_x,this.transform.local_y);b=this.transform;c=Math.PI/180*a.rotation;b.dirty||b.set_dirty();b.local_radians=c;if(null!=this.on_rotate)this.on_rotate(180/Math.PI*this.transform.local_radians);c=a.scale_x;b=this.transform;b.dirty||b.set_dirty();b.local_scale_x=
c;c=a.scale_y;b=this.transform;b.dirty||b.set_dirty();b.local_scale_y=c;this.kinematic=a.kinematic;this.material=null!=a.material?a.material:null!=a.gravity_scale||null!=a.elasticity?new $a(a.elasticity,null,null,null,a.gravity_scale):$a.global;c=this.velocity;c.x=a.velocity_x;c.y=a.velocity_y;this.rotational_velocity=a.rotational_velocity;c=this.max_velocity;c.x=a.max_velocity_x;c.y=a.max_velocity_y;this.max_velocity_length=a.max_velocity_length;this.max_rotational_velocity=a.max_rotational_velocity;
c=this.drag;c.x=a.drag_x;c.y=a.drag_y;this.drag_length=a.drag_length;this.rotational_drag=a.rotational_drag;this.last_rotation=this.last_y=this.last_x=NaN;this.dirty=!0;if(null!=a.shape){e=Aa.get(a.shape);var f=-1;null==f&&(f=-1);-1==this.shapes.indexOf(e)&&(-1<f?this.shapes[f]=e:this.shapes.push(e),e.set_parent(this),this.dirty=!0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data)))}if(null!=a.shapes)for(b=0,c=a.shapes;b<
c.length;)e=c[b],++b,e=Aa.get(e),f=-1,null==f&&(f=-1),-1==this.shapes.indexOf(e)&&(-1<f?this.shapes[f]=e:this.shapes.push(e),e.set_parent(this),this.dirty=!0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data)));null!=a.shape_instance&&(e=a.shape_instance,-1==this.shapes.indexOf(e)&&(this.shapes.push(e),e.set_parent(this),this.dirty=!0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data))));
if(null!=a.shape_instances)for(b=0,c=a.shape_instances;b<c.length;)e=c[b],++b,-1==this.shapes.indexOf(e)&&(this.shapes.push(e),e.set_parent(this),this.dirty=!0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data)));b=a.mass;if(null==b)c=a.mass,c<ea.minimum_mass?(this.mass=this.inverse_mass=0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data))):(0>=this.mass&&
null!=this.world&&this.world.static_quadtree.remove(this.quadtree_data),this.mass=c,this.inverse_mass=1/this.mass);else switch(b){case -1:b=a=0;for(c=this.shapes;b<c.length;)e=c[b],++b,a+=e.volume()*this.material.density;a<ea.minimum_mass?(this.mass=this.inverse_mass=0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data))):(0>=this.mass&&null!=this.world&&this.world.static_quadtree.remove(this.quadtree_data),this.mass=a,this.inverse_mass=
1/this.mass);break;case 0:c=0;c<ea.minimum_mass?(this.mass=this.inverse_mass=0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data))):(0>=this.mass&&null!=this.world&&this.world.static_quadtree.remove(this.quadtree_data),this.mass=c,this.inverse_mass=1/this.mass);break;default:c=a.mass,c<ea.minimum_mass?(this.mass=this.inverse_mass=0,0>=this.mass&&null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data))):
(0>=this.mass&&null!=this.world&&this.world.static_quadtree.remove(this.quadtree_data),this.mass=c,this.inverse_mass=1/this.mass)}},bounds:function(a){if(0==this.shapes.length){var b=this.transform.local_x,c=this.transform.local_y,e=1,f=1;null==f&&(f=1);null==e&&(e=1);null==c&&(c=0);null==b&&(b=0);a=ab.pool.get();var h=b;null==f&&(f=1);null==e&&(e=1);null==c&&(c=0);null==h&&(h=0);e*=.5;f*=.5;a.min_x=h-e;a.min_y=c-f;a.max_x=h+e;a.max_y=c+f;a.pooled=!1;return a}h=this.shapes[0].bounds();if(1<this.shapes.length)for(f=
1,e=this.shapes.length;f<e;)c=f++,c=this.shapes[c].bounds(),h.min_x>c.min_x&&(h.min_x=c.min_x),h.min_y>c.min_y&&(h.min_y=c.min_y),h.max_x<c.max_x&&(h.max_x=c.max_x),h.max_y<c.max_y&&(h.max_y=c.max_y),c.put();null==a&&(a=ab.pool.get(),c=b=0,f=e=1,null==f&&(f=1),null==e&&(e=1),null==c&&(c=0),null==b&&(b=0),e*=.5,f*=.5,a.min_x=b-e,a.min_y=c-f,a.max_x=b+e,a.max_y=c+f,a.pooled=!1);a.min_x=h.min_x;a.max_x=h.max_x;a.min_y=h.min_y;a.max_y=h.max_y;h.put();return a},on_dirty:function(a){this.dirty=!0;0>=this.mass&&
null!=this.world&&(this.bounds(this.quadtree_data.bounds),this.world.static_quadtree.update(this.quadtree_data))},__class__:ea};var K=function(){};k["echo.Collisions"]=K;K.__name__=!0;K.update_quadtree=function(a){for(var b=0,c=a.members;b<c.length;){var e=c[b];++b;if(!e.disposed){e.collided=!1;for(var f=0,h=e.shapes;f<h.length;){var t=h[f];++f;t.collided=!1}e.active&&0<e.mass&&e.dirty&&0<e.shapes.length&&(null==e.quadtree_data.bounds?e.quadtree_data.bounds=e.bounds():e.bounds(e.quadtree_data.bounds),
a.quadtree.update(e.quadtree_data,!1),e.dirty=!1)}}a.quadtree.shake()};K.query=function(a,b){K.update_quadtree(a);b=null==b?a.listeners.members:b.members;for(var c=0;c<b.length;){var e=b[c];++c;e.quadtree_results.length=0;var f=e.a;switch(f._hx_index){case 0:f=f.v;var h=e.b;switch(h._hx_index){case 0:f=K.overlap_body_and_body_bounds(f,h.v);null!=f&&e.quadtree_results.push(f);break;case 1:K.overlap_body_and_bodies_bounds(f,h.v,a,e.quadtree_results)}break;case 1:switch(f=f.v,h=e.b,h._hx_index){case 0:K.overlap_body_and_bodies_bounds(h.v,
f,a,e.quadtree_results);break;case 1:h=h.v,K.overlap_bodies_and_bodies_bounds(f,h,a,e.quadtree_results),f!=h&&K.overlap_bodies_and_bodies_bounds(h,f,a,e.quadtree_results)}}f=0;for(h=e.last_collisions;f<h.length;){var t=h[f];++f;t.put()}e.last_collisions.length=e.collisions.length;f=0;for(h=e.collisions.length;f<h;)t=f++,e.last_collisions[t]=e.collisions[t];f=e.collisions.length=0;for(h=e.quadtree_results;f<h.length;)if(t=h[f],++f,t.a.disposed||t.b.disposed)t.put();else if(t.a.id==t.b.id)t.put();else{for(var l=
!1,d=0,g=e.collisions;d<g.length;){var C=g[d];++d;if(C.a.id==t.a.id&&C.b.id==t.b.id||C.b.id==t.a.id&&C.a.id==t.b.id){l=!0;break}}if(l)t.put();else{if(1==t.a.shapes.length&&1==t.b.shapes.length)l=t.a.shapes[0].collides(t.b.shapes[0]),null!=l&&t.data.push(l);else for(l=t.a.shapes,d=0,g=l.length;d<g;){C=d++;for(var q=t.b.shapes,u=l[C].bounds(),r=0,v=q.length;r<v;){var k=r++,p=q[k].bounds();u.min_x<p.max_x&&u.max_x>=p.min_x&&u.min_y<p.max_y&&u.max_y>=p.min_y&&(k=l[C].collides(q[k]),null!=k&&t.data.push(k));
p.put()}u.put()}if(0==t.data.length)t.put();else if(null==e.condition||e.condition(t.a,t.b,t.data)&&!t.a.disposed&&!t.b.disposed){l=0;for(d=t.data;l<d.length;)g=d[l],++l,g.sa.collided=g.sb.collided=!0;t.a.collided=t.b.collided=!0;e.collisions.push(t)}else t.put()}}}};K.notify=function(a,b){a=null==b?a.listeners.members:b.members;for(b=0;b<a.length;){var c=a[b];++b;if(null!=c.enter||null!=c.stay)for(var e=0,f=c.collisions;e<f.length;){var h=f[e];++e;if(!h.a.disposed&&!h.b.disposed){if(null!=c.enter){var t=
!1;for(var l=0,d=c.last_collisions;l<d.length;){var g=d[l];++l;if(g.a==h.a&&g.b==h.b||g.a==h.b&&g.b==h.a){t=!0;break}}t=!t}else t=!1;t?c.enter(h.a,h.b,h.data):null!=c.stay&&c.stay(h.a,h.b,h.data)}}if(null!=c.exit)for(e=0,f=c.last_collisions;e<f.length;){h=f[e];++e;if(h.a.disposed||h.b.disposed)t=!1;else{t=!1;l=0;for(d=c.collisions;l<d.length;)if(g=d[l],++l,g.a==h.a&&g.b==h.b||g.a==h.b&&g.b==h.a){t=!0;break}t=!t}t&&c.exit(h.a,h.b)}}};K.overlap_bodies_and_bodies_bounds=function(a,b,c,e){if(0!=a.length&&
0!=b.length)for(var f=0;f<a.length;){var h=a[f];++f;K.overlap_body_and_bodies_bounds(h,b,c,e)}};K.overlap_body_and_bodies_bounds=function(a,b,c,e){if(!(a.disposed||0==a.shapes.length||!a.active||0>=a.mass)){var f=a.bounds();K.qr.length=0;K.sqr.length=0;c.quadtree.query(f,K.qr);c.static_quadtree.query(f,K.sqr);for(c=0;c<b.length;){var h=b[c];++c;if(!h.disposed&&0!=h.shapes.length&&h.active&&(0==a.layer_mask||0==h.layer_mask||0!=(a.layer_mask&h.layers)&&0!=(h.layer_mask&a.layers)))for(var t=0,l=0<h.mass?
K.qr:K.sqr;t<l.length;){var d=l[t];++t;d.id==h.id&&(d=kc.pool.get(),d.a=a,d.b=h,d.data.length=0,d.pooled=!1,e.push(d))}}f.put()}};K.overlap_body_and_body_bounds=function(a,b){if(a.disposed||b.disposed||0==a.shapes.length||0==b.shapes.length||!a.active||!b.active||a==b||0!=a.layer_mask&&0!=b.layer_mask&&(0==(a.layer_mask&b.layers)||0==(b.layer_mask&a.layers))||0>=a.mass&&0>=b.mass)return null;var c=a.bounds(),e=b.bounds(),f=c.min_x<e.max_x&&c.max_x>=e.min_x&&c.min_y<e.max_y&&c.max_y>=e.min_y;c.put();
e.put();return f?(c=kc.pool.get(),c.a=a,c.b=b,c.data.length=0,c.pooled=!1,c):null};var r=function(a){this.members=null==a?[]:a};k["echo.Listeners"]=r;r.__name__=!0;r.__interfaces__=[u];r.prototype={add:function(a,b,c){c=zd.copy_fields(c,qb.get_defaults());a=new qb(a,b,c.separate,[],[],null,null,null,null,[],c.percent_correction,c.correction_threshold);null!=c.enter&&(a.enter=c.enter);null!=c.stay&&(a.stay=c.stay);null!=c.exit&&(a.exit=c.exit);null!=c.condition&&(a.condition=c.condition);this.members.push(a);
return a},clear:function(){this.members.length=0},__class__:r};var H=m.echo.Echo=function(){};k["echo.Echo"]=H;H.__name__=!0;H.start=function(a){return new $b(a)};H.make=function(a,b){return a.add(new ea(b))};H.listen=function(a,b,c,e){return null==b?null==c?a.listeners.add(Yc.Right(a.members),Yc.Right(a.members),e):a.listeners.add(c,c,e):null==c?a.listeners.add(b,b,e):a.listeners.add(b,c,e)};H.check=function(a,b,c,e){H.cached_listeners.clear();null==b&&null==c?H.cached_listeners.add(Yc.Right(a.members),
Yc.Right(a.members),e):null==b?H.cached_listeners.add(c,c,e):null==c?H.cached_listeners.add(b,b,e):H.cached_listeners.add(b,c,e);K.query(a,H.cached_listeners);xb.separate(a,H.cached_listeners);K.notify(a,H.cached_listeners)};H.step=function(a,b){if(null!=a.history){for(var c=a.history,e=[],f=0,h=a.members;f<h.length;){var t=h[f];++f;e.push(new mc(t.id,t.transform.local_x,t.transform.local_y,180/Math.PI*t.transform.local_radians,t.velocity.x,t.velocity.y,t.acceleration.x,t.acceleration.y,t.rotational_velocity))}c.add(e)}b/=
a.iterations;e=0;for(f=a.iterations;e<f;)e++,xb.step(a,b),K.query(a),xb.separate(a),K.notify(a)};H.linecast_floats=function(a,b,c,e,f,h,t){null==t&&(t=!0);null==e&&(e=1);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);var l=mb.pool.get();null==e&&(e=1);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);var d=l.start;d.x=a;d.y=b;d=l.end;d.x=c;d.y=e;l.pooled=!1;f=H.linecast(l,f,h,t);l.pooled||(l.pooled=!0,mb.pool.put_unsafe(l));return f};H.linecast_vector=function(a,b,c,e,f,h){null==h&&(h=!0);var t=mb.pool.get();
t.set_from_vector(a,b,c);t.pooled=!1;a=H.linecast(t,e,f,h);t.pooled||(t.pooled=!0,mb.pool.put_unsafe(t));return a};H.linecast_vectors=function(a,b,c,e,f){f=a.x;var h=a.y;a=b.x;var t=b.y;null==t&&(t=1);null==a&&(a=1);null==h&&(h=0);null==f&&(f=0);b=mb.pool.get();null==t&&(t=1);null==a&&(a=1);null==h&&(h=0);null==f&&(f=0);var l=b.start;l.x=f;l.y=h;l=b.end;l.x=a;l.y=t;b.pooled=!1;c=H.linecast(b,c,e);b.pooled||(b.pooled=!0,mb.pool.put_unsafe(b));return c};H.linecast=function(a,b,c,e){null==e&&(e=!0);
var f=null,h=Math.min(a.start.x,a.end.x),t=Math.min(a.start.y,a.end.y),l=Math.max(a.start.x,a.end.x),d=Math.max(a.start.y,a.end.y),g=ab.pool.get();g.min_x=h;g.max_x=l;g.min_y=t;g.max_y=d;g.pooled=!1;var C=b;switch(C._hx_index){case 0:var q=C.v;if(!q.disposed&&q.active){var u=q.bounds();if(g.min_x<u.max_x&&g.max_x>=u.min_x&&g.min_y<u.max_y&&g.max_y>=u.min_y){var r=0;for(e=q.shapes.length;r<e;)t=r++,h=q.shapes[t].intersect(a),null!=h&&(null==f&&(t=Qb.pool.get(),t.line=a,t.body=q,t.data.length=0,t.pooled=
!1,f=t),f.data.push(h))}u.put()}break;case 1:if(b=C.v,null==c)for(C=0;C<b.length;){if(q=b[C],++C,null!=q&&!q.disposed&&q.active){u=q.bounds();t=Qb.pool.get();t.line=a;t.body=q;t.data.length=0;t.pooled=!1;c=t;if(g.min_x<u.max_x&&g.max_x>=u.min_x&&g.min_y<u.max_y&&g.max_y>=u.min_y)for(r=0,e=q.shapes.length;r<e;)t=r++,h=q.shapes[t].intersect(a),null!=h&&c.data.push(h);u.put();if(0<c.data.length)if(null!=f){if(0==f.data.length)h=null;else if(1==f.data.length)h=f.data[0];else{u=f.data[0];q=1;for(h=f.data.length;q<
h;)t=q++,null!=f.data[t]&&f.data[t].distance<u.distance&&(u=f.data[t]);h=u}u=h.distance;if(0==c.data.length)e=null;else if(1==c.data.length)e=c.data[0];else{q=c.data[0];e=1;for(h=c.data.length;e<h;)t=e++,null!=c.data[t]&&c.data[t].distance<q.distance&&(q=c.data[t]);e=q}h=u>e.distance}else h=!0;else h=!1;h?(null!=f&&f.put(),f=c):c.put()}}else{C=0;for(r=H.cached_collisions;C<r.length;)u=r[C],++C,u.put();H.cached_collisions.length=0;u=H.cached_body;h=g.min_x;t=g.min_y;l=g.max_x;d=g.max_y;q=Jb.pool.get();
C=.5*(h+l);r=.5*(t+d);h=l-h;d-=t;null==d&&(d=0);null==h&&(h=1);null==r&&(r=0);null==C&&(C=0);l=q.transform;l.dirty||l.set_dirty();l.local_x=C;l=q.transform;l.dirty||l.set_dirty();l.local_y=r;C=.5*h;l=q.transform;null==l.parent?r=l.local_scale_x:(l.sync(),r=l._scale_x);q.local_ex=C/r;if(null!=q.transformed_rect){l=q.transformed_rect;l.count=4;C=0;for(r=l.count;C<r;)if(t=C++,null==l.local_vertices[t]){var v=l.local_vertices,k=new P(0,0);v[t]=k}C=l.local_vertices[0];C.x=-(q.local_ex*q.transform.local_scale_x);
C.y=-(q.local_ey*q.transform.local_scale_y);C=l.local_vertices[1];C.x=q.local_ex*q.transform.local_scale_x;C.y=-(q.local_ey*q.transform.local_scale_y);C=l.local_vertices[2];C.x=q.local_ex*q.transform.local_scale_x;C.y=q.local_ey*q.transform.local_scale_y;C=l.local_vertices[3];C.x=-(q.local_ex*q.transform.local_scale_x);C.y=q.local_ey*q.transform.local_scale_y;C=q.transform.local_x;v=l.transform;v.dirty||v.set_dirty();v.local_x=C;C=q.transform.local_y;v=l.transform;v.dirty||v.set_dirty();v.local_y=
C;v=l.transform;C=Math.PI/180*(180/Math.PI)*q.transform.local_radians;v.dirty||v.set_dirty();v.local_radians=C;C=q.transform.local_scale_x;v=l.transform;v.dirty||v.set_dirty();v.local_scale_x=C;C=q.transform.local_scale_y;v=l.transform;v.dirty||v.set_dirty();v.local_scale_y=C;l.dirty_vertices=!0;l.dirty_bounds=!0}C=.5*(0>=d?h:d);l=q.transform;null==l.parent?r=l.local_scale_y:(l.sync(),r=l._scale_y);q.local_ey=C/r;if(null!=q.transformed_rect){l=q.transformed_rect;l.count=4;C=0;for(r=l.count;C<r;)t=
C++,null==l.local_vertices[t]&&(v=l.local_vertices,k=new P(0,0),v[t]=k);C=l.local_vertices[0];C.x=-(q.local_ex*q.transform.local_scale_x);C.y=-(q.local_ey*q.transform.local_scale_y);C=l.local_vertices[1];C.x=q.local_ex*q.transform.local_scale_x;C.y=-(q.local_ey*q.transform.local_scale_y);C=l.local_vertices[2];C.x=q.local_ex*q.transform.local_scale_x;C.y=q.local_ey*q.transform.local_scale_y;C=l.local_vertices[3];C.x=-(q.local_ex*q.transform.local_scale_x);C.y=q.local_ey*q.transform.local_scale_y;C=
q.transform.local_x;v=l.transform;v.dirty||v.set_dirty();v.local_x=C;C=q.transform.local_y;v=l.transform;v.dirty||v.set_dirty();v.local_y=C;v=l.transform;C=Math.PI/180*(180/Math.PI)*q.transform.local_radians;v.dirty||v.set_dirty();v.local_radians=C;C=q.transform.local_scale_x;v=l.transform;v.dirty||v.set_dirty();v.local_scale_x=C;C=q.transform.local_scale_y;v=l.transform;v.dirty||v.set_dirty();v.local_scale_y=C;l.dirty_vertices=!0;l.dirty_bounds=!0}l=q.transform;C=Math.PI/180*0;l.dirty||l.set_dirty();
l.local_radians=C;l=q.transform;l.dirty||l.set_dirty();l.local_scale_x=1;l=q.transform;l.dirty||l.set_dirty();l.local_scale_y=1;null==q.transformed_rect?(l=q.transform,null==l.parent?h=180/Math.PI*l.local_radians:(l.sync(),h=180/Math.PI*l._radians),h=0!=h):h=!1;if(h){h=Ya.pool.get();h.count=4;C=0;for(r=h.count;C<r;)t=C++,null==h.local_vertices[t]&&(d=h.local_vertices,k=new P(0,0),d[t]=k);C=h.local_vertices[0];C.x=-(q.local_ex*q.transform.local_scale_x);C.y=-(q.local_ey*q.transform.local_scale_y);
C=h.local_vertices[1];C.x=q.local_ex*q.transform.local_scale_x;C.y=-(q.local_ey*q.transform.local_scale_y);C=h.local_vertices[2];C.x=q.local_ex*q.transform.local_scale_x;C.y=q.local_ey*q.transform.local_scale_y;C=h.local_vertices[3];C.x=-(q.local_ex*q.transform.local_scale_x);C.y=q.local_ey*q.transform.local_scale_y;C=q.transform.local_x;l=h.transform;l.dirty||l.set_dirty();l.local_x=C;C=q.transform.local_y;l=h.transform;l.dirty||l.set_dirty();l.local_y=C;l=h.transform;C=Math.PI/180*(180/Math.PI)*
q.transform.local_radians;l.dirty||l.set_dirty();l.local_radians=C;C=q.transform.local_scale_x;l=h.transform;l.dirty||l.set_dirty();l.local_scale_x=C;C=q.transform.local_scale_y;l=h.transform;l.dirty||l.set_dirty();l.local_scale_y=C;h.dirty_vertices=!0;h.dirty_bounds=!0;h.pooled=!1;q.transformed_rect=h;q.transformed_rect.set_parent(q.parent)}else null!=q.transformed_rect&&(C=q.transform.local_x,l=q.transformed_rect.transform,l.dirty||l.set_dirty(),l.local_x=C,C=q.transform.local_y,l=q.transformed_rect.transform,
l.dirty||l.set_dirty(),l.local_y=C,l=q.transformed_rect.transform,C=Math.PI/180*(180/Math.PI)*q.transform.local_radians,l.dirty||l.set_dirty(),l.local_radians=C,C=q.transform.local_scale_x,l=q.transformed_rect.transform,l.dirty||l.set_dirty(),l.local_scale_x=C,C=q.transform.local_scale_y,l=q.transformed_rect.transform,l.dirty||l.set_dirty(),l.local_scale_y=C);q.pooled=!1;null!=u.shapes[0]&&u.shapes[0].put();u.shapes[0]=q;u.shapes[0].set_parent(u);u.dirty=!0;0>=u.mass&&null!=u.world&&(u.bounds(u.quadtree_data.bounds),
u.world.static_quadtree.update(u.quadtree_data));e&&K.update_quadtree(c);K.overlap_body_and_bodies_bounds(H.cached_body,b,c,H.cached_collisions);C=0;for(r=H.cached_collisions;C<r.length;){u=r[C];++C;q=u.b;t=Qb.pool.get();t.line=a;t.body=q;t.data.length=0;t.pooled=!1;c=t;e=0;for(q=u.b.shapes.length;e<q;)t=e++,h=u.b.shapes[t].intersect(a),null!=h&&c.data.push(h);if(0<c.data.length)if(null!=f){if(0==f.data.length)h=null;else if(1==f.data.length)h=f.data[0];else{u=f.data[0];h=1;for(e=f.data.length;h<
e;)t=h++,null!=f.data[t]&&f.data[t].distance<u.distance&&(u=f.data[t]);h=u}u=h.distance;if(0==c.data.length)e=null;else if(1==c.data.length)e=c.data[0];else{q=c.data[0];h=1;for(b=c.data.length;h<b;)t=h++,null!=c.data[t]&&c.data[t].distance<q.distance&&(q=c.data[t]);e=q}h=u>e.distance}else h=!0;else h=!1;h?(null!=f&&f.put(),f=c):c.put()}H.cached_body.shapes[0].put()}}g.put();return f};H.linecast_all=function(a,b,c,e){null==e&&(e=!0);var f=[],h=Math.min(a.start.x,a.end.x),t=Math.min(a.start.y,a.end.y),
l=Math.max(a.start.x,a.end.x),d=Math.max(a.start.y,a.end.y),g=ab.pool.get();g.min_x=h;g.max_x=l;g.min_y=t;g.max_y=d;g.pooled=!1;var C=b;switch(C._hx_index){case 0:var q=C.v;t=Qb.pool.get();t.line=a;t.body=q;t.data.length=0;t.pooled=!1;c=t;var u=q.bounds();if(g.min_x<u.max_x&&g.max_x>=u.min_x&&g.min_y<u.max_y&&g.max_y>=u.min_y){var v=0;for(e=q.shapes.length;v<e;)t=v++,t=q.shapes[t].intersect(a),null!=t&&c.data.push(t)}u.put();0<c.data.length?f.push(c):c.put();break;case 1:if(b=C.v,null==c)for(C=0;C<
b.length;){if(q=b[C],++C,null!=q){u=q.bounds();t=Qb.pool.get();t.line=a;t.body=q;t.data.length=0;t.pooled=!1;c=t;if(g.min_x<u.max_x&&g.max_x>=u.min_x&&g.min_y<u.max_y&&g.max_y>=u.min_y)for(v=0,e=q.shapes.length;v<e;)t=v++,t=q.shapes[t].intersect(a),null!=t&&c.data.push(t);u.put();0<c.data.length?f.push(c):c.put()}}else{C=0;for(v=H.cached_collisions;C<v.length;)u=v[C],++C,u.put();H.cached_collisions.length=0;u=H.cached_body;h=g.min_x;t=g.min_y;l=g.max_x;d=g.max_y;q=Jb.pool.get();C=.5*(h+l);v=.5*(t+
d);h=l-h;d-=t;null==d&&(d=0);null==h&&(h=1);null==v&&(v=0);null==C&&(C=0);l=q.transform;l.dirty||l.set_dirty();l.local_x=C;l=q.transform;l.dirty||l.set_dirty();l.local_y=v;C=.5*h;l=q.transform;null==l.parent?v=l.local_scale_x:(l.sync(),v=l._scale_x);q.local_ex=C/v;if(null!=q.transformed_rect){l=q.transformed_rect;l.count=4;C=0;for(v=l.count;C<v;)if(t=C++,null==l.local_vertices[t]){var r=l.local_vertices,k=new P(0,0);r[t]=k}C=l.local_vertices[0];C.x=-(q.local_ex*q.transform.local_scale_x);C.y=-(q.local_ey*
q.transform.local_scale_y);C=l.local_vertices[1];C.x=q.local_ex*q.transform.local_scale_x;C.y=-(q.local_ey*q.transform.local_scale_y);C=l.local_vertices[2];C.x=q.local_ex*q.transform.local_scale_x;C.y=q.local_ey*q.transform.local_scale_y;C=l.local_vertices[3];C.x=-(q.local_ex*q.transform.local_scale_x);C.y=q.local_ey*q.transform.local_scale_y;C=q.transform.local_x;r=l.transform;r.dirty||r.set_dirty();r.local_x=C;C=q.transform.local_y;r=l.transform;r.dirty||r.set_dirty();r.local_y=C;r=l.transform;
C=Math.PI/180*(180/Math.PI)*q.transform.local_radians;r.dirty||r.set_dirty();r.local_radians=C;C=q.transform.local_scale_x;r=l.transform;r.dirty||r.set_dirty();r.local_scale_x=C;C=q.transform.local_scale_y;r=l.transform;r.dirty||r.set_dirty();r.local_scale_y=C;l.dirty_vertices=!0;l.dirty_bounds=!0}C=.5*(0>=d?h:d);l=q.transform;null==l.parent?v=l.local_scale_y:(l.sync(),v=l._scale_y);q.local_ey=C/v;if(null!=q.transformed_rect){l=q.transformed_rect;l.count=4;C=0;for(v=l.count;C<v;)t=C++,null==l.local_vertices[t]&&
(r=l.local_vertices,k=new P(0,0),r[t]=k);C=l.local_vertices[0];C.x=-(q.local_ex*q.transform.local_scale_x);C.y=-(q.local_ey*q.transform.local_scale_y);C=l.local_vertices[1];C.x=q.local_ex*q.transform.local_scale_x;C.y=-(q.local_ey*q.transform.local_scale_y);C=l.local_vertices[2];C.x=q.local_ex*q.transform.local_scale_x;C.y=q.local_ey*q.transform.local_scale_y;C=l.local_vertices[3];C.x=-(q.local_ex*q.transform.local_scale_x);C.y=q.local_ey*q.transform.local_scale_y;C=q.transform.local_x;r=l.transform;
r.dirty||r.set_dirty();r.local_x=C;C=q.transform.local_y;r=l.transform;r.dirty||r.set_dirty();r.local_y=C;r=l.transform;C=Math.PI/180*(180/Math.PI)*q.transform.local_radians;r.dirty||r.set_dirty();r.local_radians=C;C=q.transform.local_scale_x;r=l.transform;r.dirty||r.set_dirty();r.local_scale_x=C;C=q.transform.local_scale_y;r=l.transform;r.dirty||r.set_dirty();r.local_scale_y=C;l.dirty_vertices=!0;l.dirty_bounds=!0}l=q.transform;C=Math.PI/180*0;l.dirty||l.set_dirty();l.local_radians=C;l=q.transform;
l.dirty||l.set_dirty();l.local_scale_x=1;l=q.transform;l.dirty||l.set_dirty();l.local_scale_y=1;null==q.transformed_rect?(l=q.transform,null==l.parent?C=180/Math.PI*l.local_radians:(l.sync(),C=180/Math.PI*l._radians),C=0!=C):C=!1;if(C){h=Ya.pool.get();h.count=4;C=0;for(v=h.count;C<v;)t=C++,null==h.local_vertices[t]&&(d=h.local_vertices,k=new P(0,0),d[t]=k);C=h.local_vertices[0];C.x=-(q.local_ex*q.transform.local_scale_x);C.y=-(q.local_ey*q.transform.local_scale_y);C=h.local_vertices[1];C.x=q.local_ex*
q.transform.local_scale_x;C.y=-(q.local_ey*q.transform.local_scale_y);C=h.local_vertices[2];C.x=q.local_ex*q.transform.local_scale_x;C.y=q.local_ey*q.transform.local_scale_y;C=h.local_vertices[3];C.x=-(q.local_ex*q.transform.local_scale_x);C.y=q.local_ey*q.transform.local_scale_y;C=q.transform.local_x;l=h.transform;l.dirty||l.set_dirty();l.local_x=C;C=q.transform.local_y;l=h.transform;l.dirty||l.set_dirty();l.local_y=C;l=h.transform;C=Math.PI/180*(180/Math.PI)*q.transform.local_radians;l.dirty||l.set_dirty();
l.local_radians=C;C=q.transform.local_scale_x;l=h.transform;l.dirty||l.set_dirty();l.local_scale_x=C;C=q.transform.local_scale_y;l=h.transform;l.dirty||l.set_dirty();l.local_scale_y=C;h.dirty_vertices=!0;h.dirty_bounds=!0;h.pooled=!1;q.transformed_rect=h;q.transformed_rect.set_parent(q.parent)}else null!=q.transformed_rect&&(C=q.transform.local_x,l=q.transformed_rect.transform,l.dirty||l.set_dirty(),l.local_x=C,C=q.transform.local_y,l=q.transformed_rect.transform,l.dirty||l.set_dirty(),l.local_y=
C,l=q.transformed_rect.transform,C=Math.PI/180*(180/Math.PI)*q.transform.local_radians,l.dirty||l.set_dirty(),l.local_radians=C,C=q.transform.local_scale_x,l=q.transformed_rect.transform,l.dirty||l.set_dirty(),l.local_scale_x=C,C=q.transform.local_scale_y,l=q.transformed_rect.transform,l.dirty||l.set_dirty(),l.local_scale_y=C);q.pooled=!1;null!=u.shapes[0]&&u.shapes[0].put();u.shapes[0]=q;u.shapes[0].set_parent(u);u.dirty=!0;0>=u.mass&&null!=u.world&&(u.bounds(u.quadtree_data.bounds),u.world.static_quadtree.update(u.quadtree_data));
e&&K.update_quadtree(c);K.overlap_body_and_bodies_bounds(H.cached_body,b,c,H.cached_collisions);C=0;for(v=H.cached_collisions;C<v.length;){u=v[C];++C;q=u.b;t=Qb.pool.get();t.line=a;t.body=q;t.data.length=0;t.pooled=!1;c=t;e=0;for(b=u.b.shapes.length;e<b;)t=e++,t=u.b.shapes[t].intersect(a),null!=t&&c.data.push(t);0<c.data.length?f.push(c):c.put()}H.cached_body.shapes[0].put()}}g.put();return f};H.undo=function(a){if(null!=a.history){var b=a.history.undo();if(null!=b){for(var c=0;c<b.length;){var e=
b[c];++c;for(var f=0,h=a.members;f<h.length;){var t=h[f];++f;if(e.id==t.id){var l=e.x,d=t.transform;d.dirty||d.set_dirty();d.local_x=l;if(null!=t.on_move)t.on_move(t.transform.local_x,t.transform.local_y);l=e.y;d=t.transform;d.dirty||d.set_dirty();d.local_y=l;if(null!=t.on_move)t.on_move(t.transform.local_x,t.transform.local_y);l=t.transform;d=Math.PI/180*e.rotation;l.dirty||l.set_dirty();l.local_radians=d;if(null!=t.on_rotate)t.on_rotate(180/Math.PI*t.transform.local_radians);l=t.velocity;l.x=e.velocity_x;
l.y=e.velocity_y;l=t.acceleration;l.x=e.acceleration_x;l.y=e.acceleration_y;t.rotational_velocity=e.rotational_velocity}}}a.reset_quadtrees()}}return a};H.redo=function(a){if(null!=a.history){var b=a.history.redo();if(null!=b)for(var c=0;c<b.length;){var e=b[c];++c;for(var f=0,h=a.members;f<h.length;){var t=h[f];++f;if(e.id==t.id){var l=e.x,d=t.transform;d.dirty||d.set_dirty();d.local_x=l;if(null!=t.on_move)t.on_move(t.transform.local_x,t.transform.local_y);l=e.y;d=t.transform;d.dirty||d.set_dirty();
d.local_y=l;if(null!=t.on_move)t.on_move(t.transform.local_x,t.transform.local_y);l=t.transform;d=Math.PI/180*e.rotation;l.dirty||l.set_dirty();l.local_radians=d;if(null!=t.on_rotate)t.on_rotate(180/Math.PI*t.transform.local_radians);l=t.velocity;l.x=e.velocity_x;l.y=e.velocity_y;l=t.acceleration;l.x=e.acceleration_x;l.y=e.acceleration_y;t.rotational_velocity=e.rotational_velocity}}}a.reset_quadtrees()}return a};var va=function(){};k["echo.util.Poolable"]=va;va.__name__=!0;va.__isInterface__=!0;var db=
function(){};k["echo.util.Pool"]=db;db.__name__=!0;db.__isInterface__=!0;var sa=function(a){this.type=a;this.members=[];this.count=0};k["echo.util.GenericPool_echo_Line"]=sa;sa.__name__=!0;sa.__interfaces__=[db];sa.prototype={get:function(){return 0==this.count?ja.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:sa};var mb=function(a,b,c,e){null==e&&(e=1);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);this.pooled=!1;this.start=
a=new P(a,b);this.end=a=new P(c,e)};k["echo.Line"]=mb;mb.__name__=!0;mb.__interfaces__=[va];mb.prototype={set_from_vector:function(a,b,c){var e=Math.PI/180*b;b=a.x;var f=a.y,h=a.x+c*Math.cos(e);a=a.y+c*Math.sin(e);null==a&&(a=1);null==h&&(h=1);null==f&&(f=0);null==b&&(b=0);c=this.start;c.x=b;c.y=f;c=this.end;c.x=h;c.y=a;return this},get_x:function(){return this.start.x},get_y:function(){return this.start.y},get_dx:function(){return this.end.x},get_dy:function(){return this.end.y},__class__:mb,__properties__:{get_dy:"get_dy",
get_dx:"get_dx",get_y:"get_y",get_x:"get_x"}};var qb=function(a,b,c,e,f,h,t,l,d,g,u,q){this.a=a;this.b=b;this.separate=c;this.collisions=e;this.last_collisions=f;this.enter=h;this.stay=t;this.exit=l;this.condition=d;this.quadtree_results=g;this.percent_correction=u;this.correction_threshold=q};k["echo.Listener"]=qb;qb.__name__=!0;qb.__properties__={get_defaults:"get_defaults"};qb.get_defaults=function(){return{separate:!0,percent_correction:.9,correction_threshold:.013}};qb.prototype={__class__:qb};
var $a=function(a,b,c,e,f){this.gravity_scale=1;this.friction=this.static_friction=0;this.density=1;this.elasticity=0;null!=a&&(this.elasticity=a);null!=b&&(this.density=b);null!=c&&(this.friction=c);null!=e&&(this.static_friction=e);null!=f&&(this.gravity_scale=f)};k["echo.Material"]=$a;$a.__name__=!0;$a.prototype={__class__:$a};var xb=function(){};k["echo.Physics"]=xb;xb.__name__=!0;xb.step=function(a,b){for(var c=0,e=a.members;c<e.length;){var f=e[c];++c;if(0<f.mass&&!f.disposed&&f.active){f.last_x=
f.transform.local_x;f.last_y=f.transform.local_y;f.last_rotation=180/Math.PI*f.transform.local_radians;var h=f.acceleration.x*f.inverse_mass,t=f.acceleration.y*f.inverse_mass;f.kinematic||(h+=a.gravity.x*f.material.gravity_scale,t+=a.gravity.y*f.material.gravity_scale);var l=f.velocity.x,d=f.drag.x,g=f.max_velocity.x;1E-5>=Math.abs(h)?1E-5>=Math.abs(d)||(d*=b,l=0<l-d?l-d:0>l+d?l+d:0):l+=h*b;1E-5>=Math.abs(g)||(h=-g,l<h?l=h:l>g&&(l=g));f.velocity.x=l;l=f.velocity.y;h=f.drag.y;g=f.max_velocity.y;1E-5>=
Math.abs(t)?1E-5>=Math.abs(h)||(h*=b,l=0<l-h?l-h:0>l+h?l+h:0):l+=t*b;1E-5>=Math.abs(g)||(t=-g,l<t?l=t:l>g&&(l=g));f.velocity.y=l;0<f.drag_length?(t=f.acceleration,t=0==t.x&&0==t.y):t=!1;t?(t=f.velocity,t=!(0==t.x&&0==t.y)):t=!1;t&&(t=g=f.velocity,t=Math.sqrt(t.x*t.x+t.y*t.y)-f.drag_length*b,h=l=g,h=h.x*h.x+h.y*h.y,h=0==h?1:Math.sqrt(h),d=g.y/h*t,l.x=g.x/h*t,l.y=d);0<f.max_velocity_length?(t=f.velocity,t=Math.sqrt(t.x*t.x+t.y*t.y)>f.max_velocity_length):t=!1;t&&(g=f.velocity,t=f.max_velocity_length,
h=l=g,h=h.x*h.x+h.y*h.y,h=0==h?1:Math.sqrt(h),d=g.y/h*t,l.x=g.x/h*t,l.y=d);t=f.transform.local_x+f.velocity.x*b;l=f.transform;l.dirty||l.set_dirty();l.local_x=t;if(null!=f.on_move)f.on_move(f.transform.local_x,f.transform.local_y);t=f.transform.local_y+f.velocity.y*b;l=f.transform;l.dirty||l.set_dirty();l.local_y=t;if(null!=f.on_move)f.on_move(f.transform.local_x,f.transform.local_y);t=f.rotational_velocity;g=f.rotational_drag;h=f.torque*f.inverse_mass;l=f.max_rotational_velocity;1E-5>=Math.abs(g)?
1E-5>=Math.abs(h)||(h*=b,t=0<t-h?t-h:0>t+h?t+h:0):t+=g*b;1E-5>=Math.abs(l)||(g=-l,t<g?t=g:t>l&&(t=l));f.rotational_velocity=t;t=f.transform;l=Math.PI/180*(180/Math.PI*f.transform.local_radians+f.rotational_velocity*b);t.dirty||t.set_dirty();t.local_radians=l;if(null!=f.on_rotate)f.on_rotate(180/Math.PI*f.transform.local_radians)}}};xb.separate=function(a,b){a=null==b?a.listeners.members:b.members;for(b=0;b<a.length;){var c=a[b];++b;if(c.separate)for(var e=0,f=c.collisions;e<f.length;){var h=f[e];
++e;for(var t=0,l=h.data.length;t<l;){var d=t++,g=h.a,u=h.b;d=h.data[d];var q=c.correction_threshold,r=c.percent_correction;null==r&&(r=.9);null==q&&(q=.013);if(d.sa.solid&&d.sb.solid&&g.active&&u.active&&!g.disposed&&!u.disposed&&!(0>=g.mass&&0>=u.mass)){var v=(g.velocity.x-u.velocity.x)*d.normal.x+(g.velocity.y-u.velocity.y)*d.normal.y,k=g.inverse_mass+u.inverse_mass;if(0<v){var K=-(1+.5*(g.material.elasticity+u.material.elasticity))*v/k;v=-K*d.normal.x;K=-K*d.normal.y;g.kinematic||(g.velocity.x-=
v*g.inverse_mass,g.velocity.y-=K*g.inverse_mass);u.kinematic||(u.velocity.x+=v*u.inverse_mass,u.velocity.y+=K*u.inverse_mass)}r*=Math.max(d.overlap-q,0)/k;q=r*d.normal.x;d=r*d.normal.y;if(!g.kinematic){r=g.transform.local_x-g.inverse_mass*q;k=g.transform;k.dirty||k.set_dirty();k.local_x=r;if(null!=g.on_move)g.on_move(g.transform.local_x,g.transform.local_y);r=g.transform.local_y-g.inverse_mass*d;k=g.transform;k.dirty||k.set_dirty();k.local_y=r;if(null!=g.on_move)g.on_move(g.transform.local_x,g.transform.local_y)}if(!u.kinematic){g=
u.transform.local_x+u.inverse_mass*q;q=u.transform;q.dirty||q.set_dirty();q.local_x=g;if(null!=u.on_move)u.on_move(u.transform.local_x,u.transform.local_y);g=u.transform.local_y+u.inverse_mass*d;d=u.transform;d.dirty||d.set_dirty();d.local_y=g;if(null!=u.on_move)u.on_move(u.transform.local_x,u.transform.local_y)}}}}}};var Aa=function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.solid=!0;var e=this.transform=new gd;e.dirty||e.set_dirty();e.local_x=a;e=this.transform;e.dirty||e.set_dirty();
e.local_y=b;e=this.transform;a=Math.PI/180*c;e.dirty||e.set_dirty();e.local_radians=a};k["echo.Shape"]=Aa;Aa.__name__=!0;Aa.__properties__={get_defaults:"get_defaults"};Aa.get=function(a){a=zd.copy_fields(a,Aa.get_defaults());switch(a.type){case 0:var b=a.offset_x,c=a.offset_y,e=a.width,f=a.height,h=a.rotation,t=a.scale_x,l=a.scale_y;null==l&&(l=1);null==t&&(t=1);null==h&&(h=0);null==f&&(f=0);null==e&&(e=1);null==c&&(c=0);null==b&&(b=0);var d=Jb.pool.get();var g=b,u=c;b=f;null==l&&(l=1);null==t&&
(t=1);null==h&&(h=0);null==b&&(b=0);null==e&&(e=1);null==u&&(u=0);null==g&&(g=0);c=d.transform;c.dirty||c.set_dirty();c.local_x=g;c=d.transform;c.dirty||c.set_dirty();c.local_y=u;g=.5*e;c=d.transform;null==c.parent?u=c.local_scale_x:(c.sync(),u=c._scale_x);d.local_ex=g/u;if(null!=d.transformed_rect){c=d.transformed_rect;c.count=4;g=0;for(u=c.count;g<u;)if(f=g++,null==c.local_vertices[f]){var q=c.local_vertices,r=new P(0,0);q[f]=r}g=c.local_vertices[0];g.x=-(d.local_ex*d.transform.local_scale_x);g.y=
-(d.local_ey*d.transform.local_scale_y);g=c.local_vertices[1];g.x=d.local_ex*d.transform.local_scale_x;g.y=-(d.local_ey*d.transform.local_scale_y);g=c.local_vertices[2];g.x=d.local_ex*d.transform.local_scale_x;g.y=d.local_ey*d.transform.local_scale_y;g=c.local_vertices[3];g.x=-(d.local_ex*d.transform.local_scale_x);g.y=d.local_ey*d.transform.local_scale_y;g=d.transform.local_x;q=c.transform;q.dirty||q.set_dirty();q.local_x=g;g=d.transform.local_y;q=c.transform;q.dirty||q.set_dirty();q.local_y=g;q=
c.transform;g=Math.PI/180*(180/Math.PI)*d.transform.local_radians;q.dirty||q.set_dirty();q.local_radians=g;g=d.transform.local_scale_x;q=c.transform;q.dirty||q.set_dirty();q.local_scale_x=g;g=d.transform.local_scale_y;q=c.transform;q.dirty||q.set_dirty();q.local_scale_y=g;c.dirty_vertices=!0;c.dirty_bounds=!0}g=.5*(0>=b?e:b);c=d.transform;null==c.parent?u=c.local_scale_y:(c.sync(),u=c._scale_y);d.local_ey=g/u;if(null!=d.transformed_rect){c=d.transformed_rect;c.count=4;g=0;for(u=c.count;g<u;)f=g++,
null==c.local_vertices[f]&&(q=c.local_vertices,r=new P(0,0),q[f]=r);g=c.local_vertices[0];g.x=-(d.local_ex*d.transform.local_scale_x);g.y=-(d.local_ey*d.transform.local_scale_y);g=c.local_vertices[1];g.x=d.local_ex*d.transform.local_scale_x;g.y=-(d.local_ey*d.transform.local_scale_y);g=c.local_vertices[2];g.x=d.local_ex*d.transform.local_scale_x;g.y=d.local_ey*d.transform.local_scale_y;g=c.local_vertices[3];g.x=-(d.local_ex*d.transform.local_scale_x);g.y=d.local_ey*d.transform.local_scale_y;g=d.transform.local_x;
q=c.transform;q.dirty||q.set_dirty();q.local_x=g;g=d.transform.local_y;q=c.transform;q.dirty||q.set_dirty();q.local_y=g;q=c.transform;g=Math.PI/180*(180/Math.PI)*d.transform.local_radians;q.dirty||q.set_dirty();q.local_radians=g;g=d.transform.local_scale_x;q=c.transform;q.dirty||q.set_dirty();q.local_scale_x=g;g=d.transform.local_scale_y;q=c.transform;q.dirty||q.set_dirty();q.local_scale_y=g;c.dirty_vertices=!0;c.dirty_bounds=!0}c=d.transform;g=Math.PI/180*h;c.dirty||c.set_dirty();c.local_radians=
g;c=d.transform;c.dirty||c.set_dirty();c.local_scale_x=t;c=d.transform;c.dirty||c.set_dirty();c.local_scale_y=l;null==d.transformed_rect?(c=d.transform,null==c.parent?l=180/Math.PI*c.local_radians:(c.sync(),l=180/Math.PI*c._radians),l=0!=l):l=!1;if(l){e=Ya.pool.get();e.count=4;g=0;for(u=e.count;g<u;)f=g++,null==e.local_vertices[f]&&(l=e.local_vertices,r=new P(0,0),l[f]=r);g=e.local_vertices[0];g.x=-(d.local_ex*d.transform.local_scale_x);g.y=-(d.local_ey*d.transform.local_scale_y);g=e.local_vertices[1];
g.x=d.local_ex*d.transform.local_scale_x;g.y=-(d.local_ey*d.transform.local_scale_y);g=e.local_vertices[2];g.x=d.local_ex*d.transform.local_scale_x;g.y=d.local_ey*d.transform.local_scale_y;g=e.local_vertices[3];g.x=-(d.local_ex*d.transform.local_scale_x);g.y=d.local_ey*d.transform.local_scale_y;g=d.transform.local_x;c=e.transform;c.dirty||c.set_dirty();c.local_x=g;g=d.transform.local_y;c=e.transform;c.dirty||c.set_dirty();c.local_y=g;c=e.transform;g=Math.PI/180*(180/Math.PI)*d.transform.local_radians;
c.dirty||c.set_dirty();c.local_radians=g;g=d.transform.local_scale_x;c=e.transform;c.dirty||c.set_dirty();c.local_scale_x=g;g=d.transform.local_scale_y;c=e.transform;c.dirty||c.set_dirty();c.local_scale_y=g;e.dirty_vertices=!0;e.dirty_bounds=!0;e.pooled=!1;d.transformed_rect=e;d.transformed_rect.set_parent(d.parent)}else null!=d.transformed_rect&&(g=d.transform.local_x,c=d.transformed_rect.transform,c.dirty||c.set_dirty(),c.local_x=g,g=d.transform.local_y,c=d.transformed_rect.transform,c.dirty||c.set_dirty(),
c.local_y=g,c=d.transformed_rect.transform,g=Math.PI/180*(180/Math.PI)*d.transform.local_radians,c.dirty||c.set_dirty(),c.local_radians=g,g=d.transform.local_scale_x,c=d.transformed_rect.transform,c.dirty||c.set_dirty(),c.local_scale_x=g,g=d.transform.local_scale_y,c=d.transformed_rect.transform,c.dirty||c.set_dirty(),c.local_scale_y=g);d.pooled=!1;break;case 1:b=a.offset_x;c=a.offset_y;q=a.radius;h=a.rotation;t=a.scale_x;l=a.scale_y;null==l&&(l=1);null==t&&(t=1);null==h&&(h=0);null==q&&(q=1);null==
c&&(c=0);null==b&&(b=0);d=fc.pool.get();g=b;u=c;e=q;null==l&&(l=1);null==t&&(t=1);null==h&&(h=0);null==e&&(e=1);null==u&&(u=0);null==g&&(g=0);c=d.transform;c.dirty||c.set_dirty();c.local_x=g;c=d.transform;c.dirty||c.set_dirty();c.local_y=u;c=d.transform;g=Math.PI/180*h;c.dirty||c.set_dirty();c.local_radians=g;c=d.transform;c.dirty||c.set_dirty();c.local_scale_x=t;c=d.transform;c.dirty||c.set_dirty();c.local_scale_y=l;c=d.transform;null==c.parent?l=c.local_scale_x:(c.sync(),l=c._scale_x);d.local_radius=
e/l;d.pooled=!1;break;case 2:if(null!=a.vertices)b=a.offset_x,c=a.offset_y,h=a.rotation,d=a.vertices,t=a.scale_x,l=a.scale_y,null==l&&(l=1),null==t&&(t=1),null==h&&(h=0),null==c&&(c=0),null==b&&(b=0),e=Ya.pool.get(),g=b,u=c,null==l&&(l=1),null==t&&(t=1),null==h&&(h=0),null==u&&(u=0),null==g&&(g=0),c=e.transform,c.dirty||c.set_dirty(),c.local_x=g,c=e.transform,c.dirty||c.set_dirty(),c.local_y=u,c=e.transform,g=Math.PI/180*h,c.dirty||c.set_dirty(),c.local_radians=g,c=e.transform,c.dirty||c.set_dirty(),
c.local_scale_x=t,c=e.transform,c.dirty||c.set_dirty(),c.local_scale_y=l,l=null,e.local_vertices=null==d?[]:d;else{b=a.offset_x;c=a.offset_y;u=a.sides;q=a.radius;h=a.rotation;t=a.scale_x;l=a.scale_y;null==l&&(l=1);null==t&&(t=1);null==h&&(h=0);null==q&&(q=1);null==u&&(u=3);null==c&&(c=0);null==b&&(b=0);if(3>u)throw B.thrown("Polygons require 3 sides as a minimum");e=Ya.pool.get();var v=2*Math.PI/u;d=[];for(g=0;g<u;)f=g++,f=f*v+.5*(Math.PI-v),r=new P(Math.cos(f)*q,Math.sin(f)*q),d.push(r);g=b;u=c;
null==l&&(l=1);null==t&&(t=1);null==h&&(h=0);null==u&&(u=0);null==g&&(g=0);c=e.transform;c.dirty||c.set_dirty();c.local_x=g;c=e.transform;c.dirty||c.set_dirty();c.local_y=u;c=e.transform;g=Math.PI/180*h;c.dirty||c.set_dirty();c.local_radians=g;c=e.transform;c.dirty||c.set_dirty();c.local_scale_x=t;c=e.transform;c.dirty||c.set_dirty();c.local_scale_y=l;l=null;e.local_vertices=null==d?[]:d}e.count=null!=l&&0<=l?l:e.local_vertices.length;if(l>e.local_vertices.length)for(g=e.local_vertices.length,u=l;g<
u;)f=g++,l=e.local_vertices,r=new P(0,0),l[f]=r;e.dirty_vertices=!0;e.dirty_bounds=!0;e.pooled=!1;d=e}d.solid=a.solid;return d};Aa.get_defaults=function(){return{type:0,radius:1,width:1,height:0,sides:3,rotation:0,scale_x:1,scale_y:1,offset_x:0,offset_y:0,solid:!0}};Aa.prototype={put:function(){this.transform.set_parent(null);this.parent=null;this.collided=!1},set_parent:function(a){this.parent!=a&&(this.parent=a,this.transform.set_parent(null==a?null:a.transform))},bounds:function(a){if(null==a){var b=
this.transform;if(null==b.parent)var c=b.local_x;else b.sync(),c=b._x;b=this.transform;if(null==b.parent)var e=b.local_y;else b.sync(),e=b._y;var f=0;b=0;null==b&&(b=1);null==f&&(f=1);null==e&&(e=0);null==c&&(c=0);a=ab.pool.get();null==b&&(b=1);null==f&&(f=1);null==e&&(e=0);null==c&&(c=0);f*=.5;b*=.5;a.min_x=c-f;a.min_y=e-b;a.max_x=c+f;a.max_y=e+b;a.pooled=!1;return a}b=this.transform;null==b.parent?c=b.local_x:(b.sync(),c=b._x);b=this.transform;null==b.parent?e=b.local_y:(b.sync(),e=b._y);b=f=0;
null==b&&(b=1);null==f&&(f=1);null==e&&(e=0);null==c&&(c=0);f*=.5;b*=.5;a.min_x=c-f;a.min_y=e-b;a.max_x=c+f;a.max_y=e+b;return a},volume:function(){return 0},intersect:function(a){return null},collides:function(a){return null},collide_rect:function(a){return null},collide_circle:function(a){return null},collide_polygon:function(a){return null},__class__:Aa};var $b=function(a){this.members=null==a.members?[]:a.members;this.init=!1;var b;if(1>a.width)throw B.thrown("World must have a width of at least 1");
this.width=b=a.width;this.init&&this.reset_quadtrees();if(1>a.height)throw B.thrown("World must have a width of at least 1");this.height=b=a.height;this.init&&this.reset_quadtrees();this.x=null==a.x?0:a.x;this.init&&this.reset_quadtrees();this.y=null==a.y?0:a.y;this.init&&this.reset_quadtrees();this.gravity=new P(null==a.gravity_x?0:a.gravity_x,null==a.gravity_y?0:a.gravity_y);this.reset_quadtrees();this.listeners=new r(a.listeners);this.iterations=null==a.iterations?5:a.iterations;null!=a.history&&
(this.history=new de(a.history))};k["echo.World"]=$b;$b.__name__=!0;$b.__interfaces__=[u];$b.prototype={add:function(a){if(a.world==this)return a;null!=a.world&&(null!=a.world&&a.world.remove(a),null!=a.quadtree_data&&null!=a.quadtree_data.bounds&&a.quadtree_data.bounds.put());a.world=this;a.dirty=!0;this.members.push(a);a.quadtree_data=new ee(a.id,a.bounds(),!1);0>=a.mass?this.static_quadtree.insert(a.quadtree_data):this.quadtree.insert(a.quadtree_data);return a},remove:function(a){this.quadtree.remove(a.quadtree_data);
this.static_quadtree.remove(a.quadtree_data);F.remove(this.members,a);a.world=null;return a},reset_quadtrees:function(){this.init=!0;if(null!=this.quadtree){var a=this.quadtree;if(!a.pooled){a.pooled=!0;for(var b=0,c=a.children.length;b<c;){var e=b++;if(null!=a.children[e]){a.children[e].clear_children();var f=a.children[e];f.pooled||(f.pooled=!0,f.clear_children(),f.contents.length=0,f.contents_count=0,f.nodes_list.length=0,Ma.pool.put_unsafe(f));a.children[e]=null}}a.contents.length=0;a.contents_count=
0;a.nodes_list.length=0;Ma.pool.put_unsafe(a)}}var h=Ma.pool.get();c=b=0;var t=1,l=1;null==l&&(l=1);null==t&&(t=1);null==c&&(c=0);null==b&&(b=0);t*=.5;l*=.5;h.min_x=b-t;h.min_y=c-l;h.max_x=b+t;h.max_y=c+l;b=0;for(c=h.children.length;b<c;)e=b++,null!=h.children[e]&&(h.children[e].clear_children(),a=h.children[e],a.pooled||(a.pooled=!0,a.clear_children(),a.contents.length=0,a.contents_count=0,a.nodes_list.length=0,Ma.pool.put_unsafe(a)),h.children[e]=null);h.contents.length=0;h.contents_count=0;h.pooled=
!1;this.quadtree=h;if(null!=this.static_quadtree&&(a=this.static_quadtree,!a.pooled)){a.pooled=!0;b=0;for(c=a.children.length;b<c;)e=b++,null!=a.children[e]&&(a.children[e].clear_children(),f=a.children[e],f.pooled||(f.pooled=!0,f.clear_children(),f.contents.length=0,f.contents_count=0,f.nodes_list.length=0,Ma.pool.put_unsafe(f)),a.children[e]=null);a.contents.length=0;a.contents_count=0;a.nodes_list.length=0;Ma.pool.put_unsafe(a)}h=Ma.pool.get();c=b=0;l=t=1;null==l&&(l=1);null==t&&(t=1);null==c&&
(c=0);null==b&&(b=0);t*=.5;l*=.5;h.min_x=b-t;h.min_y=c-l;h.max_x=b+t;h.max_y=c+l;b=0;for(c=h.children.length;b<c;)e=b++,null!=h.children[e]&&(h.children[e].clear_children(),a=h.children[e],a.pooled||(a.pooled=!0,a.clear_children(),a.contents.length=0,a.contents_count=0,a.nodes_list.length=0,Ma.pool.put_unsafe(a)),h.children[e]=null);h.contents.length=0;h.contents_count=0;h.pooled=!1;this.static_quadtree=h;h=null;if(null!=h){b=this.x+.5*this.width;c=this.y+.5*this.height;t=this.width;l=this.height;
null==l&&(l=0);null==t&&(t=1);null==c&&(c=0);null==b&&(b=0);a=h.transform;a.dirty||a.set_dirty();a.local_x=b;a=h.transform;a.dirty||a.set_dirty();a.local_y=c;b=.5*t;a=h.transform;null==a.parent?a=a.local_scale_x:(a.sync(),a=a._scale_x);h.local_ex=b/a;if(null!=h.transformed_rect){a=h.transformed_rect;a.count=4;b=0;for(c=a.count;b<c;)if(e=b++,null==a.local_vertices[e]){f=a.local_vertices;var d=new P(0,0);f[e]=d}b=a.local_vertices[0];b.x=-(h.local_ex*h.transform.local_scale_x);b.y=-(h.local_ey*h.transform.local_scale_y);
b=a.local_vertices[1];b.x=h.local_ex*h.transform.local_scale_x;b.y=-(h.local_ey*h.transform.local_scale_y);b=a.local_vertices[2];b.x=h.local_ex*h.transform.local_scale_x;b.y=h.local_ey*h.transform.local_scale_y;b=a.local_vertices[3];b.x=-(h.local_ex*h.transform.local_scale_x);b.y=h.local_ey*h.transform.local_scale_y;b=h.transform.local_x;f=a.transform;f.dirty||f.set_dirty();f.local_x=b;b=h.transform.local_y;f=a.transform;f.dirty||f.set_dirty();f.local_y=b;f=a.transform;b=Math.PI/180*(180/Math.PI)*
h.transform.local_radians;f.dirty||f.set_dirty();f.local_radians=b;b=h.transform.local_scale_x;f=a.transform;f.dirty||f.set_dirty();f.local_scale_x=b;b=h.transform.local_scale_y;f=a.transform;f.dirty||f.set_dirty();f.local_scale_y=b;a.dirty_vertices=!0;a.dirty_bounds=!0}b=.5*(0>=l?t:l);a=h.transform;null==a.parent?a=a.local_scale_y:(a.sync(),a=a._scale_y);h.local_ey=b/a;if(null!=h.transformed_rect){a=h.transformed_rect;a.count=4;b=0;for(c=a.count;b<c;)e=b++,null==a.local_vertices[e]&&(f=a.local_vertices,
d=new P(0,0),f[e]=d);b=a.local_vertices[0];b.x=-(h.local_ex*h.transform.local_scale_x);b.y=-(h.local_ey*h.transform.local_scale_y);b=a.local_vertices[1];b.x=h.local_ex*h.transform.local_scale_x;b.y=-(h.local_ey*h.transform.local_scale_y);b=a.local_vertices[2];b.x=h.local_ex*h.transform.local_scale_x;b.y=h.local_ey*h.transform.local_scale_y;b=a.local_vertices[3];b.x=-(h.local_ex*h.transform.local_scale_x);b.y=h.local_ey*h.transform.local_scale_y;b=h.transform.local_x;f=a.transform;f.dirty||f.set_dirty();
f.local_x=b;b=h.transform.local_y;f=a.transform;f.dirty||f.set_dirty();f.local_y=b;f=a.transform;b=Math.PI/180*(180/Math.PI)*h.transform.local_radians;f.dirty||f.set_dirty();f.local_radians=b;b=h.transform.local_scale_x;f=a.transform;f.dirty||f.set_dirty();f.local_scale_x=b;b=h.transform.local_scale_y;f=a.transform;f.dirty||f.set_dirty();f.local_scale_y=b;a.dirty_vertices=!0;a.dirty_bounds=!0}a=h.transform;b=Math.PI/180*0;a.dirty||a.set_dirty();a.local_radians=b;a=h.transform;a.dirty||a.set_dirty();
a.local_scale_x=1;a=h.transform;a.dirty||a.set_dirty();a.local_scale_y=1;null==h.transformed_rect?(a=h.transform,null==a.parent?a=180/Math.PI*a.local_radians:(a.sync(),a=180/Math.PI*a._radians),b=0!=a):b=!1;if(b){l=Ya.pool.get();l.count=4;b=0;for(c=l.count;b<c;)e=b++,null==l.local_vertices[e]&&(a=l.local_vertices,d=new P(0,0),a[e]=d);b=l.local_vertices[0];b.x=-(h.local_ex*h.transform.local_scale_x);b.y=-(h.local_ey*h.transform.local_scale_y);b=l.local_vertices[1];b.x=h.local_ex*h.transform.local_scale_x;
b.y=-(h.local_ey*h.transform.local_scale_y);b=l.local_vertices[2];b.x=h.local_ex*h.transform.local_scale_x;b.y=h.local_ey*h.transform.local_scale_y;b=l.local_vertices[3];b.x=-(h.local_ex*h.transform.local_scale_x);b.y=h.local_ey*h.transform.local_scale_y;b=h.transform.local_x;a=l.transform;a.dirty||a.set_dirty();a.local_x=b;b=h.transform.local_y;a=l.transform;a.dirty||a.set_dirty();a.local_y=b;a=l.transform;b=Math.PI/180*(180/Math.PI)*h.transform.local_radians;a.dirty||a.set_dirty();a.local_radians=
b;b=h.transform.local_scale_x;a=l.transform;a.dirty||a.set_dirty();a.local_scale_x=b;b=h.transform.local_scale_y;a=l.transform;a.dirty||a.set_dirty();a.local_scale_y=b;l.dirty_vertices=!0;l.dirty_bounds=!0;l.pooled=!1;h.transformed_rect=l;h.transformed_rect.set_parent(h.parent)}else null!=h.transformed_rect&&(b=h.transform.local_x,a=h.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_x=b,b=h.transform.local_y,a=h.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_y=b,a=h.transformed_rect.transform,
b=Math.PI/180*(180/Math.PI)*h.transform.local_radians,a.dirty||a.set_dirty(),a.local_radians=b,b=h.transform.local_scale_x,a=h.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_scale_x=b,b=h.transform.local_scale_y,a=h.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_scale_y=b)}else{b=this.x+.5*this.width;c=this.y+.5*this.height;t=this.width;l=this.height;null==l&&(l=0);null==t&&(t=1);null==c&&(c=0);null==b&&(b=0);h=Jb.pool.get();var g=0,u=1,q=1;null==q&&(q=1);null==u&&(u=1);null==
g&&(g=0);null==l&&(l=0);null==t&&(t=1);null==c&&(c=0);null==b&&(b=0);a=h.transform;a.dirty||a.set_dirty();a.local_x=b;a=h.transform;a.dirty||a.set_dirty();a.local_y=c;b=.5*t;a=h.transform;null==a.parent?a=a.local_scale_x:(a.sync(),a=a._scale_x);h.local_ex=b/a;if(null!=h.transformed_rect){a=h.transformed_rect;a.count=4;b=0;for(c=a.count;b<c;)e=b++,null==a.local_vertices[e]&&(f=a.local_vertices,d=new P(0,0),f[e]=d);b=a.local_vertices[0];b.x=-(h.local_ex*h.transform.local_scale_x);b.y=-(h.local_ey*h.transform.local_scale_y);
b=a.local_vertices[1];b.x=h.local_ex*h.transform.local_scale_x;b.y=-(h.local_ey*h.transform.local_scale_y);b=a.local_vertices[2];b.x=h.local_ex*h.transform.local_scale_x;b.y=h.local_ey*h.transform.local_scale_y;b=a.local_vertices[3];b.x=-(h.local_ex*h.transform.local_scale_x);b.y=h.local_ey*h.transform.local_scale_y;b=h.transform.local_x;f=a.transform;f.dirty||f.set_dirty();f.local_x=b;b=h.transform.local_y;f=a.transform;f.dirty||f.set_dirty();f.local_y=b;f=a.transform;b=Math.PI/180*(180/Math.PI)*
h.transform.local_radians;f.dirty||f.set_dirty();f.local_radians=b;b=h.transform.local_scale_x;f=a.transform;f.dirty||f.set_dirty();f.local_scale_x=b;b=h.transform.local_scale_y;f=a.transform;f.dirty||f.set_dirty();f.local_scale_y=b;a.dirty_vertices=!0;a.dirty_bounds=!0}b=.5*(0>=l?t:l);a=h.transform;null==a.parent?a=a.local_scale_y:(a.sync(),a=a._scale_y);h.local_ey=b/a;if(null!=h.transformed_rect){a=h.transformed_rect;a.count=4;b=0;for(c=a.count;b<c;)e=b++,null==a.local_vertices[e]&&(f=a.local_vertices,
d=new P(0,0),f[e]=d);b=a.local_vertices[0];b.x=-(h.local_ex*h.transform.local_scale_x);b.y=-(h.local_ey*h.transform.local_scale_y);b=a.local_vertices[1];b.x=h.local_ex*h.transform.local_scale_x;b.y=-(h.local_ey*h.transform.local_scale_y);b=a.local_vertices[2];b.x=h.local_ex*h.transform.local_scale_x;b.y=h.local_ey*h.transform.local_scale_y;b=a.local_vertices[3];b.x=-(h.local_ex*h.transform.local_scale_x);b.y=h.local_ey*h.transform.local_scale_y;b=h.transform.local_x;f=a.transform;f.dirty||f.set_dirty();
f.local_x=b;b=h.transform.local_y;f=a.transform;f.dirty||f.set_dirty();f.local_y=b;f=a.transform;b=Math.PI/180*(180/Math.PI)*h.transform.local_radians;f.dirty||f.set_dirty();f.local_radians=b;b=h.transform.local_scale_x;f=a.transform;f.dirty||f.set_dirty();f.local_scale_x=b;b=h.transform.local_scale_y;f=a.transform;f.dirty||f.set_dirty();f.local_scale_y=b;a.dirty_vertices=!0;a.dirty_bounds=!0}a=h.transform;b=Math.PI/180*g;a.dirty||a.set_dirty();a.local_radians=b;a=h.transform;a.dirty||a.set_dirty();
a.local_scale_x=u;a=h.transform;a.dirty||a.set_dirty();a.local_scale_y=q;null==h.transformed_rect?(a=h.transform,null==a.parent?a=180/Math.PI*a.local_radians:(a.sync(),a=180/Math.PI*a._radians),b=0!=a):b=!1;if(b){l=Ya.pool.get();l.count=4;b=0;for(c=l.count;b<c;)e=b++,null==l.local_vertices[e]&&(a=l.local_vertices,d=new P(0,0),a[e]=d);b=l.local_vertices[0];b.x=-(h.local_ex*h.transform.local_scale_x);b.y=-(h.local_ey*h.transform.local_scale_y);b=l.local_vertices[1];b.x=h.local_ex*h.transform.local_scale_x;
b.y=-(h.local_ey*h.transform.local_scale_y);b=l.local_vertices[2];b.x=h.local_ex*h.transform.local_scale_x;b.y=h.local_ey*h.transform.local_scale_y;b=l.local_vertices[3];b.x=-(h.local_ex*h.transform.local_scale_x);b.y=h.local_ey*h.transform.local_scale_y;b=h.transform.local_x;a=l.transform;a.dirty||a.set_dirty();a.local_x=b;b=h.transform.local_y;a=l.transform;a.dirty||a.set_dirty();a.local_y=b;a=l.transform;b=Math.PI/180*(180/Math.PI)*h.transform.local_radians;a.dirty||a.set_dirty();a.local_radians=
b;b=h.transform.local_scale_x;a=l.transform;a.dirty||a.set_dirty();a.local_scale_x=b;b=h.transform.local_scale_y;a=l.transform;a.dirty||a.set_dirty();a.local_scale_y=b;l.dirty_vertices=!0;l.dirty_bounds=!0;l.pooled=!1;h.transformed_rect=l;h.transformed_rect.set_parent(h.parent)}else null!=h.transformed_rect&&(b=h.transform.local_x,a=h.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_x=b,b=h.transform.local_y,a=h.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_y=b,a=h.transformed_rect.transform,
b=Math.PI/180*(180/Math.PI)*h.transform.local_radians,a.dirty||a.set_dirty(),a.local_radians=b,b=h.transform.local_scale_x,a=h.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_scale_x=b,b=h.transform.local_scale_y,a=h.transformed_rect.transform,a.dirty||a.set_dirty(),a.local_scale_y=b);h.pooled=!1}b=h.to_aabb(!0);a=this.quadtree;a.min_x=b.min_x;a.max_x=b.max_x;a.min_y=b.min_y;a.max_y=b.max_y;a=this.static_quadtree;a.min_x=b.min_x;a.max_x=b.max_x;a.min_y=b.min_y;a.max_y=b.max_y;b=0;for(c=
this.members;b<c.length;)h=c[b],++b,0<h.mass?h.dirty=!0:(h.bounds(h.quadtree_data.bounds),this.static_quadtree.update(h.quadtree_data))},__class__:$b};var mc=function(a,b,c,e,f,h,t,l,d){this.id=a;this.x=b;this.y=c;this.rotation=e;this.velocity_x=f;this.velocity_y=h;this.acceleration_x=t;this.acceleration_y=l;this.rotational_velocity=d};k["echo.data.BodyState"]=mc;mc.__name__=!0;mc.prototype={__class__:mc};var Zc=function(a){this.type=a;this.members=[];this.count=0};k["echo.util.GenericPool_echo_data_Collision"]=
Zc;Zc.__name__=!0;Zc.__interfaces__=[db];Zc.prototype={get:function(){return 0==this.count?ja.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:Zc};var kc=function(){this.pooled=!1;this.data=[]};k["echo.data.Collision"]=kc;kc.__name__=!0;kc.__interfaces__=[va];kc.prototype={put:function(){if(!this.pooled){for(var a=0,b=this.data;a<b.length;){var c=b[a];++a;c.put()}this.pooled=!0;kc.pool.put_unsafe(this)}},__class__:kc};
var Tc=function(a){this.type=a;this.members=[];this.count=0};k["echo.util.GenericPool_echo_data_CollisionData"]=Tc;Tc.__name__=!0;Tc.__interfaces__=[db];Tc.prototype={get:function(){return 0==this.count?ja.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:Tc};var tc=function(){this.pooled=!1;var a=new P(0,0);this.normal=a;a=new P(0,0);var b=new P(0,0);this.contacts=[a,b].slice(0);this.overlap=this.contact_count=0};k["echo.data.CollisionData"]=
tc;tc.__name__=!0;tc.__interfaces__=[va];tc.prototype={put:function(){this.pooled||(this.pooled=!0,tc.pool.put_unsafe(this))},__class__:tc};var Hc=function(a){this.type=a;this.members=[];this.count=0};k["echo.util.GenericPool_echo_data_Intersection"]=Hc;Hc.__name__=!0;Hc.__interfaces__=[db];Hc.prototype={get:function(){return 0==this.count?ja.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:Hc};var Qb=function(){this.pooled=
!1;this.data=[]};k["echo.data.Intersection"]=Qb;Qb.__name__=!0;Qb.__interfaces__=[va];Qb.prototype={put:function(){if(!this.pooled){for(var a=0,b=this.data;a<b.length;){var c=b[a];++a;c.put()}this.pooled=!0;Qb.pool.put_unsafe(this)}},__class__:Qb};var hd=function(a){this.type=a;this.members=[];this.count=0};k["echo.util.GenericPool_echo_data_IntersectionData"]=hd;hd.__name__=!0;hd.__interfaces__=[db];hd.prototype={get:function(){return 0==this.count?ja.createInstance(this.type,[]):this.members[--this.count]},
put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:hd};var Gb=function(){this.inverse_normal=this.pooled=!1;var a=new P(0,0);this.normal=a;this.distance=this.overlap=0;this.hit=a=new P(0,0);this.hit=a=new P(0,0);this.normal=a=new P(0,0)};k["echo.data.IntersectionData"]=Gb;Gb.__name__=!0;Gb.__interfaces__=[va];Gb.prototype={put:function(){this.pooled||(this.pooled=!0,Gb.pool.put_unsafe(this))},__class__:Gb};var ee=function(a,b,c){this.flag=!1;this.bounds=null;this.id=a;null!=
b&&(this.bounds=b);null!=c&&(this.flag=c)};k["echo.data.QuadTreeData"]=ee;ee.__name__=!0;ee.prototype={__class__:ee};var fe=function(a,b,c,e,f,h,t,l,d){this.m00=a;this.m10=b;this.m20=c;this.m01=e;this.m11=f;this.m21=h;this.m02=t;this.m12=l;this.m22=d};k["echo.math.Matrix3Default"]=fe;fe.__name__=!0;fe.prototype={__class__:fe};var P=function(a,b){this.x=a;this.y=b};k["echo.math.Vector2Default"]=P;P.__name__=!0;P.prototype={__class__:P};var Oc=function(a){this.type=a;this.members=[];this.count=0};k["echo.util.GenericPool_echo_shape_Circle"]=
Oc;Oc.__name__=!0;Oc.__interfaces__=[db];Oc.prototype={get:function(){return 0==this.count?ja.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:Oc};var fc=function(){this.pooled=!1;Aa.call(this);this.type=1;var a=this.transform;null==a.parent?a=a.local_scale_x:(a.sync(),a=a._scale_x);this.local_radius=0/a};k["echo.shape.Circle"]=fc;fc.__name__=!0;fc.__interfaces__=[va];fc.get=function(a,b,c,e,f,h){null==h&&(h=1);null==
f&&(f=1);null==e&&(e=0);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);var t=fc.pool.get();null==h&&(h=1);null==f&&(f=1);null==e&&(e=0);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);var l=t.transform;l.dirty||l.set_dirty();l.local_x=a;l=t.transform;l.dirty||l.set_dirty();l.local_y=b;l=t.transform;a=Math.PI/180*e;l.dirty||l.set_dirty();l.local_radians=a;l=t.transform;l.dirty||l.set_dirty();l.local_scale_x=f;l=t.transform;l.dirty||l.set_dirty();l.local_scale_y=h;l=t.transform;null==l.parent?a=l.local_scale_x:
(l.sync(),a=l._scale_x);t.local_radius=c/a;t.pooled=!1;return t};fc.__super__=Aa;fc.prototype=x(Aa.prototype,{put:function(){Aa.prototype.put.call(this);this.pooled||(this.pooled=!0,fc.pool.put_unsafe(this))},bounds:function(a){var b=this.local_radius,c=this.transform;null==c.parent?c=c.local_scale_x:(c.sync(),c=c._scale_x);b=b*c*2;if(null==a){c=this.transform;if(null==c.parent)var e=c.local_x;else c.sync(),e=c._x;c=this.transform;if(null==c.parent)var f=c.local_y;else c.sync(),f=c._y;c=b;null==b&&
(b=1);null==c&&(c=1);null==f&&(f=0);null==e&&(e=0);a=ab.pool.get();null==b&&(b=1);null==c&&(c=1);null==f&&(f=0);null==e&&(e=0);c*=.5;b*=.5;a.min_x=e-c;a.min_y=f-b;a.max_x=e+c;a.max_y=f+b;a.pooled=!1;return a}c=this.transform;null==c.parent?e=c.local_x:(c.sync(),e=c._x);c=this.transform;null==c.parent?f=c.local_y:(c.sync(),f=c._y);c=b;null==b&&(b=1);null==c&&(c=1);null==f&&(f=0);null==e&&(e=0);c*=.5;b*=.5;a.min_x=e-c;a.min_y=f-b;a.max_x=e+c;a.max_y=f+b;return a},volume:function(){var a=this.local_radius,
b=this.transform;null==b.parent?b=b.local_scale_x:(b.sync(),b=b._scale_x);a*=b;return Math.PI*a*a},intersect:function(a){return pa.line_intersects_circle(a,this)},collides:function(a){return a.collide_circle(this)},collide_rect:function(a){return pa.rect_and_circle(a,this,!0)},collide_circle:function(a){return pa.circle_and_circle(a,this)},collide_polygon:function(a){return pa.circle_and_polygon(this,a,!0)},__class__:fc});var Ic=function(a){this.type=a;this.members=[];this.count=0};k["echo.util.GenericPool_echo_shape_Polygon"]=
Ic;Ic.__name__=!0;Ic.__interfaces__=[db];Ic.prototype={get:function(){return 0==this.count?ja.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:Ic};var Ya=function(a){this.pooled=!1;Aa.call(this);this.type=2;this._vertices=[];this._normals=[];var b=ab.pool.get(),c=0,e=0,f=1,h=1;null==h&&(h=1);null==f&&(f=1);null==e&&(e=0);null==c&&(c=0);f*=.5;h*=.5;b.min_x=c-f;b.min_y=e-h;b.max_x=c+f;b.max_y=e+h;b.pooled=!1;this._bounds=
b;this.transform.on_dirty=n(this,this.on_dirty);this.local_vertices=null==a?[]:a;this.count=this.local_vertices.length;if(null>this.local_vertices.length)for(a=this.local_vertices.length;null>a;)b=a++,c=this.local_vertices,e=new P(0,0),c[b]=e;this.dirty_bounds=this.dirty_vertices=!0};k["echo.shape.Polygon"]=Ya;Ya.__name__=!0;Ya.__interfaces__=[va];Ya.get=function(a,b,c,e,f,h,t){null==t&&(t=1);null==h&&(h=1);null==f&&(f=0);null==e&&(e=1);null==c&&(c=3);null==b&&(b=0);null==a&&(a=0);if(3>c)throw B.thrown("Polygons require 3 sides as a minimum");
for(var l=Ya.pool.get(),d=2*Math.PI/c,g,u=[],q=0;q<c;){g=q++;g=g*d+.5*(Math.PI-d);var r=new P(Math.cos(g)*e,Math.sin(g)*e);u.push(r)}q=a;null==t&&(t=1);null==h&&(h=1);null==f&&(f=0);null==b&&(b=0);null==q&&(q=0);a=l.transform;a.dirty||a.set_dirty();a.local_x=q;a=l.transform;a.dirty||a.set_dirty();a.local_y=b;a=l.transform;f*=Math.PI/180;a.dirty||a.set_dirty();a.local_radians=f;a=l.transform;a.dirty||a.set_dirty();a.local_scale_x=h;a=l.transform;a.dirty||a.set_dirty();a.local_scale_y=t;l.local_vertices=
null==u?[]:u;l.count=l.local_vertices.length;if(null>l.local_vertices.length)for(q=l.local_vertices.length,c=null;q<c;)g=q++,u=l.local_vertices,r=new P(0,0),u[g]=r;l.dirty_vertices=!0;l.dirty_bounds=!0;l.pooled=!1;return l};Ya.__super__=Aa;Ya.prototype=x(Aa.prototype,{put:function(){Aa.prototype.put.call(this);this.pooled||(this.pooled=!0,Ya.pool.put_unsafe(this))},bounds:function(a){if(this.dirty_bounds){this.dirty_bounds=!1;if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>
this.count;)this._vertices.pop();for(var b=0,c=this.count;b<c;){var e=b++;if(null!=this.local_vertices[e]){if(null==this._vertices[e]){var f=this._vertices,h=new P(0,0);f[e]=h}var t=this.local_vertices[e].x,l=this.local_vertices[e].y;null==l&&(l=0);null==t&&(t=0);f=this.transform.get_local_to_world_matrix();h=t;t=f.m01*h+f.m11*l+1*f.m21;var d=this._vertices[e];d.x=f.m00*h+f.m10*l+1*f.m20;d.y=t}}b=0;for(c=this.count;b<c;)e=b++,d=this._vertices[(e+1)%this.count],h=d.x,l=d.y,f=this._vertices[e],l-=f.y,
h-=f.x,t=-l,l=h,h=t,null==this._normals[e]?(f=this._normals,h=new P(h,l),f[e]=h):(f=this._normals[e],f.x=h,f.y=l),l=e=h=this._normals[e],l=l.x*l.x+l.y*l.y,l=0==l?1:Math.sqrt(l),f=h.y/l,e.x=h.x/l,e.y=f}d=this._vertices;h=d[0].x;l=d[0].y;f=d[0].x;t=d[0].y;b=1;for(c=this.count;b<c;)e=b++,d[e].x<h&&(h=d[e].x),d[e].y<l&&(l=d[e].y),d[e].x>f&&(f=d[e].x),d[e].y>t&&(t=d[e].y);b=this._bounds;b.min_x=h;b.max_x=f;b.min_y=l;b.max_y=t}if(null==a)return b=this._bounds,a=b.min_x,c=b.min_y,e=b.max_x,h=b.max_y,b=ab.pool.get(),
b.min_x=a,b.max_x=e,b.min_y=c,b.max_y=h,b.pooled=!1,b;b=this._bounds;a.min_x=b.min_x;a.max_x=b.max_x;a.min_y=b.min_y;a.max_y=b.max_y;return a},volume:function(){var a=0;if(this.dirty_vertices){for(this.dirty_vertices=!1;this._vertices.length>this.count;)this._vertices.pop();for(var b=0,c=this.count;b<c;){var e=b++;if(null!=this.local_vertices[e]){if(null==this._vertices[e]){var f=this._vertices,h=new P(0,0);f[e]=h}var t=this.local_vertices[e].x,l=this.local_vertices[e].y;null==l&&(l=0);null==t&&(t=
0);f=this.transform.get_local_to_world_matrix();h=t;var d=f.m01*h+f.m11*l+1*f.m21;t=this._vertices[e];t.x=f.m00*h+f.m10*l+1*f.m20;t.y=d}}b=0;for(c=this.count;b<c;)e=b++,t=this._vertices[(e+1)%this.count],h=t.x,l=t.y,f=this._vertices[e],l-=f.y,h-=f.x,t=-l,l=h,h=t,null==this._normals[e]?(f=this._normals,h=new P(h,l),f[e]=h):(f=this._normals[e],f.x=h,f.y=l),l=e=h=this._normals[e],l=l.x*l.x+l.y*l.y,l=0==l?1:Math.sqrt(l),f=h.y/l,e.x=h.x/l,e.y=f}h=this._vertices;t=h[h.length-1];b=0;for(c=this.count;b<c;)e=
b++,e=h[e],a+=e.x*t.y-t.x*e.y,t=e;return.5*Math.abs(a)},intersect:function(a){return pa.line_intersects_polygon(a,this)},collides:function(a){return a.collide_polygon(this)},collide_rect:function(a){return pa.rect_and_polygon(a,this,!0)},collide_circle:function(a){return pa.circle_and_polygon(a,this)},collide_polygon:function(a){return pa.polygon_and_polygon(a,this,!0)},on_dirty:function(a){this.dirty_bounds=this.dirty_vertices=!0},__class__:Ya});var id=function(a){this.type=a;this.members=[];this.count=
0};k["echo.util.GenericPool_echo_shape_Rect"]=id;id.__name__=!0;id.__interfaces__=[db];id.prototype={get:function(){return 0==this.count?ja.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:id};var Jb=function(){this.pooled=!1;Aa.call(this);this.local_ex=0;if(null!=this.transformed_rect){var a=this.transformed_rect;a.count=4;for(var b=0,c=a.count;b<c;){var e=b++;if(null==a.local_vertices[e]){var f=a.local_vertices,h=
new P(0,0);f[e]=h}}b=a.local_vertices[0];b.x=-(this.local_ex*this.transform.local_scale_x);b.y=-(this.local_ey*this.transform.local_scale_y);b=a.local_vertices[1];b.x=this.local_ex*this.transform.local_scale_x;b.y=-(this.local_ey*this.transform.local_scale_y);b=a.local_vertices[2];b.x=this.local_ex*this.transform.local_scale_x;b.y=this.local_ey*this.transform.local_scale_y;b=a.local_vertices[3];b.x=-(this.local_ex*this.transform.local_scale_x);b.y=this.local_ey*this.transform.local_scale_y;b=this.transform.local_x;
f=a.transform;f.dirty||f.set_dirty();f.local_x=b;b=this.transform.local_y;f=a.transform;f.dirty||f.set_dirty();f.local_y=b;f=a.transform;b=Math.PI/180*(180/Math.PI)*this.transform.local_radians;f.dirty||f.set_dirty();f.local_radians=b;b=this.transform.local_scale_x;f=a.transform;f.dirty||f.set_dirty();f.local_scale_x=b;b=this.transform.local_scale_y;f=a.transform;f.dirty||f.set_dirty();f.local_scale_y=b;a.dirty_vertices=!0;a.dirty_bounds=!0}this.local_ey=0;if(null!=this.transformed_rect){a=this.transformed_rect;
a.count=4;b=0;for(c=a.count;b<c;)e=b++,null==a.local_vertices[e]&&(f=a.local_vertices,h=new P(0,0),f[e]=h);b=a.local_vertices[0];b.x=-(this.local_ex*this.transform.local_scale_x);b.y=-(this.local_ey*this.transform.local_scale_y);b=a.local_vertices[1];b.x=this.local_ex*this.transform.local_scale_x;b.y=-(this.local_ey*this.transform.local_scale_y);b=a.local_vertices[2];b.x=this.local_ex*this.transform.local_scale_x;b.y=this.local_ey*this.transform.local_scale_y;b=a.local_vertices[3];b.x=-(this.local_ex*
this.transform.local_scale_x);b.y=this.local_ey*this.transform.local_scale_y;b=this.transform.local_x;f=a.transform;f.dirty||f.set_dirty();f.local_x=b;b=this.transform.local_y;f=a.transform;f.dirty||f.set_dirty();f.local_y=b;f=a.transform;b=Math.PI/180*(180/Math.PI)*this.transform.local_radians;f.dirty||f.set_dirty();f.local_radians=b;b=this.transform.local_scale_x;f=a.transform;f.dirty||f.set_dirty();f.local_scale_x=b;b=this.transform.local_scale_y;f=a.transform;f.dirty||f.set_dirty();f.local_scale_y=
b;a.dirty_vertices=!0;a.dirty_bounds=!0}this.type=0;this.transform.on_dirty=n(this,this.on_dirty)};k["echo.shape.Rect"]=Jb;Jb.__name__=!0;Jb.__interfaces__=[va];Jb.get=function(a,b,c,e,f,h,t){null==t&&(t=1);null==h&&(h=1);null==f&&(f=0);null==e&&(e=0);null==c&&(c=1);null==b&&(b=0);null==a&&(a=0);var l=Jb.pool.get(),d=b;null==t&&(t=1);null==h&&(h=1);null==f&&(f=0);null==e&&(e=0);null==c&&(c=1);null==d&&(d=0);null==a&&(a=0);b=l.transform;b.dirty||b.set_dirty();b.local_x=a;b=l.transform;b.dirty||b.set_dirty();
b.local_y=d;a=.5*c;b=l.transform;null==b.parent?b=b.local_scale_x:(b.sync(),b=b._scale_x);l.local_ex=a/b;if(null!=l.transformed_rect){b=l.transformed_rect;b.count=4;a=0;for(d=b.count;a<d;){var g=a++;if(null==b.local_vertices[g]){var u=b.local_vertices,q=new P(0,0);u[g]=q}}a=b.local_vertices[0];a.x=-(l.local_ex*l.transform.local_scale_x);a.y=-(l.local_ey*l.transform.local_scale_y);a=b.local_vertices[1];a.x=l.local_ex*l.transform.local_scale_x;a.y=-(l.local_ey*l.transform.local_scale_y);a=b.local_vertices[2];
a.x=l.local_ex*l.transform.local_scale_x;a.y=l.local_ey*l.transform.local_scale_y;a=b.local_vertices[3];a.x=-(l.local_ex*l.transform.local_scale_x);a.y=l.local_ey*l.transform.local_scale_y;a=l.transform.local_x;u=b.transform;u.dirty||u.set_dirty();u.local_x=a;a=l.transform.local_y;u=b.transform;u.dirty||u.set_dirty();u.local_y=a;u=b.transform;a=Math.PI/180*(180/Math.PI)*l.transform.local_radians;u.dirty||u.set_dirty();u.local_radians=a;a=l.transform.local_scale_x;u=b.transform;u.dirty||u.set_dirty();
u.local_scale_x=a;a=l.transform.local_scale_y;u=b.transform;u.dirty||u.set_dirty();u.local_scale_y=a;b.dirty_vertices=!0;b.dirty_bounds=!0}a=.5*(0>=e?c:e);b=l.transform;null==b.parent?b=b.local_scale_y:(b.sync(),b=b._scale_y);l.local_ey=a/b;if(null!=l.transformed_rect){b=l.transformed_rect;b.count=4;a=0;for(d=b.count;a<d;)g=a++,null==b.local_vertices[g]&&(u=b.local_vertices,q=new P(0,0),u[g]=q);a=b.local_vertices[0];a.x=-(l.local_ex*l.transform.local_scale_x);a.y=-(l.local_ey*l.transform.local_scale_y);
a=b.local_vertices[1];a.x=l.local_ex*l.transform.local_scale_x;a.y=-(l.local_ey*l.transform.local_scale_y);a=b.local_vertices[2];a.x=l.local_ex*l.transform.local_scale_x;a.y=l.local_ey*l.transform.local_scale_y;a=b.local_vertices[3];a.x=-(l.local_ex*l.transform.local_scale_x);a.y=l.local_ey*l.transform.local_scale_y;a=l.transform.local_x;u=b.transform;u.dirty||u.set_dirty();u.local_x=a;a=l.transform.local_y;u=b.transform;u.dirty||u.set_dirty();u.local_y=a;u=b.transform;a=Math.PI/180*(180/Math.PI)*
l.transform.local_radians;u.dirty||u.set_dirty();u.local_radians=a;a=l.transform.local_scale_x;u=b.transform;u.dirty||u.set_dirty();u.local_scale_x=a;a=l.transform.local_scale_y;u=b.transform;u.dirty||u.set_dirty();u.local_scale_y=a;b.dirty_vertices=!0;b.dirty_bounds=!0}b=l.transform;a=Math.PI/180*f;b.dirty||b.set_dirty();b.local_radians=a;b=l.transform;b.dirty||b.set_dirty();b.local_scale_x=h;b=l.transform;b.dirty||b.set_dirty();b.local_scale_y=t;null==l.transformed_rect?(b=l.transform,null==b.parent?
c=180/Math.PI*b.local_radians:(b.sync(),c=180/Math.PI*b._radians),c=0!=c):c=!1;if(c){c=Ya.pool.get();c.count=4;a=0;for(d=c.count;a<d;)g=a++,null==c.local_vertices[g]&&(e=c.local_vertices,q=new P(0,0),e[g]=q);a=c.local_vertices[0];a.x=-(l.local_ex*l.transform.local_scale_x);a.y=-(l.local_ey*l.transform.local_scale_y);a=c.local_vertices[1];a.x=l.local_ex*l.transform.local_scale_x;a.y=-(l.local_ey*l.transform.local_scale_y);a=c.local_vertices[2];a.x=l.local_ex*l.transform.local_scale_x;a.y=l.local_ey*
l.transform.local_scale_y;a=c.local_vertices[3];a.x=-(l.local_ex*l.transform.local_scale_x);a.y=l.local_ey*l.transform.local_scale_y;a=l.transform.local_x;b=c.transform;b.dirty||b.set_dirty();b.local_x=a;a=l.transform.local_y;b=c.transform;b.dirty||b.set_dirty();b.local_y=a;b=c.transform;a=Math.PI/180*(180/Math.PI)*l.transform.local_radians;b.dirty||b.set_dirty();b.local_radians=a;a=l.transform.local_scale_x;b=c.transform;b.dirty||b.set_dirty();b.local_scale_x=a;a=l.transform.local_scale_y;b=c.transform;
b.dirty||b.set_dirty();b.local_scale_y=a;c.dirty_vertices=!0;c.dirty_bounds=!0;c.pooled=!1;l.transformed_rect=c;l.transformed_rect.set_parent(l.parent)}else null!=l.transformed_rect&&(a=l.transform.local_x,b=l.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_x=a,a=l.transform.local_y,b=l.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_y=a,b=l.transformed_rect.transform,a=Math.PI/180*(180/Math.PI)*l.transform.local_radians,b.dirty||b.set_dirty(),b.local_radians=a,a=l.transform.local_scale_x,
b=l.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_scale_x=a,a=l.transform.local_scale_y,b=l.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_scale_y=a);l.pooled=!1;return l};Jb.__super__=Aa;Jb.prototype=x(Aa.prototype,{put:function(){Aa.prototype.put.call(this);null!=this.transformed_rect&&(this.transformed_rect.put(),this.transformed_rect=null);this.pooled||(this.pooled=!0,Jb.pool.put_unsafe(this))},to_aabb:function(a){null==a&&(a=!1);if(a){a=null;if(null!=this.transformed_rect){var b=
this.transform;if(null==b.parent)var c=180/Math.PI*b.local_radians;else b.sync(),c=180/Math.PI*b._radians;b=0!=c}else b=!1;if(b)a=this.transformed_rect.bounds(a);else if(null==a){b=this.transform;if(null==b.parent)var e=b.local_x;else b.sync(),e=b._x;b=this.transform;null==b.parent?c=b.local_y:(b.sync(),c=b._y);var f=2*this.local_ex;b=this.transform;if(null==b.parent)var h=b.local_scale_x;else b.sync(),h=b._scale_x;f*=h;h=2*this.local_ey;b=this.transform;null==b.parent?b=b.local_scale_y:(b.sync(),
b=b._scale_y);h*=b;null==h&&(h=1);null==f&&(f=1);null==c&&(c=0);null==e&&(e=0);b=ab.pool.get();null==h&&(h=1);null==f&&(f=1);null==c&&(c=0);null==e&&(e=0);f*=.5;h*=.5;b.min_x=e-f;b.min_y=c-h;b.max_x=e+f;b.max_y=c+h;b.pooled=!1;a=b}else b=this.transform,null==b.parent?e=b.local_x:(b.sync(),e=b._x),b=this.transform,null==b.parent?c=b.local_y:(b.sync(),c=b._y),f=2*this.local_ex,b=this.transform,null==b.parent?h=b.local_scale_x:(b.sync(),h=b._scale_x),f*=h,h=2*this.local_ey,b=this.transform,null==b.parent?
b=b.local_scale_y:(b.sync(),b=b._scale_y),h*=b,null==h&&(h=1),null==f&&(f=1),null==c&&(c=0),null==e&&(e=0),f*=.5,h*=.5,a.min_x=e-f,a.min_y=c-h,a.max_x=e+f,a.max_y=c+h;this.put();return a}a=null;null!=this.transformed_rect?(b=this.transform,null==b.parent?c=180/Math.PI*b.local_radians:(b.sync(),c=180/Math.PI*b._radians),c=0!=c):c=!1;if(c)return this.transformed_rect.bounds(a);if(null==a)return b=this.transform,null==b.parent?e=b.local_x:(b.sync(),e=b._x),b=this.transform,null==b.parent?c=b.local_y:
(b.sync(),c=b._y),f=2*this.local_ex,b=this.transform,null==b.parent?h=b.local_scale_x:(b.sync(),h=b._scale_x),f*=h,h=2*this.local_ey,b=this.transform,null==b.parent?b=b.local_scale_y:(b.sync(),b=b._scale_y),h*=b,null==h&&(h=1),null==f&&(f=1),null==c&&(c=0),null==e&&(e=0),a=ab.pool.get(),null==h&&(h=1),null==f&&(f=1),null==c&&(c=0),null==e&&(e=0),f*=.5,h*=.5,a.min_x=e-f,a.min_y=c-h,a.max_x=e+f,a.max_y=c+h,a.pooled=!1,a;b=this.transform;null==b.parent?e=b.local_x:(b.sync(),e=b._x);b=this.transform;
null==b.parent?c=b.local_y:(b.sync(),c=b._y);f=2*this.local_ex;b=this.transform;null==b.parent?h=b.local_scale_x:(b.sync(),h=b._scale_x);f*=h;h=2*this.local_ey;b=this.transform;null==b.parent?b=b.local_scale_y:(b.sync(),b=b._scale_y);h*=b;null==h&&(h=1);null==f&&(f=1);null==c&&(c=0);null==e&&(e=0);f*=.5;h*=.5;a.min_x=e-f;a.min_y=c-h;a.max_x=e+f;a.max_y=c+h;return a},bounds:function(a){if(null!=this.transformed_rect){var b=this.transform;if(null==b.parent)var c=180/Math.PI*b.local_radians;else b.sync(),
c=180/Math.PI*b._radians;c=0!=c}else c=!1;if(c)return this.transformed_rect.bounds(a);if(null==a){b=this.transform;if(null==b.parent)var e=b.local_x;else b.sync(),e=b._x;b=this.transform;null==b.parent?c=b.local_y:(b.sync(),c=b._y);var f=2*this.local_ex;b=this.transform;if(null==b.parent)var h=b.local_scale_x;else b.sync(),h=b._scale_x;f*=h;h=2*this.local_ey;b=this.transform;null==b.parent?b=b.local_scale_y:(b.sync(),b=b._scale_y);h*=b;null==h&&(h=1);null==f&&(f=1);null==c&&(c=0);null==e&&(e=0);a=
ab.pool.get();null==h&&(h=1);null==f&&(f=1);null==c&&(c=0);null==e&&(e=0);f*=.5;h*=.5;a.min_x=e-f;a.min_y=c-h;a.max_x=e+f;a.max_y=c+h;a.pooled=!1;return a}b=this.transform;null==b.parent?e=b.local_x:(b.sync(),e=b._x);b=this.transform;null==b.parent?c=b.local_y:(b.sync(),c=b._y);f=2*this.local_ex;b=this.transform;null==b.parent?h=b.local_scale_x:(b.sync(),h=b._scale_x);f*=h;h=2*this.local_ey;b=this.transform;null==b.parent?b=b.local_scale_y:(b.sync(),b=b._scale_y);h*=b;null==h&&(h=1);null==f&&(f=1);
null==c&&(c=0);null==e&&(e=0);f*=.5;h*=.5;a.min_x=e-f;a.min_y=c-h;a.max_x=e+f;a.max_y=c+h;return a},volume:function(){var a=2*this.local_ex,b=this.transform;if(null==b.parent)var c=b.local_scale_x;else b.sync(),c=b._scale_x;var e=2*this.local_ey;b=this.transform;null==b.parent?b=b.local_scale_y:(b.sync(),b=b._scale_y);return a*c*e*b},intersect:function(a){return pa.line_intersects_rect(a,this)},collides:function(a){return a.collide_rect(this)},collide_rect:function(a){return pa.rect_and_rect(a,this)},
collide_circle:function(a){return pa.rect_and_circle(this,a)},collide_polygon:function(a){return pa.rect_and_polygon(this,a)},set_parent:function(a){Aa.prototype.set_parent.call(this,a);if(null==this.transformed_rect){var b=this.transform;if(null==b.parent)var c=180/Math.PI*b.local_radians;else b.sync(),c=180/Math.PI*b._radians;c=0!=c}else c=!1;if(c){c=Ya.pool.get();c.count=4;b=0;for(var e=c.count;b<e;){var f=b++;if(null==c.local_vertices[f]){var h=c.local_vertices,t=new P(0,0);h[f]=t}}e=c.local_vertices[0];
e.x=-(this.local_ex*this.transform.local_scale_x);e.y=-(this.local_ey*this.transform.local_scale_y);e=c.local_vertices[1];e.x=this.local_ex*this.transform.local_scale_x;e.y=-(this.local_ey*this.transform.local_scale_y);e=c.local_vertices[2];e.x=this.local_ex*this.transform.local_scale_x;e.y=this.local_ey*this.transform.local_scale_y;e=c.local_vertices[3];e.x=-(this.local_ex*this.transform.local_scale_x);e.y=this.local_ey*this.transform.local_scale_y;e=this.transform.local_x;b=c.transform;b.dirty||
b.set_dirty();b.local_x=e;e=this.transform.local_y;b=c.transform;b.dirty||b.set_dirty();b.local_y=e;b=c.transform;e=Math.PI/180*(180/Math.PI)*this.transform.local_radians;b.dirty||b.set_dirty();b.local_radians=e;e=this.transform.local_scale_x;b=c.transform;b.dirty||b.set_dirty();b.local_scale_x=e;e=this.transform.local_scale_y;b=c.transform;b.dirty||b.set_dirty();b.local_scale_y=e;c.dirty_vertices=!0;c.dirty_bounds=!0;c.pooled=!1;this.transformed_rect=c;this.transformed_rect.set_parent(this.parent)}else null!=
this.transformed_rect&&(e=this.transform.local_x,b=this.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_x=e,e=this.transform.local_y,b=this.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_y=e,b=this.transformed_rect.transform,e=Math.PI/180*(180/Math.PI)*this.transform.local_radians,b.dirty||b.set_dirty(),b.local_radians=e,e=this.transform.local_scale_x,b=this.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_scale_x=e,e=this.transform.local_scale_y,b=this.transformed_rect.transform,
b.dirty||b.set_dirty(),b.local_scale_y=e);null!=this.transformed_rect&&this.transformed_rect.set_parent(a)},on_dirty:function(a){if(null==this.transformed_rect){var b=this.transform;null==b.parent?a=180/Math.PI*b.local_radians:(b.sync(),a=180/Math.PI*b._radians);a=0!=a}else a=!1;if(a){a=Ya.pool.get();a.count=4;b=0;for(var c=a.count;b<c;){var e=b++;if(null==a.local_vertices[e]){var f=a.local_vertices,h=new P(0,0);f[e]=h}}c=a.local_vertices[0];c.x=-(this.local_ex*this.transform.local_scale_x);c.y=-(this.local_ey*
this.transform.local_scale_y);c=a.local_vertices[1];c.x=this.local_ex*this.transform.local_scale_x;c.y=-(this.local_ey*this.transform.local_scale_y);c=a.local_vertices[2];c.x=this.local_ex*this.transform.local_scale_x;c.y=this.local_ey*this.transform.local_scale_y;c=a.local_vertices[3];c.x=-(this.local_ex*this.transform.local_scale_x);c.y=this.local_ey*this.transform.local_scale_y;c=this.transform.local_x;b=a.transform;b.dirty||b.set_dirty();b.local_x=c;c=this.transform.local_y;b=a.transform;b.dirty||
b.set_dirty();b.local_y=c;b=a.transform;c=Math.PI/180*(180/Math.PI)*this.transform.local_radians;b.dirty||b.set_dirty();b.local_radians=c;c=this.transform.local_scale_x;b=a.transform;b.dirty||b.set_dirty();b.local_scale_x=c;c=this.transform.local_scale_y;b=a.transform;b.dirty||b.set_dirty();b.local_scale_y=c;a.dirty_vertices=!0;a.dirty_bounds=!0;a.pooled=!1;this.transformed_rect=a;this.transformed_rect.set_parent(this.parent)}else null!=this.transformed_rect&&(c=this.transform.local_x,b=this.transformed_rect.transform,
b.dirty||b.set_dirty(),b.local_x=c,c=this.transform.local_y,b=this.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_y=c,b=this.transformed_rect.transform,c=Math.PI/180*(180/Math.PI)*this.transform.local_radians,b.dirty||b.set_dirty(),b.local_radians=c,c=this.transform.local_scale_x,b=this.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_scale_x=c,c=this.transform.local_scale_y,b=this.transformed_rect.transform,b.dirty||b.set_dirty(),b.local_scale_y=c)},__class__:Jb});var Ad=function(a){this.type=
a;this.members=[];this.count=0};k["echo.util.GenericPool_echo_util_AABB"]=Ad;Ad.__name__=!0;Ad.__interfaces__=[db];Ad.prototype={get:function(){return 0==this.count?ja.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:Ad};var ab=function(){this.pooled=!1;this.min_x=0;this.max_x=1;this.min_y=0;this.max_y=1};k["echo.util.AABB"]=ab;ab.__name__=!0;ab.__interfaces__=[va];ab.prototype={put:function(){this.pooled||(this.pooled=
!0,ab.pool.put_unsafe(this))},__class__:ab};var Ye={_new:function(a){null==a&&(a=0);return a}},Bd=function(a){this.type=a;this.members=[];this.count=0};k["echo.util.GenericPool_echo_util_QuadTree"]=Bd;Bd.__name__=!0;Bd.__interfaces__=[db];Bd.prototype={get:function(){return 0==this.count?ja.createInstance(this.type,[]):this.members[--this.count]},put_unsafe:function(a){null!=a&&(this.members[this.count++]=a)},__class__:Bd};var de=function(a){this.re=new Cd(a);this.un=new Cd(a)};k["echo.util.History_Array_echo_data_BodyState"]=
de;de.__name__=!0;de.prototype={redo:function(){var a=this.re.pop();null!=a&&this.un.push(a);return a},undo:function(){var a=this.un.pop();null!=a&&this.re.push(a);return a},add:function(a){this.un.push(a);this.re.reset()},__class__:de};var zd=function(){};k["echo.util.JSON"]=zd;zd.__name__=!0;zd.copy_fields=function(a,b){if(null==a)return b;if(null==b)b=G.copy(a);else for(var c=0,e=G.fields(a);c<e.length;){var f=e[c];++c;b[f]=G.field(a,f)}return b};var Ma=function(a,b){null==b&&(b=0);this.nodes_list=
[];this.max_contents=10;this.max_depth=5;ab.call(this);null!=a&&(this.min_x=a.min_x,this.max_x=a.max_x,this.min_y=a.min_y,this.max_y=a.max_y);this.depth=b;this.children=Array(4);this.contents=[];this.contents_count=0};k["echo.util.QuadTree"]=Ma;Ma.__name__=!0;Ma.__super__=ab;Ma.prototype=x(ab.prototype,{put:function(){if(!this.pooled){this.pooled=!0;for(var a=0,b=this.children.length;a<b;){var c=a++;if(null!=this.children[c]){this.children[c].clear_children();var e=this.children[c];e.pooled||(e.pooled=
!0,e.clear_children(),e.contents.length=0,e.contents_count=0,e.nodes_list.length=0,Ma.pool.put_unsafe(e));this.children[c]=null}}this.contents_count=this.contents.length=0;this.nodes_list.length=0;Ma.pool.put_unsafe(this)}},insert:function(a){if(null!=a.bounds){var b=a.bounds;if(b.min_x<this.max_x&&b.max_x>=this.min_x&&b.min_y<this.max_y&&b.max_y>=this.min_y)if(null==this.children[0]&&this.contents_count+1>this.max_contents&&this.split(),null==this.children[0])b=this.get_first_null(this.contents),
-1==b?this.contents.push(a):this.contents[b]=a,this.contents_count++;else{b=0;for(var c=this.children;b<c.length;){var e=c[b];++b;e.insert(a)}}}},remove:function(a,b){null==b&&(b=!0);if(null==this.children[0]){for(b=0;b<this.contents.length;){if(null!=this.contents[b]&&this.contents[b].id==a.id)return this.contents[b]=null,this.contents_count--,!0;++b}return!1}for(var c=!1,e=0,f=this.children;e<f.length;){var h=f[e];++e;null!=h&&h.remove(a)&&(c=!0)}b&&c&&this.shake();return c},update:function(a,b){null==
b&&(b=!0);this.remove(a,b);this.insert(a)},query:function(a,b){if(this.min_x<a.max_x&&this.max_x>=a.min_x&&this.min_y<a.max_y&&this.max_y>=a.min_y)if(null==this.children[0])for(var c=0,e=this.contents;c<e.length;){var f=e[c];++c;if(null!=f){var h=f.bounds;h=h.min_x<a.max_x&&h.max_x>=a.min_x&&h.min_y<a.max_y&&h.max_y>=a.min_y}else h=!1;h&&b.push(f)}else for(c=0,e=this.children;c<e.length;)f=e[c],++c,f.query(a,b)},shake:function(){if(null==this.children[0])return!1;var a=this.get_count();if(0==a){a=
0;for(var b=this.children.length;a<b;){var c=a++;if(null!=this.children[c]){for(var e=this.children[c],f=0,h=e.children.length;f<h;){var t=f++;if(null!=e.children[t]){e.children[t].clear_children();var l=e.children[t];l.pooled||(l.pooled=!0,l.clear_children(),l.contents.length=0,l.contents_count=0,l.nodes_list.length=0,Ma.pool.put_unsafe(l));e.children[t]=null}}f=this.children[c];if(!f.pooled){f.pooled=!0;h=0;for(e=f.children.length;h<e;)t=h++,null!=f.children[t]&&(f.children[t].clear_children(),
l=f.children[t],l.pooled||(l.pooled=!0,l.clear_children(),l.contents.length=0,l.contents_count=0,l.nodes_list.length=0,Ma.pool.put_unsafe(l)),f.children[t]=null);f.contents.length=0;f.contents_count=0;f.nodes_list.length=0;Ma.pool.put_unsafe(f)}this.children[c]=null}}}else if(a<this.max_contents){this.nodes_list.length=0;for(this.nodes_list.push(this);0<this.nodes_list.length;)if(b=this.nodes_list.shift(),b!=this&&null==b.children[0])for(a=0,b=b.contents;a<b.length;)c=b[a],++a,-1==this.contents.indexOf(c)&&
(f=this.get_first_null(this.contents),-1==f?this.contents.push(c):this.contents[f]=c,this.contents_count++);else for(f=0,h=b.children;f<h.length;)a=h[f],++f,this.nodes_list.push(a);a=0;for(b=this.children.length;a<b;)if(c=a++,null!=this.children[c]){e=this.children[c];f=0;for(h=e.children.length;f<h;)t=f++,null!=e.children[t]&&(e.children[t].clear_children(),l=e.children[t],l.pooled||(l.pooled=!0,l.clear_children(),l.contents.length=0,l.contents_count=0,l.nodes_list.length=0,Ma.pool.put_unsafe(l)),
e.children[t]=null);f=this.children[c];if(!f.pooled){f.pooled=!0;h=0;for(e=f.children.length;h<e;)t=h++,null!=f.children[t]&&(f.children[t].clear_children(),l=f.children[t],l.pooled||(l.pooled=!0,l.clear_children(),l.contents.length=0,l.contents_count=0,l.nodes_list.length=0,Ma.pool.put_unsafe(l)),f.children[t]=null);f.contents.length=0;f.contents_count=0;f.nodes_list.length=0;Ma.pool.put_unsafe(f)}this.children[c]=null}return!0}return!1},split:function(){if(!(this.depth+1>=this.max_depth)){for(var a=
.5*(this.max_x-this.min_x),b=.5*(this.max_y-this.min_y),c=0;4>c;){var e=c++,f=Ma.pool.get(),h=0,t=0,l=1,d=1;null==d&&(d=1);null==l&&(l=1);null==t&&(t=0);null==h&&(h=0);l*=.5;d*=.5;f.min_x=h-l;f.min_y=t-d;f.max_x=h+l;f.max_y=t+d;h=0;for(t=f.children.length;h<t;)l=h++,null!=f.children[l]&&(f.children[l].clear_children(),d=f.children[l],d.pooled||(d.pooled=!0,d.clear_children(),d.contents.length=0,d.contents_count=0,d.nodes_list.length=0,Ma.pool.put_unsafe(d)),f.children[l]=null);f.contents.length=0;
f.contents_count=0;f.pooled=!1;switch(e){case 0:h=this.min_x+a;t=this.min_y+b;f.min_x=this.min_x;f.max_x=h;f.min_y=this.min_y;f.max_y=t;break;case 1:h=this.min_y+b;f.min_x=this.min_x+a;f.max_x=this.max_x;f.min_y=this.min_y;f.max_y=h;break;case 2:h=this.min_x+a;f.min_x=this.min_x;f.max_x=h;f.min_y=this.min_y+b;f.max_y=this.max_y;break;case 3:f.min_x=this.min_x+a,f.max_x=this.max_x,f.min_y=this.min_y+b,f.max_y=this.max_y}f.depth=this.depth+1;h=this.max_depth;t=0;for(l=f.children.length;t<l;)if(d=t++,
null!=f.children[d]){d=f.children[d];for(var g=0,u=d.children.length;g<u;){var q=g++;null!=d.children[q]&&d.children[q].set_max_depth(h)}d.max_depth=h}f.max_depth=h;h=this.max_contents;t=0;for(l=f.children.length;t<l;)if(d=t++,null!=f.children[d]){d=f.children[d];g=0;for(u=d.children.length;g<u;)if(q=g++,null!=d.children[q]){q=d.children[q];for(var r=0,v=q.children.length;r<v;){var k=r++;null!=q.children[k]&&q.children[k].set_max_depth(h)}q.max_depth=h}d.max_depth=h}f.max_contents=h;f.shake();h=0;
for(t=this.contents.length;h<t;)l=h++,null!=this.contents[l]&&f.insert(this.contents[l]);this.children[e]=f}this.contents_count=this.contents.length=0}},clear_children:function(){for(var a=0,b=this.children.length;a<b;){var c=a++;if(null!=this.children[c]){this.children[c].clear_children();var e=this.children[c];e.pooled||(e.pooled=!0,e.clear_children(),e.contents.length=0,e.contents_count=0,e.nodes_list.length=0,Ma.pool.put_unsafe(e));this.children[c]=null}}},reset_data_flags:function(){for(var a=
0,b=this.contents.length;a<b;){var c=a++;null!=this.contents[c]&&(this.contents[c].flag=!1)}a=0;for(b=this.children.length;a<b;)c=a++,null!=this.children[c]&&this.children[c].reset_data_flags()},get_count:function(){this.reset_data_flags();for(var a=0,b=0,c=this.contents.length;b<c;){var e=b++;null!=this.contents[e]&&(this.contents[e].flag=!0,++a)}this.nodes_list.length=0;for(this.nodes_list.push(this);0<this.nodes_list.length;){var f=this.nodes_list.shift();if(null==f.children[0])for(b=0,c=f.contents.length;b<
c;)e=b++,null==f.contents[e]||f.contents[e].flag||(++a,f.contents[e].flag=!0);else for(b=0,c=f.children.length;b<c;)e=b++,this.nodes_list.push(f.children[e])}return a},get_first_null:function(a){for(var b=0,c=a.length;b<c;){var e=b++;if(null==a[e])return e}return-1},set_max_depth:function(a){for(var b=0,c=this.children.length;b<c;){var e=b++;null!=this.children[e]&&this.children[e].set_max_depth(a)}return this.max_depth=a},__class__:Ma,__properties__:{get_count:"get_count",set_max_depth:"set_max_depth"}});
var Cd=function(a){this.a=Array(a);this.reset()};k["echo.util.Ring_Array_echo_data_BodyState"]=Cd;Cd.__name__=!0;Cd.prototype={pop:function(){if(0>=this.i+this.left-this.start)return null;0==this.i&&(this.i=this.a.length,this.left=0);return this.a[--this.i]},push:function(a){this.i==this.a.length&&(0<this.left&&this.start==this.i&&(this.start=0),this.i=0,this.left=this.a.length);this.i+this.left-this.start==this.a.length&&this.start++;this.a[this.i++]=a},reset:function(){this.left=this.start=this.i=
0},__class__:Cd};var pa=function(){};k["echo.util.SAT"]=pa;pa.__name__=!0;pa.line_intersects_rect=function(a,b){if(null!=b.transformed_rect){var c=b.transform;if(null==c.parent)var e=180/Math.PI*c.local_radians;else c.sync(),e=180/Math.PI*c._radians;var f=0!=e}else f=!1;if(f)return b.transformed_rect.intersect(a);var h=null;if(null!=b.transformed_rect){c=b.transform;if(null==c.parent)var t=180/Math.PI*c.local_radians;else c.sync(),t=180/Math.PI*c._radians;var l=0==t}else l=!0;if(l){c=b.transform;
null==c.parent?l=c.local_x:(c.sync(),l=c._x);var d=l-b.local_ex*b.transform.local_scale_x}else{c=b.transformed_rect;if(0!=c.count){if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();for(var g=0,u=c.count;g<u;){var q=g++;if(null!=c.local_vertices[q]){if(null==c._vertices[q]){var r=c._vertices,v=new P(0,0);r[q]=v}var k=c.local_vertices[q].x,K=c.local_vertices[q].y;null==K&&(K=0);null==k&&(k=0);var p=c.transform.get_local_to_world_matrix(),m=k,n=K,z=1,Q=p.m00*
m+p.m10*n+p.m20*z,S=p.m01*m+p.m11*n+p.m21*z,ca=Q,N=S,H=c._vertices[q];H.x=ca;H.y=N}}g=0;for(u=c.count;g<u;){q=g++;H=c._vertices[(q+1)%c.count];m=H.x;n=H.y;var x=c._vertices[q],w=m-x.x,A=n-x.y;m=w;n=A;k=-n;n=m;m=k;null==c._normals[q]?(r=c._normals,v=new P(m,n),r[q]=v):(p=c._normals[q],p.x=m,p.y=n);var da=c._normals[q],B=da,y=da,E=y,va=E.x*E.x+E.y*E.y,ea=0==va?1:Math.sqrt(va),D=y.x/ea,sa=y.y/ea,G=D,J=sa;B.x=G;B.y=J}}l=null==c._vertices[0]}else l=!0;if(l)r=c.transform,null==r.parent?d=r.local_x:(r.sync(),
d=r._x);else{if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();g=0;for(u=c.count;g<u;)q=g++,null!=c.local_vertices[q]&&(null==c._vertices[q]&&(r=c._vertices,v=new P(0,0),r[q]=v),k=c.local_vertices[q].x,K=c.local_vertices[q].y,null==K&&(K=0),null==k&&(k=0),p=c.transform.get_local_to_world_matrix(),m=k,n=K,z=1,Q=p.m00*m+p.m10*n+p.m20*z,S=p.m01*m+p.m11*n+p.m21*z,ca=Q,N=S,H=c._vertices[q],H.x=ca,H.y=N);g=0;for(u=c.count;g<u;)q=g++,H=c._vertices[(q+1)%c.count],
m=H.x,n=H.y,x=c._vertices[q],w=m-x.x,A=n-x.y,m=w,n=A,k=-n,n=m,m=k,null==c._normals[q]?(r=c._normals,v=new P(m,n),r[q]=v):(p=c._normals[q],p.x=m,p.y=n),E=y=B=da=c._normals[q],va=E.x*E.x+E.y*E.y,ea=0==va?1:Math.sqrt(va),D=y.x/ea,sa=y.y/ea,G=D,J=sa,B.x=G,B.y=J}l=c._vertices[0].x;g=1;for(u=c.count;g<u;){q=g++;if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();for(var db=0,I=c.count;db<I;){var F=db++;null!=c.local_vertices[F]&&(null==c._vertices[F]&&(r=c._vertices,
v=new P(0,0),r[F]=v),k=c.local_vertices[F].x,K=c.local_vertices[F].y,null==K&&(K=0),null==k&&(k=0),p=c.transform.get_local_to_world_matrix(),m=k,n=K,z=1,Q=p.m00*m+p.m10*n+p.m20*z,S=p.m01*m+p.m11*n+p.m21*z,ca=Q,N=S,H=c._vertices[F],H.x=ca,H.y=N)}for(var T=0,ma=c.count;T<ma;){var wa=T++;da=c._vertices[(wa+1)%c.count];var U=da.x,R=da.y;x=c._vertices[wa];w=U-x.x;A=R-x.y;U=w;R=A;var M=-R;R=U;U=M;if(null==c._normals[wa]){var Z=c._normals,oa=new P(U,R);Z[wa]=oa}else{var L=c._normals[wa];L.x=U;L.y=R}var qb=
c._normals[wa];E=y=B=qb;va=E.x*E.x+E.y*E.y;ea=0==va?1:Math.sqrt(va);D=y.x/ea;sa=y.y/ea;G=D;J=sa;B.x=G;B.y=J}}if(c._vertices[q].x<l){if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();for(var V=0,X=c.count;V<X;){var O=V++;if(null!=c.local_vertices[O]){if(null==c._vertices[O]){var ha=c._vertices,ba=new P(0,0);ha[O]=ba}var Oa=c.local_vertices[O].x,Y=c.local_vertices[O].y;null==Y&&(Y=0);null==Oa&&(Oa=0);var W=c.transform.get_local_to_world_matrix(),ia=Oa,Pa=Y,ra=
1,ka=W.m00*ia+W.m10*Pa+W.m20*ra,ja=W.m01*ia+W.m11*Pa+W.m21*ra,Xa=ka,Ta=ja,Ea=c._vertices[O];Ea.x=Xa;Ea.y=Ta}}for(var qa=0,la=c.count;qa<la;){var rb=qa++,na=c._vertices[(rb+1)%c.count],fa=na.x,sb=na.y,ua=c._vertices[rb],xa=fa-ua.x,$a=sb-ua.y;fa=xa;sb=$a;var xb=-sb;sb=fa;fa=xb;if(null==c._normals[rb]){var ya=c._normals,Ba=new P(fa,sb);ya[rb]=Ba}else{var ta=c._normals[rb];ta.x=fa;ta.y=sb}var Ca=c._normals[rb],Aa=Ca,za=Ca,Ga=za,Fa=Ga.x*Ga.x+Ga.y*Ga.y,Da=0==Fa?1:Math.sqrt(Fa),Ha=za.x/Da,Ma=za.y/Da,Na=
Ha,La=Ma;Aa.x=Na;Aa.y=La}}l=c._vertices[q].x}}d=l}}if(null!=b.transformed_rect){c=b.transform;if(null==c.parent)var cb=180/Math.PI*c.local_radians;else c.sync(),cb=180/Math.PI*c._radians;var Ia=0==cb}else Ia=!0;if(Ia){c=b.transform;null==c.parent?Ia=c.local_x:(c.sync(),Ia=c._x);var Qa=Ia+b.local_ex*b.transform.local_scale_x}else{c=b.transformed_rect;if(0!=c.count){if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();g=0;for(u=c.count;g<u;)q=g++,null!=c.local_vertices[q]&&
(null==c._vertices[q]&&(r=c._vertices,v=new P(0,0),r[q]=v),k=c.local_vertices[q].x,K=c.local_vertices[q].y,null==K&&(K=0),null==k&&(k=0),p=c.transform.get_local_to_world_matrix(),m=k,n=K,z=1,Q=p.m00*m+p.m10*n+p.m20*z,S=p.m01*m+p.m11*n+p.m21*z,ca=Q,N=S,H=c._vertices[q],H.x=ca,H.y=N);g=0;for(u=c.count;g<u;)q=g++,H=c._vertices[(q+1)%c.count],m=H.x,n=H.y,x=c._vertices[q],w=m-x.x,A=n-x.y,m=w,n=A,k=-n,n=m,m=k,null==c._normals[q]?(r=c._normals,v=new P(m,n),r[q]=v):(p=c._normals[q],p.x=m,p.y=n),E=y=B=da=
c._normals[q],va=E.x*E.x+E.y*E.y,ea=0==va?1:Math.sqrt(va),D=y.x/ea,sa=y.y/ea,G=D,J=sa,B.x=G,B.y=J}Ia=null==c._vertices[0]}else Ia=!0;if(Ia)r=c.transform,null==r.parent?Qa=r.local_x:(r.sync(),Qa=r._x);else{if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();g=0;for(u=c.count;g<u;)q=g++,null!=c.local_vertices[q]&&(null==c._vertices[q]&&(r=c._vertices,v=new P(0,0),r[q]=v),k=c.local_vertices[q].x,K=c.local_vertices[q].y,null==K&&(K=0),null==k&&(k=0),p=c.transform.get_local_to_world_matrix(),
m=k,n=K,z=1,Q=p.m00*m+p.m10*n+p.m20*z,S=p.m01*m+p.m11*n+p.m21*z,ca=Q,N=S,H=c._vertices[q],H.x=ca,H.y=N);g=0;for(u=c.count;g<u;)q=g++,H=c._vertices[(q+1)%c.count],m=H.x,n=H.y,x=c._vertices[q],w=m-x.x,A=n-x.y,m=w,n=A,k=-n,n=m,m=k,null==c._normals[q]?(r=c._normals,v=new P(m,n),r[q]=v):(p=c._normals[q],p.x=m,p.y=n),E=y=B=da=c._normals[q],va=E.x*E.x+E.y*E.y,ea=0==va?1:Math.sqrt(va),D=y.x/ea,sa=y.y/ea,G=D,J=sa,B.x=G,B.y=J}Ia=c._vertices[0].x;g=1;for(u=c.count;g<u;){q=g++;if(c.dirty_vertices){for(c.dirty_vertices=
!1;c._vertices.length>c.count;)c._vertices.pop();db=0;for(I=c.count;db<I;)F=db++,null!=c.local_vertices[F]&&(null==c._vertices[F]&&(r=c._vertices,v=new P(0,0),r[F]=v),k=c.local_vertices[F].x,K=c.local_vertices[F].y,null==K&&(K=0),null==k&&(k=0),p=c.transform.get_local_to_world_matrix(),m=k,n=K,z=1,Q=p.m00*m+p.m10*n+p.m20*z,S=p.m01*m+p.m11*n+p.m21*z,ca=Q,N=S,H=c._vertices[F],H.x=ca,H.y=N);T=0;for(ma=c.count;T<ma;)wa=T++,da=c._vertices[(wa+1)%c.count],U=da.x,R=da.y,x=c._vertices[wa],w=U-x.x,A=R-x.y,
U=w,R=A,M=-R,R=U,U=M,null==c._normals[wa]?(Z=c._normals,oa=new P(U,R),Z[wa]=oa):(L=c._normals[wa],L.x=U,L.y=R),E=y=B=qb=c._normals[wa],va=E.x*E.x+E.y*E.y,ea=0==va?1:Math.sqrt(va),D=y.x/ea,sa=y.y/ea,G=D,J=sa,B.x=G,B.y=J}if(c._vertices[q].x>Ia){if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();V=0;for(X=c.count;V<X;)O=V++,null!=c.local_vertices[O]&&(null==c._vertices[O]&&(ha=c._vertices,ba=new P(0,0),ha[O]=ba),Oa=c.local_vertices[O].x,Y=c.local_vertices[O].y,
null==Y&&(Y=0),null==Oa&&(Oa=0),W=c.transform.get_local_to_world_matrix(),ia=Oa,Pa=Y,ra=1,ka=W.m00*ia+W.m10*Pa+W.m20*ra,ja=W.m01*ia+W.m11*Pa+W.m21*ra,Xa=ka,Ta=ja,Ea=c._vertices[O],Ea.x=Xa,Ea.y=Ta);qa=0;for(la=c.count;qa<la;)rb=qa++,na=c._vertices[(rb+1)%c.count],fa=na.x,sb=na.y,ua=c._vertices[rb],xa=fa-ua.x,$a=sb-ua.y,fa=xa,sb=$a,xb=-sb,sb=fa,fa=xb,null==c._normals[rb]?(ya=c._normals,Ba=new P(fa,sb),ya[rb]=Ba):(ta=c._normals[rb],ta.x=fa,ta.y=sb),Ga=za=Aa=Ca=c._normals[rb],Fa=Ga.x*Ga.x+Ga.y*Ga.y,Da=
0==Fa?1:Math.sqrt(Fa),Ha=za.x/Da,Ma=za.y/Da,Na=Ha,La=Ma,Aa.x=Na,Aa.y=La}Ia=c._vertices[q].x}}Qa=Ia}}if(null!=b.transformed_rect){c=b.transform;if(null==c.parent)var fb=180/Math.PI*c.local_radians;else c.sync(),fb=180/Math.PI*c._radians;var Pc=0==fb}else Pc=!0;if(Pc){c=b.transform;null==c.parent?Pc=c.local_y:(c.sync(),Pc=c._y);var Ua=Pc-b.local_ey*b.transform.local_scale_y}else{c=b.transformed_rect;if(0!=c.count){if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();
g=0;for(u=c.count;g<u;)q=g++,null!=c.local_vertices[q]&&(null==c._vertices[q]&&(r=c._vertices,v=new P(0,0),r[q]=v),k=c.local_vertices[q].x,K=c.local_vertices[q].y,null==K&&(K=0),null==k&&(k=0),p=c.transform.get_local_to_world_matrix(),m=k,n=K,z=1,Q=p.m00*m+p.m10*n+p.m20*z,S=p.m01*m+p.m11*n+p.m21*z,ca=Q,N=S,H=c._vertices[q],H.x=ca,H.y=N);g=0;for(u=c.count;g<u;)q=g++,H=c._vertices[(q+1)%c.count],m=H.x,n=H.y,x=c._vertices[q],w=m-x.x,A=n-x.y,m=w,n=A,k=-n,n=m,m=k,null==c._normals[q]?(r=c._normals,v=new P(m,
n),r[q]=v):(p=c._normals[q],p.x=m,p.y=n),E=y=B=da=c._normals[q],va=E.x*E.x+E.y*E.y,ea=0==va?1:Math.sqrt(va),D=y.x/ea,sa=y.y/ea,G=D,J=sa,B.x=G,B.y=J}Pc=null==c._vertices[0]}else Pc=!0;if(Pc)r=c.transform,null==r.parent?Ua=r.local_y:(r.sync(),Ua=r._y);else{if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();g=0;for(u=c.count;g<u;)q=g++,null!=c.local_vertices[q]&&(null==c._vertices[q]&&(r=c._vertices,v=new P(0,0),r[q]=v),k=c.local_vertices[q].x,K=c.local_vertices[q].y,
null==K&&(K=0),null==k&&(k=0),p=c.transform.get_local_to_world_matrix(),m=k,n=K,z=1,Q=p.m00*m+p.m10*n+p.m20*z,S=p.m01*m+p.m11*n+p.m21*z,ca=Q,N=S,H=c._vertices[q],H.x=ca,H.y=N);g=0;for(u=c.count;g<u;)q=g++,H=c._vertices[(q+1)%c.count],m=H.x,n=H.y,x=c._vertices[q],w=m-x.x,A=n-x.y,m=w,n=A,k=-n,n=m,m=k,null==c._normals[q]?(r=c._normals,v=new P(m,n),r[q]=v):(p=c._normals[q],p.x=m,p.y=n),E=y=B=da=c._normals[q],va=E.x*E.x+E.y*E.y,ea=0==va?1:Math.sqrt(va),D=y.x/ea,sa=y.y/ea,G=D,J=sa,B.x=G,B.y=J}Pc=c._vertices[0].y;
g=1;for(u=c.count;g<u;){q=g++;if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();db=0;for(I=c.count;db<I;)F=db++,null!=c.local_vertices[F]&&(null==c._vertices[F]&&(r=c._vertices,v=new P(0,0),r[F]=v),k=c.local_vertices[F].x,K=c.local_vertices[F].y,null==K&&(K=0),null==k&&(k=0),p=c.transform.get_local_to_world_matrix(),m=k,n=K,z=1,Q=p.m00*m+p.m10*n+p.m20*z,S=p.m01*m+p.m11*n+p.m21*z,ca=Q,N=S,H=c._vertices[F],H.x=ca,H.y=N);T=0;for(ma=c.count;T<ma;)wa=T++,da=c._vertices[(wa+
1)%c.count],U=da.x,R=da.y,x=c._vertices[wa],w=U-x.x,A=R-x.y,U=w,R=A,M=-R,R=U,U=M,null==c._normals[wa]?(Z=c._normals,oa=new P(U,R),Z[wa]=oa):(L=c._normals[wa],L.x=U,L.y=R),E=y=B=qb=c._normals[wa],va=E.x*E.x+E.y*E.y,ea=0==va?1:Math.sqrt(va),D=y.x/ea,sa=y.y/ea,G=D,J=sa,B.x=G,B.y=J}if(c._vertices[q].y<Pc){if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();V=0;for(X=c.count;V<X;)O=V++,null!=c.local_vertices[O]&&(null==c._vertices[O]&&(ha=c._vertices,ba=new P(0,0),
ha[O]=ba),Oa=c.local_vertices[O].x,Y=c.local_vertices[O].y,null==Y&&(Y=0),null==Oa&&(Oa=0),W=c.transform.get_local_to_world_matrix(),ia=Oa,Pa=Y,ra=1,ka=W.m00*ia+W.m10*Pa+W.m20*ra,ja=W.m01*ia+W.m11*Pa+W.m21*ra,Xa=ka,Ta=ja,Ea=c._vertices[O],Ea.x=Xa,Ea.y=Ta);qa=0;for(la=c.count;qa<la;)rb=qa++,na=c._vertices[(rb+1)%c.count],fa=na.x,sb=na.y,ua=c._vertices[rb],xa=fa-ua.x,$a=sb-ua.y,fa=xa,sb=$a,xb=-sb,sb=fa,fa=xb,null==c._normals[rb]?(ya=c._normals,Ba=new P(fa,sb),ya[rb]=Ba):(ta=c._normals[rb],ta.x=fa,ta.y=
sb),Ga=za=Aa=Ca=c._normals[rb],Fa=Ga.x*Ga.x+Ga.y*Ga.y,Da=0==Fa?1:Math.sqrt(Fa),Ha=za.x/Da,Ma=za.y/Da,Na=Ha,La=Ma,Aa.x=Na,Aa.y=La}Pc=c._vertices[q].y}}Ua=Pc}}if(null!=b.transformed_rect){c=b.transform;if(null==c.parent)var ab=180/Math.PI*c.local_radians;else c.sync(),ab=180/Math.PI*c._radians;var uc=0==ab}else uc=!0;if(uc){c=b.transform;null==c.parent?uc=c.local_y:(c.sync(),uc=c._y);var Ya=uc+b.local_ey*b.transform.local_scale_y}else{c=b.transformed_rect;if(0!=c.count){if(c.dirty_vertices){for(c.dirty_vertices=
!1;c._vertices.length>c.count;)c._vertices.pop();g=0;for(u=c.count;g<u;)q=g++,null!=c.local_vertices[q]&&(null==c._vertices[q]&&(r=c._vertices,v=new P(0,0),r[q]=v),k=c.local_vertices[q].x,K=c.local_vertices[q].y,null==K&&(K=0),null==k&&(k=0),p=c.transform.get_local_to_world_matrix(),m=k,n=K,z=1,Q=p.m00*m+p.m10*n+p.m20*z,S=p.m01*m+p.m11*n+p.m21*z,ca=Q,N=S,H=c._vertices[q],H.x=ca,H.y=N);g=0;for(u=c.count;g<u;)q=g++,H=c._vertices[(q+1)%c.count],m=H.x,n=H.y,x=c._vertices[q],w=m-x.x,A=n-x.y,m=w,n=A,k=
-n,n=m,m=k,null==c._normals[q]?(r=c._normals,v=new P(m,n),r[q]=v):(p=c._normals[q],p.x=m,p.y=n),E=y=B=da=c._normals[q],va=E.x*E.x+E.y*E.y,ea=0==va?1:Math.sqrt(va),D=y.x/ea,sa=y.y/ea,G=D,J=sa,B.x=G,B.y=J}uc=null==c._vertices[0]}else uc=!0;if(uc)r=c.transform,null==r.parent?Ya=r.local_y:(r.sync(),Ya=r._y);else{if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();g=0;for(u=c.count;g<u;)q=g++,null!=c.local_vertices[q]&&(null==c._vertices[q]&&(r=c._vertices,v=new P(0,
0),r[q]=v),k=c.local_vertices[q].x,K=c.local_vertices[q].y,null==K&&(K=0),null==k&&(k=0),p=c.transform.get_local_to_world_matrix(),m=k,n=K,z=1,Q=p.m00*m+p.m10*n+p.m20*z,S=p.m01*m+p.m11*n+p.m21*z,ca=Q,N=S,H=c._vertices[q],H.x=ca,H.y=N);g=0;for(u=c.count;g<u;)q=g++,H=c._vertices[(q+1)%c.count],m=H.x,n=H.y,x=c._vertices[q],w=m-x.x,A=n-x.y,m=w,n=A,k=-n,n=m,m=k,null==c._normals[q]?(r=c._normals,v=new P(m,n),r[q]=v):(p=c._normals[q],p.x=m,p.y=n),E=y=B=da=c._normals[q],va=E.x*E.x+E.y*E.y,ea=0==va?1:Math.sqrt(va),
D=y.x/ea,sa=y.y/ea,G=D,J=sa,B.x=G,B.y=J}uc=c._vertices[0].y;g=1;for(u=c.count;g<u;){q=g++;if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();db=0;for(I=c.count;db<I;)F=db++,null!=c.local_vertices[F]&&(null==c._vertices[F]&&(r=c._vertices,v=new P(0,0),r[F]=v),k=c.local_vertices[F].x,K=c.local_vertices[F].y,null==K&&(K=0),null==k&&(k=0),p=c.transform.get_local_to_world_matrix(),m=k,n=K,z=1,Q=p.m00*m+p.m10*n+p.m20*z,S=p.m01*m+p.m11*n+p.m21*z,ca=Q,N=S,H=c._vertices[F],
H.x=ca,H.y=N);T=0;for(ma=c.count;T<ma;)wa=T++,da=c._vertices[(wa+1)%c.count],U=da.x,R=da.y,x=c._vertices[wa],w=U-x.x,A=R-x.y,U=w,R=A,M=-R,R=U,U=M,null==c._normals[wa]?(Z=c._normals,oa=new P(U,R),Z[wa]=oa):(L=c._normals[wa],L.x=U,L.y=R),E=y=B=qb=c._normals[wa],va=E.x*E.x+E.y*E.y,ea=0==va?1:Math.sqrt(va),D=y.x/ea,sa=y.y/ea,G=D,J=sa,B.x=G,B.y=J}if(c._vertices[q].y>uc){if(c.dirty_vertices){for(c.dirty_vertices=!1;c._vertices.length>c.count;)c._vertices.pop();V=0;for(X=c.count;V<X;)O=V++,null!=c.local_vertices[O]&&
(null==c._vertices[O]&&(ha=c._vertices,ba=new P(0,0),ha[O]=ba),Oa=c.local_vertices[O].x,Y=c.local_vertices[O].y,null==Y&&(Y=0),null==Oa&&(Oa=0),W=c.transform.get_local_to_world_matrix(),ia=Oa,Pa=Y,ra=1,ka=W.m00*ia+W.m10*Pa+W.m20*ra,ja=W.m01*ia+W.m11*Pa+W.m21*ra,Xa=ka,Ta=ja,Ea=c._vertices[O],Ea.x=Xa,Ea.y=Ta);qa=0;for(la=c.count;qa<la;)rb=qa++,na=c._vertices[(rb+1)%c.count],fa=na.x,sb=na.y,ua=c._vertices[rb],xa=fa-ua.x,$a=sb-ua.y,fa=xa,sb=$a,xb=-sb,sb=fa,fa=xb,null==c._normals[rb]?(ya=c._normals,Ba=
new P(fa,sb),ya[rb]=Ba):(ta=c._normals[rb],ta.x=fa,ta.y=sb),Ga=za=Aa=Ca=c._normals[rb],Fa=Ga.x*Ga.x+Ga.y*Ga.y,Da=0==Fa?1:Math.sqrt(Fa),Ha=za.x/Da,Ma=za.y/Da,Na=Ha,La=Ma,Aa.x=Na,Aa.y=La}uc=c._vertices[q].y}}Ya=uc}}k=d;K=Ua;var ib=Qa,vc=Ua;null==vc&&(vc=1);null==ib&&(ib=1);null==K&&(K=0);null==k&&(k=0);var aa=mb.pool.get();M=k;Y=K;var eb=ib,Ra=vc;null==Ra&&(Ra=1);null==eb&&(eb=1);null==Y&&(Y=0);null==M&&(M=0);H=aa.start;H.x=M;H.y=Y;H=aa.end;H.x=eb;H.y=Ra;aa.pooled=!1;var bb=(aa.get_dy()-aa.get_y())*
(a.get_dx()-a.get_x())-(aa.get_dx()-aa.get_x())*(a.get_dy()-a.get_y());if(1E-5>=Math.abs(bb))var hb=null;else{var Kb=((aa.get_dx()-aa.get_x())*(a.get_y()-aa.get_y())-(aa.get_dy()-aa.get_y())*(a.get_x()-aa.get_x()))/bb,Uc=((a.get_dx()-a.get_x())*(a.get_y()-aa.get_y())-(a.get_dy()-a.get_y())*(a.get_x()-aa.get_x()))/bb;if(0>Kb||1<Kb||0>Uc||1<Uc)hb=null;else{p=a.start;var ac=Kb;L=a.end;x=a.start;var Cb=L.x-x.x,Va=L.y-x.y;w=Cb*ac;A=Va*ac;var Ja=p.x+w,Xb=p.y+A;p=a.start;var Ka=Ja-p.x,Wa=Xb-p.y,nb=Math.sqrt(Ka*
Ka+Wa*Wa);p=a.start;x=a.end;Ka=x.x-p.x;Wa=x.y-p.y;var Sa=Math.sqrt(Ka*Ka+Wa*Wa)-nb,jb=0<=bb;p=aa.start;x=aa.end;Ka=x.x-p.x;Wa=x.y-p.y;var tb=Math.sqrt(Ka*Ka+Wa*Wa)*(jb?-1:1);H=pa.norm;k=(aa.get_dy()-aa.get_y())/tb;K=-(aa.get_dx()-aa.get_x())/tb;H.x=k;H.y=K;var Za=pa.norm.x,gb=pa.norm.y,Lb=jb;null==Lb&&(Lb=!1);q=Gb.pool.get();q.line=null;q.shape=null;q.line2=null;var yb=Lb;null==yb&&(yb=!1);q.distance=nb;q.overlap=Sa;q.inverse_normal=yb;H=q.hit;H.x=Ja;H.y=Xb;H=q.normal;H.x=Za;H.y=gb;q.pooled=!1;var Mb=
q;Mb.line=a;Mb.line2=aa;hb=Mb}}null!=hb&&(h=hb);k=Qa;K=Ua;ib=Qa;vc=Ya;null==vc&&(vc=1);null==ib&&(ib=1);null==K&&(K=0);null==k&&(k=0);H=aa.start;H.x=k;H.y=K;H=aa.end;H.x=ib;H.y=vc;bb=(aa.get_dy()-aa.get_y())*(a.get_dx()-a.get_x())-(aa.get_dx()-aa.get_x())*(a.get_dy()-a.get_y());1E-5>=Math.abs(bb)?hb=null:(Kb=((aa.get_dx()-aa.get_x())*(a.get_y()-aa.get_y())-(aa.get_dy()-aa.get_y())*(a.get_x()-aa.get_x()))/bb,Uc=((a.get_dx()-a.get_x())*(a.get_y()-aa.get_y())-(a.get_dy()-a.get_y())*(a.get_x()-aa.get_x()))/
bb,0>Kb||1<Kb||0>Uc||1<Uc?hb=null:(p=a.start,ac=Kb,L=a.end,x=a.start,Cb=L.x-x.x,Va=L.y-x.y,w=Cb*ac,A=Va*ac,Ja=p.x+w,Xb=p.y+A,p=a.start,Ka=Ja-p.x,Wa=Xb-p.y,nb=Math.sqrt(Ka*Ka+Wa*Wa),p=a.start,x=a.end,Ka=x.x-p.x,Wa=x.y-p.y,Sa=Math.sqrt(Ka*Ka+Wa*Wa)-nb,jb=0<=bb,p=aa.start,x=aa.end,Ka=x.x-p.x,Wa=x.y-p.y,tb=Math.sqrt(Ka*Ka+Wa*Wa)*(jb?-1:1),H=pa.norm,k=(aa.get_dy()-aa.get_y())/tb,K=-(aa.get_dx()-aa.get_x())/tb,H.x=k,H.y=K,Za=pa.norm.x,gb=pa.norm.y,Lb=jb,null==Lb&&(Lb=!1),q=Gb.pool.get(),q.line=null,q.shape=
null,q.line2=null,yb=Lb,null==yb&&(yb=!1),q.distance=nb,q.overlap=Sa,q.inverse_normal=yb,H=q.hit,H.x=Ja,H.y=Xb,H=q.normal,H.x=Za,H.y=gb,q.pooled=!1,Mb=q,Mb.line=a,Mb.line2=aa,hb=Mb));null!=hb&&(null==h||h.distance>hb.distance)&&(h=hb);k=Qa;K=Ya;ib=d;vc=Ya;null==vc&&(vc=1);null==ib&&(ib=1);null==K&&(K=0);null==k&&(k=0);H=aa.start;H.x=k;H.y=K;H=aa.end;H.x=ib;H.y=vc;bb=(aa.get_dy()-aa.get_y())*(a.get_dx()-a.get_x())-(aa.get_dx()-aa.get_x())*(a.get_dy()-a.get_y());1E-5>=Math.abs(bb)?hb=null:(Kb=((aa.get_dx()-
aa.get_x())*(a.get_y()-aa.get_y())-(aa.get_dy()-aa.get_y())*(a.get_x()-aa.get_x()))/bb,Uc=((a.get_dx()-a.get_x())*(a.get_y()-aa.get_y())-(a.get_dy()-a.get_y())*(a.get_x()-aa.get_x()))/bb,0>Kb||1<Kb||0>Uc||1<Uc?hb=null:(p=a.start,ac=Kb,L=a.end,x=a.start,Cb=L.x-x.x,Va=L.y-x.y,w=Cb*ac,A=Va*ac,Ja=p.x+w,Xb=p.y+A,p=a.start,Ka=Ja-p.x,Wa=Xb-p.y,nb=Math.sqrt(Ka*Ka+Wa*Wa),p=a.start,x=a.end,Ka=x.x-p.x,Wa=x.y-p.y,Sa=Math.sqrt(Ka*Ka+Wa*Wa)-nb,jb=0<=bb,p=aa.start,x=aa.end,Ka=x.x-p.x,Wa=x.y-p.y,tb=Math.sqrt(Ka*
Ka+Wa*Wa)*(jb?-1:1),H=pa.norm,k=(aa.get_dy()-aa.get_y())/tb,K=-(aa.get_dx()-aa.get_x())/tb,H.x=k,H.y=K,Za=pa.norm.x,gb=pa.norm.y,Lb=jb,null==Lb&&(Lb=!1),q=Gb.pool.get(),q.line=null,q.shape=null,q.line2=null,yb=Lb,null==yb&&(yb=!1),q.distance=nb,q.overlap=Sa,q.inverse_normal=yb,H=q.hit,H.x=Ja,H.y=Xb,H=q.normal,H.x=Za,H.y=gb,q.pooled=!1,Mb=q,Mb.line=a,Mb.line2=aa,hb=Mb));null!=hb&&(null==h||h.distance>hb.distance)&&(h=hb);k=d;K=Ya;ib=d;vc=Ua;null==vc&&(vc=1);null==ib&&(ib=1);null==K&&(K=0);null==k&&
(k=0);H=aa.start;H.x=k;H.y=K;H=aa.end;H.x=ib;H.y=vc;bb=(aa.get_dy()-aa.get_y())*(a.get_dx()-a.get_x())-(aa.get_dx()-aa.get_x())*(a.get_dy()-a.get_y());1E-5>=Math.abs(bb)?hb=null:(Kb=((aa.get_dx()-aa.get_x())*(a.get_y()-aa.get_y())-(aa.get_dy()-aa.get_y())*(a.get_x()-aa.get_x()))/bb,Uc=((a.get_dx()-a.get_x())*(a.get_y()-aa.get_y())-(a.get_dy()-a.get_y())*(a.get_x()-aa.get_x()))/bb,0>Kb||1<Kb||0>Uc||1<Uc?hb=null:(p=a.start,ac=Kb,L=a.end,x=a.start,Cb=L.x-x.x,Va=L.y-x.y,w=Cb*ac,A=Va*ac,Ja=p.x+w,Xb=p.y+
A,p=a.start,Ka=Ja-p.x,Wa=Xb-p.y,nb=Math.sqrt(Ka*Ka+Wa*Wa),p=a.start,x=a.end,Ka=x.x-p.x,Wa=x.y-p.y,Sa=Math.sqrt(Ka*Ka+Wa*Wa)-nb,jb=0<=bb,p=aa.start,x=aa.end,Ka=x.x-p.x,Wa=x.y-p.y,tb=Math.sqrt(Ka*Ka+Wa*Wa)*(jb?-1:1),H=pa.norm,k=(aa.get_dy()-aa.get_y())/tb,K=-(aa.get_dx()-aa.get_x())/tb,H.x=k,H.y=K,Za=pa.norm.x,gb=pa.norm.y,Lb=jb,null==Lb&&(Lb=!1),q=Gb.pool.get(),q.line=null,q.shape=null,q.line2=null,yb=Lb,null==yb&&(yb=!1),q.distance=nb,q.overlap=Sa,q.inverse_normal=yb,H=q.hit,H.x=Ja,H.y=Xb,H=q.normal,
H.x=Za,H.y=gb,q.pooled=!1,Mb=q,Mb.line=a,Mb.line2=aa,hb=Mb));null!=hb&&(null==h||h.distance>hb.distance)&&(h=hb);null!=h&&(h.line=a,h.shape=b);return h};pa.line_intersects_circle=function(a,b){var c=a.end,e=a.start,f=c.x-e.x,h=c.y-e.y;c=a.start;var t=b.transform;t.sync();var l=t._x,d=t._y,g=c.x-l;l=c.y-d;d=b.local_radius;t=b.transform;null==t.parent?c=t.local_scale_x:(t.sync(),c=t._scale_x);d*=c;c=f*f+h*h;e=2*(g*f+l*h);h=e*e-4*c*(g*g+l*l-d*d);if(0>h)return null;h=Math.sqrt(h);f=(-e-h)/(2*c);h=(-e+
h)/(2*c);return 0<=f&&1>=f?(c=a.start,h=f,t=a.end,e=a.start,f=t.x-e.x,g=t.y-e.y,f=c.x+f*h,h=c.y+g*h,c=a.start,t=f-c.x,c=h-c.y,g=Math.sqrt(t*t+c*c),c=a.start,e=a.end,t=e.x-c.x,c=e.y-c.y,e=Math.sqrt(t*t+c*c)-g,c=pa.norm,t=b.transform,null==t.parent?l=t.local_x:(t.sync(),l=t._x),t=b.transform,null==t.parent?t=t.local_y:(t.sync(),t=t._y),c.x=f-l,c.y=h-t,c=pa.norm,l=c.x/d,d=c.y/d,c.x=l,c.y=d,d=pa.norm.x,t=pa.norm.y,l=Gb.pool.get(),l.line=null,l.shape=null,l.line2=null,c=!1,null==c&&(c=!1),l.distance=g,
l.overlap=e,l.inverse_normal=c,c=l.hit,c.x=f,c.y=h,c=l.normal,c.x=d,c.y=t,l.pooled=!1,d=l,d.line=a,d.shape=b,d):0<=h&&1>=h?(c=a.start,t=a.end,e=a.start,f=t.x-e.x,g=t.y-e.y,f=c.x+f*h,h=c.y+g*h,c=a.start,t=f-c.x,c=h-c.y,g=Math.sqrt(t*t+c*c),c=a.start,e=a.end,t=e.x-c.x,c=e.y-c.y,e=Math.sqrt(t*t+c*c)-g,c=pa.norm,t=b.transform,null==t.parent?l=t.local_x:(t.sync(),l=t._x),t=b.transform,null==t.parent?t=t.local_y:(t.sync(),t=t._y),c.x=f-l,c.y=h-t,t=c=pa.norm,l=-t.y,c.x=-t.x/d,c.y=l/d,d=pa.norm.x,t=pa.norm.y,
c=!0,null==c&&(c=!1),l=Gb.pool.get(),l.line=null,l.shape=null,l.line2=null,null==c&&(c=!1),l.distance=g,l.overlap=e,l.inverse_normal=c,c=l.hit,c.x=f,c.y=h,c=l.normal,c.x=d,c.y=t,l.pooled=!1,d=l,d.line=a,d.shape=b,d):null};pa.line_intersects_polygon=function(a,b){var c=null,e=mb.pool.get(),f=0,h=0,t=1,l=1;null==l&&(l=1);null==t&&(t=1);null==h&&(h=0);null==f&&(f=0);var d=e.start;d.x=f;d.y=h;d=e.end;d.x=t;d.y=l;e.pooled=!1;for(var g=0,u=b.count;g<u;){var q=g++;if(b.dirty_vertices){for(b.dirty_vertices=
!1;b._vertices.length>b.count;)b._vertices.pop();for(var r=0,v=b.count;r<v;){var k=r++;if(null!=b.local_vertices[k]){if(null==b._vertices[k]){var p=b._vertices,K=new P(0,0);p[k]=K}f=b.local_vertices[k].x;h=b.local_vertices[k].y;null==h&&(h=0);null==f&&(f=0);var m=b.transform.get_local_to_world_matrix(),n=f,H=h,z=m.m00*n+m.m10*H+1*m.m20,x=m.m01*n+m.m11*H+1*m.m21;d=b._vertices[k];d.x=z;d.y=x}}for(var Q=0,S=b.count;Q<S;){var ca=Q++,N=b._vertices[(ca+1)%b.count],w=N.x,A=N.y,B=b._vertices[ca],y=A-B.y;
w-=B.x;A=y;var da=-A;A=w;w=da;if(null==b._normals[ca]){var E=b._normals,va=new P(w,A);E[ca]=va}else{var ea=b._normals[ca];ea.x=w;ea.y=A}var D=b._normals[ca],sa=D,F=D,G=F,J=G.x*G.x+G.y*G.y,wa=0==J?1:Math.sqrt(J),db=F.y/wa;sa.x=F.x/wa;sa.y=db}}var U=b._vertices[q];if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();for(var T=0,R=b.count;T<R;){var I=T++;if(null!=b.local_vertices[I]){if(null==b._vertices[I]){var ma=b._vertices,M=new P(0,0);ma[I]=M}var L=b.local_vertices[I].x,
Z=b.local_vertices[I].y;null==Z&&(Z=0);null==L&&(L=0);var O=b.transform.get_local_to_world_matrix(),oa=L,W=Z,V=O.m01*oa+O.m11*W+1*O.m21,qb=b._vertices[I];qb.x=O.m00*oa+O.m10*W+1*O.m20;qb.y=V}}for(var Y=0,Oa=b.count;Y<Oa;){var X=Y++,ha=b._vertices[(X+1)%b.count],ba=ha.x,ia=ha.y,fa=b._vertices[X],Pa=ia-fa.y;ba-=fa.x;ia=Pa;var ra=-ia;ia=ba;ba=ra;if(null==b._normals[X]){var ka=b._normals,ja=new P(ba,ia);ka[X]=ja}else{var Ea=b._normals[X];Ea.x=ba;Ea.y=ia}var Xa=b._normals[X],qa=Xa,Ta=Xa,na=Ta,Ga=na.x*
na.x+na.y*na.y,ua=0==Ga?1:Math.sqrt(Ga),la=Ta.y/ua;qa.x=Ta.x/ua;qa.y=la}}var ta=b._vertices[(q+1)%b.count],xa=U.x,$a=U.y;t=ta.x;l=ta.y;null==l&&(l=1);null==t&&(t=1);null==$a&&($a=0);null==xa&&(xa=0);var Aa=e.start;Aa.x=xa;Aa.y=$a;var xb=e.end;xb.x=t;xb.y=l;var za=(e.get_dy()-e.get_y())*(a.get_dx()-a.get_x())-(e.get_dx()-e.get_x())*(a.get_dy()-a.get_y());if(1E-5>=Math.abs(za))var ya=null;else{var Ba=((e.get_dx()-e.get_x())*(a.get_y()-e.get_y())-(e.get_dy()-e.get_y())*(a.get_x()-e.get_x()))/za,Fa=((a.get_dx()-
a.get_x())*(a.get_y()-e.get_y())-(a.get_dy()-a.get_y())*(a.get_x()-e.get_x()))/za;if(0>Ba||1<Ba||0>Fa||1<Fa)ya=null;else{var Da=a.start,Ia=Ba,Ca=a.end,Ha=a.start,Ma=Da.x+(Ca.x-Ha.x)*Ia,Na=Da.y+(Ca.y-Ha.y)*Ia,La=a.start,Ja=Ma-La.x,Qa=Na-La.y,Ua=Math.sqrt(Ja*Ja+Qa*Qa),Ya=a.start,Va=a.end,Sa=Va.x-Ya.x,cb=Va.y-Ya.y,Za=Math.sqrt(Sa*Sa+cb*cb)-Ua,uc=0<=za,gb=e.start,ib=e.end,fb=ib.x-gb.x,aa=ib.y-gb.y,eb=Math.sqrt(fb*fb+aa*aa)*(uc?-1:1),Ra=pa.norm,bb=(e.get_dy()-e.get_y())/eb,hb=-(e.get_dx()-e.get_x())/eb;
Ra.x=bb;Ra.y=hb;var Kb=pa.norm.x,ab=pa.norm.y,ac=uc;null==ac&&(ac=!1);var Cb=Gb.pool.get();Cb.line=null;Cb.shape=null;Cb.line2=null;var kb=ac;null==kb&&(kb=!1);Cb.distance=Ua;Cb.overlap=Za;Cb.inverse_normal=kb;var lb=Cb.hit;lb.x=Ma;lb.y=Na;var Xb=Cb.normal;Xb.x=Kb;Xb.y=ab;Cb.pooled=!1;var Ka=Cb;Ka.line=a;Ka.line2=e;ya=Ka}}null!=ya&&(null==c||c.distance>ya.distance)&&(c=ya)}null!=c&&(c.line=a,c.shape=b);return c};pa.rect_and_rect=function(a,b,c){null==c&&(c=!1);var e=null,f=a.transform;if(null==f.parent)var h=
180/Math.PI*f.local_radians;else f.sync(),h=180/Math.PI*f._radians;0==h?(f=b.transform,null==f.parent?h=180/Math.PI*f.local_radians:(f.sync(),h=180/Math.PI*f._radians),h=0!=h):h=!0;if(h){if(null!=a.transformed_rect){e=pa.rect_and_polygon(b,a.transformed_rect,c);if(null==e)return null;c?e.sa=a:e.sb=a;return e}if(null!=b.transformed_rect){e=pa.rect_and_polygon(a,b.transformed_rect,!c);if(null==e)return null;c?e.sa=b:e.sb=b;return e}}h=c?b:a;a=c?a:b;f=a.transform;null==f.parent?b=f.local_x:(f.sync(),
b=f._x);f=h.transform;null==f.parent?f=f.local_x:(f.sync(),f=f._x);b-=f;f=a.transform;null==f.parent?c=f.local_y:(f.sync(),c=f._y);f=h.transform;null==f.parent?f=f.local_y:(f.sync(),f=f._y);f=c-f;c=h.local_ex*h.transform.local_scale_x+a.local_ex*a.transform.local_scale_x-Math.abs(b);if(0<c){var t=h.local_ey*h.transform.local_scale_y+a.local_ey*a.transform.local_scale_y-Math.abs(f);if(0<t){if(c<t){e=tc.pool.get();e.sa=null;e.sb=null;for(var l=e.contact_count=0,d=e.contacts;l<d.length;){var g=d[l];
++l;g.x=0;g.y=0}e.overlap=c;c=e.normal;c.x=0>b?-1:1;c.y=0}else{e=tc.pool.get();e.sa=null;e.sb=null;l=e.contact_count=0;for(d=e.contacts;l<d.length;)g=d[l],++l,g.x=0,g.y=0;e.overlap=t;c=e.normal;c.x=0;c.y=0>f?-1:1}e.pooled=!1;e.sa=h;e.sb=a}}return e};pa.circle_and_circle=function(a,b,c){null==c&&(c=!1);var e=c?b:a;a=c?a:b;var f=a.transform;null==f.parent?b=f.local_x:(f.sync(),b=f._x);f=e.transform;null==f.parent?c=f.local_x:(f.sync(),c=f._x);b-=c;f=a.transform;null==f.parent?c=f.local_y:(f.sync(),
c=f._y);f=e.transform;null==f.parent?f=f.local_y:(f.sync(),f=f._y);c-=f;var h=e.local_radius;f=e.transform;if(null==f.parent)var t=f.local_scale_x;else f.sync(),t=f._scale_x;var l=a.local_radius;f=a.transform;null==f.parent?f=f.local_scale_x:(f.sync(),f=f._scale_x);h=h*t+l*f;t=b*b+c*c;f=null;if(t>=h*h)return f;if(1E-5>=Math.abs(t)){h=e.local_radius;f=e.transform;null==f.parent?b=f.local_scale_x:(f.sync(),b=f._scale_x);b*=h;f=tc.pool.get();f.sa=null;f.sb=null;l=f.contact_count=0;for(var d=f.contacts;l<
d.length;){var g=d[l];++l;g.x=0;g.y=0}f.overlap=b;h=f.normal;h.x=1;h.y=0}else{t=Math.sqrt(t);b/=t;c/=t;f=tc.pool.get();f.sa=null;f.sb=null;l=f.contact_count=0;for(d=f.contacts;l<d.length;)g=d[l],++l,g.x=0,g.y=0;f.overlap=h-t;h=f.normal;h.x=b;h.y=c}f.pooled=!1;f.sa=e;f.sb=a;return f};pa.polygon_and_polygon=function(a,b,c){null==c&&(c=!1);var e=pa.check_polygons(a,b,c);if(null==e)return null;a=pa.check_polygons(b,a,!c);if(null==a)return null;0>e.overlap&&(e.overlap=Math.abs(e.overlap));0>a.overlap&&
(a.overlap=Math.abs(a.overlap));if(e.overlap<a.overlap)return a.put(),e;e.put();return a};pa.rect_and_circle=function(a,b,c){null==c&&(c=!1);if(null!=a.transformed_rect){var e=a.transform;if(null==e.parent)var f=180/Math.PI*e.local_radians;else e.sync(),f=180/Math.PI*e._radians;f=0!=f}else f=!1;if(f){f=pa.circle_and_polygon(b,a.transformed_rect,c);if(null==f)return null;c?f.sa=a:f.sb=a;return f}c?(e=b.transform,null==e.parent?f=e.local_x:(e.sync(),f=e._x),e=a.transform):(e=a.transform,null==e.parent?
f=e.local_x:(e.sync(),f=e._x),e=b.transform);if(null==e.parent)var h=e.local_x;else e.sync(),h=e._x;f-=h;c?(e=b.transform,null==e.parent?h=e.local_y:(e.sync(),h=e._y),e=a.transform):(e=a.transform,null==e.parent?h=e.local_y:(e.sync(),h=e._y),e=b.transform);if(null==e.parent)var t=e.local_y;else e.sync(),t=e._y;h-=t;var l=f,d=h;t=-(a.local_ex*a.transform.local_scale_x);var g=a.local_ex*a.transform.local_scale_x;l<t?l=t:l>g&&(l=g);t=-(a.local_ey*a.transform.local_scale_y);g=a.local_ey*a.transform.local_scale_y;
d<t?d=t:d>g&&(d=g);g=!1;t=b.local_radius;e=b.transform;null==e.parent?e=e.local_scale_x:(e.sync(),e=e._scale_x);t*=e;1E-5>=Math.abs(f-l)&&1E-5>=Math.abs(h-d)&&(g=!0,Math.abs(f)>Math.abs(h)?l=0<l?a.local_ex*a.transform.local_scale_x+t+.1:-(a.local_ex*a.transform.local_scale_x)-t-.1:d=0<d?a.local_ey*a.transform.local_scale_y+t+.1:-(a.local_ey*a.transform.local_scale_y)-t-.1);f-=l;h-=d;l=f*f+h*h;if(l>t*t&&!g)return null;l=Math.sqrt(l);f/=l;h/=l;g&&(f*=-1,h*=-1);l=Math.abs(t-l);t=tc.pool.get();t.sa=null;
t.sb=null;d=t.contact_count=0;for(g=t.contacts;d<g.length;)e=g[d],++d,e.x=0,e.y=0;t.overlap=l;l=t.normal;l.x=f;l.y=h;t.pooled=!1;f=t;f.sa=c?b:a;f.sb=c?a:b;return f};pa.rect_and_polygon=function(a,b,c){null==c&&(c=!1);if(null!=a.transformed_rect)b=pa.polygon_and_polygon(a.transformed_rect,b,c);else{var e=Ya.pool.get();e.count=4;for(var f=0,h=e.count;f<h;){var d=f++;if(null==e.local_vertices[d]){var l=e.local_vertices,g=new P(0,0);l[d]=g}}f=e.local_vertices[0];f.x=-(a.local_ex*a.transform.local_scale_x);
f.y=-(a.local_ey*a.transform.local_scale_y);f=e.local_vertices[1];f.x=a.local_ex*a.transform.local_scale_x;f.y=-(a.local_ey*a.transform.local_scale_y);f=e.local_vertices[2];f.x=a.local_ex*a.transform.local_scale_x;f.y=a.local_ey*a.transform.local_scale_y;f=e.local_vertices[3];f.x=-(a.local_ex*a.transform.local_scale_x);f.y=a.local_ey*a.transform.local_scale_y;f=a.transform.local_x;h=e.transform;h.dirty||h.set_dirty();h.local_x=f;f=a.transform.local_y;h=e.transform;h.dirty||h.set_dirty();h.local_y=
f;h=e.transform;f=Math.PI/180*(180/Math.PI)*a.transform.local_radians;h.dirty||h.set_dirty();h.local_radians=f;f=a.transform.local_scale_x;h=e.transform;h.dirty||h.set_dirty();h.local_scale_x=f;f=a.transform.local_scale_y;h=e.transform;h.dirty||h.set_dirty();h.local_scale_y=f;e.dirty_vertices=!0;e.dirty_bounds=!0;e.pooled=!1;e.set_parent(a.parent);b=pa.polygon_and_polygon(e,b,c);e.put()}if(null==b)return null;c?b.sb=a:b.sa=a;return b};pa.circle_and_polygon=function(a,b,c){null==c&&(c=!1);var e=0,
f=1073741823,h=a.transform;h.sync();var d=h._x,l=h._y,g=a.local_radius;h=a.transform;if(null==h.parent)var u=h.local_scale_x;else h.sync(),u=h._scale_x;for(var r=g*u,q=0,v=b.count;q<v;){var k=q++;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();for(var p=0,K=b.count;p<K;){var m=p++;if(null!=b.local_vertices[m]){if(null==b._vertices[m]){var n=b._vertices,H=new P(0,0);n[m]=H}var z=b.local_vertices[m].x,x=b.local_vertices[m].y;null==x&&(x=0);null==z&&(z=0);var Q=
b.transform.get_local_to_world_matrix(),S=z,ca=x,N=1,w=Q.m00*S+Q.m10*ca+Q.m20*N,A=Q.m01*S+Q.m11*ca+Q.m21*N,B=w,y=A,da=b._vertices[m];da.x=B;da.y=y}}for(var E=0,va=b.count;E<va;){var ea=E++,D=b._vertices[(ea+1)%b.count],sa=D.x,G=D.y,F=b._vertices[ea],J=sa-F.x,wa=G-F.y;sa=J;G=wa;var db=-G;G=sa;sa=db;if(null==b._normals[ea]){var U=b._normals,I=new P(sa,G);U[ea]=I}else{var T=b._normals[ea];T.x=sa;T.y=G}var R=b._normals[ea],ma=R,M=R,L=M,Z=L.x*L.x+L.y*L.y,O=0==Z?1:Math.sqrt(Z),oa=M.x/O,W=M.y/O,V=oa,X=W;
ma.x=V;ma.y=X}}var qb=b._vertices[k],Y=d-qb.x,Oa=l-qb.y;e=Y*Y+Oa*Oa;if(e<f){f=e;var ba=pa.closest;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();for(var ha=0,ia=b.count;ha<ia;){var fa=ha++;if(null!=b.local_vertices[fa]){if(null==b._vertices[fa]){var Pa=b._vertices,ra=new P(0,0);Pa[fa]=ra}var mb=b.local_vertices[fa].x,ka=b.local_vertices[fa].y;null==ka&&(ka=0);null==mb&&(mb=0);var ja=b.transform.get_local_to_world_matrix(),Ea=mb,na=ka,Ta=1,Xa=ja.m00*Ea+ja.m10*
na+ja.m20*Ta,qa=ja.m01*Ea+ja.m11*na+ja.m21*Ta,Ga=Xa,ua=qa,ta=b._vertices[fa];ta.x=Ga;ta.y=ua}}for(var xa=0,ya=b.count;xa<ya;){var la=xa++,za=b._vertices[(la+1)%b.count],$a=za.x,Aa=za.y,xb=b._vertices[la],Ba=$a-xb.x,Fa=Aa-xb.y;$a=Ba;Aa=Fa;var Da=-Aa;Aa=$a;$a=Da;if(null==b._normals[la]){var Ia=b._normals,Ca=new P($a,Aa);Ia[la]=Ca}else{var Ha=b._normals[la];Ha.x=$a;Ha.y=Aa}var Ma=b._normals[la],Na=Ma,La=Ma,Ja=La,Qa=Ja.x*Ja.x+Ja.y*Ja.y,Ua=0==Qa?1:Math.sqrt(Qa),Ya=La.x/Ua,Va=La.y/Ua,Sa=Ya,cb=Va;Na.x=Sa;
Na.y=cb}}var gb=b._vertices[k].x;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();for(var Za=0,fb=b.count;Za<fb;){var ib=Za++;if(null!=b.local_vertices[ib]){if(null==b._vertices[ib]){var eb=b._vertices,aa=new P(0,0);eb[ib]=aa}var Ra=b.local_vertices[ib].x,ab=b.local_vertices[ib].y;null==ab&&(ab=0);null==Ra&&(Ra=0);var bb=b.transform.get_local_to_world_matrix(),hb=Ra,Kb=ab,kb=1,ac=bb.m00*hb+bb.m10*Kb+bb.m20*kb,Cb=bb.m01*hb+bb.m11*Kb+bb.m21*kb,lb=ac,Eb=Cb,Xb=
b._vertices[ib];Xb.x=lb;Xb.y=Eb}}for(var Ka=0,Wa=b.count;Ka<Wa;){var nb=Ka++,Fb=b._vertices[(nb+1)%b.count],jb=Fb.x,tb=Fb.y,zb=b._vertices[nb],ob=jb-zb.x,Lb=tb-zb.y;jb=ob;tb=Lb;var yb=-tb;tb=jb;jb=yb;if(null==b._normals[nb]){var Mb=b._normals,kc=new P(jb,tb);Mb[nb]=kc}else{var Bb=b._normals[nb];Bb.x=jb;Bb.y=tb}var Ib=b._normals[nb],Jb=Ib,Gb=Ib,jd=Gb,Hb=jd.x*jd.x+jd.y*jd.y,vb=0==Hb?1:Math.sqrt(Hb),Vb=Gb.x/vb,Qb=Gb.y/vb,Rb=Vb,Sb=Qb;Jb.x=Rb;Jb.y=Sb}}var Ob=b._vertices[k].y;ba.x=gb;ba.y=Ob}}Q=pa.closest;
Y=Q.x-d;Oa=Q.y-l;Z=Y*Y+Oa*Oa;O=0==Z?1:Math.sqrt(Z);var Ab=Y/O,wb=Oa/O,ub=0;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();q=0;for(v=b.count;q<v;)k=q++,null!=b.local_vertices[k]&&(null==b._vertices[k]&&(n=b._vertices,H=new P(0,0),n[k]=H),z=b.local_vertices[k].x,x=b.local_vertices[k].y,null==x&&(x=0),null==z&&(z=0),Q=b.transform.get_local_to_world_matrix(),S=z,ca=x,N=1,w=Q.m00*S+Q.m10*ca+Q.m20*N,A=Q.m01*S+Q.m11*ca+Q.m21*N,B=w,y=A,da=b._vertices[k],da.x=B,
da.y=y);q=0;for(v=b.count;q<v;)k=q++,da=b._vertices[(k+1)%b.count],S=da.x,ca=da.y,F=b._vertices[k],J=S-F.x,wa=ca-F.y,S=J,ca=wa,z=-ca,ca=S,S=z,null==b._normals[k]?(n=b._normals,H=new P(S,ca),n[k]=H):(Q=b._normals[k],Q.x=S,Q.y=ca),L=M=ma=D=b._normals[k],Z=L.x*L.x+L.y*L.y,O=0==Z?1:Math.sqrt(Z),oa=M.x/O,W=M.y/O,V=oa,X=W,ma.x=V,ma.y=X}F=b._vertices[0];var Qc=Ab*F.x+wb*F.y,Db=Qc;q=1;for(v=b.count;q<v;){var Nb=q++;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();
p=0;for(K=b.count;p<K;)k=p++,null!=b.local_vertices[k]&&(null==b._vertices[k]&&(n=b._vertices,H=new P(0,0),n[k]=H),z=b.local_vertices[k].x,x=b.local_vertices[k].y,null==x&&(x=0),null==z&&(z=0),Q=b.transform.get_local_to_world_matrix(),S=z,ca=x,N=1,w=Q.m00*S+Q.m10*ca+Q.m20*N,A=Q.m01*S+Q.m11*ca+Q.m21*N,B=w,y=A,da=b._vertices[k],da.x=B,da.y=y);E=0;for(va=b.count;E<va;)m=E++,D=b._vertices[(m+1)%b.count],sa=D.x,G=D.y,F=b._vertices[m],J=sa-F.x,wa=G-F.y,sa=J,G=wa,db=-G,G=sa,sa=db,null==b._normals[m]?(U=
b._normals,I=new P(sa,G),U[m]=I):(T=b._normals[m],T.x=sa,T.y=G),L=M=ma=R=b._normals[m],Z=L.x*L.x+L.y*L.y,O=0==Z?1:Math.sqrt(Z),oa=M.x/O,W=M.y/O,V=oa,X=W,ma.x=V,ma.y=X}qb=b._vertices[Nb];ub=Ab*qb.x+wb*qb.y;ub<Qc&&(Qc=ub);ub>Db&&(Db=ub)}var Tb=r,Yb=-r;J=-d;wa=-l;var Wb=Ab*J+wb*wa;Qc+=Wb;Db+=Wb;var fc=Qc-Tb,bc=Yb-Db;if(0<fc||0<bc)return null;var pb=-(Tb-Qc);c&&(pb*=-1);z=Ab;x=wb;g=tc.pool.get();g.sa=null;g.sb=null;q=g.contact_count=0;for(v=g.contacts;q<v.length;){var lc=v[q];++q;lc.x=0;lc.y=0}g.overlap=
pb;da=g.normal;da.x=z;da.y=x;g.pooled=!1;var $b=g,Tc=Math.abs(pb);q=0;for(v=b.count;q<v;){k=q++;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();p=0;for(K=b.count;p<K;)m=p++,null!=b.local_vertices[m]&&(null==b._vertices[m]&&(n=b._vertices,H=new P(0,0),n[m]=H),z=b.local_vertices[m].x,x=b.local_vertices[m].y,null==x&&(x=0),null==z&&(z=0),Q=b.transform.get_local_to_world_matrix(),S=z,ca=x,N=1,w=Q.m00*S+Q.m10*ca+Q.m20*N,A=Q.m01*S+Q.m11*ca+Q.m21*N,B=w,y=A,da=b._vertices[m],
da.x=B,da.y=y);E=0;for(va=b.count;E<va;)ea=E++,D=b._vertices[(ea+1)%b.count],sa=D.x,G=D.y,F=b._vertices[ea],J=sa-F.x,wa=G-F.y,sa=J,G=wa,db=-G,G=sa,sa=db,null==b._normals[ea]?(U=b._normals,I=new P(sa,G),U[ea]=I):(T=b._normals[ea],T.x=sa,T.y=G),L=M=ma=R=b._normals[ea],Z=L.x*L.x+L.y*L.y,O=0==Z?1:Math.sqrt(Z),oa=M.x/O,W=M.y/O,V=oa,X=W,ma.x=V,ma.y=X}mb=b._normals[k].x;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();ha=0;for(ia=b.count;ha<ia;)fa=ha++,null!=b.local_vertices[fa]&&
(null==b._vertices[fa]&&(Pa=b._vertices,ra=new P(0,0),Pa[fa]=ra),Da=b.local_vertices[fa].x,ka=b.local_vertices[fa].y,null==ka&&(ka=0),null==Da&&(Da=0),ja=b.transform.get_local_to_world_matrix(),Ea=Da,na=ka,Ta=1,Xa=ja.m00*Ea+ja.m10*na+ja.m20*Ta,qa=ja.m01*Ea+ja.m11*na+ja.m21*Ta,Ga=Xa,ua=qa,ba=b._vertices[fa],ba.x=Ga,ba.y=ua);xa=0;for(ya=b.count;xa<ya;)la=xa++,ta=b._vertices[(la+1)%b.count],$a=ta.x,Aa=ta.y,qb=b._vertices[la],Ba=$a-qb.x,Fa=Aa-qb.y,$a=Ba,Aa=Fa,gb=-Aa,Aa=$a,$a=gb,null==b._normals[la]?(Ia=
b._normals,Ca=new P($a,Aa),Ia[la]=Ca):(Ha=b._normals[la],Ha.x=$a,Ha.y=Aa),Ja=La=Na=za=b._normals[la],Qa=Ja.x*Ja.x+Ja.y*Ja.y,Ua=0==Qa?1:Math.sqrt(Qa),Ya=La.x/Ua,Va=La.y/Ua,Sa=Ya,cb=Va,Na.x=Sa,Na.y=cb}Ab=mb;wb=b._normals[k].y;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();Za=0;for(fb=b.count;Za<fb;)ib=Za++,null!=b.local_vertices[ib]&&(null==b._vertices[ib]&&(eb=b._vertices,aa=new P(0,0),eb[ib]=aa),Ra=b.local_vertices[ib].x,ab=b.local_vertices[ib].y,null==
ab&&(ab=0),null==Ra&&(Ra=0),bb=b.transform.get_local_to_world_matrix(),hb=Ra,Kb=ab,kb=1,ac=bb.m00*hb+bb.m10*Kb+bb.m20*kb,Cb=bb.m01*hb+bb.m11*Kb+bb.m21*kb,lb=ac,Eb=Cb,Ma=b._vertices[ib],Ma.x=lb,Ma.y=Eb);Ka=0;for(Wa=b.count;Ka<Wa;)nb=Ka++,Xb=b._vertices[(nb+1)%b.count],jb=Xb.x,tb=Xb.y,xb=b._vertices[nb],ob=jb-xb.x,Lb=tb-xb.y,jb=ob,tb=Lb,yb=-tb,tb=jb,jb=yb,null==b._normals[nb]?(Mb=b._normals,kc=new P(jb,tb),Mb[nb]=kc):(Bb=b._normals[nb],Bb.x=jb,Bb.y=tb),jd=Gb=Jb=Fb=b._normals[nb],Hb=jd.x*jd.x+jd.y*jd.y,
vb=0==Hb?1:Math.sqrt(Hb),Vb=Gb.x/vb,Qb=Gb.y/vb,Rb=Vb,Sb=Qb,Jb.x=Rb,Jb.y=Sb}zb=b._vertices[0];Db=Qc=Ab*zb.x+wb*zb.y;for(var gc=1,nc=b.count;gc<nc;){Nb=gc++;if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();for(var Ub=0,sc=b.count;Ub<sc;){var mc=Ub++;if(null!=b.local_vertices[mc]){if(null==b._vertices[mc]){var dc=b._vertices,wc=new P(0,0);dc[mc]=wc}var ic=b.local_vertices[mc].x;Ob=b.local_vertices[mc].y;null==Ob&&(Ob=0);null==ic&&(ic=0);var Zb=b.transform.get_local_to_world_matrix(),
xc=ic,pc=Ob,zc=Zb.m00*xc+Zb.m10*pc+1*Zb.m20,Zc=Zb.m01*xc+Zb.m11*pc+1*Zb.m21;Ib=b._vertices[mc];Ib.x=zc;Ib.y=Zc}}for(var Ac=0,Mc=b.count;Ac<Mc;){var cc=Ac++,ec=b._vertices[(cc+1)%b.count],Pb=ec.x,jc=ec.y,Fc=b._vertices[cc],Gc=jc-Fc.y;Pb-=Fc.x;jc=Gc;var Jc=-jc;jc=Pb;Pb=Jc;if(null==b._normals[cc]){var Rc=b._normals,Kc=new P(Pb,jc);Rc[cc]=Kc}else{var Lc=b._normals[cc];Lc.x=Pb;Lc.y=jc}var Bc=b._normals[cc],Cc=Bc,hc=Bc,oc=hc,Ec=oc.x*oc.x+oc.y*oc.y,yc=0==Ec?1:Math.sqrt(Ec),Nc=hc.y/yc;Cc.x=hc.x/yc;Cc.y=Nc}}var kd=
b._vertices[Nb];ub=Ab*kd.x+wb*kd.y;ub<Qc&&(Qc=ub);ub>Db&&(Db=ub)}Tb=r;Yb=-r;Wb=Ab*-d+wb*-l;Qc+=Wb;Db+=Wb;fc=Qc-Tb;bc=Yb-Db;if(0<fc||0<bc)return $b.put(),null;pb=-(Tb-Qc);c&&(pb*=-1);if(Math.abs(pb)<Tc){var qc=$b.normal;qc.x=Ab;qc.y=wb;$b.overlap=pb;Tc=Math.abs(pb)}}$b.sa=c?b:a;$b.sb=c?a:b;$b.overlap=Math.abs($b.overlap);c&&(da=$b.normal,da.x=-da.x,da.y=-da.y);return $b};pa.check_polygons=function(a,b,c){null==c&&(c=!1);for(var e=0,f=0,h=0,d=0,l=0,g=0,u=0,r=1073741823,q=null,v=0,k=0,p=0,K=a.count;p<
K;){var m=p++;if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();for(var n=0,H=a.count;n<H;){var z=n++;if(null!=a.local_vertices[z]){if(null==a._vertices[z]){var x=a._vertices,Q=new P(0,0);x[z]=Q}var S=a.local_vertices[z].x,ca=a.local_vertices[z].y;null==ca&&(ca=0);null==S&&(S=0);var N=a.transform.get_local_to_world_matrix(),w=S,A=ca,da=N.m01*w+N.m11*A+1*N.m21,B=a._vertices[z];B.x=N.m00*w+N.m10*A+1*N.m20;B.y=da}}for(var y=0,E=a.count;y<E;){var ea=y++,va=a._vertices[(ea+
1)%a.count],sa=va.x,G=va.y,D=a._vertices[ea],F=G-D.y;sa-=D.x;G=F;var J=-G;G=sa;sa=J;if(null==a._normals[ea]){var wa=a._normals,T=new P(sa,G);wa[ea]=T}else{var db=a._normals[ea];db.x=sa;db.y=G}var U=a._normals[ea],I=U,ma=U,R=ma,M=R.x*R.x+R.y*R.y,L=0==M?1:Math.sqrt(M),Z=ma.y/L;I.x=ma.x/L;I.y=Z}}var O=a._normals[m].x;if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();for(var oa=0,W=a.count;oa<W;){var V=oa++;if(null!=a.local_vertices[V]){if(null==a._vertices[V]){var qb=
a._vertices,X=new P(0,0);qb[V]=X}var Y=a.local_vertices[V].x,Oa=a.local_vertices[V].y;null==Oa&&(Oa=0);null==Y&&(Y=0);var ba=a.transform.get_local_to_world_matrix(),fa=Y,ha=Oa,ia=ba.m01*fa+ba.m11*ha+1*ba.m21,ja=a._vertices[V];ja.x=ba.m00*fa+ba.m10*ha+1*ba.m20;ja.y=ia}}for(var Pa=0,ra=a.count;Pa<ra;){var mb=Pa++,ka=a._vertices[(mb+1)%a.count],Ea=ka.x,la=ka.y,$a=a._vertices[mb],na=la-$a.y;Ea-=$a.x;la=na;var Ta=-la;la=Ea;Ea=Ta;if(null==a._normals[mb]){var Aa=a._normals,Xa=new P(Ea,la);Aa[mb]=Xa}else{var pa=
a._normals[mb];pa.x=Ea;pa.y=la}var qa=a._normals[mb],Ga=qa,ua=qa,ta=ua,xa=ta.x*ta.x+ta.y*ta.y,ya=0==xa?1:Math.sqrt(xa),xb=ua.y/ya;Ga.x=ua.x/ya;Ga.y=xb}}v=O;k=a._normals[m].y;if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();for(var za=0,Ba=a.count;za<Ba;){var Da=za++;if(null!=a.local_vertices[Da]){if(null==a._vertices[Da]){var Fa=a._vertices,Ja=new P(0,0);Fa[Da]=Ja}var Ha=a.local_vertices[Da].x,Ia=a.local_vertices[Da].y;null==Ia&&(Ia=0);null==Ha&&(Ha=0);var Ca=
a.transform.get_local_to_world_matrix(),La=Ha,Ma=Ia,Na=Ca.m01*La+Ca.m11*Ma+1*Ca.m21,Qa=a._vertices[Da];Qa.x=Ca.m00*La+Ca.m10*Ma+1*Ca.m20;Qa.y=Na}}for(var Ua=0,Ya=a.count;Ua<Ya;){var Ra=Ua++,Za=a._vertices[(Ra+1)%a.count],Va=Za.x,Sa=Za.y,ab=a._vertices[Ra],cb=Sa-ab.y;Va-=ab.x;Sa=cb;var gb=-Sa;Sa=Va;Va=gb;if(null==a._normals[Ra]){var aa=a._normals,fb=new P(Va,Sa);aa[Ra]=fb}else{var eb=a._normals[Ra];eb.x=Va;eb.y=Sa}var bb=a._normals[Ra],hb=bb,kb=bb,lb=kb,ub=lb.x*lb.x+lb.y*lb.y,Cb=0==ub?1:Math.sqrt(ub),
Ab=kb.y/Cb;hb.x=kb.x/Cb;hb.y=Ab}}var wb=a._vertices[0];l=d=v*wb.x+k*wb.y;for(var zb=1,Ka=a.count;zb<Ka;){var Wa=zb++;if(a.dirty_vertices){for(a.dirty_vertices=!1;a._vertices.length>a.count;)a._vertices.pop();for(var nb=0,Db=a.count;nb<Db;){var jb=nb++;if(null!=a.local_vertices[jb]){if(null==a._vertices[jb]){var tb=a._vertices,Gb=new P(0,0);tb[jb]=Gb}var Bb=a.local_vertices[jb].x,Lb=a.local_vertices[jb].y;null==Lb&&(Lb=0);null==Bb&&(Bb=0);var yb=a.transform.get_local_to_world_matrix(),Mb=Bb,Eb=Lb,
Ib=yb.m01*Mb+yb.m11*Eb+1*yb.m21,Fb=a._vertices[jb];Fb.x=yb.m00*Mb+yb.m10*Eb+1*yb.m20;Fb.y=Ib}}for(var $b=0,Jb=a.count;$b<Jb;){var ob=$b++,Hb=a._vertices[(ob+1)%a.count],vb=Hb.x,pb=Hb.y,kc=a._vertices[ob],Ob=pb-kc.y;vb-=kc.x;pb=Ob;var Tb=-pb;pb=vb;vb=Tb;if(null==a._normals[ob]){var Vb=a._normals,Wb=new P(vb,pb);Vb[ob]=Wb}else{var Qb=a._normals[ob];Qb.x=vb;Qb.y=pb}var Rb=a._normals[ob],Sb=Rb,mc=Rb,Nb=mc,Yb=Nb.x*Nb.x+Nb.y*Nb.y,Zb=0==Yb?1:Math.sqrt(Yb),fc=mc.y/Zb;Sb.x=mc.x/Zb;Sb.y=fc}}var bc=a._vertices[Wa];
h=v*bc.x+k*bc.y;h<d&&(d=h);h>l&&(l=h)}if(b.dirty_vertices){for(b.dirty_vertices=!1;b._vertices.length>b.count;)b._vertices.pop();for(var cc=0,jc=b.count;cc<jc;){var Pb=cc++;if(null!=b.local_vertices[Pb]){if(null==b._vertices[Pb]){var lc=b._vertices,Tc=new P(0,0);lc[Pb]=Tc}var gc=b.local_vertices[Pb].x,ic=b.local_vertices[Pb].y;null==ic&&(ic=0);null==gc&&(gc=0);var Ub=b.transform.get_local_to_world_matrix(),nc=gc,oc=ic,xc=Ub.m01*nc+Ub.m11*oc+1*Ub.m21,pc=b._vertices[Pb];pc.x=Ub.m00*nc+Ub.m10*oc+1*Ub.m20;
pc.y=xc}}for(var sc=0,Ac=b.count;sc<Ac;){var dc=sc++,wc=b._vertices[(dc+1)%b.count],hc=wc.x,ec=wc.y,zc=b._vertices[dc],Fc=ec-zc.y;hc-=zc.x;ec=Fc;var Zc=-ec;ec=hc;hc=Zc;if(null==b._normals[dc]){var Lc=b._normals,Mc=new P(hc,ec);Lc[dc]=Mc}else{var Bc=b._normals[dc];Bc.x=hc;Bc.y=ec}var Cc=b._normals[dc],Ec=Cc,yc=Cc,qc=yc,Gc=qc.x*qc.x+qc.y*qc.y,Jc=0==Gc?1:Math.sqrt(Gc),Rc=yc.y/Jc;Ec.x=yc.x/Jc;Ec.y=Rc}}var Kc=b._vertices[0];u=g=v*Kc.x+k*Kc.y;for(var Nc=1,ed=b.count;Nc<ed;){var gd=Nc++;if(b.dirty_vertices){for(b.dirty_vertices=
!1;b._vertices.length>b.count;)b._vertices.pop();for(var Yc=0,ld=b.count;Yc<ld;){var kd=Yc++;if(null!=b.local_vertices[kd]){if(null==b._vertices[kd]){var pd=b._vertices,qd=new P(0,0);pd[kd]=qd}var Wc=b.local_vertices[kd].x,Xc=b.local_vertices[kd].y;null==Xc&&(Xc=0);null==Wc&&(Wc=0);var Dc=b.transform.get_local_to_world_matrix(),ad=Wc,cd=Xc,yd=Dc.m01*ad+Dc.m11*cd+1*Dc.m21,dd=b._vertices[kd];dd.x=Dc.m00*ad+Dc.m10*cd+1*Dc.m20;dd.y=yd}}for(var fd=0,zd=b.count;fd<zd;){var Hc=fd++,hd=b._vertices[(Hc+1)%
b.count],Oc=hd.x,Ic=hd.y,id=b._vertices[Hc],Ad=Ic-id.y;Oc-=id.x;Ic=Ad;var Bd=-Ic;Ic=Oc;Oc=Bd;if(null==b._normals[Hc]){var Cd=b._normals,Ed=new P(Oc,Ic);Cd[Hc]=Ed}else{var md=b._normals[Hc];md.x=Oc;md.y=Ic}var nd=b._normals[Hc],od=nd,$c=nd,Vc=$c,rd=Vc.x*Vc.x+Vc.y*Vc.y,sd=0==rd?1:Math.sqrt(rd),Fd=$c.y/sd;od.x=$c.x/sd;od.y=Fd}}var td=b._vertices[gd];h=v*td.x+k*td.y;h<g&&(g=h);h>u&&(u=h)}e=d-u;f=g-l;if(0<e||0<f)return null;var Sc=-(u-d);c&&(Sc*=-1);if(Math.abs(Sc)<r){if(null==q){var Gd=v,Hd=k,Dd=tc.pool.get();
Dd.sa=null;Dd.sb=null;for(var bd=Dd.contact_count=0,ud=Dd.contacts;bd<ud.length;){var vd=ud[bd];++bd;vd.x=0;vd.y=0}Dd.overlap=Sc;var wd=Dd.normal;wd.x=Gd;wd.y=Hd;Dd.pooled=!1;q=Dd}else{q.overlap=Sc;var xd=q.normal;xd.x=v;xd.y=k}r=Math.abs(Sc)}}if(null==q)return null;q.sa=c?b:a;q.sb=c?a:b;c&&(B=q.normal,B.x=-B.x,B.y=-B.y);return q};var gd=function(a,b,c,e,f){null==f&&(f=1);null==e&&(e=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.dirty=this.inverse_dirty=this.coordinates_dirty=!1;this.local_to_world_matrix=
new fe(1,0,0,0,1,0,0,0,1);this.children=[];this._scale_x=this._scale_y=1;this._x=this._y=this._radians=0;this.on_dirty=null;this.dirty||this.set_dirty();this.local_x=a;this.dirty||this.set_dirty();this.local_y=b;a=Math.PI/180*c;this.dirty||this.set_dirty();this.local_radians=a;this.dirty||this.set_dirty();this.local_scale_x=e;this.dirty||this.set_dirty();this.local_scale_y=f};k["echo.util.Transform"]=gd;gd.__name__=!0;gd.__interfaces__=[u];gd.prototype={set_parent:function(a,b){null!=this.parent&&
F.remove(this.parent.children,this);this.parent=a;null!=a&&this.parent.children.push(this);this.set_dirty()},get_local_to_world_matrix:function(){if(this.dirty){if(null==this.parent){var a=this.local_to_world_matrix,b=Math.sin(this.local_radians),c=Math.cos(this.local_radians),e=c*this.local_scale_x,f=-b*this.local_scale_y,h=this.local_x;b*=this.local_scale_x;var d=c*this.local_scale_y,l=this.local_y;a.m00=e;a.m10=f;a.m20=h;a.m01=b;a.m11=d;a.m21=l;a.m02=0;a.m12=0;a.m22=1}else{a=this.local_to_world_matrix;
var g=this.parent.get_local_to_world_matrix();b=Math.sin(this.local_radians);c=Math.cos(this.local_radians);e=c*this.local_scale_x;f=-b*this.local_scale_y;h=this.local_x;b*=this.local_scale_x;d=c*this.local_scale_y;l=this.local_y;c=g.m00*f+g.m10*d+0*g.m20;var u=g.m00*h+g.m10*l+1*g.m20,r=g.m01*e+g.m11*b+0*g.m21,q=g.m01*f+g.m11*d+0*g.m21,v=g.m01*h+g.m11*l+1*g.m21,k=g.m02*e+g.m12*b+0*g.m22;f=g.m02*f+g.m12*d+0*g.m22;h=g.m02*h+g.m12*l+1*g.m22;a.m00=g.m00*e+g.m10*b+0*g.m20;a.m10=c;a.m20=u;a.m01=r;a.m11=
q;a.m21=v;a.m02=k;a.m12=f;a.m22=h}this.dirty=!1}return this.local_to_world_matrix},sync:function(){if(this.coordinates_dirty){var a=this.get_local_to_world_matrix();if(null==this.parent)this._x=this.local_x,this._y=this.local_y,this._scale_x=this.local_scale_x,this._scale_y=this.local_scale_y,this._radians=this.local_radians;else{var b=a.m00,c=a.m01,e=a.m10,f=a.m11;this._x=a.m20;this._y=a.m21;this._scale_x=Math.sqrt(b*b+c*c);this._scale_y=Math.sqrt(e*e+f*f);this._radians=180/Math.PI*Math.atan2(-e/
this._scale_y,b/this._scale_x)}this.coordinates_dirty=!1}},set_dirty:function(){this.dirty=this.inverse_dirty=this.coordinates_dirty=!0;for(var a=0,b=this.children;a<b.length;){var c=b[a];++a;c.set_dirty()}if(null!=this.on_dirty)this.on_dirty(this)},__class__:gd};var ub=v["haxe.StackItem"]={__ename__:!0,__constructs__:null,CFunction:{_hx_name:"CFunction",_hx_index:0,__enum__:"haxe.StackItem",toString:d},Module:(g=function(a){return{_hx_index:1,m:a,__enum__:"haxe.StackItem",toString:d}},g._hx_name=
"Module",g.__params__=["m"],g),FilePos:(g=function(a,b,c,e){return{_hx_index:2,s:a,file:b,line:c,column:e,__enum__:"haxe.StackItem",toString:d}},g._hx_name="FilePos",g.__params__=["s","file","line","column"],g),Method:(g=function(a,b){return{_hx_index:3,classname:a,method:b,__enum__:"haxe.StackItem",toString:d}},g._hx_name="Method",g.__params__=["classname","method"],g),LocalFunction:(g=function(a){return{_hx_index:4,v:a,__enum__:"haxe.StackItem",toString:d}},g._hx_name="LocalFunction",g.__params__=
["v"],g)};ub.__constructs__=[ub.CFunction,ub.Module,ub.FilePos,ub.Method,ub.LocalFunction];var Gc={callStack:function(){return ka.toHaxe(ka.callStack())},exceptionStack:function(a){null==a&&(a=!1);var b=ka.toHaxe(ka.exceptionStack());return a?b:Gc.subtract(b,Gc.callStack())},toString:function(a){for(var b=new Ua,c=0;c<a.length;){var e=a[c];++c;b.b+="\nCalled from ";Gc.itemToString(b,e)}return b.b},subtract:function(a,b){for(var c=-1,e=-1;++e<a.length;){for(var f=0,h=b.length;f<h;){var d=f++;if(Gc.equalItems(a[e],
b[d])){if(0>c&&(c=e),++e,e>=a.length)break}else c=-1}if(0<=c)break}return 0<=c?a.slice(0,c):a},equalItems:function(a,b){if(null==a)return null==b?!0:!1;switch(a._hx_index){case 0:return null==b?!1:0==b._hx_index?!0:!1;case 1:return null==b?!1:1==b._hx_index?a.m==b.m:!1;case 2:if(null==b)return!1;if(2==b._hx_index){var c=b.s,e=b.line,f=b.column,h=a.column,d=a.line,l=a.s;return a.file==b.file&&d==e&&h==f?Gc.equalItems(l,c):!1}return!1;case 3:return null==b?!1:3==b._hx_index?(c=b.method,e=a.method,a.classname==
b.classname?e==c:!1):!1;case 4:return null==b?!1:4==b._hx_index?a.v==b.v:!1}},itemToString:function(a,b){switch(b._hx_index){case 0:a.b+="a C function";break;case 1:b=b.m;a.b+="module ";a.b+=null==b?"null":""+b;break;case 2:var c=b.s,e=b.file,f=b.line;b=b.column;null!=c&&(Gc.itemToString(a,c),a.b+=" (");a.b+=null==e?"null":""+e;a.b+=" line ";a.b+=null==f?"null":""+f;null!=b&&(a.b+=" column ",a.b+=null==b?"null":""+b);null!=c&&(a.b+=")");break;case 3:c=b.classname;b=b.method;a.b+=z.string(null==c?
"<unknown>":c);a.b+=".";a.b+=null==b?"null":""+b;break;case 4:b=b.v,a.b+="local function #",a.b+=null==b?"null":""+b}}},Jc=function(){};k["haxe.IMap"]=Jc;Jc.__name__=!0;Jc.__isInterface__=!0;Jc.prototype={__class__:Jc};var B=function(a,b,c){Error.call(this,a);this.message=a;this.__previousException=b;this.__nativeException=null!=c?c:this;this.__skipStack=0;a=Error.prepareStackTrace;Error.prepareStackTrace=function(a){return a.stack};if(c instanceof Error)this.stack=c.stack;else{c=null;if(Error.captureStackTrace)Error.captureStackTrace(this,
B),c=this;else if(c=Error(),"undefined"==typeof c.stack){try{throw c;}catch(e){}this.__skipStack++}this.stack=c.stack}Error.prepareStackTrace=a};k["haxe.Exception"]=B;B.__name__=!0;B.caught=function(a){return a instanceof B?a:a instanceof Error?new B(a.message,null,a):new ld(a,null,a)};B.thrown=function(a){if(a instanceof B)return a.get_native();if(a instanceof Error)return a;a=new ld(a);a.__skipStack++;return a};B.__super__=Error;B.prototype=x(Error.prototype,{unwrap:function(){return this.__nativeException},
toString:function(){return this.get_message()},__shiftStack:function(){this.__skipStack++},get_message:function(){return this.message},get_native:function(){return this.__nativeException},get_stack:function(){var a=this.__exceptionStack;null==a&&(a=ka.toHaxe(ka.normalize(this.stack),this.__skipStack),this.setProperty("__exceptionStack",a));return a},setProperty:function(a,b){try{Object.defineProperty(this,a,{value:b})}catch(c){this[a]=b}},__class__:B,__properties__:{get_native:"get_native",get_stack:"get_stack",
get_message:"get_message"}});var ia=function(){};k["haxe.Log"]=ia;ia.__name__=!0;ia.formatOutput=function(a,b){var c=z.string(a);if(null==b)return c;var e=b.fileName+":"+b.lineNumber;if(null!=b.customParams){var f=0;for(b=b.customParams;f<b.length;)a=b[f],++f,c+=", "+z.string(a)}return e+": "+c};ia.trace=function(a,b){a=ia.formatOutput(a,b);"undefined"!=typeof console&&null!=console.log&&console.log(a)};var ka=function(){};k["haxe.NativeStackTrace"]=ka;ka.__name__=!0;ka.saveStack=function(a){ka.lastError=
a};ka.callStack=function(){var a=Error(""),b=ka.tryHaxeStack(a);if("undefined"==typeof b){try{throw a;}catch(c){}b=a.stack}return ka.normalize(b,2)};ka.exceptionStack=function(){return ka.normalize(ka.tryHaxeStack(ka.lastError))};ka.toHaxe=function(a,b){null==b&&(b=0);if(null==a)return[];if("string"==typeof a){a=a.split("\n");"Error"==a[0]&&a.shift();for(var c=[],e=0,f=a.length;e<f;){var h=e++;if(!(b>h)){var d=a[h];h=d.match(/^    at ([A-Za-z0-9_. ]+) \(([^)]+):([0-9]+):([0-9]+)\)$/);if(null!=h){d=
h[1].split(".");"$hxClasses"==d[0]&&d.shift();var l=d.pop(),g=h[2],u=z.parseInt(h[3]);h=z.parseInt(h[4]);c.push(ub.FilePos("Anonymous function"==l?ub.LocalFunction():"Global code"==l?null:ub.Method(d.join("."),l),g,u,h))}else c.push(ub.Module(X.trim(d)))}}return c}return 0<b&&Array.isArray(a)?a.slice(b):a};ka.tryHaxeStack=function(a){if(null==a)return[];var b=Error.prepareStackTrace;Error.prepareStackTrace=ka.prepareHxStackTrace;a=a.stack;Error.prepareStackTrace=b;return a};ka.prepareHxStackTrace=
function(a,b){a=[];for(var c=0;c<b.length;){var e=b[c];++c;null!=ka.wrapCallSite&&(e=ka.wrapCallSite(e));var f=null,h=e.getFunctionName();if(null!=h){var d=h.lastIndexOf(".");0<=d?(f=h.substring(0,d),h=h.substring(d+1),f=ub.Method(f,h)):f=ub.Method(null,h)}h=e.getFileName();d=null==h?-1:h.indexOf("file:");null!=ka.wrapCallSite&&0<d&&(h=h.substring(d+6));a.push(ub.FilePos(f,h,e.getLineNumber(),e.getColumnNumber()))}return a};ka.normalize=function(a,b){null==b&&(b=0);if(Array.isArray(a)&&0<b)return a.slice(b);
if("string"==typeof a){switch(a.substring(0,6)){case "Error\n":case "Error:":++b}return ka.skipLines(a,b)}return a};ka.skipLines=function(a,b,c){null==c&&(c=0);return 0<b?(c=a.indexOf("\n",c),0>c?"":ka.skipLines(a,--b,c+1)):a.substring(c)};var Ed=function(){};k["haxe._Unserializer.DefaultResolver"]=Ed;Ed.__name__=!0;Ed.prototype={resolveClass:function(a){return k[a]},resolveEnum:function(a){return v[a]},__class__:Ed};var zb=function(a){this.buf=a;this.length=this.buf.length;this.pos=0;this.scache=
[];this.cache=[];a=zb.DEFAULT_RESOLVER;null==a&&(a=new Ed,zb.DEFAULT_RESOLVER=a);this.resolver=a};k["haxe.Unserializer"]=zb;zb.__name__=!0;zb.initCodes=function(){for(var a=[],b=0,c=zb.BASE64.length;b<c;){var e=b++;a[zb.BASE64.charCodeAt(e)]=e}return a};zb.run=function(a){return(new zb(a)).unserialize()};zb.prototype={readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var e=this.buf.charCodeAt(this.pos);if(e!=e)break;if(45==e){if(this.pos!=c)break;b=!0}else{if(48>e||57<e)break;a=10*a+(e-48)}this.pos++}b&&
(a*=-1);return a},readFloat:function(){for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(b!=b)break;if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return parseFloat(F.substr(this.buf,a,this.pos-a))},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw B.thrown("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if("string"!=typeof b)throw B.thrown("Invalid object key");var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,
b){if(58!=this.buf.charCodeAt(this.pos++))throw B.thrown("Invalid enum format");var c=this.readDigits();if(0==c)return ja.createEnum(a,b);for(var e=[];0<c--;)e.push(this.unserialize());return ja.createEnum(a,b,e)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var a=this.unserialize(),b=this.resolver.resolveClass(a);if(null==b)throw B.thrown("Class not found "+a);return b;case 66:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw B.thrown("Enum not found "+
a);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw B.thrown("Class not found "+a);b=Object.create(b.prototype);this.cache.push(b);b.hxUnserialize(this);if(103!=this.buf.charCodeAt(this.pos++))throw B.thrown("Invalid custom data");return b;case 77:a=new Rb;this.cache.push(a);for(var c;104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw B.thrown("Invalid string reference");
return this.scache[a];case 97:b=[];for(this.cache.push(b);;){c=this.buf.charCodeAt(this.pos);if(104==c){this.pos++;break}117==c?(this.pos++,a=this.readDigits(),b[b.length+a-1]=null):b.push(this.unserialize())}return b;case 98:a=new W;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),c=this.unserialize(),a.h[b]=c;this.pos++;return a;case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw B.thrown("Class not found "+a);b=Object.create(b.prototype);
this.cache.push(b);this.unserializeObject(b);return b;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:a=this.unserialize();c=this.resolver.resolveEnum(a);if(null==c)throw B.thrown("Enum not found "+a);this.pos++;for(var e=this.readDigits(),f=c.__constructs__,h=Array(f.length),d=0,l=f.length;d<l;)b=d++,h[b]=f[b]._hx_name;b=h[e];if(null==b)throw B.thrown("Unknown enum index "+a+"@"+e);b=this.unserializeEnum(c,b);this.cache.push(b);return b;case 107:return NaN;
case 108:b=new Sb;for(this.cache.push(b);104!=this.buf.charCodeAt(this.pos);)b.add(this.unserialize());this.pos++;return b;case 109:return-Infinity;case 110:return null;case 111:return b={},this.cache.push(b),this.unserializeObject(b),b;case 112:return Infinity;case 113:a=new Bb;this.cache.push(a);for(c=this.buf.charCodeAt(this.pos++);58==c;)b=this.readDigits(),c=this.unserialize(),a.h[b]=c,c=this.buf.charCodeAt(this.pos++);if(104!=c)throw B.thrown("Invalid IntMap format");return a;case 114:a=this.readDigits();
if(0>a||a>=this.cache.length)throw B.thrown("Invalid reference");return this.cache[a];case 115:a=this.readDigits();c=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<a)throw B.thrown("Invalid bytes length");e=zb.CODES;null==e&&(e=zb.initCodes(),zb.CODES=e);b=this.pos;f=a&3;h=b+(a-f);d=new Na(new ArrayBuffer(3*(a>>2)+(2<=f?f-1:0)));for(l=0;b<h;){var g=e[c.charCodeAt(b++)],u=e[c.charCodeAt(b++)];d.b[l++]=(g<<2|u>>4)&255;g=e[c.charCodeAt(b++)];d.b[l++]=(u<<4|g>>2)&255;u=e[c.charCodeAt(b++)];
d.b[l++]=(g<<6|u)&255}2<=f&&(g=e[c.charCodeAt(b++)],u=e[c.charCodeAt(b++)],d.b[l++]=(g<<2|u>>4)&255,3==f&&(g=e[c.charCodeAt(b++)],d.b[l++]=(u<<4|g>>2)&255));this.pos+=a;this.cache.push(d);return d;case 116:return!0;case 118:return 48<=this.buf.charCodeAt(this.pos)&&57>=this.buf.charCodeAt(this.pos)&&48<=this.buf.charCodeAt(this.pos+1)&&57>=this.buf.charCodeAt(this.pos+1)&&48<=this.buf.charCodeAt(this.pos+2)&&57>=this.buf.charCodeAt(this.pos+2)&&48<=this.buf.charCodeAt(this.pos+3)&&57>=this.buf.charCodeAt(this.pos+
3)&&45==this.buf.charCodeAt(this.pos+4)?(b=F.strDate(F.substr(this.buf,this.pos,19)),this.pos+=19):b=new Date(this.readFloat()),this.cache.push(b),b;case 119:a=this.unserialize();c=this.resolver.resolveEnum(a);if(null==c)throw B.thrown("Enum not found "+a);b=this.unserializeEnum(c,this.unserialize());this.cache.push(b);return b;case 120:throw B.thrown(this.unserialize());case 121:a=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<a)throw B.thrown("Invalid string length");
b=F.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));this.scache.push(b);return b;case 122:return 0}this.pos--;throw B.thrown("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos);},__class__:zb};var ld=function(a,b,c){B.call(this,String(a),b,c);this.value=a;this.__skipStack++};k["haxe.ValueException"]=ld;ld.__name__=!0;ld.__super__=B;ld.prototype=x(B.prototype,{unwrap:function(){return this.value},__class__:ld});var Rc=function(){this.a1=1;this.a2=
0};k["haxe.crypto.Adler32"]=Rc;Rc.__name__=!0;Rc.read=function(a){var b=new Rc,c=a.readByte(),e=a.readByte(),f=a.readByte();a=a.readByte();b.a1=f<<8|a;b.a2=c<<8|e;return b};Rc.prototype={update:function(a,b,c){var e=this.a1,f=this.a2,h=b;for(b+=c;h<b;)c=h++,e=(e+a.b[c])%65521,f=(f+e)%65521;this.a1=e;this.a2=f},equals:function(a){return a.a1==this.a1?a.a2==this.a2:!1},__class__:Rc};var Na=function(a){this.length=a.byteLength;this.b=new Uint8Array(a);this.b.bufferValue=a;a.hxBytes=this;a.bytes=this.b};
k["haxe.io.Bytes"]=Na;Na.__name__=!0;Na.ofString=function(a,b){b=[];for(var c=0;c<a.length;){var e=a.charCodeAt(c++);55296<=e&&56319>=e&&(e=e-55232<<10|a.charCodeAt(c++)&1023);127>=e?b.push(e):(2047>=e?b.push(192|e>>6):(65535>=e?b.push(224|e>>12):(b.push(240|e>>18),b.push(128|e>>12&63)),b.push(128|e>>6&63)),b.push(128|e&63))}return new Na((new Uint8Array(b)).buffer)};Na.ofData=function(a){var b=a.hxBytes;return null!=b?b:new Na(a)};Na.prototype={blit:function(a,b,c,e){if(0>a||0>c||0>e||a+e>this.length||
c+e>b.length)throw B.thrown(Db.OutsideBounds);0==c&&e==b.b.byteLength?this.b.set(b.b,a):this.b.set(b.b.subarray(c,c+e),a)},getString:function(a,b,c){if(0>a||0>b||a+b>this.length)throw B.thrown(Db.OutsideBounds);c="";var e=this.b,f=E.fromCharCode,h=a;for(a+=b;h<a;)if(b=e[h++],128>b){if(0==b)break;c+=f(b)}else if(224>b)c+=f((b&63)<<6|e[h++]&127);else if(240>b){var d=e[h++];c+=f((b&31)<<12|(d&127)<<6|e[h++]&127)}else{d=e[h++];var l=e[h++];b=(b&15)<<18|(d&127)<<12|(l&127)<<6|e[h++]&127;c+=f((b>>10)+55232);
c+=f(b&1023|56320)}return c},toString:function(){return this.getString(0,this.length)},__class__:Na};var Yc=v["haxe.ds.Either"]={__ename__:!0,__constructs__:null,Left:(g=function(a){return{_hx_index:0,v:a,__enum__:"haxe.ds.Either",toString:d}},g._hx_name="Left",g.__params__=["v"],g),Right:(g=function(a){return{_hx_index:1,v:a,__enum__:"haxe.ds.Either",toString:d}},g._hx_name="Right",g.__params__=["v"],g)};Yc.__constructs__=[Yc.Left,Yc.Right];var Bb=function(){this.h={}};k["haxe.ds.IntMap"]=Bb;Bb.__name__=
!0;Bb.__interfaces__=[Jc];Bb.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(+b);return new ed(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a]}}},toString:function(){var a=
"{";for(var b=this.keys();b.hasNext();){var c=b.next();a+=null==c?"null":""+c;a+=" => ";a+=z.string(z.string(this.h[c]));b.hasNext()&&(a+=", ")}return a+"}"},__class__:Bb};var Sb=function(){this.length=0};k["haxe.ds.List"]=Sb;Sb.__name__=!0;Sb.prototype={add:function(a){a=new md(a,null);null==this.h?this.h=a:this.q.next=a;this.q=a;this.length++},push:function(a){this.h=a=new md(a,this.h);null==this.q&&(this.q=a);this.length++},first:function(){return null==this.h?null:this.h.item},pop:function(){if(null==
this.h)return null;var a=this.h.item;this.h=this.h.next;null==this.h&&(this.q=null);this.length--;return a},isEmpty:function(){return null==this.h},toString:function(){var a,b=!0,c=this.h;for(a="{";null!=c;)b?b=!1:a+=", ",a+=z.string(z.string(c.item)),c=c.next;return a+"}"},__class__:Sb};var md=function(a,b){this.item=a;this.next=b};k["haxe.ds._List.ListNode"]=md;md.__name__=!0;md.prototype={__class__:md};var Rb=function(){this.h={__keys__:{}}};k["haxe.ds.ObjectMap"]=Rb;Rb.__name__=!0;Rb.__interfaces__=
[Jc];Rb.prototype={set:function(a,b){var c=a.__id__;null==c&&(c=a.__id__=w.$haxeUID++);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=this.h.__keys__[a.__id__]},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return new ed(a)},toString:function(){var a="{";for(var b=
this.keys();b.hasNext();){var c=b.next();a+=z.string(z.string(c));a+=" => ";a+=z.string(z.string(this.h[c.__id__]));b.hasNext()&&(a+=", ")}return a+"}"},__class__:Rb};var W=function(){this.h=Object.create(null)};k["haxe.ds.StringMap"]=W;W.__name__=!0;W.__interfaces__=[Jc];W.stringify=function(a){var b="{",c=!0,e;for(e in a)c?c=!1:b+=",",b+=e+" => "+z.string(a[e]);return b+"}"};W.prototype={exists:function(a){return Object.prototype.hasOwnProperty.call(this.h,a)},get:function(a){return this.h[a]},
set:function(a,b){this.h[a]=b},remove:function(a){return Object.prototype.hasOwnProperty.call(this.h,a)?(delete this.h[a],!0):!1},toString:function(){return W.stringify(this.h)},__class__:W};var Kc=function(a,b,c){B.call(this,a,b);this.posInfos=null==c?{fileName:"(unknown)",lineNumber:0,className:"(unknown)",methodName:"(unknown)"}:c;this.__skipStack++};k["haxe.exceptions.PosException"]=Kc;Kc.__name__=!0;Kc.__super__=B;Kc.prototype=x(B.prototype,{toString:function(){return""+B.prototype.toString.call(this)+
" in "+this.posInfos.className+"."+this.posInfos.methodName+" at "+this.posInfos.fileName+":"+this.posInfos.lineNumber},__class__:Kc});var nd=function(a,b,c){null==a&&(a="Not implemented");Kc.call(this,a,b,c);this.__skipStack++};k["haxe.exceptions.NotImplementedException"]=nd;nd.__name__=!0;nd.__super__=Kc;nd.prototype=x(Kc.prototype,{__class__:nd});var od=function(){this.size=this.pos=0};k["haxe.io.BytesBuffer"]=od;od.__name__=!0;od.prototype={addByte:function(a){this.pos==this.size&&this.grow(1);
this.view.setUint8(this.pos++,a)},add:function(a){this.pos+a.length>this.size&&this.grow(a.length);if(0!=this.size){var b=new Uint8Array(a.b.buffer,a.b.byteOffset,a.length);this.u8.set(b,this.pos);this.pos+=a.length}},addBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw B.thrown(Db.OutsideBounds);this.pos+c>this.size&&this.grow(c);0!=this.size&&(a=new Uint8Array(a.b.buffer,a.b.byteOffset+b,c),this.u8.set(a,this.pos),this.pos+=c)},grow:function(a){var b=this.pos+a;for(a=0==this.size?16:this.size;a<
b;)a=3*a>>1;b=new ArrayBuffer(a);var c=new Uint8Array(b);0<this.size&&c.set(this.u8);this.size=a;this.buffer=b;this.u8=c;this.view=new DataView(this.buffer)},getBytes:function(){if(0==this.size)return new Na(new ArrayBuffer(0));var a=new Na(this.buffer);a.length=this.pos;return a},__class__:od};var $c=function(){};k["haxe.io.Input"]=$c;$c.__name__=!0;$c.prototype={readByte:function(){throw new nd(null,null,{fileName:"haxe/io/Input.hx",lineNumber:53,className:"haxe.io.Input",methodName:"readByte"});
},readBytes:function(a,b,c){var e=c,f=a.b;if(0>b||0>c||b+c>a.length)throw B.thrown(Db.OutsideBounds);try{for(;0<e;)f[b]=this.readByte(),++b,--e}catch(h){if(ka.lastError=h,!(B.caught(h).unwrap()instanceof pd))throw h;}return c-e},readFullBytes:function(a,b,c){for(;0<c;){var e=this.readBytes(a,b,c);if(0==e)throw B.thrown(Db.Blocked);b+=e;c-=e}},read:function(a){for(var b=new Na(new ArrayBuffer(a)),c=0;0<a;){var e=this.readBytes(b,c,a);if(0==e)throw B.thrown(Db.Blocked);c+=e;a-=e}return b},readInt16:function(){var a=
this.readByte(),b=this.readByte();a=this.bigEndian?b|a<<8:a|b<<8;return 0!=(a&32768)?a-65536:a},readUInt16:function(){var a=this.readByte(),b=this.readByte();return this.bigEndian?b|a<<8:a|b<<8},readInt32:function(){var a=this.readByte(),b=this.readByte(),c=this.readByte(),e=this.readByte();return this.bigEndian?e|c<<8|b<<16|a<<24:a|b<<8|c<<16|e<<24},readString:function(a,b){var c=new Na(new ArrayBuffer(a));this.readFullBytes(c,0,a);return c.getString(0,a,b)},__class__:$c};var Vc=function(a,b,c){null==
b&&(b=0);null==c&&(c=a.length-b);if(0>b||0>c||b+c>a.length)throw B.thrown(Db.OutsideBounds);this.b=a.b;this.pos=b;this.totlen=this.len=c};k["haxe.io.BytesInput"]=Vc;Vc.__name__=!0;Vc.__super__=$c;Vc.prototype=x($c.prototype,{readByte:function(){if(0==this.len)throw B.thrown(new pd);this.len--;return this.b[this.pos++]},readBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw B.thrown(Db.OutsideBounds);if(0==this.len&&0<c)throw B.thrown(new pd);this.len<c&&(c=this.len);var e=this.b;a=a.b;for(var f=
0,h=c;f<h;){var d=f++;a[b+d]=e[this.pos+d]}this.pos+=c;this.len-=c;return c},__class__:Vc});var We=v["haxe.io.Encoding"]={__ename__:!0,__constructs__:null,UTF8:{_hx_name:"UTF8",_hx_index:0,__enum__:"haxe.io.Encoding",toString:d},RawNative:{_hx_name:"RawNative",_hx_index:1,__enum__:"haxe.io.Encoding",toString:d}};We.__constructs__=[We.UTF8,We.RawNative];var pd=function(){};k["haxe.io.Eof"]=pd;pd.__name__=!0;pd.prototype={toString:function(){return"Eof"},__class__:pd};var Db=v["haxe.io.Error"]={__ename__:!0,
__constructs__:null,Blocked:{_hx_name:"Blocked",_hx_index:0,__enum__:"haxe.io.Error",toString:d},Overflow:{_hx_name:"Overflow",_hx_index:1,__enum__:"haxe.io.Error",toString:d},OutsideBounds:{_hx_name:"OutsideBounds",_hx_index:2,__enum__:"haxe.io.Error",toString:d},Custom:(g=function(a){return{_hx_index:3,e:a,__enum__:"haxe.io.Error",toString:d}},g._hx_name="Custom",g.__params__=["e"],g)};Db.__constructs__=[Db.Blocked,Db.Overflow,Db.OutsideBounds,Db.Custom];var Ac=function(a){switch(a){case ".":case "..":this.dir=
a;this.file="";return}var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\");b<c?(this.dir=F.substr(a,0,c),a=F.substr(a,c+1,null),this.backslash=!0):c<b?(this.dir=F.substr(a,0,b),a=F.substr(a,b+1,null)):this.dir=null;b=a.lastIndexOf(".");-1!=b?(this.ext=F.substr(a,b+1,null),this.file=F.substr(a,0,b)):(this.ext=null,this.file=a)};k["haxe.io.Path"]=Ac;Ac.__name__=!0;Ac.directory=function(a){a=new Ac(a);return null==a.dir?"":a.dir};Ac.prototype={__class__:Ac};var ed=function(a){this.current=0;this.array=a};
k["haxe.iterators.ArrayIterator"]=ed;ed.__name__=!0;ed.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},__class__:ed};var Lc=v["haxe.zip.ExtraField"]={__ename__:!0,__constructs__:null,FUnknown:(g=function(a,b){return{_hx_index:0,tag:a,bytes:b,__enum__:"haxe.zip.ExtraField",toString:d}},g._hx_name="FUnknown",g.__params__=["tag","bytes"],g),FInfoZipUnicodePath:(g=function(a,b){return{_hx_index:1,name:a,crc:b,__enum__:"haxe.zip.ExtraField",
toString:d}},g._hx_name="FInfoZipUnicodePath",g.__params__=["name","crc"],g),FUtf8:{_hx_name:"FUtf8",_hx_index:2,__enum__:"haxe.zip.ExtraField",toString:d}};Lc.__constructs__=[Lc.FUnknown,Lc.FInfoZipUnicodePath,Lc.FUtf8];var Nb=v["haxe.zip.Huffman"]={__ename__:!0,__constructs__:null,Found:(g=function(a){return{_hx_index:0,i:a,__enum__:"haxe.zip.Huffman",toString:d}},g._hx_name="Found",g.__params__=["i"],g),NeedBit:(g=function(a,b){return{_hx_index:1,left:a,right:b,__enum__:"haxe.zip.Huffman",toString:d}},
g._hx_name="NeedBit",g.__params__=["left","right"],g),NeedBits:(g=function(a,b){return{_hx_index:2,n:a,table:b,__enum__:"haxe.zip.Huffman",toString:d}},g._hx_name="NeedBits",g.__params__=["n","table"],g)};Nb.__constructs__=[Nb.Found,Nb.NeedBit,Nb.NeedBits];var ge=function(){};k["haxe.zip.HuffTools"]=ge;ge.__name__=!0;ge.prototype={treeDepth:function(a){switch(a._hx_index){case 0:return 0;case 1:var b=a.right;a=this.treeDepth(a.left);b=this.treeDepth(b);return 1+(a<b?a:b);case 2:throw B.thrown("assert");
}},treeCompress:function(a){var b=this.treeDepth(a);if(0==b)return a;if(1==b){if(1==a._hx_index)return b=a.right,Nb.NeedBit(this.treeCompress(a.left),this.treeCompress(b));throw B.thrown("assert");}for(var c=[],e=0,f=1<<b;e<f;)e++,c.push(Nb.Found(-1));this.treeWalk(c,0,0,b,a);return Nb.NeedBits(b,c)},treeWalk:function(a,b,c,e,f){if(1==f._hx_index){var h=f.left,d=f.right;0<e?(this.treeWalk(a,b,c+1,e-1,h),this.treeWalk(a,b|1<<c,c+1,e-1,d)):a[b]=this.treeCompress(f)}else a[b]=this.treeCompress(f)},treeMake:function(a,
b,c,e){if(e>b)throw B.thrown("Invalid huffman");var f=c<<5|e;if(a.h.hasOwnProperty(f))return Nb.Found(a.h[f]);c<<=1;++e;return Nb.NeedBit(this.treeMake(a,b,c,e),this.treeMake(a,b,c|1,e))},make:function(a,b,c,e){if(1==c)return Nb.NeedBit(Nb.Found(0),Nb.Found(0));var f=[],h=[];if(32<e)throw B.thrown("Invalid huffman");for(var d=0,l=e;d<l;)d++,f.push(0),h.push(0);d=0;for(l=c;d<l;){var g=d++;g=a[g+b];if(g>=e)throw B.thrown("Invalid huffman");f[g]++}var u=0;d=1;for(l=e-1;d<l;)g=d++,u=u+f[g]<<1,h[g]=u;
f=new Bb;d=0;for(l=c;d<l;)g=d++,c=a[g+b],0!=c&&(u=h[c-1],h[c-1]=u+1,f.h[u<<5|c]=g);return this.treeCompress(Nb.NeedBit(this.treeMake(f,e,0,1),this.treeMake(f,e,1,1)))},__class__:ge};var he=function(a){this.buffer=new Na(new ArrayBuffer(65536));this.pos=0;a&&(this.crc=new Rc)};k["haxe.zip._InflateImpl.Window"]=he;he.__name__=!0;he.prototype={slide:function(){null!=this.crc&&this.crc.update(this.buffer,0,32768);var a=new Na(new ArrayBuffer(65536));this.pos-=32768;a.blit(0,this.buffer,32768,this.pos);
this.buffer=a},addBytes:function(a,b,c){65536<this.pos+c&&this.slide();this.buffer.blit(this.pos,a,b,c);this.pos+=c},addByte:function(a){65536==this.pos&&this.slide();this.buffer.b[this.pos]=a&255;this.pos++},getLastChar:function(){return this.buffer.b[this.pos-1]},available:function(){return this.pos},checksum:function(){null!=this.crc&&this.crc.update(this.buffer,0,this.pos);return this.crc},__class__:he};var cb=v["haxe.zip._InflateImpl.State"]={__ename__:!0,__constructs__:null,Head:{_hx_name:"Head",
_hx_index:0,__enum__:"haxe.zip._InflateImpl.State",toString:d},Block:{_hx_name:"Block",_hx_index:1,__enum__:"haxe.zip._InflateImpl.State",toString:d},CData:{_hx_name:"CData",_hx_index:2,__enum__:"haxe.zip._InflateImpl.State",toString:d},Flat:{_hx_name:"Flat",_hx_index:3,__enum__:"haxe.zip._InflateImpl.State",toString:d},Crc:{_hx_name:"Crc",_hx_index:4,__enum__:"haxe.zip._InflateImpl.State",toString:d},Dist:{_hx_name:"Dist",_hx_index:5,__enum__:"haxe.zip._InflateImpl.State",toString:d},DistOne:{_hx_name:"DistOne",
_hx_index:6,__enum__:"haxe.zip._InflateImpl.State",toString:d},Done:{_hx_name:"Done",_hx_index:7,__enum__:"haxe.zip._InflateImpl.State",toString:d}};cb.__constructs__=[cb.Head,cb.Block,cb.CData,cb.Flat,cb.Crc,cb.Dist,cb.DistOne,cb.Done];var Za=function(a,b,c){null==c&&(c=!0);null==b&&(b=!0);this.isFinal=!1;this.htools=new ge;this.huffman=this.buildFixedHuffman();this.huffdist=null;this.dist=this.len=0;this.state=b?cb.Head:cb.Block;this.input=a;this.needed=this.nbits=this.bits=0;this.output=null;this.outpos=
0;this.lengths=[];this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.window=new he(c)};k["haxe.zip.InflateImpl"]=Za;Za.__name__=!0;
Za.prototype={buildFixedHuffman:function(){if(null!=Za.FIXED_HUFFMAN)return Za.FIXED_HUFFMAN;for(var a=[],b=0;288>b;){var c=b++;a.push(143>=c?8:255>=c?9:279>=c?7:8)}Za.FIXED_HUFFMAN=this.htools.make(a,0,288,10);return Za.FIXED_HUFFMAN},readBytes:function(a,b,c){this.needed=c;this.outpos=b;this.output=a;if(0<c)for(;this.inflateLoop(););return c-this.needed},getBits:function(a){for(;this.nbits<a;)this.bits|=this.input.readByte()<<this.nbits,this.nbits+=8;var b=this.bits&(1<<a)-1;this.nbits-=a;this.bits>>=
a;return b},getBit:function(){0==this.nbits&&(this.nbits=8,this.bits=this.input.readByte());var a=1==(this.bits&1);this.nbits--;this.bits>>=1;return a},getRevBits:function(a){return 0==a?0:this.getBit()?1<<a-1|this.getRevBits(a-1):this.getRevBits(a-1)},resetBits:function(){this.nbits=this.bits=0},addBytes:function(a,b,c){this.window.addBytes(a,b,c);this.output.blit(this.outpos,a,b,c);this.needed-=c;this.outpos+=c},addByte:function(a){this.window.addByte(a);this.output.b[this.outpos]=a&255;this.needed--;
this.outpos++},addDistOne:function(a){for(var b=this.window.getLastChar(),c=0;c<a;)c++,this.addByte(b)},addDist:function(a,b){this.addBytes(this.window.buffer,this.window.pos-a,b)},applyHuffman:function(a){switch(a._hx_index){case 0:var b=a.i;return b;case 1:return b=a.left,a=a.right,this.applyHuffman(this.getBit()?a:b);case 2:return b=a.n,this.applyHuffman(a.table[this.getBits(b)])}},inflateLengths:function(a,b){for(var c=0,e=0;c<b;){var f=this.applyHuffman(this.huffman);switch(f){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:e=
f;a[c]=f;++c;break;case 16:f=c+3+this.getBits(2);if(f>b)throw B.thrown("Invalid data");for(;c<f;)a[c]=e,++c;break;case 17:c+=3+this.getBits(3);if(c>b)throw B.thrown("Invalid data");break;case 18:c+=11+this.getBits(7);if(c>b)throw B.thrown("Invalid data");break;default:throw B.thrown("Invalid data");}}},inflateLoop:function(){switch(this.state._hx_index){case 0:var a=this.input.readByte();if(8!=(a&15))throw B.thrown("Invalid data");var b=this.input.readByte(),c=0!=(b&32);if(0!=((a<<8)+b)%31)throw B.thrown("Invalid data");
if(c)throw B.thrown("Unsupported dictionary");this.state=cb.Block;return!0;case 1:switch(this.isFinal=this.getBit(),this.getBits(2)){case 0:this.len=this.input.readUInt16();if(this.input.readUInt16()!=65535-this.len)throw B.thrown("Invalid data");this.state=cb.Flat;a=this.inflateLoop();this.resetBits();return a;case 1:return this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.state=cb.CData,!0;case 2:a=this.getBits(5)+257;b=this.getBits(5)+1;var e=this.getBits(4)+4;c=0;for(var f=e;c<f;){var h=
c++;this.lengths[Za.CODE_LENGTHS_POS[h]]=this.getBits(3)}c=e;for(f=19;c<f;)h=c++,this.lengths[Za.CODE_LENGTHS_POS[h]]=0;this.huffman=this.htools.make(this.lengths,0,19,8);e=[];c=0;for(f=a+b;c<f;)c++,e.push(0);this.inflateLengths(e,a+b);this.huffdist=this.htools.make(e,a,b,16);this.huffman=this.htools.make(e,0,a,16);this.state=cb.CData;return!0;default:throw B.thrown("Invalid data");}case 2:b=this.applyHuffman(this.huffman);if(256>b)return this.addByte(b),0<this.needed;if(256==b)this.state=this.isFinal?
cb.Crc:cb.Block;else{b-=257;a=Za.LEN_EXTRA_BITS_TBL[b];if(-1==a)throw B.thrown("Invalid data");this.len=Za.LEN_BASE_VAL_TBL[b]+this.getBits(a);b=null==this.huffdist?this.getRevBits(5):this.applyHuffman(this.huffdist);a=Za.DIST_EXTRA_BITS_TBL[b];if(-1==a)throw B.thrown("Invalid data");this.dist=Za.DIST_BASE_VAL_TBL[b]+this.getBits(a);if(this.dist>this.window.available())throw B.thrown("Invalid data");this.state=1==this.dist?cb.DistOne:cb.Dist}return!0;case 3:return a=this.len<this.needed?this.len:
this.needed,b=this.input.read(a),this.len-=a,this.addBytes(b,0,a),0==this.len&&(this.state=this.isFinal?cb.Crc:cb.Block),0<this.needed;case 4:a=this.window.checksum();if(null==a)return this.state=cb.Done,!0;b=Rc.read(this.input);if(!a.equals(b))throw B.thrown("Invalid CRC");this.state=cb.Done;return!0;case 5:for(;0<this.len&&0<this.needed;)a=this.len<this.dist?this.len:this.dist,a=this.needed<a?this.needed:a,this.addDist(this.dist,a),this.len-=a;0==this.len&&(this.state=cb.CData);return 0<this.needed;
case 6:return a=this.len<this.needed?this.len:this.needed,this.addDistOne(a),this.len-=a,0==this.len&&(this.state=cb.CData),0<this.needed;case 7:return!1}},__class__:Za};var qd=function(a){this.i=a};k["haxe.zip.Reader"]=qd;qd.__name__=!0;qd.readZip=function(a){return(new qd(a)).read()};qd.prototype={readZipDate:function(){var a=this.i.readUInt16(),b=a>>11&31,c=a>>5&63;a&=31;var e=this.i.readUInt16();return new Date((e>>9)+1980,(e>>5&15)-1,e&31,b,c,a<<1)},readExtraFields:function(a){for(var b=new Sb;0<
a;){if(4>a)throw B.thrown("Invalid extra fields data");var c=this.i.readUInt16(),e=this.i.readUInt16();if(a<e)throw B.thrown("Invalid extra fields data");if(28789==c){var f=this.i.readByte();if(1!=f){var h=new od;h.addByte(f);h.add(this.i.read(e-1));b.add(Lc.FUnknown(c,h.getBytes()))}else c=this.i.readInt32(),f=this.i.read(e-5).toString(),b.add(Lc.FInfoZipUnicodePath(f,c))}else b.add(Lc.FUnknown(c,this.i.read(e)));a-=4+e}return b},readEntryHeader:function(){var a=this.i,b=a.readInt32();if(33639248==
b||101010256==b)return null;if(67324752!=b)throw B.thrown("Invalid Zip Data");a.readUInt16();b=a.readUInt16();var c=0!=(b&2048),e=a.readUInt16(),f=0!=e;if(f&&8!=e)throw B.thrown("Unsupported compression "+e);e=this.readZipDate();var h=a.readInt32(),d=a.readInt32(),l=a.readInt32(),g=a.readInt16(),u=a.readInt16();a=a.readString(g);u=this.readExtraFields(u);c&&u.push(Lc.FUtf8);0!=(b&8)&&(d=-1);return{fileName:a,fileSize:l,fileTime:e,compressed:f,dataSize:d,data:null,crc32:h,extraFields:u}},read:function(){for(var a=
new Sb,b=null;;){var c=this.readEntryHeader();if(null==c)break;if(0>c.dataSize){null==b&&(b=new Na(new ArrayBuffer(65536)));for(var e=new od,f=new Za(this.i,!1,!1);;){var h=f.readBytes(b,0,65536);e.addBytes(b,0,h);if(65536>h)break}c.data=e.getBytes();c.crc32=this.i.readInt32();134695760==c.crc32&&(c.crc32=this.i.readInt32());c.dataSize=this.i.readInt32();c.fileSize=this.i.readInt32();c.dataSize=c.fileSize;c.compressed=!1}else c.data=this.i.read(c.dataSize);a.add(c)}return a},__class__:qd};var sc=
function(a,b){this.message=a;this.pos=b};k["hxjsonast.Error"]=sc;sc.__name__=!0;sc.prototype={__class__:sc};var Ca=function(a,b){this.value=a;this.pos=b};k["hxjsonast.Json"]=Ca;Ca.__name__=!0;Ca.prototype={__class__:Ca};var ya=v["hxjsonast.JsonValue"]={__ename__:!0,__constructs__:null,JString:(g=function(a){return{_hx_index:0,s:a,__enum__:"hxjsonast.JsonValue",toString:d}},g._hx_name="JString",g.__params__=["s"],g),JNumber:(g=function(a){return{_hx_index:1,s:a,__enum__:"hxjsonast.JsonValue",toString:d}},
g._hx_name="JNumber",g.__params__=["s"],g),JObject:(g=function(a){return{_hx_index:2,fields:a,__enum__:"hxjsonast.JsonValue",toString:d}},g._hx_name="JObject",g.__params__=["fields"],g),JArray:(g=function(a){return{_hx_index:3,values:a,__enum__:"hxjsonast.JsonValue",toString:d}},g._hx_name="JArray",g.__params__=["values"],g),JBool:(g=function(a){return{_hx_index:4,b:a,__enum__:"hxjsonast.JsonValue",toString:d}},g._hx_name="JBool",g.__params__=["b"],g),JNull:{_hx_name:"JNull",_hx_index:5,__enum__:"hxjsonast.JsonValue",
toString:d}};ya.__constructs__=[ya.JString,ya.JNumber,ya.JObject,ya.JArray,ya.JBool,ya.JNull];var ie=function(a,b,c){this.name=a;this.namePos=b;this.value=c};k["hxjsonast.JObjectField"]=ie;ie.__name__=!0;ie.prototype={__class__:ie};var ae=function(a,b){this.source=a;this.filename=b;this.pos=0};k["hxjsonast.Parser"]=ae;ae.__name__=!0;ae.prototype={doParse:function(){for(var a=this.parseRec(),b;;){var c=b=this.source.charCodeAt(this.pos++);if(c!=c)break;switch(b){case 9:case 10:case 13:case 32:break;
default:this.invalidChar()}}return a},parseRec:function(){for(;;){var a=this.source.charCodeAt(this.pos++);switch(a){case 9:case 10:case 13:case 32:break;case 34:var b=this.pos,c=this.parseString();return new Ca(ya.JString(c),new fa(this.filename,b-1,this.pos));case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:b=this.pos-1;c=45==a;var e=!c;a=48==a;for(var f=!1,h=!1,d=!1,l=!1;;){switch(this.source.charCodeAt(this.pos++)){case 43:case 45:h&&!d||this.invalidNumber(b);
e=!1;d=!0;break;case 46:(c||f||h)&&this.invalidNumber(b);e=!1;f=!0;break;case 48:a&&!f&&this.invalidNumber(b);c&&(c=!1,a=!0);e=!0;break;case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:a&&!f&&this.invalidNumber(b);c&&(c=!1);e=!0;a=!1;break;case 69:case 101:(c||a||h)&&this.invalidNumber(b);e=!1;h=!0;break;default:e||this.invalidNumber(b),this.pos--,l=!0}if(l)break}c=F.substr(this.source,b,this.pos-b);return new Ca(ya.JNumber(c),new fa(this.filename,b,this.pos));case 91:for(b=
[],c=null,e=this.pos-1;;)switch(this.source.charCodeAt(this.pos++)){case 9:case 10:case 13:case 32:break;case 44:c?c=!1:this.invalidChar();break;case 93:return 0==c&&this.invalidChar(),new Ca(ya.JArray(b),new fa(this.filename,e,this.pos));default:c&&this.invalidChar(),this.pos--,b.push(this.parseRec()),c=!0}case 102:b=this.pos;if(97!=this.source.charCodeAt(this.pos++)||108!=this.source.charCodeAt(this.pos++)||115!=this.source.charCodeAt(this.pos++)||101!=this.source.charCodeAt(this.pos++))this.pos=
b,this.invalidChar();return new Ca(ya.JBool(!1),new fa(this.filename,b-1,this.pos));case 110:b=this.pos;if(117!=this.source.charCodeAt(this.pos++)||108!=this.source.charCodeAt(this.pos++)||108!=this.source.charCodeAt(this.pos++))this.pos=b,this.invalidChar();return new Ca(ya.JNull,new fa(this.filename,b-1,this.pos));case 116:b=this.pos;if(114!=this.source.charCodeAt(this.pos++)||117!=this.source.charCodeAt(this.pos++)||101!=this.source.charCodeAt(this.pos++))this.pos=b,this.invalidChar();return new Ca(ya.JBool(!0),
new fa(this.filename,b-1,this.pos));case 123:for(b=[],c=Object.create(null),a=h=e=null,f=this.pos-1;;)switch(this.source.charCodeAt(this.pos++)){case 9:case 10:case 13:case 32:break;case 34:(null!=e||a)&&this.invalidChar();h=this.pos-1;e=this.parseString();h=new fa(this.filename,h,this.pos);if(Object.prototype.hasOwnProperty.call(c,e))throw B.thrown(new sc('Duplicate field name "'+e+'"',h));c[e]=!0;break;case 44:a?a=!1:this.invalidChar();break;case 58:null==e&&this.invalidChar();b.push(new ie(e,h,
this.parseRec()));h=e=null;a=!0;break;case 125:return null==e&&0!=a||this.invalidChar(),new Ca(ya.JObject(b),new fa(this.filename,f,this.pos));default:this.invalidChar()}default:this.invalidChar()}}},parseString:function(){for(var a=this.pos,b=null;;){var c=this.source.charCodeAt(this.pos++);if(34==c)break;if(92==c){null==b&&(b=new Ua);c=this.source;var e=this.pos-a-1;b.b+=null==e?F.substr(c,a,null):F.substr(c,a,e);c=this.source.charCodeAt(this.pos++);switch(c){case 34:case 47:case 92:b.b+=String.fromCodePoint(c);
break;case 98:b.b+=String.fromCodePoint(8);break;case 102:b.b+=String.fromCodePoint(12);break;case 110:b.b+=String.fromCodePoint(10);break;case 114:b.b+=String.fromCodePoint(13);break;case 116:b.b+=String.fromCodePoint(9);break;case 117:a=z.parseInt("0x"+F.substr(this.source,this.pos,4));this.pos+=4;b.b+=String.fromCodePoint(a);break;default:throw B.thrown(new sc("Invalid escape sequence \\"+String.fromCodePoint(c),new fa(this.filename,this.pos-2,this.pos)));}a=this.pos}else if(c!=c)throw this.pos--,
B.thrown(new sc("Unclosed string",new fa(this.filename,a-1,this.pos)));}if(null==b)return F.substr(this.source,a,this.pos-a-1);c=this.source;e=this.pos-a-1;b.b+=null==e?F.substr(c,a,null):F.substr(c,a,e);return b.b},invalidChar:function(){this.pos--;throw B.thrown(new sc("Invalid character: "+this.source.charAt(this.pos),new fa(this.filename,this.pos,this.pos+1)));},invalidNumber:function(a){throw B.thrown(new sc("Invalid number: "+this.source.substring(a,this.pos),new fa(this.filename,a,this.pos)));
},__class__:ae};var fa=function(a,b,c){this.file=a;this.min=b;this.max=c};k["hxjsonast.Position"]=fa;fa.__name__=!0;fa.prototype={__class__:fa};var na=function(){};k["js.Boot"]=na;na.__name__=!0;na.getClass=function(a){if(null==a)return null;if(a instanceof Array)return Array;var b=a.__class__;if(null!=b)return b;a=na.__nativeClassName(a);return null!=a?na.__resolveNativeClass(a):null};na.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;"function"==c&&
(a.__name__||a.__ename__)&&(c="object");switch(c){case "function":return"<function>";case "object":if(a.__enum__){var e=v[a.__enum__].__constructs__[a._hx_index];c=e._hx_name;if(e.__params__){b+="\t";var f=[],h=0;for(e=e.__params__;h<e.length;){var d=e[h];h+=1;f.push(na.__string_rec(a[d],b))}return c+"("+f.join(",")+")"}return c}if(a instanceof Array){c="[";b+="\t";f=0;for(h=a.length;f<h;)e=f++,c+=(0<e?",":"")+na.__string_rec(a[e],b);return c+"]"}try{f=a.toString}catch(l){return ka.lastError=l,"???"}if(null!=
f&&f!=Object.toString&&"function"==typeof f&&(c=a.toString(),"[object Object]"!=c))return c;c="{\n";b+="\t";f=null!=a.hasOwnProperty;h=null;for(h in a)f&&!a.hasOwnProperty(h)||"prototype"==h||"__class__"==h||"__super__"==h||"__interfaces__"==h||"__properties__"==h||(2!=c.length&&(c+=", \n"),c+=b+h+" : "+na.__string_rec(a[h],b));b=b.substring(1);return c+("\n"+b+"}");case "string":return a;default:return String(a)}};na.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;
if(null!=c)for(var e=0,f=c.length;e<f;){var h=e++;h=c[h];if(h==b||na.__interfLoop(h,b))return!0}return na.__interfLoop(a.__super__,b)};na.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array;case $e:return"boolean"==typeof a;case af:return null!=a;case bf:return"number"==typeof a;case cf:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(na.__downcastCheck(a,b))return!0}else{if("object"==
typeof b&&na.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==df&&null!=a.__name__||b==ef&&null!=a.__ename__?!0:null!=a.__enum__?v[a.__enum__]==b:!1}};na.__downcastCheck=function(a,b){return a instanceof b?!0:b.__isInterface__?na.__interfLoop(na.getClass(a),b):!1};na.__cast=function(a,b){if(null==a||na.__instanceof(a,b))return a;throw B.thrown("Cannot cast "+z.string(a)+" to "+z.string(b));};na.__nativeClassName=function(a){a=na.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==
a||"Math"==a||"JSON"==a?null:a};na.__isNativeObj=function(a){return null!=na.__nativeClassName(a)};na.__resolveNativeClass=function(a){return w[a]};var ua=v["json2object.Error"]={__ename__:!0,__constructs__:null,IncorrectType:(g=function(a,b,c){return{_hx_index:0,variable:a,expected:b,pos:c,__enum__:"json2object.Error",toString:d}},g._hx_name="IncorrectType",g.__params__=["variable","expected","pos"],g),IncorrectEnumValue:(g=function(a,b,c){return{_hx_index:1,value:a,expected:b,pos:c,__enum__:"json2object.Error",
toString:d}},g._hx_name="IncorrectEnumValue",g.__params__=["value","expected","pos"],g),InvalidEnumConstructor:(g=function(a,b,c){return{_hx_index:2,value:a,expected:b,pos:c,__enum__:"json2object.Error",toString:d}},g._hx_name="InvalidEnumConstructor",g.__params__=["value","expected","pos"],g),UninitializedVariable:(g=function(a,b){return{_hx_index:3,variable:a,pos:b,__enum__:"json2object.Error",toString:d}},g._hx_name="UninitializedVariable",g.__params__=["variable","pos"],g),UnknownVariable:(g=
function(a,b){return{_hx_index:4,variable:a,pos:b,__enum__:"json2object.Error",toString:d}},g._hx_name="UnknownVariable",g.__params__=["variable","pos"],g),ParserError:(g=function(a,b){return{_hx_index:5,message:a,pos:b,__enum__:"json2object.Error",toString:d}},g._hx_name="ParserError",g.__params__=["message","pos"],g),CustomFunctionException:(g=function(a,b){return{_hx_index:6,e:a,pos:b,__enum__:"json2object.Error",toString:d}},g._hx_name="CustomFunctionException",g.__params__=["e","pos"],g)};ua.__constructs__=
[ua.IncorrectType,ua.IncorrectEnumValue,ua.InvalidEnumConstructor,ua.UninitializedVariable,ua.UnknownVariable,ua.ParserError,ua.CustomFunctionException];var Ib=v["json2object.InternalError"]={__ename__:!0,__constructs__:null,AbstractNoJsonRepresentation:(g=function(a){return{_hx_index:0,name:a,__enum__:"json2object.InternalError",toString:d}},g._hx_name="AbstractNoJsonRepresentation",g.__params__=["name"],g),CannotGenerateSchema:(g=function(a){return{_hx_index:1,name:a,__enum__:"json2object.InternalError",
toString:d}},g._hx_name="CannotGenerateSchema",g.__params__=["name"],g),HandleExpr:{_hx_name:"HandleExpr",_hx_index:2,__enum__:"json2object.InternalError",toString:d},ParsingThrow:{_hx_name:"ParsingThrow",_hx_index:3,__enum__:"json2object.InternalError",toString:d},UnsupportedAbstractEnumType:(g=function(a){return{_hx_index:4,name:a,__enum__:"json2object.InternalError",toString:d}},g._hx_name="UnsupportedAbstractEnumType",g.__params__=["name"],g),UnsupportedEnumAbstractValue:(g=function(a){return{_hx_index:5,
name:a,__enum__:"json2object.InternalError",toString:d}},g._hx_name="UnsupportedEnumAbstractValue",g.__params__=["name"],g),UnsupportedMapKeyType:(g=function(a){return{_hx_index:6,name:a,__enum__:"json2object.InternalError",toString:d}},g._hx_name="UnsupportedMapKeyType",g.__params__=["name"],g),UnsupportedSchemaObjectType:(g=function(a){return{_hx_index:7,name:a,__enum__:"json2object.InternalError",toString:d}},g._hx_name="UnsupportedSchemaObjectType",g.__params__=["name"],g),UnsupportedSchemaType:(g=
function(a){return{_hx_index:8,type:a,__enum__:"json2object.InternalError",toString:d}},g._hx_name="UnsupportedSchemaType",g.__params__=["type"],g)};Ib.__constructs__=[Ib.AbstractNoJsonRepresentation,Ib.CannotGenerateSchema,Ib.HandleExpr,Ib.ParsingThrow,Ib.UnsupportedAbstractEnumType,Ib.UnsupportedEnumAbstractValue,Ib.UnsupportedMapKeyType,Ib.UnsupportedSchemaObjectType,Ib.UnsupportedSchemaType];var Me=function(){};k["json2object.ErrorUtils"]=Me;Me.__name__=!0;Me.convertError=function(a){switch(a._hx_index){case 0:var b=
a.pos;var c=b;break;case 1:c=b=a.pos;break;case 2:c=b=a.pos;break;case 3:c=b=a.pos;break;case 4:c=b=a.pos;break;case 5:c=b=a.pos;break;case 6:c=b=a.pos}b="";if(null!=c){var e=""==c.file?"line":""+c.file+":";1==c.lines.length?b=""+e+c.lines[0].number+": characters "+c.lines[0].start+"-"+c.lines[0].end+" : ":1<c.lines.length&&(b=""+e+c.lines[0].number+": lines "+c.lines[0].number+"-"+c.lines[c.lines.length-1].number+" : ")}switch(a._hx_index){case 0:return c=a.variable,a=a.expected,b+("Variable '"+
c+"' should be of type '"+a+"'");case 1:return c=a.value,a=a.expected,b+("Identifier '"+c+"' isn't part of '"+a+"'");case 2:return c=a.value,a=a.expected,b+("Enum argument '"+c+"' should be of type '"+a+"'");case 3:return c=a.variable,b+("Variable '"+c+"' should be in the json");case 4:return c=a.variable,b+("Variable '"+c+"' isn't part of the schema");case 5:return b+("Parser error: "+a.message);case 6:return a=a.e,b+("Custom function exception: "+(null==a?"null":z.string(a)))}};var $d=function(a){this.linesInfo=
[];for(var b=0,c,e=0,f=0;e<a.length;)switch(a.charAt(e)){case "\n":c=e;this.linesInfo.push({number:f,start:b,end:c});++f;++e;b=e;break;case "\r":c=e;"\n"==a.charAt(e+1)&&++c;this.linesInfo.push({number:f,start:b,end:c});++f;b=e=c+1;break;default:++e}this.linesInfo.push({number:f,start:b,end:e})};k["json2object.PositionUtils"]=$d;$d.__name__=!0;$d.prototype={convertPosition:function(a){var b=a.min,c=a.max;a={file:a.file,min:b+1,max:c+1,lines:[]};var e=0,f=this.linesInfo.length-1;if(b>this.linesInfo[0].end)for(;f>
e;){var h=(e+f)/2|0,d=this.linesInfo[h];d.start==b&&(f=e=h);d.end<b&&(e=h+1);if(d.start>b||d.end>=b&&d.start<b)f=h}for(f=this.linesInfo.length;e<f;){h=e++;d=this.linesInfo[h];if(d.start<=b&&d.end>=c){a.lines.push({number:d.number+1,start:b-d.start+1,end:c-d.start+1});break}d.start<=b&&b<=d.end&&a.lines.push({number:d.number+1,start:b-d.start+1,end:d.end+1});d.start<=c&&c<=d.end&&a.lines.push({number:d.number+1,start:d.start+1,end:c-d.start+1});if(d.start>=c||d.end>=c)break}return a},__class__:$d};
var Td=function(){this.connected=!0;this.buttons=[];this.axes=[]};k["lime._internal.backend.html5.GameDeviceData"]=Td;Td.__name__=!0;Td.prototype={__class__:Td};var L=function(){this.validStatus0=(new Z("Tizen","gi")).match(window.navigator.userAgent)};k["lime._internal.backend.html5.HTML5HTTPRequest"]=L;L.__name__=!0;L.loadImage=function(a){var b=new ob;L.activeRequests<L.requestLimit?(L.activeRequests++,L.__loadImage(a,b,0)):L.requestQueue.add({instance:null,uri:a,promise:b,type:"IMAGE",options:0});
return b.future};L.loadImageFromBytes=function(a,b){var c=URL.createObjectURL(new Blob([a.b.bufferValue],{type:b}));return null!=c?(a=new ob,L.activeRequests<L.requestLimit?(L.activeRequests++,L.__loadImage(c,a,1)):L.requestQueue.add({instance:null,uri:c,promise:a,type:"IMAGE",options:1}),a.future):L.loadImage("data:"+b+";base64,"+bc.encode(a))};L.processQueue=function(){if(L.activeRequests<L.requestLimit&&0<L.requestQueue.length){L.activeRequests++;var a=L.requestQueue.pop();switch(a.type){case "BINARY":a.instance.__loadData(a.uri,
a.promise);break;case "IMAGE":L.__loadImage(a.uri,a.promise,a.options);break;case "TEXT":a.instance.__loadText(a.uri,a.promise);break;default:L.activeRequests--}}};L.__fixHostname=function(a){return null==a?"":a};L.__fixPort=function(a,b){if(null==a||""==a)switch(b){case "ftp:":return"21";case "gopher:":return"70";case "http:":return"80";case "https:":return"443";case "ws:":return"80";case "wss:":return"443";default:return""}return a};L.__fixProtocol=function(a){return null==a||""==a?"http:":a};L.__isInMemoryURI=
function(a){return X.startsWith(a,"data:")?!0:X.startsWith(a,"blob:")};L.__isSameOrigin=function(a){if(null==a||""==a||L.__isInMemoryURI(a))return!0;null==L.originElement&&(L.originElement=window.document.createElement("a"),L.originHostname=L.__fixHostname(w.location.hostname),L.originProtocol=L.__fixProtocol(w.location.protocol),L.originPort=L.__fixPort(w.location.port,L.originProtocol));var b=L.originElement;b.href=a;""==b.hostname&&(b.href=b.href);var c=L.__fixHostname(b.hostname);a=L.__fixProtocol(b.protocol);
b=L.__fixPort(b.port,a);c=""==c||c==L.originHostname;b=""==b||b==L.originPort;return"file:"!=a&&c?b:!1};L.__loadImage=function(a,b,c){var e=new Image;L.__isSameOrigin(a)||(e.crossOrigin="Anonymous");null==L.supportsImageProgress&&(L.supportsImageProgress="onprogress"in e);if(L.supportsImageProgress||L.__isInMemoryURI(a))e.addEventListener("load",function(f){L.__revokeBlobURI(a,c);f=new Mc(null,e.width,e.height);f.__srcImage=e;L.activeRequests--;L.processQueue();b.complete(new Ha(f))},!1),e.addEventListener("progress",
function(a){b.progress(a.loaded,a.total)},!1),e.addEventListener("error",function(e){L.__revokeBlobURI(a,c);L.activeRequests--;L.processQueue();b.error(e.detail)},!1),e.src=a;else{var f=new XMLHttpRequest;f.onload=function(a){L.activeRequests--;L.processQueue();(new Ha).__fromBytes(Na.ofData(f.response),function(a){b.complete(a)})};f.onerror=function(a){b.error(a.message)};f.onprogress=function(a){a.lengthComputable&&b.progress(a.loaded,a.total)};f.open("GET",a,!0);f.responseType="arraybuffer";f.overrideMimeType("text/plain; charset=x-user-defined");
f.send(null)}};L.__revokeBlobURI=function(a,b){0!=(b&1)&&URL.revokeObjectURL(a)};L.prototype={init:function(a){this.parent=a},load:function(a,b,c){this.request=new XMLHttpRequest;"POST"==this.parent.method?this.request.upload.addEventListener("progress",b,!1):this.request.addEventListener("progress",b,!1);this.request.onreadystatechange=c;b="";if(null==this.parent.data){c=Object.keys(this.parent.formData.h);for(var e=c.length,f=0;f<e;){var h=c[f++];0<b.length&&(b+="&");var d=this.parent.formData.h[h];
if(-1<h.indexOf("[]")&&d instanceof Array){var l=[];for(d=y(d);d.hasNext();){var g=d.next();l.push(encodeURIComponent(g))}l=l.join("&amp;"+h+"=");b+=encodeURIComponent(h)+"="+l}else l=encodeURIComponent(h)+"=",h=z.string(d),b+=l+encodeURIComponent(h)}"GET"==this.parent.method&&""!=b&&(a=-1<a.indexOf("?")?a+("&"+b):a+("?"+b),b="")}this.request.open(z.string(this.parent.method),a,!0);0<this.parent.timeout&&(this.request.timeout=this.parent.timeout);this.binary&&(this.request.responseType="arraybuffer");
a=null;l=0;for(c=this.parent.headers;l<c.length;)e=c[l],++l,"Content-Type"==e.name?a=e.value:this.request.setRequestHeader(e.name,e.value);null!=this.parent.contentType&&(a=this.parent.contentType);null==a&&(null!=this.parent.data?a="application/octet-stream":""!=b&&(a="application/x-www-form-urlencoded"));null!=a&&this.request.setRequestHeader("Content-Type",a);this.parent.withCredentials&&(this.request.withCredentials=!0);null!=this.parent.data?this.request.send(this.parent.data.b.bufferValue):
this.request.send(b)},loadData:function(a){var b=new ob;L.activeRequests<L.requestLimit?(L.activeRequests++,this.__loadData(a,b)):L.requestQueue.add({instance:this,uri:a,promise:b,type:"BINARY",options:0});return b.future},loadText:function(a){var b=new ob;L.activeRequests<L.requestLimit?(L.activeRequests++,this.__loadText(a,b)):L.requestQueue.add({instance:this,uri:a,promise:b,type:"TEXT",options:0});return b.future},processResponse:function(){if(this.parent.enableResponseHeaders){this.parent.responseHeaders=
[];for(var a,b,c=0,e=this.request.getAllResponseHeaders().split("\n");c<e.length;)b=e[c],++c,a=X.trim(F.substr(b,0,b.indexOf(":"))),b=X.trim(F.substr(b,b.indexOf(":")+1,null)),""!=a&&this.parent.responseHeaders.push(new je(a,b))}this.parent.responseStatus=this.request.status},__loadData:function(a,b){var c=this;this.binary=!0;this.load(a,function(a){b.progress(a.loaded,a.total)},function(a){4==c.request.readyState&&(null!=c.request.status&&(200<=c.request.status&&400>c.request.status||c.validStatus0&&
0==c.request.status)?(a=null,""==c.request.responseType?null!=c.request.responseText&&(a=Na.ofString(c.request.responseText)):null!=c.request.response&&(a=Na.ofData(c.request.response)),c.processResponse(),b.complete(a)):(c.processResponse(),b.error(c.request.status)),c.request=null,L.activeRequests--,L.processQueue())})},__loadText:function(a,b){var c=this;this.binary=!1;this.load(a,function(a){b.progress(a.loaded,a.total)},function(a){4==c.request.readyState&&(null!=c.request.status&&(200<=c.request.status&&
400>=c.request.status||c.validStatus0&&0==c.request.status)?(c.processResponse(),b.complete(c.request.responseText)):(c.processResponse(),b.error(c.request.status)),c.request=null,L.activeRequests--,L.processQueue())})},__class__:L};var Wc=function(a){this.unusedTouchesPool=new Sb;this.scale=1;this.currentTouches=new Bb;this.parent=a;this.cursor=Hb.DEFAULT;this.cacheMouseY=this.cacheMouseX=0;var b=a.__attributes;Object.prototype.hasOwnProperty.call(b,"context")||(b.context={});this.renderType=b.context.type;
Object.prototype.hasOwnProperty.call(b,"element")&&(a.element=b.element);var c=a.element;Object.prototype.hasOwnProperty.call(b,"allowHighDPI")&&b.allowHighDPI&&"dom"!=this.renderType&&(this.scale=window.devicePixelRatio);a.__scale=this.scale;this.setWidth=Object.prototype.hasOwnProperty.call(b,"width")?b.width:0;this.setHeight=Object.prototype.hasOwnProperty.call(b,"height")?b.height:0;a.__width=this.setWidth;a.__height=this.setHeight;a.id=Wc.windowID++;c instanceof HTMLCanvasElement?this.canvas=
c:"dom"==this.renderType?this.div=window.document.createElement("div"):this.canvas=window.document.createElement("canvas");if(null!=this.canvas){var e=this.canvas.style;e.setProperty("-webkit-transform","translateZ(0)",null);e.setProperty("transform","translateZ(0)",null)}else null!=this.div&&(e=this.div.style,e.setProperty("-webkit-transform","translate3D(0,0,0)",null),e.setProperty("transform","translate3D(0,0,0)",null),e.position="relative",e.overflow="hidden",e.setProperty("-webkit-user-select",
"none",null),e.setProperty("-moz-user-select","none",null),e.setProperty("-ms-user-select","none",null),e.setProperty("-o-user-select","none",null));0==a.__width&&0==a.__height&&(null!=c?(a.__width=c.clientWidth,a.__height=c.clientHeight):(a.__width=window.innerWidth,a.__height=window.innerHeight),this.cacheElementWidth=a.__width,this.cacheElementHeight=a.__height,this.resizeElement=!0);null!=this.canvas?(this.canvas.width=Math.round(a.__width*this.scale),this.canvas.height=Math.round(a.__height*
this.scale),this.canvas.style.width=a.__width+"px",this.canvas.style.height=a.__height+"px"):(this.div.style.width=a.__width+"px",this.div.style.height=a.__height+"px");if(Object.prototype.hasOwnProperty.call(b,"resizable")&&b.resizable||!Object.prototype.hasOwnProperty.call(b,"width")&&0==this.setWidth&&0==this.setHeight)a.__resizable=!0;this.updateSize();if(null!=c){null!=this.canvas?c!=this.canvas&&c.appendChild(this.canvas):c.appendChild(this.div);b="mousedown mouseenter mouseleave mousemove mouseup wheel".split(" ");
for(e=0;e<b.length;){var f=b[e];++e;c.addEventListener(f,n(this,this.handleMouseEvent),!0)}c.addEventListener("contextmenu",n(this,this.handleContextMenuEvent),!0);c.addEventListener("dragstart",n(this,this.handleDragEvent),!0);c.addEventListener("dragover",n(this,this.handleDragEvent),!0);c.addEventListener("drop",n(this,this.handleDragEvent),!0);c.addEventListener("touchstart",n(this,this.handleTouchEvent),!0);c.addEventListener("touchmove",n(this,this.handleTouchEvent),!0);c.addEventListener("touchend",
n(this,this.handleTouchEvent),!0);c.addEventListener("touchcancel",n(this,this.handleTouchEvent),!0);c.addEventListener("gamepadconnected",n(this,this.handleGamepadEvent),!0);c.addEventListener("gamepaddisconnected",n(this,this.handleGamepadEvent),!0)}this.createContext();"webgl"==a.context.type&&(this.canvas.addEventListener("webglcontextlost",n(this,this.handleContextEvent),!1),this.canvas.addEventListener("webglcontextrestored",n(this,this.handleContextEvent),!1))};k["lime._internal.backend.html5.HTML5Window"]=
Wc;Wc.__name__=!0;Wc.prototype={close:function(){this.parent.application.__removeWindow(this.parent)},createContext:function(){var a=new ke,b=this.parent.__attributes.context;a.window=this.parent;a.attributes=b;if(null!=this.div)a.dom=this.div,a.type="dom",a.version="";else if(null!=this.canvas){var c=null,e="canvas"==this.renderType,f="opengl"==this.renderType||"opengles"==this.renderType||"webgl"==this.renderType,h=!Object.prototype.hasOwnProperty.call(b,"version")||"1"!=b.version,d=!1;if(f||!e&&
(!Object.prototype.hasOwnProperty.call(b,"hardware")||b.hardware)){e=Object.prototype.hasOwnProperty.call(b,"background")&&null==b.background;f=Object.prototype.hasOwnProperty.call(b,"colorDepth")?b.colorDepth:16;var l=Object.prototype.hasOwnProperty.call(b,"antialiasing")&&0<b.antialiasing,g=Object.prototype.hasOwnProperty.call(b,"depth")?b.depth:!0;b=Object.prototype.hasOwnProperty.call(b,"stencil")&&b.stencil;b={alpha:e||16<f,antialias:l,depth:g,premultipliedAlpha:!0,stencil:b,preserveDrawingBuffer:!1,
failIfMajorPerformanceCaveat:!1};e=["webgl","experimental-webgl"];h&&e.unshift("webgl2");for(h=0;h<e.length&&(f=e[h],++h,c=this.canvas.getContext(f,b),null!=c&&"webgl2"==f&&(d=!0),null==c););}null==c?(a.canvas2D=this.canvas.getContext("2d"),a.type="canvas",a.version=""):(a.webgl=ff.fromWebGL2RenderContext(c),d&&(a.webgl2=c),null==rd.context&&(rd.context=c,rd.type="webgl",rd.version=d?2:1),a.type="webgl",a.version=d?"2":"1")}this.parent.context=a},handleContextEvent:function(a){switch(a.type){case "webglcontextlost":a.cancelable&&
a.preventDefault();this.parent.context=null;this.parent.onRenderContextLost.dispatch();break;case "webglcontextrestored":this.createContext(),this.parent.onRenderContextRestored.dispatch(this.parent.context)}},handleContextMenuEvent:function(a){(this.parent.onMouseUp.canceled||this.parent.onMouseDown.canceled)&&a.cancelable&&a.preventDefault()},handleDragEvent:function(a){switch(a.type){case "dragover":return a.preventDefault(),!1;case "dragstart":if("img"==na.__cast(a.target,HTMLElement).nodeName.toLowerCase()&&
a.cancelable)return a.preventDefault(),!1;break;case "drop":if(null!=a.dataTransfer&&0<a.dataTransfer.files.length)return this.parent.onDropFile.dispatch(a.dataTransfer.files),a.preventDefault(),!1}return!0},handleGamepadEvent:function(a){switch(a.type){case "gamepadconnected":fb.__connect(a.gamepad.index);"standard"==a.gamepad.mapping&&Ra.__connect(a.gamepad.index);break;case "gamepaddisconnected":fb.__disconnect(a.gamepad.index),Ra.__disconnect(a.gamepad.index)}},handleMouseEvent:function(a){if("wheel"!=
a.type){if(null!=this.parent.element)if(null!=this.canvas){var b=this.canvas.getBoundingClientRect();var c=this.parent.__width/b.width*(a.clientX-b.left);b=this.parent.__height/b.height*(a.clientY-b.top)}else null!=this.div?(b=this.div.getBoundingClientRect(),c=a.clientX-b.left,b=a.clientY-b.top):(b=this.parent.element.getBoundingClientRect(),c=this.parent.__width/b.width*(a.clientX-b.left),b=this.parent.__height/b.height*(a.clientY-b.top));else c=a.clientX,b=a.clientY;switch(a.type){case "mousedown":a.currentTarget==
this.parent.element&&window.addEventListener("mouseup",n(this,this.handleMouseEvent));this.parent.onMouseDown.dispatch(c,b,a.button);this.parent.onMouseDown.canceled&&a.cancelable&&a.preventDefault();break;case "mouseenter":a.target==this.parent.element&&(this.parent.onEnter.dispatch(),this.parent.onEnter.canceled&&a.cancelable&&a.preventDefault());break;case "mouseleave":a.target==this.parent.element&&(this.parent.onLeave.dispatch(),this.parent.onLeave.canceled&&a.cancelable&&a.preventDefault());
break;case "mousemove":if(c!=this.cacheMouseX||b!=this.cacheMouseY)this.parent.onMouseMove.dispatch(c,b),this.parent.onMouseMoveRelative.dispatch(c-this.cacheMouseX,b-this.cacheMouseY),(this.parent.onMouseMove.canceled||this.parent.onMouseMoveRelative.canceled)&&a.cancelable&&a.preventDefault();break;case "mouseup":window.removeEventListener("mouseup",n(this,this.handleMouseEvent)),a.currentTarget==this.parent.element&&a.stopPropagation(),this.parent.onMouseUp.dispatch(c,b,a.button),this.parent.onMouseUp.canceled&&
a.cancelable&&a.preventDefault()}this.cacheMouseX=c;this.cacheMouseY=b}else{switch(a.deltaMode){case 0:c=cc.PIXELS;break;case 1:c=cc.LINES;break;case 2:c=cc.PAGES;break;default:c=cc.UNKNOWN}this.parent.onMouseWheel.dispatch(a.deltaX,-a.deltaY,c);this.parent.onMouseWheel.canceled&&a.cancelable&&a.preventDefault()}},handleResizeEvent:function(a){this.primaryTouch=null;this.updateSize()},handleTouchEvent:function(a){a.cancelable&&a.preventDefault();var b=null;null!=this.parent.element&&(b=null!=this.canvas?
this.canvas.getBoundingClientRect():null!=this.div?this.div.getBoundingClientRect():this.parent.element.getBoundingClientRect());var c=this.setWidth,e=this.setHeight;if(0==c||0==e)null!=b?(c=b.width,e=b.height):e=c=1;for(var f,h,d,l,g,u=0,r=a.changedTouches;u<r.length;){var q=r[u];++u;null!=b?(h=c/b.width*(q.clientX-b.left),d=e/b.height*(q.clientY-b.top)):(h=q.clientX,d=q.clientY);if("touchstart"==a.type)f=this.unusedTouchesPool.pop(),null==f?f=new Eb(h/c,d/e,q.identifier,0,0,q.force,this.parent.id):
(f.x=h/c,f.y=d/e,f.id=q.identifier,f.dx=0,f.dy=0,f.pressure=q.force,f.device=this.parent.id),this.currentTouches.h[q.identifier]=f,Eb.onStart.dispatch(f),null==this.primaryTouch&&(this.primaryTouch=f),f==this.primaryTouch&&this.parent.onMouseDown.dispatch(h,d,0);else if(f=this.currentTouches.h[q.identifier],null!=f)switch(l=f.x,g=f.y,f.x=h/c,f.y=d/e,f.dx=f.x-l,f.dy=f.y-g,f.pressure=q.force,a.type){case "touchcancel":Eb.onCancel.dispatch(f);this.currentTouches.remove(q.identifier);this.unusedTouchesPool.add(f);
f==this.primaryTouch&&(this.primaryTouch=null);break;case "touchend":Eb.onEnd.dispatch(f);this.currentTouches.remove(q.identifier);this.unusedTouchesPool.add(f);f==this.primaryTouch&&(this.parent.onMouseUp.dispatch(h,d,0),this.primaryTouch=null);break;case "touchmove":Eb.onMove.dispatch(f),f==this.primaryTouch&&this.parent.onMouseMove.dispatch(h,d)}}},updateSize:function(){if(this.parent.__resizable){if(null!=this.parent.element){var a=this.parent.element.clientWidth;var b=this.parent.element.clientHeight}else a=
window.innerWidth,b=window.innerHeight;if(a!=this.cacheElementWidth||b!=this.cacheElementHeight){this.cacheElementWidth=a;this.cacheElementHeight=b;var c=this.resizeElement||0==this.setWidth&&0==this.setHeight;if(null!=this.parent.element&&(null==this.div||null!=this.div&&c))if(c){if(this.parent.__width!=a||this.parent.__height!=b)this.parent.__width=a,this.parent.__height=b,null!=this.canvas?this.parent.element!=this.canvas&&(this.canvas.width=Math.round(a*this.scale),this.canvas.height=Math.round(b*
this.scale),this.canvas.style.width=a+"px",this.canvas.style.height=b+"px"):(this.div.style.width=a+"px",this.div.style.height=b+"px"),this.parent.onResize.dispatch(a,b)}else{c=0!=this.setWidth?a/this.setWidth:1;var e=0!=this.setHeight?b/this.setHeight:1,f=a,h=b,d=0,l=0;c<e?(h=Math.floor(this.setHeight*c),l=Math.floor((b-h)/2)):(f=Math.floor(this.setWidth*e),d=Math.floor((a-f)/2));null!=this.canvas?this.parent.element!=this.canvas&&(this.canvas.style.width=f+"px",this.canvas.style.height=h+"px",this.canvas.style.marginLeft=
d+"px",this.canvas.style.marginTop=l+"px"):(this.div.style.width=f+"px",this.div.style.height=h+"px",this.div.style.marginLeft=d+"px",this.div.style.marginTop=l+"px")}}}},__class__:Wc};var bc=function(){};k["lime._internal.format.Base64"]=bc;bc.__name__=!0;bc.encode=function(a){var b=[],c=bc.DICTIONARY,e=bc.EXTENDED_DICTIONARY,f=a.length,h=Math.floor(f/3),d=2*h;b.length=2*Math.ceil(f/3);for(var l=0,g=0,u;g<d;)u=a.b[l]<<16|a.b[l+1]<<8|a.b[l+2],b[g]=e[u>>12&4095],b[g+1]=e[u&4095],l+=3,g+=2;switch(f-
3*h){case 1:u=a.b[l]<<16;b[g]=e[u>>12&4095];b[g+1]="==";break;case 2:u=a.b[l]<<16|a.b[l+1]<<8,b[g]=e[u>>12&4095],b[g+1]=c[u>>6&63]+"="}return b.join("")};var Ne=function(){};k["lime._internal.format.Deflate"]=Ne;Ne.__name__=!0;Ne.decompress=function(a){a=pako.inflateRaw(a.b.bufferValue);return Na.ofData(a)};var Oe=function(){};k["lime._internal.format.GZip"]=Oe;Oe.__name__=!0;Oe.decompress=function(a){a=pako.ungzip(a.b.bufferValue);return Na.ofData(a)};var Pe=function(){};k["lime._internal.format.LZMA"]=
Pe;Pe.__name__=!0;Pe.decompress=function(a){return null};var Qe=function(){};k["lime._internal.format.Zlib"]=Qe;Qe.__name__=!0;Qe.decompress=function(a){a=pako.inflate(a.b.bufferValue);return Na.ofData(a)};var kb=function(){};k["lime._internal.graphics.ImageCanvasUtil"]=kb;kb.__name__=!0;kb.convertToCanvas=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage?(null==c.__srcCanvas&&(kb.createCanvas(a,c.__srcImage.width,c.__srcImage.height),c.__srcContext.drawImage(c.__srcImage,0,0)),c.__srcImage=
null):null==c.__srcCanvas&&null!=c.data?(a.set_transparent(!0),kb.createCanvas(a,c.width,c.height),kb.createImageData(a),c.__srcContext.putImageData(c.__srcImageData,0,0)):a.type==gc.DATA&&null!=c.__srcImageData&&a.dirty&&(c.__srcContext.putImageData(c.__srcImageData,0,0),a.dirty=!1);b?(c.data=null,c.__srcImageData=null):null==c.data&&null!=c.__srcImageData&&(c.data=c.__srcImageData.data);a.type=gc.CANVAS};kb.convertToData=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage&&kb.convertToCanvas(a);
if(null!=c.__srcCanvas&&null==c.data)kb.createImageData(a),a.type==gc.CANVAS&&(a.dirty=!1);else if(a.type==gc.CANVAS&&null!=c.__srcCanvas&&a.dirty){if(null==c.__srcImageData)kb.createImageData(a);else{c.__srcImageData=c.__srcContext.getImageData(0,0,c.width,c.height);var e=c.__srcImageData.data.buffer;e=null!=e?new Uint8Array(e):null;c.data=e}a.dirty=!1}b&&(a.buffer.__srcCanvas=null,a.buffer.__srcContext=null);a.type=gc.DATA};kb.createCanvas=function(a,b,c){var e=a.buffer;null==e.__srcCanvas&&(e.__srcCanvas=
window.document.createElement("canvas"),e.__srcCanvas.width=b,e.__srcCanvas.height=c,a.get_transparent()?e.__srcContext=e.__srcCanvas.getContext("2d"):(a.get_transparent()||e.__srcCanvas.setAttribute("moz-opaque","true"),e.__srcContext=e.__srcCanvas.getContext("2d",{alpha:!1})))};kb.createImageData=function(a){a=a.buffer;if(null==a.__srcImageData){null==a.data?a.__srcImageData=a.__srcContext.getImageData(0,0,a.width,a.height):(a.__srcImageData=a.__srcContext.createImageData(a.width,a.height),a.__srcImageData.data.set(a.data));
var b=a.__srcImageData.data.buffer;b=null!=b?new Uint8Array(b):null;a.data=b}};kb.fillRect=function(a,b,c,e){kb.convertToCanvas(a);if(1==e){e=c>>16&255;var f=c>>8&255;var h=c&255;c=a.get_transparent()?c>>24&255:255}else e=c>>24&255,f=c>>16&255,h=c>>8&255,c=a.get_transparent()?c&255:255;0==b.x&&0==b.y&&b.width==a.width&&b.height==a.height&&a.get_transparent()&&0==c?a.buffer.__srcCanvas.width=a.buffer.width:(255>c&&a.buffer.__srcContext.clearRect(b.x+a.offsetX,b.y+a.offsetY,b.width+a.offsetX,b.height+
a.offsetY),0<c&&(a.buffer.__srcContext.fillStyle="rgba("+e+", "+f+", "+h+", "+c/255+")",a.buffer.__srcContext.fillRect(b.x+a.offsetX,b.y+a.offsetY,b.width+a.offsetX,b.height+a.offsetY)),a.dirty=!0,a.version++)};var Re=function(){};k["lime._internal.graphics.ImageDataUtil"]=Re;Re.__name__=!0;Re.fillRect=function(a,b,c,e){switch(e){case 1:c=(c>>>16&255)<<24|(c>>>8&255)<<16|(c&255)<<8|c>>>24&255;break;case 2:c=(c>>>8&255)<<24|(c>>>16&255)<<16|(c>>>24&255)<<8|c&255}a.get_transparent()||(c=(c>>>24&255)<<
24|(c>>>16&255)<<16|(c>>>8&255)<<8|255);var f=a.buffer.data;if(null!=f){e=a.buffer.format;var h=a.buffer.premultiplied;h&&(0==(c&255)?0!=c&&(c=0):255!=(c&255)&&(vb.a16=vb.__alpha16[c&255],c=((c>>>24&255)*vb.a16>>16&255)<<24|((c>>>16&255)*vb.a16>>16&255)<<16|((c>>>8&255)*vb.a16>>16&255)<<8|c&255));b=new le(a,b);for(var d,l=0,g=b.height;l<g;){h=l++;d=b.byteOffset+b.stride*h;for(var u=0,r=b.width;u<r;){h=u++;var q=d+4*h,v=e;h=!1;null==h&&(h=!1);null==v&&(v=0);h&&(0==(c&255)?0!=c&&(c=0):255!=(c&255)&&
(vb.a16=vb.__alpha16[c&255],c=((c>>>24&255)*vb.a16>>16&255)<<24|((c>>>16&255)*vb.a16>>16&255)<<16|((c>>>8&255)*vb.a16>>16&255)<<8|c&255));switch(v){case 0:f[q]=c>>>24&255;f[q+1]=c>>>16&255;f[q+2]=c>>>8&255;f[q+3]=c&255;break;case 1:f[q]=c&255;f[q+1]=c>>>24&255;f[q+2]=c>>>16&255;f[q+3]=c>>>8&255;break;case 2:f[q]=c>>>8&255,f[q+1]=c>>>16&255,f[q+2]=c>>>24&255,f[q+3]=c&255}}}a.dirty=!0;a.version++}};var le=function(a,b){this.image=a;null==b?this.rect=a.get_rect():(0>b.x&&(b.x=0),0>b.y&&(b.y=0),b.x+b.width>
a.width&&(b.width=a.width-b.x),b.y+b.height>a.height&&(b.height=a.height-b.y),0>b.width&&(b.width=0),0>b.height&&(b.height=0),this.rect=b);this.stride=a.buffer.get_stride();this.__update()};k["lime._internal.graphics._ImageDataUtil.ImageDataView"]=le;le.__name__=!0;le.prototype={__update:function(){this.x=Math.ceil(this.rect.x);this.y=Math.ceil(this.rect.y);this.width=Math.floor(this.rect.width);this.height=Math.floor(this.rect.height);this.byteOffset=this.stride*(this.y+this.image.offsetY)+4*(this.x+
this.image.offsetX)},__class__:le};var Ia=function(a,b){null==b&&(b=!1);if(null!=a)if(b)b=new ob,b.future=this,lb.queue({promise:b,work:a});else try{this.value=a(),this.isComplete=!0}catch(c){ka.lastError=c,this.error=B.caught(c).unwrap(),this.isError=!0}};k["lime.app.Future"]=Ia;Ia.__name__=!0;Ia.withValue=function(a){var b=new Ia;b.isComplete=!0;b.value=a;return b};Ia.prototype={onComplete:function(a){null!=a&&(this.isComplete?a(this.value):this.isError||(null==this.__completeListeners&&(this.__completeListeners=
[]),this.__completeListeners.push(a)));return this},onError:function(a){null!=a&&(this.isError?a(this.error):this.isComplete||(null==this.__errorListeners&&(this.__errorListeners=[]),this.__errorListeners.push(a)));return this},onProgress:function(a){null!=a&&(null==this.__progressListeners&&(this.__progressListeners=[]),this.__progressListeners.push(a));return this},then:function(a){if(this.isComplete)return a(this.value);if(this.isError){var b=new Ia;b.isError=!0;b.error=this.error;return b}var c=
new ob;this.onError(n(c,c.error));this.onProgress(n(c,c.progress));this.onComplete(function(b){b=a(b);b.onError(n(c,c.error));b.onComplete(n(c,c.complete))});return c.future},__class__:Ia};var lb=function(){};k["lime.app._Future.FutureWork"]=lb;lb.__name__=!0;lb.queue=function(a){null==lb.threadPool&&(lb.threadPool=new me,lb.threadPool.doWork.add(lb.threadPool_doWork),lb.threadPool.onComplete.add(lb.threadPool_onComplete),lb.threadPool.onError.add(lb.threadPool_onError));lb.threadPool.queue(a)};lb.threadPool_doWork=
function(a){try{var b=a.work();lb.threadPool.sendComplete({promise:a.promise,result:b})}catch(c){ka.lastError=c,b=B.caught(c).unwrap(),lb.threadPool.sendError({promise:a.promise,error:b})}};lb.threadPool_onComplete=function(a){a.promise.complete(a.result)};lb.threadPool_onError=function(a){a.promise.error(a.error)};var ob=function(){this.future=new Ia};k["lime.app.Promise"]=ob;ob.__name__=!0;ob.prototype={complete:function(a){if(!this.future.isError&&(this.future.isComplete=!0,this.future.value=a,
null!=this.future.__completeListeners)){for(var b=0,c=this.future.__completeListeners;b<c.length;){var e=c[b];++b;e(a)}this.future.__completeListeners=null}return this},completeWith:function(a){a.onComplete(n(this,this.complete));a.onError(n(this,this.error));a.onProgress(n(this,this.progress));return this},error:function(a){if(!this.future.isComplete&&(this.future.isError=!0,this.future.error=a,null!=this.future.__errorListeners)){for(var b=0,c=this.future.__errorListeners;b<c.length;){var e=c[b];
++b;e(a)}this.future.__errorListeners=null}return this},progress:function(a,b){if(!this.future.isError&&!this.future.isComplete&&null!=this.future.__progressListeners)for(var c=0,e=this.future.__progressListeners;c<e.length;){var f=e[c];++c;f(a,b)}return this},__class__:ob};var Bc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Dynamic_Void"]=Bc;Bc.__name__=!0;Bc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<
f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,e=0;e<b.length&&
(b[e](a),c[e]?++e:this.remove(b[e]),!this.canceled););},__class__:Bc};var ne=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Float_Float_Float_Void"]=ne;ne.__name__=!0;ne.prototype={remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b,c){this.canceled=!1;for(var e=this.__listeners,f=
this.__repeat,h=0;h<e.length&&(e[h](a,b,c),f[h]?++h:this.remove(e[h]),!this.canceled););},__class__:ne};var oe=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Float_Float_Int_Void"]=oe;oe.__name__=!0;oe.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);
this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b,c){this.canceled=!1;for(var e=this.__listeners,f=this.__repeat,h=0;h<e.length&&(e[h](a,b,c),f[h]?++h:this.remove(e[h]),!this.canceled););},__class__:oe};var Xc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=
[]};k["lime.app._Event_Float_Float_Void"]=Xc;Xc.__name__=!0;Xc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,
1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,e=this.__repeat,f=0;f<c.length&&(c[f](a,b),e[f]?++f:this.remove(c[f]),!this.canceled););},__class__:Xc};var pe=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Float_Float_lime_ui_MouseButton_Void"]=pe;pe.__name__=!0;pe.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<
f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b,c){this.canceled=!1;for(var e=this.__listeners,f=this.__repeat,h=0;h<e.length&&
(e[h](a,b,c),f[h]?++h:this.remove(e[h]),!this.canceled););},__class__:pe};var qe=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void"]=qe;qe.__name__=!0;qe.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);
this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b,c){this.canceled=!1;for(var e=this.__listeners,f=this.__repeat,h=0;h<e.length&&(e[h](a,b,c),f[h]?++h:this.remove(e[h]),!this.canceled););},__class__:qe};var re=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=
[]};k["lime.app._Event_Int_Float_Float_Void"]=re;re.__name__=!0;re.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__class__:re};var se=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Int_Float_Void"]=
se;se.__name__=!0;se.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),
this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,e=this.__repeat,f=0;f<c.length&&(c[f](a,b),e[f]?++f:this.remove(c[f]),!this.canceled););},__class__:se};var sd=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Int_Int_Void"]=sd;sd.__name__=!0;sd.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,
0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,e=this.__repeat,f=0;f<c.length&&(c[f](a,b),e[f]?++f:this.remove(c[f]),!this.canceled););},__class__:sd};
var zc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Int_Void"]=zc;zc.__name__=!0;zc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=
--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,e=0;e<b.length&&(b[e](a),c[e]?++e:this.remove(b[e]),!this.canceled););},__class__:zc};var te=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Int_lime_ui_JoystickHatPosition_Void"]=te;te.__name__=!0;te.prototype={add:function(a,b,
c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__class__:te};var ue=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_String_Int_Int_Void"]=ue;ue.__name__=!0;ue.prototype={add:function(a,b,c){null==c&&
(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__class__:ue};var Fd=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_String_Void"]=Fd;Fd.__name__=!0;Fd.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);
for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,
c=this.__repeat,e=0;e<b.length&&(b[e](a),c[e]?++e:this.remove(b[e]),!this.canceled););},__class__:Fd};var Va=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Void_Void"]=Va;Va.__name__=!0;Va.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);
this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(){this.canceled=!1;for(var a=this.__listeners,b=this.__repeat,c=0;c<a.length&&(a[c](),b[c]?++c:this.remove(a[c]),!this.canceled););},__class__:Va};var td=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_lime_graphics_RenderContext_Void"]=
td;td.__name__=!0;td.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),
this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,e=0;e<b.length&&(b[e](a),c[e]?++e:this.remove(b[e]),!this.canceled););},__class__:td};var ve=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_lime_ui_GamepadAxis_Float_Void"]=ve;ve.__name__=!0;ve.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,
0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,e=this.__repeat,f=0;f<c.length&&(c[f](a,b),e[f]?++f:this.remove(c[f]),!this.canceled););},__class__:ve};
var Sc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_lime_ui_GamepadButton_Void"]=Sc;Sc.__name__=!0;Sc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=
this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,e=0;e<b.length&&(b[e](a),c[e]?++e:this.remove(b[e]),!this.canceled););},__class__:Sc};var we=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_lime_ui_Gamepad_Void"]=we;we.__name__=!0;we.prototype={add:function(a,
b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=
!1;for(var b=this.__listeners,c=this.__repeat,e=0;e<b.length&&(b[e](a),c[e]?++e:this.remove(b[e]),!this.canceled););},__class__:we};var xe=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_lime_ui_Joystick_Void"]=xe;xe.__name__=!0;xe.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,
0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,e=0;e<b.length&&(b[e](a),c[e]?++e:this.remove(b[e]),!this.canceled););},__class__:xe};var Gd=function(){this.canceled=!1;this.__listeners=[];
this.__priorities=[];this.__repeat=[]};k["lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"]=Gd;Gd.__name__=!0;Gd.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],
a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,e=this.__repeat,f=0;f<c.length&&(c[f](a,b),e[f]?++f:this.remove(c[f]),!this.canceled););},__class__:Gd};var Cc=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_lime_ui_Touch_Void"]=Cc;Cc.__name__=!0;Cc.prototype={add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var e=0,f=this.__priorities.length;e<
f;){var h=e++;if(c>this.__priorities[h]){this.__listeners.splice(h,0,a);this.__priorities.splice(h,0,c);this.__repeat.splice(h,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,e=0;e<b.length&&
(b[e](a),c[e]?++e:this.remove(b[e]),!this.canceled););},__class__:Cc};var Ud=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_lime_ui_Window_Void"]=Ud;Ud.__name__=!0;Ud.prototype={remove:function(a){for(var b=this.__listeners.length;0<=--b;)G.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,
e=0;e<b.length&&(b[e](a),c[e]?++e:this.remove(b[e]),!this.canceled););},__class__:Ud};var Ha=function(a,b,c,e,f,h,d){null==f&&(f=-1);null==e&&(e=-1);null==c&&(c=0);null==b&&(b=0);this.offsetX=b;this.offsetY=c;this.width=e;this.height=f;this.version=0;null==d&&(d=gc.CANVAS);this.type=d;if(null==a){if(0<e&&0<f)switch(this.type._hx_index){case 0:this.buffer=new Mc(null,e,f);kb.createCanvas(this,e,f);null!=h&&0!=h&&this.fillRect(new Dc(0,0,e,f),h);break;case 1:a=e*f*4,a=null!=a?new Uint8Array(a):null,
this.buffer=new Mc(a,e,f),null!=h&&0!=h&&this.fillRect(new Dc(0,0,e,f),h)}}else this.__fromImageBuffer(a)};k["lime.graphics.Image"]=Ha;Ha.__name__=!0;Ha.fromFile=function(a){if(null==a)return null;var b=new Ha;return b.__fromFile(a)?b:null};Ha.loadFromBytes=function(a){if(null==a)return Ia.withValue(null);if(Ha.__isPNG(a))var b="image/png";else if(Ha.__isJPG(a))b="image/jpeg";else if(Ha.__isGIF(a))b="image/gif";else if(Ha.__isWebP(a))b="image/webp";else return Ia.withValue(null);return L.loadImageFromBytes(a,
b)};Ha.loadFromFile=function(a){return null==a?Ia.withValue(null):L.loadImage(a)};Ha.__isGIF=function(a){if(null==a||6>a.length)return!1;a=a.getString(0,6);return"GIF87a"!=a?"GIF89a"==a:!0};Ha.__isJPG=function(a){return null==a||4>a.length?!1:255==a.b[0]&&216==a.b[1]&&255==a.b[a.length-2]?217==a.b[a.length-1]:!1};Ha.__isPNG=function(a){return null==a||8>a.length?!1:137==a.b[0]&&80==a.b[1]&&78==a.b[2]&&71==a.b[3]&&13==a.b[4]&&10==a.b[5]&&26==a.b[6]?10==a.b[7]:!1};Ha.__isWebP=function(a){return null==
a||16>a.length?!1:"RIFF"==a.getString(0,4)?"WEBP"==a.getString(8,4):!1};Ha.prototype={fillRect:function(a,b,c){a=this.__clipRect(a);if(null!=this.buffer&&null!=a)switch(this.type._hx_index){case 0:kb.fillRect(this,a,b,c);break;case 1:kb.convertToData(this);if(0==this.buffer.data.length)break;Re.fillRect(this,a,b,c);break;case 2:a.offset(this.offsetX,this.offsetY);if(null==c)b=(b&255)<<24|(b>>>24&255)<<16|(b>>>16&255)<<8|b>>>8&255;else switch(c){case 1:break;case 2:b=(b&255)<<24|(b>>>8&255)<<16|(b>>>
16&255)<<8|b>>>24&255;break;default:b=(b&255)<<24|(b>>>24&255)<<16|(b>>>16&255)<<8|b>>>8&255}this.buffer.__srcBitmapData.fillRect(a.__toFlashRectangle(),b)}},__clipRect:function(a){return null==a||0>a.x&&(a.width-=-a.x,a.x=0,0>=a.x+a.width)||0>a.y&&(a.height-=-a.y,a.y=0,0>=a.y+a.height)||a.x+a.width>=this.width&&(a.width-=a.x+a.width-this.width,0>=a.width)||a.y+a.height>=this.height&&(a.height-=a.y+a.height-this.height,0>=a.height)?null:a},__fromBase64:function(a,b,c){var e=this,f=new Image;f.addEventListener("load",
function(a){e.buffer=new Mc(null,f.width,f.height);e.buffer.__srcImage=f;e.offsetX=0;e.offsetY=0;e.width=e.buffer.width;e.height=e.buffer.height;null!=c&&c(e)},!1);f.src="data:"+b+";base64,"+a},__fromBytes:function(a,b){if(Ha.__isPNG(a))var c="image/png";else if(Ha.__isJPG(a))c="image/jpeg";else if(Ha.__isGIF(a))c="image/gif";else return!1;this.__fromBase64(bc.encode(a),c,b);return!0},__fromFile:function(a,b,c){var e=this,f=new Image;L.__isSameOrigin(a)||(f.crossOrigin="Anonymous");f.onload=function(a){e.buffer=
new Mc(null,f.width,f.height);e.buffer.__srcImage=f;e.width=f.width;e.height=f.height;null!=b&&b(e)};f.onerror=function(a){null!=c&&c()};f.src=a;return!0},__fromImageBuffer:function(a){this.buffer=a;null!=a&&(-1==this.width&&(this.width=a.width),-1==this.height&&(this.height=a.height))},get_data:function(){null==this.buffer.data&&0<this.buffer.width&&0<this.buffer.height&&kb.convertToData(this);return this.buffer.data},get_rect:function(){return new Dc(0,0,this.width,this.height)},get_transparent:function(){return null==
this.buffer?!1:this.buffer.transparent},set_transparent:function(a){return null==this.buffer?!1:this.buffer.transparent=a},__class__:Ha,__properties__:{set_transparent:"set_transparent",get_transparent:"get_transparent",get_rect:"get_rect",get_data:"get_data"}};var Mc=function(a,b,c,e,f){null==e&&(e=32);null==c&&(c=0);null==b&&(b=0);this.data=a;this.width=b;this.height=c;this.bitsPerPixel=e;this.format=null==f?0:f;this.premultiplied=!1;this.transparent=!0};k["lime.graphics.ImageBuffer"]=Mc;Mc.__name__=
!0;Mc.prototype={get_stride:function(){return this.width*(this.bitsPerPixel/8|0)},__class__:Mc,__properties__:{get_stride:"get_stride"}};var gc=v["lime.graphics.ImageType"]={__ename__:!0,__constructs__:null,CANVAS:{_hx_name:"CANVAS",_hx_index:0,__enum__:"lime.graphics.ImageType",toString:d},DATA:{_hx_name:"DATA",_hx_index:1,__enum__:"lime.graphics.ImageType",toString:d},FLASH:{_hx_name:"FLASH",_hx_index:2,__enum__:"lime.graphics.ImageType",toString:d},CUSTOM:{_hx_name:"CUSTOM",_hx_index:3,__enum__:"lime.graphics.ImageType",
toString:d}};gc.__constructs__=[gc.CANVAS,gc.DATA,gc.FLASH,gc.CUSTOM];var ke=function(){};k["lime.graphics.RenderContext"]=ke;ke.__name__=!0;ke.prototype={__class__:ke};var ff={fromWebGL2RenderContext:function(a){return a}},rd=function(){};k["lime.graphics.opengl.GL"]=rd;rd.__name__=!0;var vb={},Dc=function(a,b,c,e){null==e&&(e=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=c;this.height=e};k["lime.math.Rectangle"]=Dc;Dc.__name__=!0;Dc.prototype={offset:function(a,b){this.x+=
a;this.y+=b},__toFlashRectangle:function(){return null},__class__:Dc};var eb=function(){};k["lime.media.AudioBuffer"]=eb;eb.__name__=!0;eb.fromBytes=function(a){if(null==a)return null;var b=new eb;b.set_src(new Howl({src:["data:"+eb.__getCodec(a)+";base64,"+bc.encode(a)],html5:!0,preload:!1}));return b};eb.fromFile=function(a){if(null==a)return null;var b=new eb;b.__srcHowl=new Howl({src:[a],preload:!1});return b};eb.fromFiles=function(a){var b=new eb;b.__srcHowl=new Howl({src:a,preload:!1});return b};
eb.loadFromFile=function(a){var b=new ob,c=eb.fromFile(a);null!=c?null!=c&&(c.__srcHowl.on("load",function(){b.complete(c)}),c.__srcHowl.on("loaderror",function(a,c){b.error(c)}),c.__srcHowl.load()):b.error(null);return b.future};eb.loadFromFiles=function(a){var b=new ob,c=eb.fromFiles(a);null!=c?(c.__srcHowl.on("load",function(){b.complete(c)}),c.__srcHowl.on("loaderror",function(){b.error(null)}),c.__srcHowl.load()):b.error(null);return b.future};eb.__getCodec=function(a){switch(a.getString(0,4)){case "OggS":return"audio/ogg";
case "RIFF":if("WAVE"==a.getString(8,4))return"audio/wav";var b=a.b[1],c=a.b[2];switch(a.b[0]){case 73:if(68==b&&51==c)return"audio/mp3";break;case 255:switch(b){case 243:case 250:case 251:return"audio/mp3"}}break;case "fLaC":return"audio/flac";default:switch(b=a.b[1],c=a.b[2],a.b[0]){case 73:if(68==b&&51==c)return"audio/mp3";break;case 255:switch(b){case 243:case 250:case 251:return"audio/mp3"}}}za.error("Unsupported sound format",{fileName:"lime/media/AudioBuffer.hx",lineNumber:362,className:"lime.media.AudioBuffer",
methodName:"__getCodec"});return null};eb.prototype={set_src:function(a){return this.__srcHowl=a},__class__:eb,__properties__:{set_src:"set_src"}};var ze=function(a){if("custom"!=a){if(null==a||"web"==a)try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.web=new window.AudioContext,this.type="web"}catch(b){ka.lastError=b}null==this.web&&"web"!=a&&(this.html5=new ye,this.type="html5")}else this.type="custom"};k["lime.media.AudioContext"]=ze;ze.__name__=!0;ze.prototype={__class__:ze};
var Fc=function(){};k["lime.media.AudioManager"]=Fc;Fc.__name__=!0;Fc.init=function(a){if(null==Fc.context){if(null==a&&(Fc.context=new ze,a=Fc.context,"openal"==a.type)){var b=a.openal,c=b.openDevice();c=b.createContext(c);b.makeContextCurrent(c);b.processContext(c)}Fc.context=a}};var ye=function(){};k["lime.media.HTML5AudioContext"]=ye;ye.__name__=!0;ye.prototype={__class__:ye};var Se=function(){};k["lime.media.OpenALAudioContext"]=Se;Se.__name__=!0;Se.prototype={createContext:function(a,b){return dc.createContext(a,
b)},makeContextCurrent:function(a){return dc.makeContextCurrent(a)},openDevice:function(a){return dc.openDevice(a)},processContext:function(a){dc.processContext(a)},__class__:Se};var dc=function(){};k["lime.media.openal.ALC"]=dc;dc.__name__=!0;dc.createContext=function(a,b){return null};dc.makeContextCurrent=function(a){return!1};dc.openDevice=function(a){return null};dc.processContext=function(a){};var Hd=function(){};k["lime.net._IHTTPRequest"]=Hd;Hd.__name__=!0;Hd.__isInterface__=!0;Hd.prototype=
{__class__:Hd};var pb=function(a){this.uri=a;this.contentType="application/x-www-form-urlencoded";this.followRedirects=!0;this.enableResponseHeaders=!1;this.formData=new W;this.headers=[];this.method="GET";this.timeout=3E4;this.withCredentials=!1;this.__backend=new L;this.__backend.init(this)};k["lime.net._HTTPRequest.AbstractHTTPRequest"]=pb;pb.__name__=!0;pb.__interfaces__=[Hd];pb.prototype={__class__:pb};var ad=function(a){pb.call(this,a)};k["lime.net._HTTPRequest_Bytes"]=ad;ad.__name__=!0;ad.__super__=
pb;ad.prototype=x(pb.prototype,{fromBytes:function(a){return a},load:function(a){var b=this;null!=a&&(this.uri=a);var c=new ob;a=this.__backend.loadData(this.uri);a.onProgress(n(c,c.progress));a.onError(n(c,c.error));a.onComplete(function(a){b.responseData=b.fromBytes(a);c.complete(b.responseData)});return c.future},__class__:ad});var bd=function(a){pb.call(this,a)};k["lime.net._HTTPRequest_String"]=bd;bd.__name__=!0;bd.__super__=pb;bd.prototype=x(pb.prototype,{load:function(a){var b=this;null!=a&&
(this.uri=a);var c=new ob;a=this.__backend.loadText(this.uri);a.onProgress(n(c,c.progress));a.onError(n(c,c.error));a.onComplete(function(a){b.responseData=a;c.complete(b.responseData)});return c.future},__class__:bd});var je=function(a,b){null==b&&(b="");this.name=a;this.value=b};k["lime.net.HTTPRequestHeader"]=je;je.__name__=!0;je.prototype={__class__:je};var ud=function(a){pb.call(this,a)};k["lime.net._HTTPRequest_lime_utils_Bytes"]=ud;ud.__name__=!0;ud.__super__=ad;ud.prototype=x(ad.prototype,
{fromBytes:function(a){return wc.fromBytes(a)},__class__:ud});var lc=function(a,b){this.onUpdate=new ne;this.type=a;this.id=b};k["lime.system.Sensor"]=lc;lc.__name__=!0;lc.registerSensor=function(a,b){a=new lc(a,b);lc.sensors.push(a);return lc.sensorByID.h[b]=a};lc.prototype={__class__:lc};var Ve=v["lime.system.SensorType"]={__ename__:!0,__constructs__:null,ACCELEROMETER:{_hx_name:"ACCELEROMETER",_hx_index:0,__enum__:"lime.system.SensorType",toString:d}};Ve.__constructs__=[Ve.ACCELEROMETER];var wb=
function(){};k["lime.system.System"]=wb;wb.__name__=!0;wb.embed=m.lime.embed=function(a,b,c,e,f){if(null!=wb.__applicationEntryPoint&&Object.prototype.hasOwnProperty.call(wb.__applicationEntryPoint.h,a)){var h="string"==typeof b?window.document.getElementById(b):null==b?window.document.createElement("div"):b;null==h?window.console.log("[lime.embed] ERROR: Cannot find target element: "+z.string(b)):(null==c&&(c=0),null==e&&(e=0),null==f&&(f={}),Object.prototype.hasOwnProperty.call(f,"background")&&
"string"==typeof f.background&&(b=X.replace(z.string(f.background),"#",""),-1<b.indexOf("0x")?f.background=z.parseInt(b):f.background=z.parseInt("0x"+b)),f.element=h,f.width=c,f.height=e,wb.__applicationEntryPoint.h[a](f))}};wb.exit=function(a){};wb.__registerEntryPoint=function(a,b){null==wb.__applicationEntryPoint&&(wb.__applicationEntryPoint=new W);wb.__applicationEntryPoint.h[a]=b};var me=function(a,b){null==b&&(b=1);null==a&&(a=0);this.onRun=new Bc;this.onError=new Bc;this.onComplete=new Bc;
this.doWork=new Bc;this.minThreads=a;this.maxThreads=b;this.currentThreads=0};k["lime.system.ThreadPool"]=me;me.__name__=!0;me.prototype={queue:function(a){this.runWork(a)},sendComplete:function(a){this.onComplete.dispatch(a)},sendError:function(a){this.onError.dispatch(a)},runWork:function(a){this.onRun.dispatch(a);this.doWork.dispatch(a)},__class__:me};var Ob=function(a){null!=a&&(this.name=a);this.__init||(void 0==this.ascender&&(this.ascender=0),void 0==this.descender&&(this.descender=0),void 0==
this.height&&(this.height=0),void 0==this.numGlyphs&&(this.numGlyphs=0),void 0==this.underlinePosition&&(this.underlinePosition=0),void 0==this.underlineThickness&&(this.underlineThickness=0),void 0==this.unitsPerEM&&(this.unitsPerEM=0),null!=this.__fontID?ba.isLocal(this.__fontID)&&this.__fromBytes(ba.getBytes(this.__fontID)):null!=this.__fontPath&&this.__fromFile(this.__fontPath))};k["lime.text.Font"]=Ob;Ob.__name__=!0;Ob.fromFile=function(a){if(null==a)return null;var b=new Ob;b.__fromFile(a);
return b};Ob.loadFromName=function(a){return(new Ob).__loadFromName(a)};Ob.__measureFontNode=function(a){var b=window.document.createElement("span");b.setAttribute("aria-hidden","true");var c=window.document.createTextNode("BESbswy");b.appendChild(c);c=b.style;c.display="block";c.position="absolute";c.top="-9999px";c.left="-9999px";c.fontSize="300px";c.width="auto";c.height="auto";c.lineHeight="normal";c.margin="0";c.padding="0";c.fontVariant="normal";c.whiteSpace="nowrap";c.fontFamily=a;window.document.body.appendChild(b);
return b};Ob.prototype={__fromBytes:function(a){this.__fontPath=null},__fromFile:function(a){this.__fontPath=a},__loadFromName:function(a){var b=this,c=new ob;this.name=a;var e=w.navigator.userAgent.toLowerCase(),f=0<=e.indexOf(" safari/")&&0>e.indexOf(" chrome/");e=(new Z("(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)","i")).match(e);if(!f&&!e&&window.document.fonts&&(g=window.document.fonts,n(g,g.load)))window.document.fonts.load("1em '"+a+"'").then(function(a){c.complete(b)},function(e){za.warn('Could not load web font "'+
a+'"',{fileName:"lime/text/Font.hx",lineNumber:513,className:"lime.text.Font",methodName:"__loadFromName"});c.complete(b)});else{var h=Ob.__measureFontNode("'"+a+"', sans-serif"),d=Ob.__measureFontNode("'"+a+"', serif"),l=h.offsetWidth,u=d.offsetWidth,r=-1,v=0,q,k;r=window.setInterval(function(){v+=1;q=h.offsetWidth!=l||d.offsetWidth!=u;k=3E3<=50*v;if(q||k)window.clearInterval(r),h.parentNode.removeChild(h),d.parentNode.removeChild(d),d=h=null,k&&za.warn('Could not load web font "'+a+'"',{fileName:"lime/text/Font.hx",
lineNumber:548,className:"lime.text.Font",methodName:"__loadFromName"}),c.complete(b)},50)}return c.future},__class__:Ob};var Ra=function(a){this.onDisconnect=new Va;this.onButtonUp=new Sc;this.onButtonDown=new Sc;this.onAxisMove=new ve;this.id=a;this.connected=!0};k["lime.ui.Gamepad"]=Ra;Ra.__name__=!0;Ra.__connect=function(a){if(!Ra.devices.h.hasOwnProperty(a)){var b=new Ra(a);Ra.devices.h[a]=b;Ra.onConnect.dispatch(b)}};Ra.__disconnect=function(a){var b=Ra.devices.h[a];null!=b&&(b.connected=!1);
Ra.devices.remove(a);null!=b&&b.onDisconnect.dispatch()};Ra.prototype={__class__:Ra};var fb=function(a){this.onTrackballMove=new re;this.onHatMove=new te;this.onDisconnect=new Va;this.onButtonUp=new zc;this.onButtonDown=new zc;this.onAxisMove=new se;this.id=a;this.connected=!0};k["lime.ui.Joystick"]=fb;fb.__name__=!0;fb.__connect=function(a){if(!fb.devices.h.hasOwnProperty(a)){var b=new fb(a);fb.devices.h[a]=b;fb.onConnect.dispatch(b)}};fb.__disconnect=function(a){var b=fb.devices.h[a];null!=b&&(b.connected=
!1);fb.devices.remove(a);null!=b&&b.onDisconnect.dispatch()};fb.__getDeviceData=function(){return navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():null};fb.prototype={__class__:fb};var Hb=v["lime.ui.MouseCursor"]={__ename__:!0,__constructs__:null,ARROW:{_hx_name:"ARROW",_hx_index:0,__enum__:"lime.ui.MouseCursor",toString:d},CROSSHAIR:{_hx_name:"CROSSHAIR",_hx_index:1,__enum__:"lime.ui.MouseCursor",toString:d},DEFAULT:{_hx_name:"DEFAULT",_hx_index:2,
__enum__:"lime.ui.MouseCursor",toString:d},MOVE:{_hx_name:"MOVE",_hx_index:3,__enum__:"lime.ui.MouseCursor",toString:d},POINTER:{_hx_name:"POINTER",_hx_index:4,__enum__:"lime.ui.MouseCursor",toString:d},RESIZE_NESW:{_hx_name:"RESIZE_NESW",_hx_index:5,__enum__:"lime.ui.MouseCursor",toString:d},RESIZE_NS:{_hx_name:"RESIZE_NS",_hx_index:6,__enum__:"lime.ui.MouseCursor",toString:d},RESIZE_NWSE:{_hx_name:"RESIZE_NWSE",_hx_index:7,__enum__:"lime.ui.MouseCursor",toString:d},RESIZE_WE:{_hx_name:"RESIZE_WE",
_hx_index:8,__enum__:"lime.ui.MouseCursor",toString:d},TEXT:{_hx_name:"TEXT",_hx_index:9,__enum__:"lime.ui.MouseCursor",toString:d},WAIT:{_hx_name:"WAIT",_hx_index:10,__enum__:"lime.ui.MouseCursor",toString:d},WAIT_ARROW:{_hx_name:"WAIT_ARROW",_hx_index:11,__enum__:"lime.ui.MouseCursor",toString:d},CUSTOM:{_hx_name:"CUSTOM",_hx_index:12,__enum__:"lime.ui.MouseCursor",toString:d}};Hb.__constructs__=[Hb.ARROW,Hb.CROSSHAIR,Hb.DEFAULT,Hb.MOVE,Hb.POINTER,Hb.RESIZE_NESW,Hb.RESIZE_NS,Hb.RESIZE_NWSE,Hb.RESIZE_WE,
Hb.TEXT,Hb.WAIT,Hb.WAIT_ARROW,Hb.CUSTOM];var cc=v["lime.ui.MouseWheelMode"]={__ename__:!0,__constructs__:null,PIXELS:{_hx_name:"PIXELS",_hx_index:0,__enum__:"lime.ui.MouseWheelMode",toString:d},LINES:{_hx_name:"LINES",_hx_index:1,__enum__:"lime.ui.MouseWheelMode",toString:d},PAGES:{_hx_name:"PAGES",_hx_index:2,__enum__:"lime.ui.MouseWheelMode",toString:d},UNKNOWN:{_hx_name:"UNKNOWN",_hx_index:3,__enum__:"lime.ui.MouseWheelMode",toString:d}};cc.__constructs__=[cc.PIXELS,cc.LINES,cc.PAGES,cc.UNKNOWN];
var Eb=function(a,b,c,e,f,h,d){this.x=a;this.y=b;this.id=c;this.dx=e;this.dy=f;this.pressure=h;this.device=d};k["lime.ui.Touch"]=Eb;Eb.__name__=!0;Eb.prototype={__class__:Eb};var Wd=function(a,b){this.onTextInput=new Fd;this.onTextEdit=new ue;this.onRestore=new Va;this.onResize=new sd;this.onRenderContextRestored=new td;this.onRenderContextLost=new Va;this.onRender=new td;this.onMove=new Xc;this.onMouseWheel=new qe;this.onMouseUp=new oe;this.onMouseMoveRelative=new Xc;this.onMouseMove=new Xc;this.onMouseDown=
new pe;this.onMinimize=new Va;this.onLeave=new Va;this.onKeyUp=new Gd;this.onKeyDown=new Gd;this.onFullscreen=new Va;this.onFocusOut=new Va;this.onFocusIn=new Va;this.onExpose=new Va;this.onEnter=new Va;this.onDropFile=new Fd;this.onDeactivate=new Va;this.onClose=new Va;this.onActivate=new Va;this.application=a;this.__attributes=null!=b?b:{};Object.prototype.hasOwnProperty.call(this.__attributes,"parameters")&&(this.parameters=this.__attributes.parameters);this.__height=this.__width=0;this.__fullscreen=
!1;this.__scale=1;this.__y=this.__x=0;this.__title="";this.id=-1;this.__backend=new Wc(this)};k["lime.ui.Window"]=Wd;Wd.__name__=!0;Wd.prototype={close:function(){this.__backend.close()},__class__:Wd};var Tb=function(){this.data=new W;this.paths=[]};k["lime.utils.AssetBundle"]=Tb;Tb.__name__=!0;Tb.fromBytes=function(a){a=new Vc(a);return Tb.__extractBundle(a)};Tb.loadFromBytes=function(a){return Ia.withValue(Tb.fromBytes(a))};Tb.loadFromFile=function(a){return wc.loadFromFile(a).then(Tb.loadFromBytes)};
Tb.__extractBundle=function(a){var b=qd.readZip(a);a=new Tb;for(b=b.h;null!=b;){var c=b.item;b=b.next;if(c.compressed){var e=a.data,f=c.fileName,h=wc.decompress(c.data,vd.DEFLATE);e.h[f]=h}else a.data.h[c.fileName]=c.data;a.paths.push(c.fileName)}return a};Tb.prototype={__class__:Tb};var Ae=function(){this.enabled=!0;this.audio=new W;this.font=new W;this.image=new W;this.version=918627};k["lime.utils.AssetCache"]=Ae;Ae.__name__=!0;Ae.prototype={exists:function(a,b){return("IMAGE"==b||null==b)&&Object.prototype.hasOwnProperty.call(this.image.h,
a)||("FONT"==b||null==b)&&Object.prototype.hasOwnProperty.call(this.font.h,a)||("SOUND"==b||"MUSIC"==b||null==b)&&Object.prototype.hasOwnProperty.call(this.audio.h,a)?!0:!1},set:function(a,b,c){switch(b){case "FONT":this.font.h[a]=c;break;case "IMAGE":if(!(c instanceof Ha))throw B.thrown("Cannot cache non-Image asset: "+z.string(c)+" as Image");this.image.h[a]=c;break;case "MUSIC":case "SOUND":if(!(c instanceof eb))throw B.thrown("Cannot cache non-AudioBuffer asset: "+z.string(c)+" as AudioBuffer");
this.audio.h[a]=c;break;default:throw B.thrown(b+" assets are not cachable");}},clear:function(a){if(null==a)this.audio=new W,this.font=new W,this.image=new W;else{var b=this.audio.h;b=Object.keys(b);for(var c=b.length,e=0;e<c;){var f=b[e++];if(X.startsWith(f,a)){var h=this.audio;Object.prototype.hasOwnProperty.call(h.h,f)&&delete h.h[f]}}b=this.font.h;b=Object.keys(b);c=b.length;for(e=0;e<c;)f=b[e++],X.startsWith(f,a)&&(h=this.font,Object.prototype.hasOwnProperty.call(h.h,f)&&delete h.h[f]);b=this.image.h;
b=Object.keys(b);c=b.length;for(e=0;e<c;)f=b[e++],X.startsWith(f,a)&&(h=this.image,Object.prototype.hasOwnProperty.call(h.h,f)&&delete h.h[f])}},__class__:Ae};var Wb=function(){this.types=new W;this.sizes=new W;this.preload=new W;this.paths=new W;this.pathGroups=new W;this.classTypes=new W;this.cachedText=new W;this.cachedImages=new W;this.cachedFonts=new W;this.cachedBytes=new W;this.cachedAudioBuffers=new W;this.onChange=new Va;this.bytesTotal=this.bytesLoaded=0};k["lime.utils.AssetLibrary"]=Wb;
Wb.__name__=!0;Wb.fromBundle=function(a){if(Object.prototype.hasOwnProperty.call(a.data.h,"library.json")){var b=Fb.fromBytes(a.data.h["library.json"]);if(null!=b){if(null==b.libraryType)var c=new Wb;else if(c=k[b.libraryType],null!=c)c=ja.createInstance(c,b.libraryArgs);else return za.warn("Could not find library type: "+b.libraryType,{fileName:"lime/utils/AssetLibrary.hx",lineNumber:122,className:"lime.utils.AssetLibrary",methodName:"fromBundle"}),null;c.__fromBundle(a,b);return c}}else return c=
new Wb,c.__fromBundle(a),c;return null};Wb.fromManifest=function(a){if(null==a)return null;if(null==a.libraryType)var b=new Wb;else if(b=k[a.libraryType],null!=b)b=ja.createInstance(b,a.libraryArgs);else return za.warn("Could not find library type: "+a.libraryType,{fileName:"lime/utils/AssetLibrary.hx",lineNumber:160,className:"lime.utils.AssetLibrary",methodName:"fromManifest"}),null;b.__fromManifest(a);return b};Wb.prototype={exists:function(a,b){b=null!=b?na.__cast(b,String):null;a=this.types.h[a];
return null==a||a!=b&&("SOUND"!=b&&"MUSIC"!=b||"MUSIC"!=a&&"SOUND"!=a)&&"BINARY"!=b&&null!=b&&("BINARY"!=a||"TEXT"!=b)?!1:!0},getAsset:function(a,b){switch(b){case "BINARY":return this.getBytes(a);case "FONT":return this.getFont(a);case "IMAGE":return this.getImage(a);case "MUSIC":case "SOUND":return this.getAudioBuffer(a);case "TEMPLATE":throw B.thrown("Not sure how to get template: "+a);case "TEXT":return this.getText(a);default:throw B.thrown("Unknown asset type: "+b);}},getAudioBuffer:function(a){return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h,
a)?this.cachedAudioBuffers.h[a]:Object.prototype.hasOwnProperty.call(this.classTypes.h,a)?eb.fromBytes(na.__cast(ja.createInstance(this.classTypes.h[a],[]),Na)):eb.fromFile(this.paths.h[a])},getBytes:function(a){if(Object.prototype.hasOwnProperty.call(this.cachedBytes.h,a))return this.cachedBytes.h[a];if(Object.prototype.hasOwnProperty.call(this.cachedText.h,a)){var b=wc.ofString(this.cachedText.h[a]);return this.cachedBytes.h[a]=b}return Object.prototype.hasOwnProperty.call(this.classTypes.h,a)?
na.__cast(ja.createInstance(this.classTypes.h[a],[]),Na):wc.fromFile(this.paths.h[a])},getFont:function(a){return Object.prototype.hasOwnProperty.call(this.cachedFonts.h,a)?this.cachedFonts.h[a]:Object.prototype.hasOwnProperty.call(this.classTypes.h,a)?na.__cast(ja.createInstance(this.classTypes.h[a],[]),Ob):Ob.fromFile(this.paths.h[a])},getImage:function(a){return Object.prototype.hasOwnProperty.call(this.cachedImages.h,a)?this.cachedImages.h[a]:Object.prototype.hasOwnProperty.call(this.classTypes.h,
a)?na.__cast(ja.createInstance(this.classTypes.h[a],[]),Ha):Ha.fromFile(this.paths.h[a])},getText:function(a){if(Object.prototype.hasOwnProperty.call(this.cachedText.h,a))return this.cachedText.h[a];a=this.getBytes(a);return null==a?null:a.getString(0,a.length)},isLocal:function(a,b){if(Object.prototype.hasOwnProperty.call(this.classTypes.h,a))return!0;b=null!=b?na.__cast(b,String):null;if(null==b)return Object.prototype.hasOwnProperty.call(this.cachedBytes.h,a)?!0:Object.prototype.hasOwnProperty.call(this.cachedText.h,
a);switch(b){case "FONT":return Object.prototype.hasOwnProperty.call(this.cachedFonts.h,a);case "IMAGE":return Object.prototype.hasOwnProperty.call(this.cachedImages.h,a);case "MUSIC":case "SOUND":return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h,a);default:return Object.prototype.hasOwnProperty.call(this.cachedBytes.h,a)?!0:Object.prototype.hasOwnProperty.call(this.cachedText.h,a)}},load:function(){if(this.loaded)return Ia.withValue(this);if(null==this.promise){this.promise=new ob;
this.bytesLoadedCache=new W;this.assetsLoaded=0;this.assetsTotal=1;for(var a=Object.keys(this.preload.h),b=a.length,c=0;c<b;){var e=a[c++];if(this.preload.h[e]){za.verbose("Preloading asset: "+e+" ["+this.types.h[e]+"]",{fileName:"lime/utils/AssetLibrary.hx",lineNumber:405,className:"lime.utils.AssetLibrary",methodName:"load"});var f=this.types.h[e];if(null!=f)switch(f){case "BINARY":this.assetsTotal++;f=this.loadBytes(e);f.onProgress(function(a,b){return function(c,e){b[0](a[0],c,e)}}([e],[n(this,
this.load_onProgress)]));f.onError(function(a,b){return function(c){b[0](a[0],c)}}([e],[n(this,this.load_onError)]));f.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([e],[n(this,this.loadBytes_onComplete)]));break;case "FONT":this.assetsTotal++;f=this.loadFont(e);f.onProgress(function(a,b){return function(c,e){b[0](a[0],c,e)}}([e],[n(this,this.load_onProgress)]));f.onError(function(a,b){return function(c){b[0](a[0],c)}}([e],[n(this,this.load_onError)]));f.onComplete(function(a,b){return function(c){b[0](a[0],
c)}}([e],[n(this,this.loadFont_onComplete)]));break;case "IMAGE":this.assetsTotal++;f=this.loadImage(e);f.onProgress(function(a,b){return function(c,e){b[0](a[0],c,e)}}([e],[n(this,this.load_onProgress)]));f.onError(function(a,b){return function(c){b[0](a[0],c)}}([e],[n(this,this.load_onError)]));f.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([e],[n(this,this.loadImage_onComplete)]));break;case "MUSIC":case "SOUND":this.assetsTotal++;f=this.loadAudioBuffer(e);f.onProgress(function(a,
b){return function(c,e){b[0](a[0],c,e)}}([e],[n(this,this.load_onProgress)]));f.onError(function(a,b){return function(c){b[0](a[0],c)}}([e],[n(this,this.loadAudioBuffer_onError)]));f.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([e],[n(this,this.loadAudioBuffer_onComplete)]));break;case "TEXT":this.assetsTotal++,f=this.loadText(e),f.onProgress(function(a,b){return function(c,e){b[0](a[0],c,e)}}([e],[n(this,this.load_onProgress)])),f.onError(function(a,b){return function(c){b[0](a[0],
c)}}([e],[n(this,this.load_onError)])),f.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([e],[n(this,this.loadText_onComplete)]))}}}this.__assetLoaded(null)}return this.promise.future},loadAudioBuffer:function(a){return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h,a)?Ia.withValue(this.cachedAudioBuffers.h[a]):Object.prototype.hasOwnProperty.call(this.classTypes.h,a)?Ia.withValue(ja.createInstance(this.classTypes.h[a],[])):Object.prototype.hasOwnProperty.call(this.pathGroups.h,
a)?eb.loadFromFiles(this.pathGroups.h[a]):eb.loadFromFile(this.paths.h[a])},loadBytes:function(a){return Object.prototype.hasOwnProperty.call(this.cachedBytes.h,a)?Ia.withValue(this.cachedBytes.h[a]):Object.prototype.hasOwnProperty.call(this.classTypes.h,a)?Ia.withValue(ja.createInstance(this.classTypes.h[a],[])):wc.loadFromFile(this.paths.h[a])},loadFont:function(a){return Object.prototype.hasOwnProperty.call(this.cachedFonts.h,a)?Ia.withValue(this.cachedFonts.h[a]):Object.prototype.hasOwnProperty.call(this.classTypes.h,
a)?(a=ja.createInstance(this.classTypes.h[a],[]),a.__loadFromName(a.name)):Ob.loadFromName(this.paths.h[a])},loadImage:function(a){var b=this;return Object.prototype.hasOwnProperty.call(this.cachedImages.h,a)?Ia.withValue(this.cachedImages.h[a]):Object.prototype.hasOwnProperty.call(this.classTypes.h,a)?Ia.withValue(ja.createInstance(this.classTypes.h[a],[])):Object.prototype.hasOwnProperty.call(this.cachedBytes.h,a)?Ha.loadFromBytes(this.cachedBytes.h[a]).then(function(c){var e=b.cachedBytes;Object.prototype.hasOwnProperty.call(e.h,
a)&&delete e.h[a];b.cachedImages.h[a]=c;return Ia.withValue(c)}):Ha.loadFromFile(this.paths.h[a])},loadText:function(a){if(Object.prototype.hasOwnProperty.call(this.cachedText.h,a))return Ia.withValue(this.cachedText.h[a]);if(Object.prototype.hasOwnProperty.call(this.cachedBytes.h,a)||Object.prototype.hasOwnProperty.call(this.classTypes.h,a)){var b=this.getBytes(a);if(null==b)return Ia.withValue(null);b=b.getString(0,b.length);this.cachedText.h[a]=b;return Ia.withValue(b)}return(new bd).load(this.paths.h[a])},
unload:function(){},__assetLoaded:function(a){this.assetsLoaded++;null!=a&&za.verbose("Loaded asset: "+a+" ["+this.types.h[a]+"] ("+(this.assetsLoaded-1)+"/"+(this.assetsTotal-1)+")",{fileName:"lime/utils/AssetLibrary.hx",lineNumber:619,className:"lime.utils.AssetLibrary",methodName:"__assetLoaded"});if(null!=a){var b=Object.prototype.hasOwnProperty.call(this.sizes.h,a)?this.sizes.h[a]:0;if(Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h,a)){var c=this.bytesLoadedCache.h[a];c<b&&(this.bytesLoaded+=
b-c)}else this.bytesLoaded+=b;this.bytesLoadedCache.h[a]=b}this.assetsLoaded<this.assetsTotal?this.promise.progress(this.bytesLoaded,this.bytesTotal):(this.loaded=!0,this.promise.progress(this.bytesTotal,this.bytesTotal),this.promise.complete(this))},__cacheBreak:function(a){return ba.__cacheBreak(a)},__fromBundle:function(a,b){if(null!=b){var c=0;for(b=b.assets;c<b.length;){var e=b[c];++c;var f=Object.prototype.hasOwnProperty.call(e,"id")?e.id:e.path;var h=a.data.h[e.path];if(Object.prototype.hasOwnProperty.call(e,
"type")){var d=e.type;"TEXT"==d?this.cachedText.h[f]=null!=h?z.string(h):null:this.cachedBytes.h[f]=h;this.types.h[f]=e.type}else this.cachedBytes.h[f]=h,this.types.h[f]="BINARY"}}else for(c=0,b=a.paths;c<b.length;)f=b[c],++c,this.cachedBytes.h[f]=a.data.h[f],this.types.h[f]="BINARY"},__fromManifest:function(a){var b=2<=a.version,c=a.rootPath;null==c&&(c="");""!=c&&(c+="/");for(var e=0,f=a.assets;e<f.length;){var h=f[e];++e;var d=b&&Object.prototype.hasOwnProperty.call(h,"size")?h.size:100;var l=
Object.prototype.hasOwnProperty.call(h,"id")?h.id:h.path;if(Object.prototype.hasOwnProperty.call(h,"path")){var g=this.paths;var u=this.__cacheBreak(this.__resolvePath(c+z.string(G.field(h,"path"))));g.h[l]=u}if(Object.prototype.hasOwnProperty.call(h,"pathGroup")){g=G.field(h,"pathGroup");u=0;for(var r=g.length;u<r;){var q=u++;g[q]=this.__cacheBreak(this.__resolvePath(c+g[q]))}this.pathGroups.h[l]=g}this.sizes.h[l]=d;this.types.h[l]=h.type;Object.prototype.hasOwnProperty.call(h,"preload")&&(this.preload.h[l]=
G.field(h,"preload"));Object.prototype.hasOwnProperty.call(h,"className")&&(d=G.field(h,"className"),d=k[d],this.classTypes.h[l]=d)}e=this.bytesTotal=0;for(f=a.assets;e<f.length;)h=f[e],++e,l=Object.prototype.hasOwnProperty.call(h,"id")?h.id:h.path,Object.prototype.hasOwnProperty.call(this.preload.h,l)&&this.preload.h[l]&&Object.prototype.hasOwnProperty.call(this.sizes.h,l)&&(this.bytesTotal+=this.sizes.h[l])},__resolvePath:function(a){a=X.replace(a,"\\","/");var b=a.indexOf(":");X.startsWith(a,"http")&&
0<b?(b+=3,a=F.substr(a,0,b)+X.replace(F.substr(a,b,null),"//","/")):a=X.replace(a,"//","/");if(-1<a.indexOf("./")){a=a.split("/");b=[];for(var c=0,e=a.length;c<e;){var f=c++;".."==a[f]?0==f||".."==b[f-1]?b.push(".."):b.pop():"."==a[f]?0==f&&b.push("."):b.push(a[f])}a=b.join("/")}return a},loadAudioBuffer_onComplete:function(a,b){this.cachedAudioBuffers.h[a]=b;if(Object.prototype.hasOwnProperty.call(this.pathGroups.h,a))for(var c=this.pathGroups.h[a],e=Object.keys(this.pathGroups.h),f=e.length,h=0;h<
f;){var d=e[h++];if(d!=a)for(var l=0;l<c.length;){var g=c[l];++l;if(-1<this.pathGroups.h[d].indexOf(g)){this.cachedAudioBuffers.h[d]=b;break}}}this.__assetLoaded(a)},loadAudioBuffer_onError:function(a,b){null!=b&&""!=b?za.warn('Could not load "'+a+'": '+z.string(b),{fileName:"lime/utils/AssetLibrary.hx",lineNumber:865,className:"lime.utils.AssetLibrary",methodName:"loadAudioBuffer_onError"}):za.warn('Could not load "'+a+'"',{fileName:"lime/utils/AssetLibrary.hx",lineNumber:869,className:"lime.utils.AssetLibrary",
methodName:"loadAudioBuffer_onError"});this.loadAudioBuffer_onComplete(a,new eb)},loadBytes_onComplete:function(a,b){this.cachedBytes.h[a]=b;this.__assetLoaded(a)},loadFont_onComplete:function(a,b){this.cachedFonts.h[a]=b;this.__assetLoaded(a)},loadImage_onComplete:function(a,b){this.cachedImages.h[a]=b;this.__assetLoaded(a)},loadText_onComplete:function(a,b){this.cachedText.h[a]=b;this.__assetLoaded(a)},load_onError:function(a,b){null!=b&&""!=b?this.promise.error('Error loading asset "'+a+'": '+
z.string(b)):this.promise.error('Error loading asset "'+a+'"')},load_onProgress:function(a,b,c){if(0<b){var e=this.sizes.h[a];0<c?(b/=c,1<b&&(b=1),b=Math.floor(b*e)):b>e&&(b=e);Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h,a)?(e=this.bytesLoadedCache.h[a],b!=e&&(this.bytesLoaded+=b-e)):this.bytesLoaded+=b;this.bytesLoadedCache.h[a]=b;this.promise.progress(this.bytesLoaded,this.bytesTotal)}},__class__:Wb};var Fb=function(){this.assets=[];this.libraryArgs=[];this.version=2};k["lime.utils.AssetManifest"]=
Fb;Fb.__name__=!0;Fb.fromBytes=function(a,b){return null!=a?Fb.parse(a.getString(0,a.length),b):null};Fb.loadFromFile=function(a,b){a=Fb.__resolvePath(a);b=Fb.__resolveRootPath(b,a);return null==a?null:wc.loadFromFile(a).then(function(a){return Ia.withValue(Fb.fromBytes(a,b))})};Fb.parse=function(a,b){if(null==a||""==a)return null;a=JSON.parse(a);var c=new Fb;Object.prototype.hasOwnProperty.call(a,"name")&&(c.name=a.name);Object.prototype.hasOwnProperty.call(a,"libraryType")&&(c.libraryType=a.libraryType);
Object.prototype.hasOwnProperty.call(a,"libraryArgs")&&(c.libraryArgs=a.libraryArgs);if(Object.prototype.hasOwnProperty.call(a,"assets")){var e=a.assets;Object.prototype.hasOwnProperty.call(a,"version")&&2>=a.version?c.assets=zb.run(e):c.assets=e}Object.prototype.hasOwnProperty.call(a,"rootPath")&&(c.rootPath=a.rootPath);null!=b&&""!=b&&(c.rootPath=null==c.rootPath||""==c.rootPath?b:b+"/"+c.rootPath);return c};Fb.__resolvePath=function(a){if(null==a)return null;var b=a.indexOf("?");var c=-1<b?F.substr(a,
0,b):a;for(c=X.replace(c,"\\","/");X.endsWith(c,"/");)c=F.substr(c,0,c.length-1);return X.endsWith(c,".bundle")?-1<b?c+"/library.json"+F.substr(a,b,null):c+"/library.json":a};Fb.__resolveRootPath=function(a,b){if(null!=a)return a;a=b.indexOf("?");a=-1<a?F.substr(b,0,a):b;for(a=X.replace(a,"\\","/");X.endsWith(a,"/");){if("/"==a)return a;a=F.substr(a,0,a.length-1)}return X.endsWith(a,".bundle")?a:Ac.directory(a)};Fb.prototype={__class__:Fb};var ba=function(){};k["lime.utils.Assets"]=ba;ba.__name__=
!0;ba.getAsset=function(a,b,c){if(c&&ba.cache.enabled)switch(b){case "BINARY":case "TEXT":c=!1;break;case "FONT":var e=ba.cache.font.h[a];if(null!=e)return e;break;case "IMAGE":e=ba.cache.image.h[a];if(ba.isValidImage(e))return e;break;case "MUSIC":case "SOUND":e=ba.cache.audio.h[a];if(ba.isValidAudio(e))return e;break;case "TEMPLATE":throw B.thrown("Not sure how to get template: "+a);default:return null}var f=a.indexOf(":");e=a.substring(0,f);f=a.substring(f+1);var h=ba.getLibrary(e);if(null!=h)if(h.exists(f,
b)){if(h.isLocal(f,b))return e=h.getAsset(f,b),c&&ba.cache.enabled&&ba.cache.set(a,b,e),e;za.error(b+' asset "'+a+'" exists, but only asynchronously',{fileName:"lime/utils/Assets.hx",lineNumber:133,className:"lime.utils.Assets",methodName:"getAsset"})}else za.error("There is no "+b+' asset with an ID of "'+a+'"',{fileName:"lime/utils/Assets.hx",lineNumber:138,className:"lime.utils.Assets",methodName:"getAsset"});else za.error(ba.__libraryNotFound(e),{fileName:"lime/utils/Assets.hx",lineNumber:143,
className:"lime.utils.Assets",methodName:"getAsset"});return null};ba.getBytes=function(a){return ba.getAsset(a,"BINARY",!1)};ba.getLibrary=function(a){if(null==a||""==a)a="default";return ba.libraries.h[a]};ba.isLocal=function(a,b,c){null==c&&(c=!0);if(c&&ba.cache.enabled&&ba.cache.exists(a,b))return!0;var e=a.indexOf(":");c=a.substring(0,e);a=a.substring(e+1);c=ba.getLibrary(c);return null!=c?c.isLocal(a,b):!1};ba.isValidAudio=function(a){return null!=a};ba.isValidImage=function(a){return null!=
a?null!=a.buffer:!1};ba.loadLibrary=function(a){var b=new ob,c=ba.getLibrary(a);if(null!=c)return c.load();c=a;var e=null;if(Object.prototype.hasOwnProperty.call(ba.bundlePaths.h,a))Tb.loadFromFile(ba.bundlePaths.h[a]).onComplete(function(c){null==c?b.error('Cannot load bundle for library "'+a+'"'):(c=Wb.fromBundle(c),null==c?b.error('Cannot open library "'+a+'"'):(ba.libraries.h[a]=c,c.onChange.add((g=ba.onChange,n(g,g.dispatch))),b.completeWith(c.load())))}).onError(function(c){b.error('There is no asset library with an ID of "'+
a+'"')});else Object.prototype.hasOwnProperty.call(ba.libraryPaths.h,a)?(c=ba.libraryPaths.h[a],e=Ac.directory(c)):(X.endsWith(c,".bundle")?(e=c,c+="/library.json"):e=Ac.directory(c),c=ba.__cacheBreak(c)),Fb.loadFromFile(c,e).onComplete(function(c){null==c?b.error('Cannot parse asset manifest for library "'+a+'"'):(c=Wb.fromManifest(c),null==c?b.error('Cannot open library "'+a+'"'):(ba.libraries.h[a]=c,c.onChange.add((g=ba.onChange,n(g,g.dispatch))),b.completeWith(c.load())))}).onError(function(c){b.error('There is no asset library with an ID of "'+
a+'"')});return b.future};ba.registerLibrary=function(a,b){if(Object.prototype.hasOwnProperty.call(ba.libraries.h,a)){if(ba.libraries.h[a]==b)return;ba.unloadLibrary(a)}null!=b&&b.onChange.add(ba.library_onChange);ba.libraries.h[a]=b};ba.unloadLibrary=function(a){if(null==a||""==a)a="default";var b=ba.libraries.h[a];null!=b&&(ba.cache.clear(a+":"),b.onChange.remove(ba.library_onChange),b.unload());b=ba.libraries;Object.prototype.hasOwnProperty.call(b.h,a)&&delete b.h[a]};ba.__cacheBreak=function(a){0<
ba.cache.version&&(a=-1<a.indexOf("?")?a+("&"+ba.cache.version):a+("?"+ba.cache.version));return a};ba.__libraryNotFound=function(a){if(null==a||""==a)a="default";return null==da.current||null==da.current.__preloader||da.current.__preloader.complete?'There is no asset library named "'+a+'"':'There is no asset library named "'+a+'", or it is not yet preloaded'};ba.library_onChange=function(){ba.cache.clear();ba.onChange.dispatch()};var wc={_new:function(a,b){return new Na(b)},decompress:function(a,
b){switch(b._hx_index){case 0:return Ne.decompress(a);case 1:return Oe.decompress(a);case 2:return Pe.decompress(a);case 3:return Qe.decompress(a)}},fromBytes:function(a){return null==a?null:wc._new(a.length,a.b.bufferValue)},fromFile:function(a){return null},loadFromFile:function(a){return(new ud).load(a)},ofString:function(a){a=Na.ofString(a);return wc._new(a.length,a.b.bufferValue)}},vd=v["lime.utils.CompressionAlgorithm"]={__ename__:!0,__constructs__:null,DEFLATE:{_hx_name:"DEFLATE",_hx_index:0,
__enum__:"lime.utils.CompressionAlgorithm",toString:d},GZIP:{_hx_name:"GZIP",_hx_index:1,__enum__:"lime.utils.CompressionAlgorithm",toString:d},LZMA:{_hx_name:"LZMA",_hx_index:2,__enum__:"lime.utils.CompressionAlgorithm",toString:d},ZLIB:{_hx_name:"ZLIB",_hx_index:3,__enum__:"lime.utils.CompressionAlgorithm",toString:d}};vd.__constructs__=[vd.DEFLATE,vd.GZIP,vd.LZMA,vd.ZLIB];var za=function(){};k["lime.utils.Log"]=za;za.__name__=!0;za.error=function(a,b){if(1<=za.level){a="["+b.className+"] ERROR: "+
z.string(a);if(za.throwErrors)throw B.thrown(a);console.error(a)}};za.verbose=function(a,b){5<=za.level&&(a="["+b.className+"] "+z.string(a),console.log(a))};za.warn=function(a,b){2<=za.level&&console.warn("["+b.className+"] WARNING: "+z.string(a))};var Vd=function(){this.bytesTotalCache=new W;this.bytesLoadedCache2=new W;this.bytesLoadedCache=new Rb;this.onProgress=new sd;this.onComplete=new Va;this.bytesTotal=this.bytesLoaded=0;this.libraries=[];this.libraryNames=[];this.onProgress.add(n(this,this.update))};
k["lime.utils.Preloader"]=Vd;Vd.__name__=!0;Vd.prototype={addLibrary:function(a){this.libraries.push(a)},addLibraryName:function(a){-1==this.libraryNames.indexOf(a)&&this.libraryNames.push(a)},load:function(){for(var a=this,b=0,c=this.libraries;b<c.length;){var e=c[b];++b;this.bytesTotal+=e.bytesTotal}this.loadedLibraries=-1;this.preloadStarted=!1;b=0;for(c=this.libraries;b<c.length;)e=[c[b]],++b,za.verbose("Preloading asset library",{fileName:"lime/utils/Preloader.hx",lineNumber:132,className:"lime.utils.Preloader",
methodName:"load"}),e[0].load().onProgress(function(b){return function(c,e){a.bytesLoaded=null==a.bytesLoadedCache.h.__keys__[b[0].__id__]?a.bytesLoaded+c:a.bytesLoaded+(c-a.bytesLoadedCache.h[b[0].__id__]);a.bytesLoadedCache.set(b[0],c);a.simulateProgress||a.onProgress.dispatch(a.bytesLoaded,a.bytesTotal)}}(e)).onComplete(function(b){return function(c){a.bytesLoaded=null==a.bytesLoadedCache.h.__keys__[b[0].__id__]?a.bytesLoaded+b[0].bytesTotal:a.bytesLoaded+(b[0].bytesTotal-a.bytesLoadedCache.h[b[0].__id__]);
a.loadedAssetLibrary()}}(e)).onError(function(){return function(a){za.error(a,{fileName:"lime/utils/Preloader.hx",lineNumber:168,className:"lime.utils.Preloader",methodName:"load"})}}());b=0;for(c=this.libraryNames;b<c.length;)++b,this.bytesTotal+=200;this.loadedLibraries++;this.preloadStarted=!0;this.updateProgress()},loadedAssetLibrary:function(a){this.loadedLibraries++;var b=this.loadedLibraries;this.preloadStarted||++b;var c=this.libraries.length+this.libraryNames.length;null!=a?za.verbose("Loaded asset library: "+
a+" ["+b+"/"+c+"]",{fileName:"lime/utils/Preloader.hx",lineNumber:195,className:"lime.utils.Preloader",methodName:"loadedAssetLibrary"}):za.verbose("Loaded asset library ["+b+"/"+c+"]",{fileName:"lime/utils/Preloader.hx",lineNumber:199,className:"lime.utils.Preloader",methodName:"loadedAssetLibrary"});this.updateProgress()},start:function(){this.complete||this.simulateProgress||!this.preloadComplete||(this.complete=!0,this.onComplete.dispatch())},update:function(a,b){},updateProgress:function(){var a=
this;this.simulateProgress||this.onProgress.dispatch(this.bytesLoaded,this.bytesTotal);if(this.loadedLibraries==this.libraries.length&&!this.initLibraryNames){this.initLibraryNames=!0;for(var b=0,c=this.libraryNames;b<c.length;){var e=[c[b]];++b;za.verbose("Preloading asset library: "+e[0],{fileName:"lime/utils/Preloader.hx",lineNumber:236,className:"lime.utils.Preloader",methodName:"updateProgress"});ba.loadLibrary(e[0]).onProgress(function(b){return function(c,e){0<e&&(Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h,
b[0])||(a.bytesTotalCache.h[b[0]]=e,a.bytesTotal+=e-200),c>e&&(c=e),Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h,b[0])?a.bytesLoaded+=c-a.bytesLoadedCache2.h[b[0]]:a.bytesLoaded+=c,a.bytesLoadedCache2.h[b[0]]=c,a.simulateProgress||a.onProgress.dispatch(a.bytesLoaded,a.bytesTotal))}}(e)).onComplete(function(b){return function(c){c=200;Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h,b[0])&&(c=a.bytesTotalCache.h[b[0]]);Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h,
b[0])?a.bytesLoaded+=c-a.bytesLoadedCache2.h[b[0]]:a.bytesLoaded+=c;a.loadedAssetLibrary(b[0])}}(e)).onError(function(){return function(a){za.error(a,{fileName:"lime/utils/Preloader.hx",lineNumber:290,className:"lime.utils.Preloader",methodName:"updateProgress"})}}())}}this.simulateProgress||this.loadedLibraries!=this.libraries.length+this.libraryNames.length||(this.preloadComplete||(this.preloadComplete=!0,za.verbose("Preload complete",{fileName:"lime/utils/Preloader.hx",lineNumber:301,className:"lime.utils.Preloader",
methodName:"updateProgress"})),this.start())},__class__:Vd};var Xd=function(a,b){this.drawNeedsUpdate=!1;this.totalTicksPassed=this.elapsedMsSinceLastTick=0;this.isUpdating=!1;this.window=a;this.config=null!=b?b:{framesPerSecond:60,drawOnlyWhenRequested:!1};this.setTickDuration(Math.floor(1E3/this.config.framesPerSecond));this.loop=new wd;this.loop.onInit(this)};k["ob.gum.Gum"]=Xd;Xd.__name__=!0;Xd.prototype={setTickDuration:function(a){this.tickDurationMs=a},toggleUpdate:function(a){this.isUpdating=
null!=a?a:!this.isUpdating},changeLoop:function(a){this.loop=a;this.loop.onInit(this)},onUpdate:function(a){this.isUpdating&&(this.loop.onUpdate(a),this.elapsedMsSinceLastTick+=a,this.elapsedMsSinceLastTick>=this.tickDurationMs&&(this.elapsedMsSinceLastTick=0,this.totalTicksPassed++,this.drawNeedsUpdate=this.loop.onTick(a)),!this.config.drawOnlyWhenRequested||this.drawNeedsUpdate)&&(this.loop.onDraw(a),this.drawNeedsUpdate=!1)},onKeyDown:function(a,b){this.loop.onKeyDown(a,b)},onKeyUp:function(a,
b){this.loop.onKeyUp(a,b)},onMouseMove:function(a,b){this.loop.onMouseMove(a,b)},onMouseDown:function(a,b,c){this.loop.onMouseDown(a,b,c)},onMouseUp:function(a,b,c){this.loop.onMouseUp(a,b,c)},onMouseScroll:function(a,b,c){this.loop.onMouseScroll(a,b,c)},onWindowResize:function(a,b){this.loop.onWindowResize(a,b)},__class__:Xd};var cd=function(){};k["ob.gum.ILoop"]=cd;cd.__name__=!0;cd.__isInterface__=!0;cd.prototype={__class__:cd};var wd=function(){};k["ob.gum.LoadingLoop"]=wd;wd.__name__=!0;wd.__interfaces__=
[cd];wd.prototype={onTick:function(a){return!1},onInit:function(a){this.gum=a;ia.trace("LoadingLoop onInit",{fileName:"ob/gum/Core.hx",lineNumber:136,className:"ob.gum.LoadingLoop",methodName:"onInit"})},onUpdate:function(a){},onDraw:function(a){},onKeyDown:function(a,b){},onKeyUp:function(a,b){},onMouseMove:function(a,b){},onMouseDown:function(a,b,c){},onMouseUp:function(a,b,c){},onMouseScroll:function(a,b,c){},onWindowResize:function(a,b){},__class__:wd};var hc=function(){};k["ob.gum.backends.PeoteViewLoop"]=
hc;hc.__name__=!0;hc.__interfaces__=[cd];hc.prototype={onInit:function(a){this.gum=a;this.peoteView=new Be(a.window);var b=null==a.config.displayWidth?a.window.__width:a.config.displayWidth,c=null==a.config.displayHeight?a.window.__height:a.config.displayHeight;this.display=new Ce(0,0,a.config.displayIsScaled?a.window.__width:b,a.config.displayIsScaled?a.window.__height:c,255);this.peoteView.addDisplay(this.display);this.peoteView.start()},onUpdate:function(a){},onTick:function(a){return!1},onDraw:function(a){},
onKeyDown:function(a,b){},onKeyUp:function(a,b){},onMouseMove:function(a,b){},onMouseDown:function(a,b,c){},onMouseUp:function(a,b,c){},onMouseScroll:function(a,b,c){},onWindowResize:function(a,b){this.peoteView.resize(a,b)},__class__:hc};var ec=function(){};k["ob.gum.backends.PaletteExtensions"]=ec;ec.__name__=!0;ec.toRGBA=function(a){for(var b=[],c=0;c<a.length;){var e=a[c];++c;b.push(ec.RGBA(e))}return b};ec.RGBA=function(a,b){null==b&&(b=255);return a<<8|b};ec.changeAlpha=function(a,b){return(a&
-16777216)>>24<<24|(a&16711680)>>16<<16|(a&65280)>>8<<8|b};var Zd=function(a){this.imageCache=[];this.fontCache=[];this.paths=a};k["ob.gum.backends.Assets"]=Zd;Zd.__name__=!0;Zd.prototype={Preload:function(a){ia.trace("begin loading "+z.string(this.paths),{fileName:"ob/gum/backends/PeoteView.hx",lineNumber:125,className:"ob.gum.backends.Assets",methodName:"Preload"});this.onReady=a;this.loadFonts()},loadFonts:function(a){null==a&&(a=0);var b=this;if(a>this.paths.fonts.length-1)this.loadImages();else{var c=
this.paths.fonts[a];ia.trace("loading font index "+a+" "+c,{fileName:"ob/gum/backends/PeoteView.hx",lineNumber:137,className:"ob.gum.backends.Assets",methodName:"loadFonts"});(new De(c)).load(function(c){b.fontCache.push(c);a+=1;b.loadFonts(a)})}},loadImages:function(){var a,b=this;ia.trace("load images",{fileName:"ob/gum/backends/PeoteView.hx",lineNumber:147,className:"ob.gum.backends.Assets",methodName:"loadImages"});var c=!1;if(0>=this.paths.images.length)ia.trace("asset loading finished",{fileName:"ob/gum/backends/PeoteView.hx",
lineNumber:150,className:"ob.gum.backends.Assets",methodName:"loadImages"}),this.onReady();else{ia.trace("loading "+this.paths.images.length+" images",{fileName:"ob/gum/backends/PeoteView.hx",lineNumber:153,className:"ob.gum.backends.Assets",methodName:"loadImages"});var e=this.paths.images,f=c,h=function(a,c){ia.trace(c,{fileName:"ob/gum/backends/PeoteView.hx",lineNumber:156,className:"ob.gum.backends.Assets",methodName:"loadImages"});ia.trace("starting without images",{fileName:"ob/gum/backends/PeoteView.hx",
lineNumber:157,className:"ob.gum.backends.Assets",methodName:"loadImages"});b.onReady()},d=function(a){b.imageCache=a;ia.trace("loaded "+b.imageCache.length+" images",{fileName:"ob/gum/backends/PeoteView.hx",lineNumber:161,className:"ob.gum.backends.Assets",methodName:"loadImages"});ia.trace("asset loading finished",{fileName:"ob/gum/backends/PeoteView.hx",lineNumber:162,className:"ob.gum.backends.Assets",methodName:"loadImages"});b.onReady()};null==f&&(f=!1);var l=[],g=e.length;var u=0;for(a=e.length;u<
a;){var r=[u++];var q=[e[r[0]]];c=f;var v=null==h?null:function(a){return function(b){h(a[0],b)}}(r);r=null==d?null:function(a){return function(b){l[a[0]]=b;0==--g&&d(l)}}(r);null==c&&(c=!1);""!=Ja.corsServer&&(new Z("^https?://","")).match(q[0])&&(q[0]="//"+Ja.corsServer+"/"+q[0]);var k=Ha.loadFromFile(q[0]);c&&(ia.trace('Start loading image "'+q[0]+'"',{fileName:"utils/Loader.hx",lineNumber:28,className:"utils.Loader",methodName:"image"}),k.onProgress(function(a){return function(b,c){Ja.onProgressDebug(b,
c,a[0])}}(q)),k.onError(Ja.onErrorDebug),k.onComplete(function(a){return function(b){Ja.onCompleteDebug(a[0])}}(q)));if(null!=v)k.onError(v);if(null!=r)k.onComplete(r)}}},__class__:Zd};var Ee=function(){this.weight=.5;this.zIndex=this.tilt=0;this.width=this.height=16;this.bgColor=255;this.color=-855703297};k["ob.gum.backends.FontStyle"]=Ee;Ee.__name__=!0;Ee.prototype={__class__:Ee};var Ba=function(){};k["peote.text.BackgroundElement"]=Ba;Ba.__name__=!0;var be=function(){};k["peote.text.FontConfig"]=
be;be.__name__=!0;be.prototype={__class__:be};var ic=function(a){this.uniformFloats=[];this.hasFragmentInjection=this.ready=!1;this.fragmentFloatPrecision=null;this.formulaHasChanged=!1;this.formula=new W;this.colorFormula="";this.used_by_ColorFormula=this.usedID_by_ColorFormula=0;this.textureID_Defaults=[];this.customTextureIdentifiers=[];this.activeUnits=[];this.activeTextures=[];this.textureLayers=new Bb;this.textureListPicking=new xd(new Rb);this.textureList=new xd(new Rb);this.glShaderConfig=
{isPICKING:!1,isES3:!1,isINSTANCED:!1,isUBO:!1,IN:"attribute",VARIN:"varying",VAROUT:"varying",hasTEXTURES:!1,hasTEXTURE_FUNCTIONS:!1,hasFRAGMENT_INJECTION:!1,FRAGMENT_PROGRAM_UNIFORMS:"",FRAGMENT_CALC_LAYER:"",TEXTURES:[],TEXTURE_DEFAULTS:[],isDISCARD:!0,DISCARD:"0.0",isPIXELSNAPPING:!1,PIXELDIVISOR:"1.0",VERTEX_FLOAT_PRECISION:null,VERTEX_INT_PRECISION:null,VERTEX_SAMPLER_PRECISION:null,FRAGMENT_FLOAT_PRECISION:null,FRAGMENT_INT_PRECISION:null,FRAGMENT_SAMPLER_PRECISION:null,VERTEX_INJECTION:"",
FRAGMENT_INJECTION:"",SIZE_FORMULA:null,POS_FORMULA:null,ROTZ_FORMULA:null,PIVOT_FORMULA:null,FORMULA_VARYINGS:{},FORMULA_CONSTANTS:{},FRAGMENT_EXTENSIONS:[]};this.gl=this.glProgram=this.glProgramPicking=this.glVertexShader=this.glFragmentShader=this.glVertexShaderPicking=this.glFragmentShaderPicking=null;this.displays=[];this.autoUpdateTextures=this.isVisible=!0;this.clearMask=!1;this.mask=0;this.colorEnabled=!0;this.buffer=a;this.alphaEnabled=a.hasAlpha();this.zIndexEnabled=a.hasZindex();this.colorIdentifiers=
a.getColorIdentifiers();this.customIdentifiers=a.getCustomIdentifiers();this.customVaryings=a.getCustomVaryings();this.textureIdentifiers=a.getTextureIdentifiers();this.defaultColorFormula=a.getDefaultColorFormula();this.defaultFormulaVars=a.getDefaultFormulaVars();var b=a.getFormulas().h;b=Object.keys(b);for(var c=b.length,e=0;e<c;){var f=b[e++],h=this.formula,d=a.getFormulas().h[f];h.h[f]=d}try{nc.resolveFormulaCyclic(a.getFormulas())}catch(l){throw ka.lastError=l,a=B.caught(l).unwrap(),B.thrown('Error: cyclic reference of "'+
z.string(a.errVar)+'" inside @formula "'+z.string(a.formula)+'" for "'+z.string(a.errKey)+'"');}nc.resolveFormulaVars(a.getFormulas(),a.getAttributes());this.parseColorFormula()};k["peote.view.Program"]=ic;ic.__name__=!0;ic.prototype={addToDisplay:function(a,b,c){null==c&&(c=!1);if(0>this.displays.indexOf(a)){this.displays.push(a);var e=a.gl;if(null!=e&&e!=this.gl){for(var f=0,h=this.displays;f<h.length;){var d=h[f];++f;if(null!=d.gl&&d.gl!=e)throw B.thrown("Error, program can not used inside different gl-contexts");
}null!=this.gl&&(this.gl.deleteShader(this.glVertexShader),this.gl.deleteShader(this.glFragmentShader),this.gl.deleteProgram(this.glProgram),this.buffer.hasPicking()&&(this.gl.deleteShader(this.glVertexShaderPicking),this.gl.deleteShader(this.glFragmentShaderPicking),this.gl.deleteProgram(this.glProgramPicking)));this.gl=e;Y.isES3&&(this.glShaderConfig.isES3=!0,this.glShaderConfig.IN="in",this.glShaderConfig.VARIN="in",this.glShaderConfig.VAROUT="out");Y.isUBO&&(this.glShaderConfig.isUBO=!0);Y.isINSTANCED&&
(this.glShaderConfig.isINSTANCED=!0);this.glShaderConfig.FRAGMENT_EXTENSIONS=[];null!=this.gl.getExtension("OES_standard_derivatives")&&this.glShaderConfig.FRAGMENT_EXTENSIONS.push({EXTENSION:"GL_OES_standard_derivatives"});null!=this.gl.getExtension("EXT_color_buffer_float")?this.glShaderConfig.FRAGMENT_EXTENSIONS.push({EXTENSION:"EXT_color_buffer_float"}):null!=this.gl.getExtension("OES_texture_float")&&this.glShaderConfig.FRAGMENT_EXTENSIONS.push({EXTENSION:"OES_texture_float"});this.buffer.setNewGLContext(this.gl);
this.createProg();this.buffer.hasPicking()&&this.createProg(!0);f=0;for(h=this.activeTextures;f<h.length;){var l=h[f];++f;e=this.gl;if(null!=e&&e!=l.gl){d=0;for(var g=l.programs;d<g.length;){var u=g[d];++d;if(null!=u.gl&&u.gl!=e)throw B.thrown("Error, texture can not used inside different gl-contexts");}g=0;for(u=l.displays;g<u.length;)if(d=u[g],++g,null!=d.gl&&d.gl!=e)throw B.thrown("Error, texture can not used inside different gl-contexts");null!=l.gl&&(l.gl.deleteTexture(l.glTexture),l.glTexture=
null,0==l.displays.length&&null!=l.framebuffer&&(l.gl.deleteFramebuffer(l.framebuffer),l.framebuffer=null,null!=l.glDepthBuffer&&l.gl.deleteRenderbuffer(l.glDepthBuffer),l.glDepthBuffer=null));l.gl=e;if(l.width>l.gl.getParameter(l.gl.MAX_TEXTURE_SIZE)||l.height>l.gl.getParameter(l.gl.MAX_TEXTURE_SIZE))throw B.thrown("Error, texture size is greater then gl.MAX_TEXTURE_SIZE");l.glTexture=Yb.createEmptyTexture(l.gl,l.width,l.height,l.colorChannels,l.createMipmaps,l.magFilter,l.minFilter,l.useFloat);
if(0<l.displays.length&&null==l.framebuffer){l.glDepthBuffer=l.gl.createRenderbuffer();e=l.gl;d=l.glTexture;g=l.glDepthBuffer;u=l.width;var r=l.height,q=e.createFramebuffer();e.bindRenderbuffer(e.RENDERBUFFER,g);Qa.clearGlErrorQueue(e);e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT24,u,r);Qa.getLastGlError(e)==e.INVALID_ENUM&&(ia.trace("switching to DEPTH_COMPONENT16 for framebuffer",{fileName:"peote/view/utils/GLTool.hx",lineNumber:41,className:"peote.view.utils.GLTool",methodName:"createFramebuffer"}),
e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,u,r));e.bindFramebuffer(e.FRAMEBUFFER,q);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,g);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,d,0);if(e.checkFramebufferStatus(e.FRAMEBUFFER)!=e.FRAMEBUFFER_COMPLETE)throw B.thrown("Error: Framebuffer not complete!");e.bindFramebuffer(e.FRAMEBUFFER,null);e.bindRenderbuffer(e.RENDERBUFFER,null);l.framebuffer=q;l.updated=!0}for(e=l.images.keys();e.hasNext();)d=
e.next(),l.bufferImage(d,l.images.h[d.__id__])}}}}a.programList.add(this,b,c)},createProg:function(a){null==a&&(a=!1);this.glShaderConfig.isPICKING=a;if(null!=this.fragmentFloatPrecision)this.glShaderConfig.FRAGMENT_FLOAT_PRECISION=this.fragmentFloatPrecision;else if(this.buffer.needFragmentPrecision()&&23>Sa.FragmentFloat.medium){var b=Sa.FragmentFloat;this.glShaderConfig.FRAGMENT_FLOAT_PRECISION=0<b.high?"highp":0<b.medium?"mediump":0<b.low?"lowp":null}else b=Sa.FragmentFloat,this.glShaderConfig.FRAGMENT_FLOAT_PRECISION=
0<b.medium?"mediump":0<b.low?"lowp":null;this.parseAndResolveFormulas();var c=this.gl,e=this.gl.VERTEX_SHADER,f=this.buffer.getVertexShader(),h=this.glShaderConfig;f=new Fa(f);var d=Qa.rStartspaces,l=Qa.rEmptylines;h=f.execute(h).replace(l.r,"\n").replace(d.r,"");f=c.createShader(e);c.shaderSource(f,h);c.compileShader(f);if(0==c.getShaderParameter(f,c.COMPILE_STATUS))throw B.thrown("ERROR compiling "+(e==c.VERTEX_SHADER?"vertex":"fragment")+" shader\n"+z.string(c.getShaderInfoLog(f)));b=f;c=this.gl;
e=this.gl.FRAGMENT_SHADER;f=this.buffer.getFragmentShader();h=this.glShaderConfig;f=new Fa(f);d=Qa.rStartspaces;l=Qa.rEmptylines;h=f.execute(h).replace(l.r,"\n").replace(d.r,"");f=c.createShader(e);c.shaderSource(f,h);c.compileShader(f);if(0==c.getShaderParameter(f,c.COMPILE_STATUS))throw B.thrown("ERROR compiling "+(e==c.VERTEX_SHADER?"vertex":"fragment")+" shader\n"+z.string(c.getShaderInfoLog(f)));e=f;h=this.gl.createProgram();this.gl.attachShader(h,b);this.gl.attachShader(h,e);this.buffer.bindAttribLocations(this.gl,
h);c=this.gl;c.linkProgram(h);if(0==c.getProgramParameter(h,c.LINK_STATUS))throw B.thrown(z.string(c.getProgramInfoLog(h))+"VALIDATE_STATUS: "+z.string(c.getProgramParameter(h,c.VALIDATE_STATUS))+"ERROR: "+z.string(c.getError()));!a&&Y.isUBO?(c=this.gl.getUniformBlockIndex(h,"uboView"),c!=this.gl.INVALID_INDEX&&this.gl.uniformBlockBinding(h,c,0),c=this.gl.getUniformBlockIndex(h,"uboDisplay"),c!=this.gl.INVALID_INDEX&&this.gl.uniformBlockBinding(h,c,1)):a?(this.uRESOLUTION_PICK=this.gl.getUniformLocation(h,
"uResolution"),this.uZOOM_PICK=this.gl.getUniformLocation(h,"uZoom"),this.uOFFSET_PICK=this.gl.getUniformLocation(h,"uOffset")):(this.uRESOLUTION=this.gl.getUniformLocation(h,"uResolution"),this.uZOOM=this.gl.getUniformLocation(h,"uZoom"),this.uOFFSET=this.gl.getUniformLocation(h,"uOffset"));if(a)for(this.uTIME_PICK=this.gl.getUniformLocation(h,"uTime"),this.uniformFloatPickLocations=[],c=0,f=this.uniformFloats;c<f.length;)d=f[c],++c,this.uniformFloatPickLocations.push(this.gl.getUniformLocation(h,
d.name));else for(this.uTIME=this.gl.getUniformLocation(h,"uTime"),this.uniformFloatLocations=[],c=0,f=this.uniformFloats;c<f.length;)d=f[c],++c,this.uniformFloatLocations.push(this.gl.getUniformLocation(h,d.name));if(a){this.textureListPicking.clear();c=0;for(f=this.activeTextures.length;c<f;)a=c++,this.textureListPicking.add(new Id(this.activeUnits[a],this.activeTextures[a],this.gl.getUniformLocation(h,"uTexture"+a)),null,!1);this.glProgramPicking=h;this.glVertexShaderPicking=b;this.glFragmentShaderPicking=
e}else{this.textureList.clear();c=0;for(f=this.activeTextures.length;c<f;)a=c++,this.textureList.add(new Id(this.activeUnits[a],this.activeTextures[a],this.gl.getUniformLocation(h,"uTexture"+a)),null,!1);this.glProgram=h;this.glVertexShader=b;this.glFragmentShader=e}this.ready=!0},parseColorFormula:function(){var a="";if(""!=this.colorFormula)a=this.colorFormula;else if(""!=this.defaultColorFormula)a=this.defaultColorFormula;else{for(var b=this.colorIdentifiers.slice(),c=[],e=0,f=this.textureIdentifiers.length;e<
f;){var h=e++;this.textureLayers.h.hasOwnProperty(h)&&c.push(this.textureIdentifiers[h])}e=0;for(f=this.customTextureIdentifiers.length;e<f;)h=e++,this.textureLayers.h.hasOwnProperty(this.textureIdentifiers.length+h)&&c.push(this.customTextureIdentifiers[h]);if(0==b.length+c.length){var d=-16776961;c=""+z.string((d>>24&255)/255);var l=""+z.string((d>>16&255)/255),g=""+z.string((d>>8&255)/255);d=""+z.string((d&255)/255);a="vec4("+(-1!=c.indexOf(".")||-1!=c.indexOf("e-")?c:c+".0")+", "+(-1!=l.indexOf(".")||
-1!=l.indexOf("e-")?l:l+".0")+", "+((-1!=g.indexOf(".")||-1!=g.indexOf("e-")?g:g+".0")+", "+(-1!=d.indexOf(".")||-1!=d.indexOf("e-")?d:d+".0")+")")}else{0<c.length&&(a=c.shift(),0<b.length&&(a=""+b.shift()+" * "+a));for(e=0;e<c.length;)l=c[e],++e,0<b.length&&(l=""+b.shift()+" * "+l+" "),a="mix( "+a+", "+l+", ("+l+").a )";for(;0<b.length;)a+=(""!=a?"*":"")+b.shift(),0<b.length&&(a="("+a+" + "+b.shift()+")")}}e=0;for(f=this.colorIdentifiers.length;e<f;)h=e++,b=new Z("(^|.*?[^\\w.])"+this.colorIdentifiers[h]+
"\\b.*?","g"),b.match(a)&&(a=a.replace(b.r,"$1c"+h));e=0;for(f=this.customIdentifiers.length;e<f;)if(h=e++,b=new Z("(^|.*?[^\\w.])"+this.customIdentifiers[h]+"\\b.*?","g"),b.match(a))if(null!=this.customVaryings[h])a=a.replace(b.r,"$1"+this.customVaryings[h]);else throw B.thrown("Error while parsing ColorFormula: custom identifier "+this.customIdentifiers[h]+" need @varying to access in fragmentshader");this.textureID_Defaults=[];e=this.usedID_by_ColorFormula=this.used_by_ColorFormula=0;for(f=this.textureIdentifiers.length;e<
f;)h=e++,b=new Z("(^|.*?[^\\w.])"+this.textureIdentifiers[h]+"\\b.*?","g"),b.match(a)&&(this.textureLayers.h.hasOwnProperty(h)&&(a=a.replace(b.r,"$1t"+h)),this.used_by_ColorFormula|=1<<h),b=new Z("(^|.*?[^\\w.])"+(this.textureIdentifiers[h]+"_ID\\b.*?"),"g"),b.match(a)&&(a=a.replace(b.r,"$1"+h),this.usedID_by_ColorFormula|=1<<h,this.textureLayers.h.hasOwnProperty(h)||(d=this.defaultFormulaVars.h[this.textureIdentifiers[h]],c=""+z.string((d>>24&255)/255),l=""+z.string((d>>16&255)/255),g=""+z.string((d>>
8&255)/255),d=""+z.string((d&255)/255),this.textureID_Defaults.push({layer:h,value:"vec4("+(-1!=c.indexOf(".")||-1!=c.indexOf("e-")?c:c+".0")+", "+(-1!=l.indexOf(".")||-1!=l.indexOf("e-")?l:l+".0")+", "+((-1!=g.indexOf(".")||-1!=g.indexOf("e-")?g:g+".0")+", "+(-1!=d.indexOf(".")||-1!=d.indexOf("e-")?d:d+".0")+")")})));e=0;for(f=this.customTextureIdentifiers.length;e<f;)h=e++,b=new Z("(^|.*?[^\\w.])"+this.customTextureIdentifiers[h]+"\\b.*?","g"),b.match(a)&&(this.textureLayers.h.hasOwnProperty(this.textureIdentifiers.length+
h)&&(a=a.replace(b.r,"$1t"+(this.textureIdentifiers.length+h))),this.used_by_ColorFormula|=1<<this.textureIdentifiers.length+h),b=new Z("(^|.*?[^\\w.])"+(this.customTextureIdentifiers[h]+"_ID\\b.*?"),"g"),b.match(a)&&(a=a.replace(b.r,"$1"+(this.textureIdentifiers.length+h)),this.usedID_by_ColorFormula|=1<<this.textureIdentifiers.length+h,this.textureLayers.h.hasOwnProperty(this.textureIdentifiers.length+h)||(d=this.defaultFormulaVars.h[this.textureIdentifiers[this.textureIdentifiers.length+h]],c=
""+z.string((d>>24&255)/255),l=""+z.string((d>>16&255)/255),g=""+z.string((d>>8&255)/255),d=""+z.string((d&255)/255),this.textureID_Defaults.push({layer:this.textureIdentifiers.length+h,value:"vec4("+(-1!=c.indexOf(".")||-1!=c.indexOf("e-")?c:c+".0")+", "+(-1!=l.indexOf(".")||-1!=l.indexOf("e-")?l:l+".0")+", "+((-1!=g.indexOf(".")||-1!=g.indexOf("e-")?g:g+".0")+", "+(-1!=d.indexOf(".")||-1!=d.indexOf("e-")?d:d+".0")+")")})));e=Object.keys(this.defaultFormulaVars.h);f=e.length;for(h=0;h<f;)c=e[h++],
b=new Z("(^|.*?[^\\w.])"+c+"\\b.*?","g"),b.match(a)&&(d=this.defaultFormulaVars.h[c],c=""+z.string((d>>24&255)/255),l=""+z.string((d>>16&255)/255),g=""+z.string((d>>8&255)/255),d=""+z.string((d&255)/255),a=a.replace(b.r,"$1vec4("+((-1!=c.indexOf(".")||-1!=c.indexOf("e-")?c:c+".0")+", "+(-1!=l.indexOf(".")||-1!=l.indexOf("e-")?l:l+".0")+", "+((-1!=g.indexOf(".")||-1!=g.indexOf("e-")?g:g+".0")+", "+(-1!=d.indexOf(".")||-1!=d.indexOf("e-")?d:d+".0")+")"))));this.glShaderConfig.FRAGMENT_CALC_LAYER=a},
setColorFormula:function(a,b,c){null==a&&(a="");this.colorFormula=a;if(null!=b){a=Object.keys(b.h);for(var e=a.length,f=0;f<e;){var h=a[f++];if(!(new Z("^([a-zA-z_]+\\d*)+$","g")).match(h))throw B.thrown('Error: "'+h+'" is not an identifier, please use only letters/numbers or "_" (starting with a letter)');this.defaultFormulaVars.h[h]=b.h[h]}}null!=c?c&&this.updateTextures():this.autoUpdateTextures&&this.updateTextures()},setFormula:function(a,b,c){var e=this.buffer.getFormulaNames().h[a];if(null!=
e)ia.trace("  set formula: "+e+" = "+b,{fileName:"peote/view/Program.hx",lineNumber:514,className:"peote.view.Program",methodName:"setFormula"}),this.formula.h[e]=b;else{e=[];var f=this.buffer.getFormulaNames().h;f=Object.keys(f);for(var h=f.length,d=0;d<h;){var g=f[d++];e.push(this.buffer.getFormulaNames().h[g])}if(0<=e.indexOf(a))this.formula.h[a]=b;else if(0<=this.buffer.getFormulaVaryings().indexOf(a))ia.trace("  set formula for varying: "+a+" = "+b,{fileName:"peote/view/Program.hx",lineNumber:522,
className:"peote.view.Program",methodName:"setFormula"}),this.formula.h[a]=b;else if(0<=this.buffer.getFormulaConstants().indexOf(a))ia.trace("  set formula for constant: "+a+" = "+b,{fileName:"peote/view/Program.hx",lineNumber:526,className:"peote.view.Program",methodName:"setFormula"}),this.formula.h[a]=b;else if(0<=this.buffer.getFormulaCustoms().indexOf(a))ia.trace("  set formula for custom: "+a+" = "+b,{fileName:"peote/view/Program.hx",lineNumber:530,className:"peote.view.Program",methodName:"setFormula"}),
this.formula.h[a]=b;else throw B.thrown("Error: can not set Formula for "+a+" if there is no property defined for @"+a+" inside Element");}this.formulaHasChanged=!0;null!=c?c&&this.updateTextures():this.autoUpdateTextures&&this.updateTextures()},parseAndResolveFormulas:function(){var a=this;if(this.formulaHasChanged){for(var b=new W,c=Object.keys(this.formula.h),e=c.length,f=0;f<e;){var h=c[f++];b.h[h]=this.formula.h[h]}var d=b;try{nc.resolveFormulaCyclic(d)}catch(l){throw ka.lastError=l,b=B.caught(l).unwrap(),
B.thrown('Error: cyclic reference of "'+z.string(b.errVar)+'" inside formula "'+z.string(b.formula)+'" for "'+z.string(b.errKey)+'"');}nc.resolveFormulaVars(d,this.buffer.getAttributes());b=function(b,c,e,f){var h=a.buffer.getFormulaNames().h[b];null==h&&(h="");var g=a.buffer.getFormulaNames().h[c];null==g&&(g="");var l=d.h[h],u=d.h[g];return l!=a.buffer.getFormulas().h[h]||u!=a.buffer.getFormulas().h[g]?(null==l&&(l=a.buffer.getAttributes().h[h]),null==l&&(l=e),null==u&&(u=a.buffer.getAttributes().h[g]),
null==u&&(u=f),"rotation"==b&&"0.0"!=l&&(l="("+l+")/180.0*"+Math.PI),"zIndex"==c&&"0.0"!=u&&(b=""+z.string(a.buffer.getMaxZindex()),u="clamp( "+u+"/"+(-1!=b.indexOf(".")||-1!=b.indexOf("e-")?b:b+".0")+", -1.0, 1.0)"),"vec2("+l+", "+u+")"):null};this.glShaderConfig.SIZE_FORMULA=b("sizeX","sizeY","100.0","100.0");this.glShaderConfig.POS_FORMULA=b("posX","posY","0.0","0.0");this.glShaderConfig.ROTZ_FORMULA=b("rotation","zIndex","0.0","0.0");this.glShaderConfig.PIVOT_FORMULA=b("pivotX","pivotY","0.0",
"0.0");b=0;for(c=this.buffer.getFormulaVaryings();b<c.length;)e=c[b],++b,f=d.h[e],f!=this.buffer.getFormulas().h[e]?(null==f&&(f=this.buffer.getAttributes().h[e]),this.glShaderConfig.FORMULA_VARYINGS[e]=f,ia.trace(" -- replacing Formula "+e+" => "+f,{fileName:"peote/view/Program.hx",lineNumber:591,className:"peote.view.Program",methodName:"parseAndResolveFormulas"})):this.glShaderConfig.FORMULA_VARYINGS[e]=null;b=0;for(c=this.buffer.getFormulaConstants();b<c.length;)e=c[b],++b,f=d.h[e],null!=f&&f!=
this.buffer.getAttributes().h[e]?(this.glShaderConfig.FORMULA_CONSTANTS[e]=f,ia.trace(" -- replacing Formula "+e+" => "+f,{fileName:"peote/view/Program.hx",lineNumber:601,className:"peote.view.Program",methodName:"parseAndResolveFormulas"})):this.glShaderConfig.FORMULA_CONSTANTS[e]=null}},getTextureIndexByIdentifier:function(a,b){null==b&&(b=!0);var c=this.textureIdentifiers.indexOf(a);if(0>c&&(c=this.customTextureIdentifiers.indexOf(a),0>c&&b)){if(!(new Z("^([a-zA-z_]+\\d*)+$","g")).match(a))throw B.thrown('Error: "'+
a+'" is not an identifier, please use only letters/numbers or "_" (starting with a letter)');c=this.textureIdentifiers.length+this.customTextureIdentifiers.length;this.customTextureIdentifiers.push(a)}return c},setTexture:function(a,b,c){b=this.getTextureIndexByIdentifier(b);this.textureLayers.h[b]=[a];null!=c?c&&this.updateTextures():this.autoUpdateTextures&&this.updateTextures()},updateTextures:function(){for(var a=[],b=this.textureLayers.keys();b.hasNext();)for(var c=b.next(),e=0,f=this.textureLayers.h[c];e<
f.length;)c=f[e],++e,0>a.indexOf(c)&&a.push(c);for(var h=this.activeTextures.length;0<h--;)if(0>a.indexOf(this.activeTextures[h])){if(!F.remove(this.activeTextures[h].programs,this))throw B.thrown("Error, this texture is not used by program anymore");this.activeTextures.splice(h,1);this.activeUnits.splice(h,1)}for(e=0;e<a.length;)if(c=a[e],++e,0>this.activeTextures.indexOf(c)){this.activeTextures.push(c);for(f=0;0<=this.activeUnits.indexOf(f);)++f;this.activeUnits.push(f);if(0<=c.programs.indexOf(this))throw B.thrown("Error, texture is already used by program");
b=this.gl;if(null!=b&&b!=c.gl){f=0;for(h=c.programs;f<h.length;){var d=h[f];++f;if(null!=d.gl&&d.gl!=b)throw B.thrown("Error, texture can not used inside different gl-contexts");}f=0;for(h=c.displays;f<h.length;)if(d=h[f],++f,null!=d.gl&&d.gl!=b)throw B.thrown("Error, texture can not used inside different gl-contexts");null!=c.gl&&(c.gl.deleteTexture(c.glTexture),c.glTexture=null,0==c.displays.length&&null!=c.framebuffer&&(c.gl.deleteFramebuffer(c.framebuffer),c.framebuffer=null,null!=c.glDepthBuffer&&
c.gl.deleteRenderbuffer(c.glDepthBuffer),c.glDepthBuffer=null));c.gl=b;if(c.width>c.gl.getParameter(c.gl.MAX_TEXTURE_SIZE)||c.height>c.gl.getParameter(c.gl.MAX_TEXTURE_SIZE))throw B.thrown("Error, texture size is greater then gl.MAX_TEXTURE_SIZE");c.glTexture=Yb.createEmptyTexture(c.gl,c.width,c.height,c.colorChannels,c.createMipmaps,c.magFilter,c.minFilter,c.useFloat);if(0<c.displays.length&&null==c.framebuffer){c.glDepthBuffer=c.gl.createRenderbuffer();f=c.gl;b=c.glTexture;h=c.glDepthBuffer;d=c.width;
var g=c.height,u=f.createFramebuffer();f.bindRenderbuffer(f.RENDERBUFFER,h);Qa.clearGlErrorQueue(f);f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT24,d,g);Qa.getLastGlError(f)==f.INVALID_ENUM&&(ia.trace("switching to DEPTH_COMPONENT16 for framebuffer",{fileName:"peote/view/utils/GLTool.hx",lineNumber:41,className:"peote.view.utils.GLTool",methodName:"createFramebuffer"}),f.renderbufferStorage(f.RENDERBUFFER,f.DEPTH_COMPONENT16,d,g));f.bindFramebuffer(f.FRAMEBUFFER,u);f.framebufferRenderbuffer(f.FRAMEBUFFER,
f.DEPTH_ATTACHMENT,f.RENDERBUFFER,h);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,b,0);if(f.checkFramebufferStatus(f.FRAMEBUFFER)!=f.FRAMEBUFFER_COMPLETE)throw B.thrown("Error: Framebuffer not complete!");f.bindFramebuffer(f.FRAMEBUFFER,null);f.bindRenderbuffer(f.RENDERBUFFER,null);c.framebuffer=u;c.updated=!0}for(f=c.images.keys();f.hasNext();)b=f.next(),c.bufferImage(b,c.images.h[b.__id__])}c.programs.push(this)}this.parseColorFormula();this.glShaderConfig.hasFRAGMENT_INJECTION=
this.hasFragmentInjection;this.glShaderConfig.FRAGMENT_PROGRAM_UNIFORMS="";this.glShaderConfig.TEXTURES=[];if(0==this.activeTextures.length)this.glShaderConfig.hasTEXTURES=!1;else{this.glShaderConfig.hasTEXTURES=!0;e=0;for(f=this.activeTextures.length;e<f;)h=e++,this.glShaderConfig.FRAGMENT_PROGRAM_UNIFORMS+="uniform sampler2D uTexture"+h+";";for(b=this.textureLayers.keys();b.hasNext();){c=b.next();a=[];d=this.textureLayers.h[c];e=0;for(f=d.length;e<f;){h=e++;g=""+z.string(d[h].slotWidth/d[h].width);
u=""+z.string(d[h].slotHeight/d[h].height);var r=""+z.string(d[h].slotsX*d[h].slotWidth/d[h].width),v=""+z.string(d[h].slotsY*d[h].slotHeight/d[h].height);a.push({UNIT_VALUE:h+1+".0",TEXTURE:"uTexture"+this.activeTextures.indexOf(d[h]),SLOTS_X:d[h].slotsX+".0",SLOTS_Y:d[h].slotsY+".0",SLOT_WIDTH:-1!=g.indexOf(".")||-1!=g.indexOf("e-")?g:g+".0",SLOT_HEIGHT:-1!=u.indexOf(".")||-1!=u.indexOf("e-")?u:u+".0",SLOTS_WIDTH:-1!=r.indexOf(".")||-1!=r.indexOf("e-")?r:r+".0",SLOTS_HEIGHT:-1!=v.indexOf(".")||
-1!=v.indexOf("e-")?v:v+".0",TILES_X:d[h].tilesX+".0",TILES_Y:d[h].tilesY+".0",TEXTURE_WIDTH:d[h].width+".0",TEXTURE_HEIGHT:d[h].height+".0",FIRST:0==h,LAST:h==d.length-1})}this.glShaderConfig.TEXTURES.push({LAYER:c,UNITS:a,USED:0<(this.used_by_ColorFormula&1<<c),USED_ID:0<(this.usedID_by_ColorFormula&1<<c)})}}this.glShaderConfig.TEXTURE_DEFAULTS=[];e=0;for(f=this.textureID_Defaults;e<f.length;)a=f[e],++e,this.glShaderConfig.TEXTURE_DEFAULTS.push({LAYER:a.layer,DEFAULT_VALUE:a.value});this.glShaderConfig.hasTEXTURE_FUNCTIONS=
0==this.usedID_by_ColorFormula&&0==this.textureID_Defaults.length?!1:!0;null!=this.gl&&(this.ready=!1,this.gl.deleteShader(this.glVertexShader),this.gl.deleteShader(this.glFragmentShader),this.gl.deleteProgram(this.glProgram),this.buffer.hasPicking()&&(this.gl.deleteShader(this.glVertexShaderPicking),this.gl.deleteShader(this.glFragmentShaderPicking),this.gl.deleteProgram(this.glProgramPicking)),this.createProg(),this.buffer.hasPicking()&&this.createProg(!0))},__class__:ic};var Md=function(a,b,c,
e){null==e&&(e=!1);null==c&&(c=!1);this.isMasked=this.hasBackground=!1;this._buffer=new Jd(1024,1024,!0);ic.call(this,this._buffer);c&&(this.isMasked=!0,this.maskBuffer=new Kd(16,16,!0),this.maskProgram=new ic(this.maskBuffer),this.maskProgram.mask=2,this.maskProgram.colorEnabled=!1,this.mask=1,this.hasBackground&&(this.backgroundProgram.mask=1));e&&(this.hasBackground=!0,this.backgroundBuffer=new Ld(16,16,!0),this.backgroundProgram=new ic(this.backgroundBuffer),this.isMasked&&(this.backgroundProgram.mask=
1));this.font=a;this.autoUpdateTextures=!1;this.setTexture(a.textureCache,"TEX");this.fontStyle=b;this.alphaEnabled=!0;this.font.config.distancefield?(a=""+z.string(.5),a=-1!=a.indexOf(".")||-1!=a.indexOf("e-")?a:a+".0",this.setColorFormula("mix(bgColor,color,smoothstep( weight - "+a+" * fwidth(TEX.r), weight + "+a+" * fwidth(TEX.r), TEX.r))")):this.setColorFormula("mix(bgColor,color,TEX.r)");this.setFormula("x","x + (1.0-aPosition.y)*width*tilt");this.updateTextures()};k["peote.text.FontProgram__ob_gum_backends_PeoteView_FontStyle"]=
Md;Md.__name__=!0;Md.__super__=ic;Md.prototype=x(ic.prototype,{addToDisplay:function(a,b,c){null==c&&(c=!1);ic.prototype.addToDisplay.call(this,a,b,c);this.isMasked&&this.maskProgram.addToDisplay(a,this,!0);this.hasBackground&&this.backgroundProgram.addToDisplay(a,this,!0)},__class__:Md});var De=function(a,b,c,e){null==e&&(e=16384);null==c&&(c=!0);this.rHexToDec=new Z('("\\s*)?(0x[0-9a-f]+)(\\s*")?',"gi");this.rComments=new Z("//.*?$","gm");this.rParsePathConfig=new Z("^(.*?)([^/]+)$","");this.kerning=
!1;if(this.rParsePathConfig.match(a))this.path=this.rParsePathConfig.matched(1),this.jsonFilename=this.rParsePathConfig.matched(2);else throw B.thrown("Can't load font, error in path to jsonfile: \""+a+'"');this.ranges=b;this.kerning=c;this.maxTextureSize=e};k["peote.text.Font__ob_gum_backends_PeoteView_FontStyle"]=De;De.__name__=!0;De.prototype={createFontProgram:function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);return new Md(this,a,b,c)},createFontStyle:function(){return new Ee},load:function(a,b,
c){null==c&&(c=!1);var e=this,f=c,h=function(f){f=f.replace(e.rComments.r,"");f=e.rHexToDec.map(f,function(a){return z.string(z.parseInt(a.matched(2)))});var h=new N;e.config=h.fromJson(f,e.path+e.jsonFilename);f=0;for(h=h.errors;f<h.length;){var d=h[f];++f;switch(d._hx_index){case 0:var g=d.variable;var l=d.expected;g=d.pos;break;case 1:g=d.pos;break;case 2:g=d.pos;break;case 3:g=d.pos;break;case 4:g=d.pos;break;case 5:g=d.pos;break;case 6:g=d.pos}ia.trace(g.lines[0].number,{fileName:"peote/text/Font.hx",
lineNumber:246,className:"peote.text.Font__ob_gum_backends_PeoteView_FontStyle",methodName:"load"});null!=g&&ia.trace(Me.convertError(d),{fileName:g.file,lineNumber:g.lines[0].number,className:"",methodName:""})}if(e.config.packed)throw f='Error, metadata of FontStyle class has to be "@packed" for "'+e.path+e.jsonFilename+'" and "packed":true',ia.trace(f,{fileName:e.path+e.jsonFilename,lineNumber:0,className:"",methodName:""}),B.thrown(f);e.kerning&&null!=e.config.kerning&&(e.kerning=e.config.kerning);
if(null==e.ranges&&1<e.config.ranges.length)throw f='Error, set FontStyle to @multiSlot and/or @multiTexture or define a single range while Font creation or inside "'+e.path+e.jsonFilename+'"',ia.trace(f,{fileName:e.path+e.jsonFilename,lineNumber:0,className:"",methodName:""}),B.thrown(f);d=[];f=0;for(h=e.config.ranges;f<h.length;){var u=h[f];++f;var t=u.range.min,r=u.range.max;if(null!=e.ranges)for(g=0,l=e.ranges;g<l.length;){var v=l[g];++g;if(v.min>=t&&v.min<=r||v.max>=t&&v.max<=r){d.push(u);break}}else d.push(u);
if(1==d.length)break}if(0==d.length)throw f='Error, can not found any ranges inside font-config "'+e.path+e.jsonFilename+'" that fit '+z.string(e.ranges),ia.trace(f,{fileName:e.path+e.jsonFilename,lineNumber:0,className:"",methodName:""}),B.thrown(f);e.config.ranges=d;e.init(a,b,c)};null==f&&(f=!1);var d=this.path+this.jsonFilename,g=null==h?null:h,u=null==h?null:function(a){h(a.toString())};null==f&&(f=!1);""!=Ja.corsServer&&(new Z("^https?://","")).match(d)&&(d="//"+Ja.corsServer+"/"+d);var r=wc.loadFromFile(d);
f&&(ia.trace('Start loading bytes "'+d+'"',{fileName:"utils/Loader.hx",lineNumber:81,className:"utils.Loader",methodName:"bytes"}),r.onProgress(function(a,b){Ja.onProgressDebug(a,b,d)}),r.onError(Ja.onErrorDebug),r.onComplete(function(a){Ja.onCompleteDebug(d)}));if(null!=g)r.onError(g);if(null!=u)r.onComplete(u)},init:function(a,b,c){for(var e=0,f=0,h=0,d=this.config.ranges;h<d.length;){var g=d[h];++h;g.slot.width>e&&(e=g.slot.width);g.slot.height>f&&(f=g.slot.height)}this.textureCache=new Fe(e,f,
this.config.ranges.length,4,!1,1,1,null,this.maxTextureSize);this.loadImages(null,a,b,c)},loadImages:function(a,b,c,e){var f=this,h=this.config.ranges;a=Array(h.length);for(var d=0,g=h.length;d<g;){var u=d++;a[u]=f.path+h[u].image}h=e;var r=function(a,b,e){null!=c&&c(b,e)},v=function(a,b){if(null!=f.config.ranges[a].tiles){var c=f.config.ranges[a].tiles.x;var e=f.config.ranges[a].tiles.y}else if(null!=f.config.tiles)c=f.config.tiles.x,e=f.config.tiles.y;else throw b='Error, can not found tiles inside font-config "'+
f.path+f.jsonFilename+'"',ia.trace(b,{fileName:f.path+f.jsonFilename,lineNumber:0,className:"",methodName:""}),B.thrown(b);if(null!=f.config.ranges[a].line){var h=f.config.ranges[a].line.height/b.height*e;var d=f.config.ranges[a].line.base/b.height*e}else null!=f.config.line?(h=f.config.line.height/b.height*e,d=f.config.line.base/b.height*e):d=h=1;a=f.config.ranges[a].range;f.textureCache.setImage(b,0,c,e);f.rangeMapping={min:a.min,max:a.max,height:h,base:d}},q=function(a){b(f)};null==h&&(h=!1);var k=
a.length;d=0;for(g=a.length;d<g;){u=[d++];var p=[a[u[0]]];e=h;var K=null==r?null:function(a){return function(b,c){null!=r&&r(a[0],b,c)}}(u);u=null==q?null:function(a){return function(c){null!=v&&v(a[0],c);0==--k&&b(f)}}(u);null==e&&(e=!1);""!=Ja.corsServer&&(new Z("^https?://","")).match(p[0])&&(p[0]="//"+Ja.corsServer+"/"+p[0]);var m=Ha.loadFromFile(p[0]);e&&(ia.trace('Start loading image "'+p[0]+'"',{fileName:"utils/Loader.hx",lineNumber:28,className:"utils.Loader",methodName:"image"}),m.onProgress(function(a){return function(b,
c){Ja.onProgressDebug(b,c,a[0])}}(p)),m.onError(Ja.onErrorDebug),m.onComplete(function(a){return function(b){Ja.onCompleteDebug(a[0])}}(p)));if(null!=K)m.onProgress(K);if(null!=u)m.onComplete(u)}},__class__:De};var Ze=function(){};k["peote.text.Gl3FontData"]=Ze;Ze.__name__=!0;var qa=function(){this.bytePos=-1;this.weight=this.tilt=this.zIndex=this.width=this.height=this.tile=0;this.bgColor=255;this.color=-1;this.x=this.y=0;this.char=-1};k["peote.text.Glyph__ob_gum_backends_PeoteView_FontStyle"]=qa;
qa.__name__=!0;qa.prototype={__class__:qa};var ta=function(){};k["peote.text.MaskElement"]=ta;ta.__name__=!0;var ce=function(a,b){this.min=a;this.max=b};k["peote.text.Range"]=ce;ce.__name__=!0;ce.prototype={__class__:ce};var oc=function(){};k["peote.view.BufferInterface"]=oc;oc.__name__=!0;oc.__isInterface__=!0;oc.prototype={__class__:oc};var Ld=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);this._maxElements=this._growSize=this._shrinkAtSize=0;this._gl=this._glInstanceBuffer=this._glVAO=null;if(0>=
a)throw B.thrown("Error: Buffer need a minimum size of 1 to store an Element.");this._minSize=a;this._growSize=0>b?0:b;c&&(this._shrinkAtSize=b+(b/2|0));this._elements=Array(this._minSize);Y.isINSTANCED?(null==Ba.instanceBytes&&(Ba.instanceBytes=new Ab(new ArrayBuffer(12)),Ba.instanceBytes.b[0]=1,Ba.instanceBytes.b[1]=1,Ba.instanceBytes.b[2]=1,Ba.instanceBytes.b[3]=1,Ba.instanceBytes.b[4]=0,Ba.instanceBytes.b[5]=1,Ba.instanceBytes.b[6]=1,Ba.instanceBytes.b[7]=0,Ba.instanceBytes.b[8]=0,Ba.instanceBytes.b[9]=
0,Ba.instanceBytes.b[10]=0,Ba.instanceBytes.b[11]=0),this._elemBuffSize=24):this._elemBuffSize=168;this._bytes=new Ab(new ArrayBuffer(this._elemBuffSize*this._minSize));this._bytes.fill(0,this._elemBuffSize*this._minSize,0)};k["peote.view.Buffer_BackgroundElement"]=Ld;Ld.__name__=!0;Ld.__interfaces__=[oc];Ld.prototype={setNewGLContext:function(a){if(null!=a&&a!=this._gl){null!=this._gl&&(this._gl.deleteBuffer(this._glBuffer),Y.isINSTANCED&&this._gl.deleteBuffer(this._glInstanceBuffer),Y.isVAO&&this._gl.deleteVertexArray(this._glVAO));
this._gl=a;this._glBuffer=this._gl.createBuffer();this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._glBuffer);var b=this._bytes;b=new Uint8Array(b.b.bufferValue,0);this._gl.bufferData(this._gl.ARRAY_BUFFER,b,this._gl.STREAM_DRAW);this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null);Y.isINSTANCED&&(this._glInstanceBuffer=this._gl.createBuffer(),a=this._gl,a.bindBuffer(a.ARRAY_BUFFER,this._glInstanceBuffer),b=Ba.instanceBytes,b=new Uint8Array(b.b.bufferValue,0),a.bufferData(a.ARRAY_BUFFER,b,a.STATIC_DRAW),
a.bindBuffer(a.ARRAY_BUFFER,null));Y.isVAO&&(this._glVAO=this._gl.createVertexArray(),this._gl.bindVertexArray(this._glVAO),Y.isINSTANCED?(a=this._gl,b=this._glBuffer,a.bindBuffer(a.ARRAY_BUFFER,this._glInstanceBuffer),a.enableVertexAttribArray(0),a.vertexAttribPointer(0,2,a.UNSIGNED_BYTE,!1,2,0),a.bindBuffer(a.ARRAY_BUFFER,b),a.enableVertexAttribArray(4),a.vertexAttribPointer(4,4,a.UNSIGNED_BYTE,!0,24,0),a.vertexAttribDivisor(4,1),a.enableVertexAttribArray(3),a.vertexAttribPointer(3,1,a.FLOAT,!1,
24,4),a.vertexAttribDivisor(3,1),a.enableVertexAttribArray(1),a.vertexAttribPointer(1,2,a.FLOAT,!1,24,8),a.vertexAttribDivisor(1,1),a.enableVertexAttribArray(2),a.vertexAttribPointer(2,2,a.FLOAT,!1,24,16),a.vertexAttribDivisor(2,1)):(a=this._gl,a.bindBuffer(a.ARRAY_BUFFER,this._glBuffer),a.enableVertexAttribArray(4),a.vertexAttribPointer(4,4,a.UNSIGNED_BYTE,!0,28,0),a.enableVertexAttribArray(3),a.vertexAttribPointer(3,1,a.FLOAT,!1,28,4),a.enableVertexAttribArray(1),a.vertexAttribPointer(1,2,a.FLOAT,
!1,28,8),a.enableVertexAttribArray(2),a.vertexAttribPointer(2,2,a.FLOAT,!1,28,16),a.enableVertexAttribArray(0),a.vertexAttribPointer(0,2,a.UNSIGNED_BYTE,!1,28,24)),this._gl.bindVertexArray(null))}},getVertexShader:function(){return"\n\t::if isES3::#version 300 es::end::\n\t::if VERTEX_INT_PRECISION::precision ::VERTEX_INT_PRECISION:: int; ::end::\n\t::if VERTEX_FLOAT_PRECISION::precision ::VERTEX_FLOAT_PRECISION:: float; ::end::\n\t::if VERTEX_SAMPLER_PRECISION::precision ::VERTEX_SAMPLER_PRECISION:: sampler2D; ::end::\n\t\n\t// Uniforms -------------------------\n\t::if (!isPICKING && isUBO)::\n\t//layout(std140) uniform uboView\n\tuniform uboView\n\t{\n\t\tvec2 uResolution;\n\t\tvec2 uViewOffset;\n\t\tvec2 uViewZoom;\n\t};\n\t//layout(std140) uniform uboDisplay\n\tuniform uboDisplay\n\t{\n\t\tvec2 uOffset;\n\t\tvec2 uZoom;\n\t};\n\t::else::\n\tuniform vec2 uResolution;\n\tuniform vec2 uOffset;\n\tuniform vec2 uZoom;\n\t::end::\n\t\n\t\n\t\n\t// Attributes -------------------------\n\t::IN:: vec2 aPosition;\n\t\n\t::if isPICKING::\n\t\t::if !isINSTANCED::\n\t\t\t::IN:: vec4 aElement;\n\t\t::end::\n\t::end::\n\t\n\t::IN:: vec2 aPos;\n\t::IN:: vec2 aSize;\n\t\n\t::IN:: float aRotZ;\n\t\n\t\n\t::IN:: vec4 aColorStart0;\n\t\n\t\n\t\n\t// Varyings ---------------------------\n\t::if isPICKING::\n\t\t::if isINSTANCED::\n\t\t\tflat ::VAROUT:: int vElement;\n\t\t::else::\n\t\t\t::VAROUT:: vec4 vElement;\n\t\t::end::\n\t::end::\n\t\n\t::if isES3::flat ::end::::VAROUT:: vec4 vColor0;\n\t\n\t\n\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t::VAROUT:: vec2 vTexCoord;\n\t\t\n\t::end::\t\n\n\t// custom functions -------------------\n\t::VERTEX_INJECTION::\n\n\t// --------- vertex main --------------\n\tvoid main(void)\n\t{\n\t\t\n\t\tvec2 size = ::if SIZE_FORMULA::::SIZE_FORMULA::::else::aSize::end::;\n\t\t\t\t\n\t\tvec2 rotZ = ::if ROTZ_FORMULA::::ROTZ_FORMULA::::else::vec2( 0.0, aRotZ )::end::;\n\t\tvec2 pos = ::if POS_FORMULA::::POS_FORMULA::::else::aPos::end::;\npos = pos + aPosition * size;\n\t\tvColor0 = aColorStart0.wzyx; \n\n\t\t\n\n\t\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t\tvTexCoord = aPosition;\t\t\t\n\t\t\t\n\t\t::end::\n\t\t\n\t\t::if isPICKING::\n\t\t\t::if isINSTANCED::\n\t\t\t\tvElement = gl_InstanceID + 1;\n\t\t\t::else::\n\t\t\t\tvElement = aElement;\n\t\t\t::end::\n\t\t::end::\n\t\t\n\t\tfloat width = uResolution.x;\n\t\tfloat height = uResolution.y;\n\t\t::if (!isPICKING && isUBO)::\n\t\tfloat deltaX = (uOffset.x  + uViewOffset.x) / uZoom.x;\n\t\tfloat deltaY = (uOffset.y  + uViewOffset.y) / uZoom.y;\n\t\tvec2 zoom = uZoom * uViewZoom;\n\t\t::else::\n\t\tfloat deltaX = uOffset.x;\n\t\tfloat deltaY = uOffset.y;\n\t\tvec2 zoom = uZoom;\n\t\t::end::\n\t\t\n\t\t::if isPIXELSNAPPING::\n\t\tpos = floor( pos * ::PIXELDIVISOR:: * zoom ) / ::PIXELDIVISOR:: / zoom;\n\t\t::end::\n\t\t\n\t\tgl_Position = vec4 (\n\t\t\t 2.0 * zoom.x/width  * (pos.x + deltaX) - 1.0,\n\t\t\t-2.0 * zoom.y/height * (pos.y + deltaY) + 1.0,\n\t\t\t- rotZ.y,\n\t\t\t1.0\n\t\t);\t\t\n\t\t\n\t}\n\t"},
getFragmentShader:function(){return"\n\t::if isES3::#version 300 es::end::\n\t::foreach FRAGMENT_EXTENSIONS::#extension ::EXTENSION:: : enable\n\t::end::\n\t\n\t::if FRAGMENT_INT_PRECISION::precision ::FRAGMENT_INT_PRECISION:: int; ::end::\n\t::if FRAGMENT_FLOAT_PRECISION::precision ::FRAGMENT_FLOAT_PRECISION:: float; ::end::\n\t::if FRAGMENT_SAMPLER_PRECISION::precision ::FRAGMENT_SAMPLER_PRECISION:: sampler2D; ::end::\n\t\n\t// Uniforms -------------------------\t\n\t::FRAGMENT_PROGRAM_UNIFORMS::\n\t\n\t// Varyings ---------------------------\n\t::if isPICKING::\n\t\t::if isINSTANCED::\n\t\t\tflat ::VARIN:: int vElement;\n\t\t::else::\n\t\t\t::VARIN:: vec4 vElement;\n\t\t::end::\n\t::end::\n\n\t::if isES3::flat ::end::::VARIN:: vec4 vColor0; \n\t\n\t\t\t\n\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t::VARIN:: vec2 vTexCoord;\n\t\t\n\t::end::\t\n\t\n\t\n\t::if isES3::\n\t\t::if (isPICKING && isINSTANCED)::\n\t\t\tout int Color;\n\t\t::else::\n\t\t\tout vec4 Color;\n\t\t::end::\n\t::end::\n\n\t::if hasTEXTURE_FUNCTIONS::\n\t\t// function to get texture color\n\t\tvec4 getTextureColor(int TXTNUM, vec2 vTexCoord) {\n\t\t::foreach TEXTURES::\n\t\t\t\n\t\t\t::if (LAYER >= 0)::\n\t\t\t::if USED_ID::\n\t\t\t\tif (TXTNUM == ::LAYER::) {\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\treturn(texture::if !isES3::2D::end::(::TEXTURE::, vec2(vTexCoord.x * ::SLOTS_WIDTH::, vTexCoord.y * ::SLOTS_HEIGHT::)));\n\t\t\t\t\t::end::\n\t\t\t\t}\n\t\t\t::end::\n\t\t\t::end::\n\t\t\t\n\t\t::end::\n\t\t// default values:\n\t\t::foreach TEXTURE_DEFAULTS::\n\t\t\tif (TXTNUM == ::LAYER::) {return(::DEFAULT_VALUE::);}\t\t\n\t\t::end::\n\t\t}\n\t::else:: \n\t\t::if hasFRAGMENT_INJECTION::#define getTextureColor(a,b) vec4(0.0,0.0,0.0,0.0)::end::\n\t::end::\n\n\t::if hasTEXTURE_FUNCTIONS::\n\t\t// function to get full texture size\n\t\tvec2 getTextureResolution(int TXTNUM) {\n\t\t::foreach TEXTURES::\n\t\t\t\n\t\t\t::if (LAYER >= 0)::\n\t\t\t::if USED_ID::\n\t\t\t\tif (TXTNUM == ::LAYER::) {\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\treturn( vec2(::TEXTURE_WIDTH::, ::TEXTURE_HEIGHT::) );\n\t\t\t\t\t::end::\n\t\t\t\t}\n\t\t\t::end::\n\t\t\t::end::\n\t\t\t\n\t\t::end::\n\t\t// default values:\n\t\t::foreach TEXTURE_DEFAULTS::\n\t\t\tif (TXTNUM == ::LAYER::) {return(vec2(0.0,0.0));}\t\t\n\t\t::end::\n\t\t}\n\t::else:: \n\t\t::if hasFRAGMENT_INJECTION::#define getTextureResolution(a) vec2(0.0,0.0)::end::\n\t::end::\n\n\t// custom functions -------------------\n\t::FRAGMENT_INJECTION::\n\t\n\t// --------- fragment main ------------\n\tvoid main(void)\n\t{\t\n\t\tvec4 c0 = vColor0; \n\t\t\n\t\t::if hasTEXTURES::\n\t\t\t::foreach TEXTURES::\n\t\t\t\t// ------------- LAYER ::LAYER:: --------------\n\t\t\t\t\n\t\t\t\t::if (LAYER >= 0)::\n\t\t\t\t::if USED::\n\t\t\t\t\tvec4 t::LAYER::;\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\tt::LAYER:: = texture::if !isES3::2D::end::(::TEXTURE::, vec2(vTexCoord.x * ::SLOTS_WIDTH::, vTexCoord.y * ::SLOTS_HEIGHT::));\n\t\t\t\t\t::end::\n\t\t\t\t::end::\n\t\t\t\t::end::\n\t\t\t\t\n\t\t\t::end::\n\t\t::end::\n\t\t\n\t\t// calc final color from all layers\n\t\tvec4 col = ::FRAGMENT_CALC_LAYER::;\n\t\t\n\t\t::if isDISCARD:: \n\t\t\tif (col.a <= ::DISCARD::) discard;\n\t\t::end::\n\t\t\n\t\t::if isPICKING::\n\t\t\t::if !isES3::gl_Frag::end::Color = vElement;\n\t\t::else::\n\t\t\t::if !isES3::gl_Frag::end::Color = col;\n\t\t\t// this fixing problem on old FF if alpha goes zero\n\t\t\t::if !isES3::gl_Frag::end::Color.w = clamp(::if !isES3::gl_Frag::end::Color.w, 0.003, 1.0);\n\t\t::end::\n\t}\n\t"},
getTextureIdentifiers:function(){return[]},getColorIdentifiers:function(){return["color"]},getCustomIdentifiers:function(){return[]},getCustomVaryings:function(){return[]},getDefaultColorFormula:function(){return""},getDefaultFormulaVars:function(){return Ba.DEFAULT_FORMULA_VARS},getFormulas:function(){return Ba.FORMULAS},getAttributes:function(){return Ba.ATTRIBUTES},getFormulaNames:function(){return Ba.FORMULA_NAMES},getFormulaVaryings:function(){return""==Ba.FORMULA_VARYINGS?[]:Ba.FORMULA_VARYINGS.split(",")},
getFormulaConstants:function(){return""==Ba.FORMULA_CONSTANTS?[]:Ba.FORMULA_CONSTANTS.split(",")},getFormulaCustoms:function(){return""==Ba.FORMULA_CUSTOMS?[]:Ba.FORMULA_CUSTOMS.split(",")},getMaxZindex:function(){return 2097151},hasAlpha:function(){return!1},hasZindex:function(){return!0},hasPicking:function(){return!1},needFragmentPrecision:function(){return!1},bindAttribLocations:function(a,b){a.bindAttribLocation(b,4,"aColorStart0");a.bindAttribLocation(b,3,"aRotZ");a.bindAttribLocation(b,1,"aPos");
a.bindAttribLocation(b,2,"aSize");a.bindAttribLocation(b,0,"aPosition")},render:function(a,b,c){a=this._maxElements;Y.isINSTANCED?(Y.isVAO?this._gl.bindVertexArray(this._glVAO):(b=this._gl,c=this._glBuffer,b.bindBuffer(b.ARRAY_BUFFER,this._glInstanceBuffer),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,2,0),b.bindBuffer(b.ARRAY_BUFFER,c),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,4,b.UNSIGNED_BYTE,!0,24,0),b.vertexAttribDivisor(4,1),b.enableVertexAttribArray(3),
b.vertexAttribPointer(3,1,b.FLOAT,!1,24,4),b.vertexAttribDivisor(3,1),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,24,8),b.vertexAttribDivisor(1,1),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.FLOAT,!1,24,16),b.vertexAttribDivisor(2,1)),this._gl.drawArraysInstanced(this._gl.TRIANGLE_STRIP,0,6,a)):(Y.isVAO?this._gl.bindVertexArray(this._glVAO):(b=this._gl,b.bindBuffer(b.ARRAY_BUFFER,this._glBuffer),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,4,b.UNSIGNED_BYTE,
!0,28,0),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,1,b.FLOAT,!1,28,4),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,28,8),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.FLOAT,!1,28,16),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,28,24)),this._gl.drawArrays(this._gl.TRIANGLE_STRIP,0,6*a));Y.isVAO?this._gl.bindVertexArray(null):(b=this._gl,b.disableVertexAttribArray(0),b.disableVertexAttribArray(4),b.disableVertexAttribArray(3),
b.disableVertexAttribArray(1),b.disableVertexAttribArray(2));this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null)},__class__:Ld};var Jd=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);this._maxElements=this._growSize=this._shrinkAtSize=0;this._gl=this._glInstanceBuffer=this._glVAO=null;if(0>=a)throw B.thrown("Error: Buffer need a minimum size of 1 to store an Element.");this._minSize=a;this._growSize=0>b?0:b;c&&(this._shrinkAtSize=b+(b/2|0));this._elements=Array(this._minSize);Y.isINSTANCED?(null==qa.instanceBytes&&
(qa.instanceBytes=new Ab(new ArrayBuffer(12)),qa.instanceBytes.b[0]=1,qa.instanceBytes.b[1]=1,qa.instanceBytes.b[2]=1,qa.instanceBytes.b[3]=1,qa.instanceBytes.b[4]=0,qa.instanceBytes.b[5]=1,qa.instanceBytes.b[6]=1,qa.instanceBytes.b[7]=0,qa.instanceBytes.b[8]=0,qa.instanceBytes.b[9]=0,qa.instanceBytes.b[10]=0,qa.instanceBytes.b[11]=0),this._elemBuffSize=40):this._elemBuffSize=240;this._bytes=new Ab(new ArrayBuffer(this._elemBuffSize*this._minSize));this._bytes.fill(0,this._elemBuffSize*this._minSize,
0)};k["peote.view.Buffer_Glyph__ob_gum_backends_PeoteView_FontStyle"]=Jd;Jd.__name__=!0;Jd.__interfaces__=[oc];Jd.prototype={setNewGLContext:function(a){if(null!=a&&a!=this._gl){null!=this._gl&&(this._gl.deleteBuffer(this._glBuffer),Y.isINSTANCED&&this._gl.deleteBuffer(this._glInstanceBuffer),Y.isVAO&&this._gl.deleteVertexArray(this._glVAO));this._gl=a;this._glBuffer=this._gl.createBuffer();this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._glBuffer);var b=this._bytes;b=new Uint8Array(b.b.bufferValue,
0);this._gl.bufferData(this._gl.ARRAY_BUFFER,b,this._gl.STREAM_DRAW);this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null);Y.isINSTANCED&&(this._glInstanceBuffer=this._gl.createBuffer(),a=this._gl,a.bindBuffer(a.ARRAY_BUFFER,this._glInstanceBuffer),b=qa.instanceBytes,b=new Uint8Array(b.b.bufferValue,0),a.bufferData(a.ARRAY_BUFFER,b,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,null));Y.isVAO&&(this._glVAO=this._gl.createVertexArray(),this._gl.bindVertexArray(this._glVAO),Y.isINSTANCED?(a=this._gl,b=this._glBuffer,
a.bindBuffer(a.ARRAY_BUFFER,this._glInstanceBuffer),a.enableVertexAttribArray(0),a.vertexAttribPointer(0,2,a.UNSIGNED_BYTE,!1,2,0),a.bindBuffer(a.ARRAY_BUFFER,b),a.enableVertexAttribArray(4),a.vertexAttribPointer(4,4,a.UNSIGNED_BYTE,!0,40,0),a.vertexAttribDivisor(4,1),a.enableVertexAttribArray(5),a.vertexAttribPointer(5,4,a.UNSIGNED_BYTE,!0,40,4),a.vertexAttribDivisor(5,1),a.enableVertexAttribArray(3),a.vertexAttribPointer(3,1,a.FLOAT,!1,40,8),a.vertexAttribDivisor(3,1),a.enableVertexAttribArray(1),
a.vertexAttribPointer(1,2,a.FLOAT,!1,40,12),a.vertexAttribDivisor(1,1),a.enableVertexAttribArray(2),a.vertexAttribPointer(2,2,a.FLOAT,!1,40,20),a.vertexAttribDivisor(2,1),a.enableVertexAttribArray(6),a.vertexAttribPointer(6,2,a.FLOAT,!1,40,28),a.vertexAttribDivisor(6,1),a.enableVertexAttribArray(7),a.vertexAttribPointer(7,1,a.SHORT,!1,40,36),a.vertexAttribDivisor(7,1)):(a=this._gl,a.bindBuffer(a.ARRAY_BUFFER,this._glBuffer),a.enableVertexAttribArray(4),a.vertexAttribPointer(4,4,a.UNSIGNED_BYTE,!0,
40,0),a.enableVertexAttribArray(5),a.vertexAttribPointer(5,4,a.UNSIGNED_BYTE,!0,40,4),a.enableVertexAttribArray(3),a.vertexAttribPointer(3,1,a.FLOAT,!1,40,8),a.enableVertexAttribArray(1),a.vertexAttribPointer(1,2,a.FLOAT,!1,40,12),a.enableVertexAttribArray(2),a.vertexAttribPointer(2,2,a.FLOAT,!1,40,20),a.enableVertexAttribArray(6),a.vertexAttribPointer(6,2,a.FLOAT,!1,40,28),a.enableVertexAttribArray(7),a.vertexAttribPointer(7,1,a.SHORT,!1,40,36),a.enableVertexAttribArray(0),a.vertexAttribPointer(0,
2,a.UNSIGNED_BYTE,!1,40,38)),this._gl.bindVertexArray(null))}},update:function(){for(var a=0,b=this._maxElements;a<b;){var c=a++;if(Y.isINSTANCED){c=this._elements[c];var e=this._bytes;e.b_Int32[c.bytePos>>2]=c.color;e.b_Int32[c.bytePos+4>>2]=c.bgColor;e.b_UFloat32[c.bytePos+8>>2]=Math.min(1,Math.max(-1,c.zIndex/2097151));e.b_UFloat32[c.bytePos+12>>2]=c.x;e.b_UFloat32[c.bytePos+16>>2]=c.y;e.b_UFloat32[c.bytePos+20>>2]=c.width;e.b_UFloat32[c.bytePos+24>>2]=c.height;e.b_UFloat32[c.bytePos+28>>2]=c.weight;
e.b_UFloat32[c.bytePos+32>>2]=c.tilt;e.b_Uint16[c.bytePos+36>>1]=c.tile&65535}else c=this._elements[c],e=this._bytes,e.b_Int32[c.bytePos>>2]=c.color,e.b_Int32[c.bytePos+4>>2]=c.bgColor,e.b_UFloat32[c.bytePos+8>>2]=Math.min(1,Math.max(-1,c.zIndex/2097151)),e.b_UFloat32[c.bytePos+12>>2]=c.x,e.b_UFloat32[c.bytePos+16>>2]=c.y,e.b_UFloat32[c.bytePos+20>>2]=c.width,e.b_UFloat32[c.bytePos+24>>2]=c.height,e.b_UFloat32[c.bytePos+28>>2]=c.weight,e.b_UFloat32[c.bytePos+32>>2]=c.tilt,e.b_Uint16[c.bytePos+36>>
1]=c.tile&65535,e.b[c.bytePos+38]=1,e.b[c.bytePos+39]=1,e.b_Int32[c.bytePos+40>>2]=c.color,e.b_Int32[c.bytePos+44>>2]=c.bgColor,e.b_UFloat32[c.bytePos+48>>2]=Math.min(1,Math.max(-1,c.zIndex/2097151)),e.b_UFloat32[c.bytePos+52>>2]=c.x,e.b_UFloat32[c.bytePos+56>>2]=c.y,e.b_UFloat32[c.bytePos+60>>2]=c.width,e.b_UFloat32[c.bytePos+64>>2]=c.height,e.b_UFloat32[c.bytePos+68>>2]=c.weight,e.b_UFloat32[c.bytePos+72>>2]=c.tilt,e.b_Uint16[c.bytePos+76>>1]=c.tile&65535,e.b[c.bytePos+78]=1,e.b[c.bytePos+79]=1,
e.b_Int32[c.bytePos+80>>2]=c.color,e.b_Int32[c.bytePos+84>>2]=c.bgColor,e.b_UFloat32[c.bytePos+88>>2]=Math.min(1,Math.max(-1,c.zIndex/2097151)),e.b_UFloat32[c.bytePos+92>>2]=c.x,e.b_UFloat32[c.bytePos+96>>2]=c.y,e.b_UFloat32[c.bytePos+100>>2]=c.width,e.b_UFloat32[c.bytePos+104>>2]=c.height,e.b_UFloat32[c.bytePos+108>>2]=c.weight,e.b_UFloat32[c.bytePos+112>>2]=c.tilt,e.b_Uint16[c.bytePos+116>>1]=c.tile&65535,e.b[c.bytePos+118]=0,e.b[c.bytePos+119]=1,e.b_Int32[c.bytePos+120>>2]=c.color,e.b_Int32[c.bytePos+
124>>2]=c.bgColor,e.b_UFloat32[c.bytePos+128>>2]=Math.min(1,Math.max(-1,c.zIndex/2097151)),e.b_UFloat32[c.bytePos+132>>2]=c.x,e.b_UFloat32[c.bytePos+136>>2]=c.y,e.b_UFloat32[c.bytePos+140>>2]=c.width,e.b_UFloat32[c.bytePos+144>>2]=c.height,e.b_UFloat32[c.bytePos+148>>2]=c.weight,e.b_UFloat32[c.bytePos+152>>2]=c.tilt,e.b_Uint16[c.bytePos+156>>1]=c.tile&65535,e.b[c.bytePos+158]=1,e.b[c.bytePos+159]=0,e.b_Int32[c.bytePos+160>>2]=c.color,e.b_Int32[c.bytePos+164>>2]=c.bgColor,e.b_UFloat32[c.bytePos+168>>
2]=Math.min(1,Math.max(-1,c.zIndex/2097151)),e.b_UFloat32[c.bytePos+172>>2]=c.x,e.b_UFloat32[c.bytePos+176>>2]=c.y,e.b_UFloat32[c.bytePos+180>>2]=c.width,e.b_UFloat32[c.bytePos+184>>2]=c.height,e.b_UFloat32[c.bytePos+188>>2]=c.weight,e.b_UFloat32[c.bytePos+192>>2]=c.tilt,e.b_Uint16[c.bytePos+196>>1]=c.tile&65535,e.b[c.bytePos+198]=0,e.b[c.bytePos+199]=0,e.b_Int32[c.bytePos+200>>2]=c.color,e.b_Int32[c.bytePos+204>>2]=c.bgColor,e.b_UFloat32[c.bytePos+208>>2]=Math.min(1,Math.max(-1,c.zIndex/2097151)),
e.b_UFloat32[c.bytePos+212>>2]=c.x,e.b_UFloat32[c.bytePos+216>>2]=c.y,e.b_UFloat32[c.bytePos+220>>2]=c.width,e.b_UFloat32[c.bytePos+224>>2]=c.height,e.b_UFloat32[c.bytePos+228>>2]=c.weight,e.b_UFloat32[c.bytePos+232>>2]=c.tilt,e.b_Uint16[c.bytePos+236>>1]=c.tile&65535,e.b[c.bytePos+238]=0,e.b[c.bytePos+239]=0}this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._glBuffer);e=this._bytes;a=new Uint8Array(e.b.bufferValue,0);this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,a);this._gl.bindBuffer(this._gl.ARRAY_BUFFER,
null)},updateElement:function(a){if(Y.isINSTANCED){var b=this._bytes;b.b_Int32[a.bytePos>>2]=a.color;b.b_Int32[a.bytePos+4>>2]=a.bgColor;b.b_UFloat32[a.bytePos+8>>2]=Math.min(1,Math.max(-1,a.zIndex/2097151));b.b_UFloat32[a.bytePos+12>>2]=a.x;b.b_UFloat32[a.bytePos+16>>2]=a.y;b.b_UFloat32[a.bytePos+20>>2]=a.width;b.b_UFloat32[a.bytePos+24>>2]=a.height;b.b_UFloat32[a.bytePos+28>>2]=a.weight;b.b_UFloat32[a.bytePos+32>>2]=a.tilt;b.b_Uint16[a.bytePos+36>>1]=a.tile&65535}else b=this._bytes,b.b_Int32[a.bytePos>>
2]=a.color,b.b_Int32[a.bytePos+4>>2]=a.bgColor,b.b_UFloat32[a.bytePos+8>>2]=Math.min(1,Math.max(-1,a.zIndex/2097151)),b.b_UFloat32[a.bytePos+12>>2]=a.x,b.b_UFloat32[a.bytePos+16>>2]=a.y,b.b_UFloat32[a.bytePos+20>>2]=a.width,b.b_UFloat32[a.bytePos+24>>2]=a.height,b.b_UFloat32[a.bytePos+28>>2]=a.weight,b.b_UFloat32[a.bytePos+32>>2]=a.tilt,b.b_Uint16[a.bytePos+36>>1]=a.tile&65535,b.b[a.bytePos+38]=1,b.b[a.bytePos+39]=1,b.b_Int32[a.bytePos+40>>2]=a.color,b.b_Int32[a.bytePos+44>>2]=a.bgColor,b.b_UFloat32[a.bytePos+
48>>2]=Math.min(1,Math.max(-1,a.zIndex/2097151)),b.b_UFloat32[a.bytePos+52>>2]=a.x,b.b_UFloat32[a.bytePos+56>>2]=a.y,b.b_UFloat32[a.bytePos+60>>2]=a.width,b.b_UFloat32[a.bytePos+64>>2]=a.height,b.b_UFloat32[a.bytePos+68>>2]=a.weight,b.b_UFloat32[a.bytePos+72>>2]=a.tilt,b.b_Uint16[a.bytePos+76>>1]=a.tile&65535,b.b[a.bytePos+78]=1,b.b[a.bytePos+79]=1,b.b_Int32[a.bytePos+80>>2]=a.color,b.b_Int32[a.bytePos+84>>2]=a.bgColor,b.b_UFloat32[a.bytePos+88>>2]=Math.min(1,Math.max(-1,a.zIndex/2097151)),b.b_UFloat32[a.bytePos+
92>>2]=a.x,b.b_UFloat32[a.bytePos+96>>2]=a.y,b.b_UFloat32[a.bytePos+100>>2]=a.width,b.b_UFloat32[a.bytePos+104>>2]=a.height,b.b_UFloat32[a.bytePos+108>>2]=a.weight,b.b_UFloat32[a.bytePos+112>>2]=a.tilt,b.b_Uint16[a.bytePos+116>>1]=a.tile&65535,b.b[a.bytePos+118]=0,b.b[a.bytePos+119]=1,b.b_Int32[a.bytePos+120>>2]=a.color,b.b_Int32[a.bytePos+124>>2]=a.bgColor,b.b_UFloat32[a.bytePos+128>>2]=Math.min(1,Math.max(-1,a.zIndex/2097151)),b.b_UFloat32[a.bytePos+132>>2]=a.x,b.b_UFloat32[a.bytePos+136>>2]=a.y,
b.b_UFloat32[a.bytePos+140>>2]=a.width,b.b_UFloat32[a.bytePos+144>>2]=a.height,b.b_UFloat32[a.bytePos+148>>2]=a.weight,b.b_UFloat32[a.bytePos+152>>2]=a.tilt,b.b_Uint16[a.bytePos+156>>1]=a.tile&65535,b.b[a.bytePos+158]=1,b.b[a.bytePos+159]=0,b.b_Int32[a.bytePos+160>>2]=a.color,b.b_Int32[a.bytePos+164>>2]=a.bgColor,b.b_UFloat32[a.bytePos+168>>2]=Math.min(1,Math.max(-1,a.zIndex/2097151)),b.b_UFloat32[a.bytePos+172>>2]=a.x,b.b_UFloat32[a.bytePos+176>>2]=a.y,b.b_UFloat32[a.bytePos+180>>2]=a.width,b.b_UFloat32[a.bytePos+
184>>2]=a.height,b.b_UFloat32[a.bytePos+188>>2]=a.weight,b.b_UFloat32[a.bytePos+192>>2]=a.tilt,b.b_Uint16[a.bytePos+196>>1]=a.tile&65535,b.b[a.bytePos+198]=0,b.b[a.bytePos+199]=0,b.b_Int32[a.bytePos+200>>2]=a.color,b.b_Int32[a.bytePos+204>>2]=a.bgColor,b.b_UFloat32[a.bytePos+208>>2]=Math.min(1,Math.max(-1,a.zIndex/2097151)),b.b_UFloat32[a.bytePos+212>>2]=a.x,b.b_UFloat32[a.bytePos+216>>2]=a.y,b.b_UFloat32[a.bytePos+220>>2]=a.width,b.b_UFloat32[a.bytePos+224>>2]=a.height,b.b_UFloat32[a.bytePos+228>>
2]=a.weight,b.b_UFloat32[a.bytePos+232>>2]=a.tilt,b.b_Uint16[a.bytePos+236>>1]=a.tile&65535,b.b[a.bytePos+238]=0,b.b[a.bytePos+239]=0;if(-1==a.bytePos)throw B.thrown("Error, Element is not added to Buffer");null!=this._gl&&(b=this._gl,b.bindBuffer(b.ARRAY_BUFFER,this._glBuffer),b.bufferSubData(b.ARRAY_BUFFER,a.bytePos,a.bufferPointer),b.bindBuffer(b.ARRAY_BUFFER,null))},addElement:function(a){if(-1==a.bytePos){if(this._maxElements==this._elements.length){if(0==this._growSize)throw B.thrown("Error: Can't add new Element. Buffer is full and automatic growing Buffersize is disabled.");
var b=this._maxElements+this._growSize,c=new Ab(new ArrayBuffer(this._elemBuffSize*b));c.blit(0,this._bytes,0,this._elemBuffSize*this._maxElements);this._bytes=c;var e=Array(b);b=e;c=0;for(var f=this._maxElements;c<f;){var h=c++,d=this._elements[h];e=this._bytes;var g=d.bytePos,u=this._elemBuffSize;null==u&&(u=0);null==g&&(g=0);e=0<u?new Uint8Array(e.b.bufferValue,g,u):new Uint8Array(e.b.bufferValue,g);d.bufferPointer=e;b[h]=d}this._elements=b;null!=this._gl&&(this._gl.deleteBuffer(this._glBuffer),
this._glBuffer=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._glBuffer),e=this._bytes,e=new Uint8Array(e.b.bufferValue,0),this._gl.bufferData(this._gl.ARRAY_BUFFER,e,this._gl.STREAM_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null),Y.isVAO&&(this._gl.bindVertexArray(this._glVAO),Y.isINSTANCED?(b=this._gl,c=this._glBuffer,b.bindBuffer(b.ARRAY_BUFFER,this._glInstanceBuffer),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,2,0),b.bindBuffer(b.ARRAY_BUFFER,
c),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,4,b.UNSIGNED_BYTE,!0,40,0),b.vertexAttribDivisor(4,1),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,4,b.UNSIGNED_BYTE,!0,40,4),b.vertexAttribDivisor(5,1),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,1,b.FLOAT,!1,40,8),b.vertexAttribDivisor(3,1),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,40,12),b.vertexAttribDivisor(1,1),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.FLOAT,!1,40,20),b.vertexAttribDivisor(2,
1),b.enableVertexAttribArray(6),b.vertexAttribPointer(6,2,b.FLOAT,!1,40,28),b.vertexAttribDivisor(6,1),b.enableVertexAttribArray(7),b.vertexAttribPointer(7,1,b.SHORT,!1,40,36),b.vertexAttribDivisor(7,1)):(b=this._gl,b.bindBuffer(b.ARRAY_BUFFER,this._glBuffer),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,4,b.UNSIGNED_BYTE,!0,40,0),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,4,b.UNSIGNED_BYTE,!0,40,4),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,1,b.FLOAT,!1,40,8),b.enableVertexAttribArray(1),
b.vertexAttribPointer(1,2,b.FLOAT,!1,40,12),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.FLOAT,!1,40,20),b.enableVertexAttribArray(6),b.vertexAttribPointer(6,2,b.FLOAT,!1,40,28),b.enableVertexAttribArray(7),b.vertexAttribPointer(7,1,b.SHORT,!1,40,36),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,40,38)),this._gl.bindVertexArray(null)))}a.bytePos=this._maxElements*this._elemBuffSize;e=this._bytes;g=a.bytePos;u=this._elemBuffSize;null==u&&(u=0);null==g&&(g=0);
e=0<u?new Uint8Array(e.b.bufferValue,g,u):new Uint8Array(e.b.bufferValue,g);a.bufferPointer=e;this._elements[this._maxElements++]=a;this.updateElement(a)}else throw B.thrown("Error: Element is already inside a Buffer");},getVertexShader:function(){return"\n\t::if isES3::#version 300 es::end::\n\t::if VERTEX_INT_PRECISION::precision ::VERTEX_INT_PRECISION:: int; ::end::\n\t::if VERTEX_FLOAT_PRECISION::precision ::VERTEX_FLOAT_PRECISION:: float; ::end::\n\t::if VERTEX_SAMPLER_PRECISION::precision ::VERTEX_SAMPLER_PRECISION:: sampler2D; ::end::\n\t\n\t// Uniforms -------------------------\n\t::if (!isPICKING && isUBO)::\n\t//layout(std140) uniform uboView\n\tuniform uboView\n\t{\n\t\tvec2 uResolution;\n\t\tvec2 uViewOffset;\n\t\tvec2 uViewZoom;\n\t};\n\t//layout(std140) uniform uboDisplay\n\tuniform uboDisplay\n\t{\n\t\tvec2 uOffset;\n\t\tvec2 uZoom;\n\t};\n\t::else::\n\tuniform vec2 uResolution;\n\tuniform vec2 uOffset;\n\tuniform vec2 uZoom;\n\t::end::\n\t\n\t\n\t\n\t// Attributes -------------------------\n\t::IN:: vec2 aPosition;\n\t\n\t::if isPICKING::\n\t\t::if !isINSTANCED::\n\t\t\t::IN:: vec4 aElement;\n\t\t::end::\n\t::end::\n\t\n\t::IN:: vec2 aPos;\n\t::IN:: vec2 aSize;\n\t\n\t::IN:: float aRotZ;\n\t\n\t\n\t::IN:: vec4 aColorStart0;::IN:: vec4 aColorStart1;\n\t\n\t::IN:: vec2 aFloat0;::IN:: float aShort0;\n\t\n\t// Varyings ---------------------------\n\t::if isPICKING::\n\t\t::if isINSTANCED::\n\t\t\tflat ::VAROUT:: int vElement;\n\t\t::else::\n\t\t\t::VAROUT:: vec4 vElement;\n\t\t::end::\n\t::end::\n\t\n\t::if isES3::flat ::end::::VAROUT:: vec4 vColor0;::if isES3::flat ::end::::VAROUT:: vec4 vColor1;\n\t::if isES3::flat ::end::::VAROUT:: vec2 vSize; ::if isES3::flat ::end:: ::VAROUT:: float vPack0;\n\t\n\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t::VAROUT:: vec2 vTexCoord;\n\t\t::if isES3::flat ::end:: ::VAROUT:: float vTexPack0;\n\t::end::\t\n\n\t// custom functions -------------------\n\t::VERTEX_INJECTION::\n\n\t// --------- vertex main --------------\n\tvoid main(void)\n\t{\n\t\t\n\t\tvec2 size = ::if SIZE_FORMULA::::SIZE_FORMULA::::else::aSize::end::;vSize = size;\n\t\t\t\t\n\t\tvec2 rotZ = ::if ROTZ_FORMULA::::ROTZ_FORMULA::::else::vec2( 0.0, aRotZ )::end::;\n\t\tvec2 pos = ::if POS_FORMULA::::POS_FORMULA::::else::aPos::end::;\npos = pos + aPosition * size;\n\t\tvColor0 = aColorStart0.wzyx; vColor1 = aColorStart1.wzyx; \n\n\t\tvPack0 = ::if FORMULA_VARYINGS.weight::::FORMULA_VARYINGS.weight::::else::aFloat0.x::end::;\n\n\t\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t\tvTexCoord = aPosition;\t\t\t\n\t\t\tvTexPack0 = ::if FORMULA_VARYINGS.tile::::FORMULA_VARYINGS.tile::::else::aShort0::end::;\n\t\t::end::\n\t\t\n\t\t::if isPICKING::\n\t\t\t::if isINSTANCED::\n\t\t\t\tvElement = gl_InstanceID + 1;\n\t\t\t::else::\n\t\t\t\tvElement = aElement;\n\t\t\t::end::\n\t\t::end::\n\t\t\n\t\tfloat width = uResolution.x;\n\t\tfloat height = uResolution.y;\n\t\t::if (!isPICKING && isUBO)::\n\t\tfloat deltaX = (uOffset.x  + uViewOffset.x) / uZoom.x;\n\t\tfloat deltaY = (uOffset.y  + uViewOffset.y) / uZoom.y;\n\t\tvec2 zoom = uZoom * uViewZoom;\n\t\t::else::\n\t\tfloat deltaX = uOffset.x;\n\t\tfloat deltaY = uOffset.y;\n\t\tvec2 zoom = uZoom;\n\t\t::end::\n\t\t\n\t\t::if isPIXELSNAPPING::\n\t\tpos = floor( pos * ::PIXELDIVISOR:: * zoom ) / ::PIXELDIVISOR:: / zoom;\n\t\t::end::\n\t\t\n\t\tgl_Position = vec4 (\n\t\t\t 2.0 * zoom.x/width  * (pos.x + deltaX) - 1.0,\n\t\t\t-2.0 * zoom.y/height * (pos.y + deltaY) + 1.0,\n\t\t\t- rotZ.y,\n\t\t\t1.0\n\t\t);\t\t\n\t\t\n\t}\n\t"},
getFragmentShader:function(){return"\n\t::if isES3::#version 300 es::end::\n\t::foreach FRAGMENT_EXTENSIONS::#extension ::EXTENSION:: : enable\n\t::end::\n\t\n\t::if FRAGMENT_INT_PRECISION::precision ::FRAGMENT_INT_PRECISION:: int; ::end::\n\t::if FRAGMENT_FLOAT_PRECISION::precision ::FRAGMENT_FLOAT_PRECISION:: float; ::end::\n\t::if FRAGMENT_SAMPLER_PRECISION::precision ::FRAGMENT_SAMPLER_PRECISION:: sampler2D; ::end::\n\t\n\t// Uniforms -------------------------\t\n\t::FRAGMENT_PROGRAM_UNIFORMS::\n\t\n\t// Varyings ---------------------------\n\t::if isPICKING::\n\t\t::if isINSTANCED::\n\t\t\tflat ::VARIN:: int vElement;\n\t\t::else::\n\t\t\t::VARIN:: vec4 vElement;\n\t\t::end::\n\t::end::\n\n\t::if isES3::flat ::end::::VARIN:: vec4 vColor0; ::if isES3::flat ::end::::VARIN:: vec4 vColor1; \n\t::if isES3::flat ::end::::VARIN:: vec2 vSize; ::if isES3::flat ::end:: ::VARIN:: float vPack0;\n\t\t\t\n\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t::VARIN:: vec2 vTexCoord;\n\t\t::if isES3::flat ::end:: ::VARIN:: float vTexPack0;\n\t::end::\t\n\t\n\t\n\t::if isES3::\n\t\t::if (isPICKING && isINSTANCED)::\n\t\t\tout int Color;\n\t\t::else::\n\t\t\tout vec4 Color;\n\t\t::end::\n\t::end::\n\n\t::if hasTEXTURE_FUNCTIONS::\n\t\t// function to get texture color\n\t\tvec4 getTextureColor(int TXTNUM, vec2 vTexCoord) {\n\t\t::foreach TEXTURES::\n\t\t\t\n\t\t\t::if (LAYER >= 0)::\n\t\t\t::if USED_ID::\n\t\t\t\tif (TXTNUM == ::LAYER::) {\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\treturn(texture::if !isES3::2D::end::(::TEXTURE::, vec2(vTexCoord.x * ::SLOTS_WIDTH:: / ::TILES_X:: + floor(mod(vTexPack0, ::TILES_X::)) * ::SLOTS_WIDTH:: / ::TILES_X::, vTexCoord.y * ::SLOTS_HEIGHT:: / ::TILES_Y:: + floor(floor(vTexPack0) / ::TILES_X::) * ::SLOTS_HEIGHT:: / ::TILES_Y::)));\n\t\t\t\t\t::end::\n\t\t\t\t}\n\t\t\t::end::\n\t\t\t::end::\n\t\t\t\n\t\t::end::\n\t\t// default values:\n\t\t::foreach TEXTURE_DEFAULTS::\n\t\t\tif (TXTNUM == ::LAYER::) {return(::DEFAULT_VALUE::);}\t\t\n\t\t::end::\n\t\t}\n\t::else:: \n\t\t::if hasFRAGMENT_INJECTION::#define getTextureColor(a,b) vec4(0.0,0.0,0.0,0.0)::end::\n\t::end::\n\n\t::if hasTEXTURE_FUNCTIONS::\n\t\t// function to get full texture size\n\t\tvec2 getTextureResolution(int TXTNUM) {\n\t\t::foreach TEXTURES::\n\t\t\t\n\t\t\t::if (LAYER >= 0)::\n\t\t\t::if USED_ID::\n\t\t\t\tif (TXTNUM == ::LAYER::) {\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\treturn( vec2(::TEXTURE_WIDTH::, ::TEXTURE_HEIGHT::) );\n\t\t\t\t\t::end::\n\t\t\t\t}\n\t\t\t::end::\n\t\t\t::end::\n\t\t\t\n\t\t::end::\n\t\t// default values:\n\t\t::foreach TEXTURE_DEFAULTS::\n\t\t\tif (TXTNUM == ::LAYER::) {return(vec2(0.0,0.0));}\t\t\n\t\t::end::\n\t\t}\n\t::else:: \n\t\t::if hasFRAGMENT_INJECTION::#define getTextureResolution(a) vec2(0.0,0.0)::end::\n\t::end::\n\n\t// custom functions -------------------\n\t::FRAGMENT_INJECTION::\n\t\n\t// --------- fragment main ------------\n\tvoid main(void)\n\t{\t\n\t\tvec4 c0 = vColor0; vec4 c1 = vColor1; \n\t\t\n\t\t::if hasTEXTURES::\n\t\t\t::foreach TEXTURES::\n\t\t\t\t// ------------- LAYER ::LAYER:: --------------\n\t\t\t\t\n\t\t\t\t::if (LAYER >= 0)::\n\t\t\t\t::if USED::\n\t\t\t\t\tvec4 t::LAYER::;\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\tt::LAYER:: = texture::if !isES3::2D::end::(::TEXTURE::, vec2(vTexCoord.x * ::SLOTS_WIDTH:: / ::TILES_X:: + floor(mod(vTexPack0, ::TILES_X::)) * ::SLOTS_WIDTH:: / ::TILES_X::, vTexCoord.y * ::SLOTS_HEIGHT:: / ::TILES_Y:: + floor(floor(vTexPack0) / ::TILES_X::) * ::SLOTS_HEIGHT:: / ::TILES_Y::));\n\t\t\t\t\t::end::\n\t\t\t\t::end::\n\t\t\t\t::end::\n\t\t\t\t\n\t\t\t::end::\n\t\t::end::\n\t\t\n\t\t// calc final color from all layers\n\t\tvec4 col = ::FRAGMENT_CALC_LAYER::;\n\t\t\n\t\t::if isDISCARD:: \n\t\t\tif (col.a <= ::DISCARD::) discard;\n\t\t::end::\n\t\t\n\t\t::if isPICKING::\n\t\t\t::if !isES3::gl_Frag::end::Color = vElement;\n\t\t::else::\n\t\t\t::if !isES3::gl_Frag::end::Color = col;\n\t\t\t// this fixing problem on old FF if alpha goes zero\n\t\t\t::if !isES3::gl_Frag::end::Color.w = clamp(::if !isES3::gl_Frag::end::Color.w, 0.003, 1.0);\n\t\t::end::\n\t}\n\t"},
getTextureIdentifiers:function(){return[]},getColorIdentifiers:function(){return["color","bgColor"]},getCustomIdentifiers:function(){return["weight","tilt"]},getCustomVaryings:function(){return["vPack0","null"]},getDefaultColorFormula:function(){return""},getDefaultFormulaVars:function(){return qa.DEFAULT_FORMULA_VARS},getFormulas:function(){return qa.FORMULAS},getAttributes:function(){return qa.ATTRIBUTES},getFormulaNames:function(){return qa.FORMULA_NAMES},getFormulaVaryings:function(){return""==
qa.FORMULA_VARYINGS?[]:qa.FORMULA_VARYINGS.split(",")},getFormulaConstants:function(){return""==qa.FORMULA_CONSTANTS?[]:qa.FORMULA_CONSTANTS.split(",")},getFormulaCustoms:function(){return""==qa.FORMULA_CUSTOMS?[]:qa.FORMULA_CUSTOMS.split(",")},getMaxZindex:function(){return 2097151},hasAlpha:function(){return!1},hasZindex:function(){return!0},hasPicking:function(){return!1},needFragmentPrecision:function(){return!0},bindAttribLocations:function(a,b){a.bindAttribLocation(b,4,"aColorStart0");a.bindAttribLocation(b,
5,"aColorStart1");a.bindAttribLocation(b,3,"aRotZ");a.bindAttribLocation(b,1,"aPos");a.bindAttribLocation(b,2,"aSize");a.bindAttribLocation(b,6,"aFloat0");a.bindAttribLocation(b,7,"aShort0");a.bindAttribLocation(b,0,"aPosition")},render:function(a,b,c){a=this._maxElements;Y.isINSTANCED?(Y.isVAO?this._gl.bindVertexArray(this._glVAO):(b=this._gl,c=this._glBuffer,b.bindBuffer(b.ARRAY_BUFFER,this._glInstanceBuffer),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,2,0),b.bindBuffer(b.ARRAY_BUFFER,
c),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,4,b.UNSIGNED_BYTE,!0,40,0),b.vertexAttribDivisor(4,1),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,4,b.UNSIGNED_BYTE,!0,40,4),b.vertexAttribDivisor(5,1),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,1,b.FLOAT,!1,40,8),b.vertexAttribDivisor(3,1),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,40,12),b.vertexAttribDivisor(1,1),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.FLOAT,!1,40,20),b.vertexAttribDivisor(2,
1),b.enableVertexAttribArray(6),b.vertexAttribPointer(6,2,b.FLOAT,!1,40,28),b.vertexAttribDivisor(6,1),b.enableVertexAttribArray(7),b.vertexAttribPointer(7,1,b.SHORT,!1,40,36),b.vertexAttribDivisor(7,1)),this._gl.drawArraysInstanced(this._gl.TRIANGLE_STRIP,0,6,a)):(Y.isVAO?this._gl.bindVertexArray(this._glVAO):(b=this._gl,b.bindBuffer(b.ARRAY_BUFFER,this._glBuffer),b.enableVertexAttribArray(4),b.vertexAttribPointer(4,4,b.UNSIGNED_BYTE,!0,40,0),b.enableVertexAttribArray(5),b.vertexAttribPointer(5,
4,b.UNSIGNED_BYTE,!0,40,4),b.enableVertexAttribArray(3),b.vertexAttribPointer(3,1,b.FLOAT,!1,40,8),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.FLOAT,!1,40,12),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.FLOAT,!1,40,20),b.enableVertexAttribArray(6),b.vertexAttribPointer(6,2,b.FLOAT,!1,40,28),b.enableVertexAttribArray(7),b.vertexAttribPointer(7,1,b.SHORT,!1,40,36),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,40,38)),this._gl.drawArrays(this._gl.TRIANGLE_STRIP,
0,6*a));Y.isVAO?this._gl.bindVertexArray(null):(b=this._gl,b.disableVertexAttribArray(0),b.disableVertexAttribArray(4),b.disableVertexAttribArray(5),b.disableVertexAttribArray(3),b.disableVertexAttribArray(1),b.disableVertexAttribArray(2),b.disableVertexAttribArray(6),b.disableVertexAttribArray(7));this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null)},__class__:Jd};var Kd=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);this._maxElements=this._growSize=this._shrinkAtSize=0;this._gl=this._glInstanceBuffer=
this._glVAO=null;if(0>=a)throw B.thrown("Error: Buffer need a minimum size of 1 to store an Element.");this._minSize=a;this._growSize=0>b?0:b;c&&(this._shrinkAtSize=b+(b/2|0));this._elements=Array(this._minSize);Y.isINSTANCED?(null==ta.instanceBytes&&(ta.instanceBytes=new Ab(new ArrayBuffer(12)),ta.instanceBytes.b[0]=1,ta.instanceBytes.b[1]=1,ta.instanceBytes.b[2]=1,ta.instanceBytes.b[3]=1,ta.instanceBytes.b[4]=0,ta.instanceBytes.b[5]=1,ta.instanceBytes.b[6]=1,ta.instanceBytes.b[7]=0,ta.instanceBytes.b[8]=
0,ta.instanceBytes.b[9]=0,ta.instanceBytes.b[10]=0,ta.instanceBytes.b[11]=0),this._elemBuffSize=8):this._elemBuffSize=72;this._bytes=new Ab(new ArrayBuffer(this._elemBuffSize*this._minSize));this._bytes.fill(0,this._elemBuffSize*this._minSize,0)};k["peote.view.Buffer_MaskElement"]=Kd;Kd.__name__=!0;Kd.__interfaces__=[oc];Kd.prototype={setNewGLContext:function(a){if(null!=a&&a!=this._gl){null!=this._gl&&(this._gl.deleteBuffer(this._glBuffer),Y.isINSTANCED&&this._gl.deleteBuffer(this._glInstanceBuffer),
Y.isVAO&&this._gl.deleteVertexArray(this._glVAO));this._gl=a;this._glBuffer=this._gl.createBuffer();this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._glBuffer);var b=this._bytes;b=new Uint8Array(b.b.bufferValue,0);this._gl.bufferData(this._gl.ARRAY_BUFFER,b,this._gl.STREAM_DRAW);this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null);Y.isINSTANCED&&(this._glInstanceBuffer=this._gl.createBuffer(),a=this._gl,a.bindBuffer(a.ARRAY_BUFFER,this._glInstanceBuffer),b=ta.instanceBytes,b=new Uint8Array(b.b.bufferValue,
0),a.bufferData(a.ARRAY_BUFFER,b,a.STATIC_DRAW),a.bindBuffer(a.ARRAY_BUFFER,null));Y.isVAO&&(this._glVAO=this._gl.createVertexArray(),this._gl.bindVertexArray(this._glVAO),Y.isINSTANCED?(a=this._gl,b=this._glBuffer,a.bindBuffer(a.ARRAY_BUFFER,this._glInstanceBuffer),a.enableVertexAttribArray(0),a.vertexAttribPointer(0,2,a.UNSIGNED_BYTE,!1,2,0),a.bindBuffer(a.ARRAY_BUFFER,b),a.enableVertexAttribArray(1),a.vertexAttribPointer(1,2,a.SHORT,!1,8,0),a.vertexAttribDivisor(1,1),a.enableVertexAttribArray(2),
a.vertexAttribPointer(2,2,a.SHORT,!1,8,4),a.vertexAttribDivisor(2,1)):(a=this._gl,a.bindBuffer(a.ARRAY_BUFFER,this._glBuffer),a.enableVertexAttribArray(1),a.vertexAttribPointer(1,2,a.SHORT,!1,12,0),a.enableVertexAttribArray(2),a.vertexAttribPointer(2,2,a.SHORT,!1,12,4),a.enableVertexAttribArray(0),a.vertexAttribPointer(0,2,a.UNSIGNED_BYTE,!1,12,8)),this._gl.bindVertexArray(null))}},getVertexShader:function(){return"\n\t::if isES3::#version 300 es::end::\n\t::if VERTEX_INT_PRECISION::precision ::VERTEX_INT_PRECISION:: int; ::end::\n\t::if VERTEX_FLOAT_PRECISION::precision ::VERTEX_FLOAT_PRECISION:: float; ::end::\n\t::if VERTEX_SAMPLER_PRECISION::precision ::VERTEX_SAMPLER_PRECISION:: sampler2D; ::end::\n\t\n\t// Uniforms -------------------------\n\t::if (!isPICKING && isUBO)::\n\t//layout(std140) uniform uboView\n\tuniform uboView\n\t{\n\t\tvec2 uResolution;\n\t\tvec2 uViewOffset;\n\t\tvec2 uViewZoom;\n\t};\n\t//layout(std140) uniform uboDisplay\n\tuniform uboDisplay\n\t{\n\t\tvec2 uOffset;\n\t\tvec2 uZoom;\n\t};\n\t::else::\n\tuniform vec2 uResolution;\n\tuniform vec2 uOffset;\n\tuniform vec2 uZoom;\n\t::end::\n\t\n\t\n\t\n\t// Attributes -------------------------\n\t::IN:: vec2 aPosition;\n\t\n\t::if isPICKING::\n\t\t::if !isINSTANCED::\n\t\t\t::IN:: vec4 aElement;\n\t\t::end::\n\t::end::\n\t\n\t::IN:: vec2 aPos;\n\t::IN:: vec2 aSize;\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t// Varyings ---------------------------\n\t::if isPICKING::\n\t\t::if isINSTANCED::\n\t\t\tflat ::VAROUT:: int vElement;\n\t\t::else::\n\t\t\t::VAROUT:: vec4 vElement;\n\t\t::end::\n\t::end::\n\t\n\t\n\t\n\t\n\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t::VAROUT:: vec2 vTexCoord;\n\t\t\n\t::end::\t\n\n\t// custom functions -------------------\n\t::VERTEX_INJECTION::\n\n\t// --------- vertex main --------------\n\tvoid main(void)\n\t{\n\t\t\n\t\tvec2 size = ::if SIZE_FORMULA::::SIZE_FORMULA::::else::aSize::end::;\n\t\t\t\t\n\t\t\n\t\tvec2 pos = ::if POS_FORMULA::::POS_FORMULA::::else::aPos::end::;\npos = pos + aPosition * size;\n\t\t\n\n\t\t\n\n\t\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t\tvTexCoord = aPosition;\t\t\t\n\t\t\t\n\t\t::end::\n\t\t\n\t\t::if isPICKING::\n\t\t\t::if isINSTANCED::\n\t\t\t\tvElement = gl_InstanceID + 1;\n\t\t\t::else::\n\t\t\t\tvElement = aElement;\n\t\t\t::end::\n\t\t::end::\n\t\t\n\t\tfloat width = uResolution.x;\n\t\tfloat height = uResolution.y;\n\t\t::if (!isPICKING && isUBO)::\n\t\tfloat deltaX = (uOffset.x  + uViewOffset.x) / uZoom.x;\n\t\tfloat deltaY = (uOffset.y  + uViewOffset.y) / uZoom.y;\n\t\tvec2 zoom = uZoom * uViewZoom;\n\t\t::else::\n\t\tfloat deltaX = uOffset.x;\n\t\tfloat deltaY = uOffset.y;\n\t\tvec2 zoom = uZoom;\n\t\t::end::\n\t\t\n\t\t::if isPIXELSNAPPING::\n\t\tpos = floor( pos * ::PIXELDIVISOR:: * zoom ) / ::PIXELDIVISOR:: / zoom;\n\t\t::end::\n\t\t\n\t\tgl_Position = vec4 (\n\t\t\t 2.0 * zoom.x/width  * (pos.x + deltaX) - 1.0,\n\t\t\t-2.0 * zoom.y/height * (pos.y + deltaY) + 1.0,\n\t\t\t- 0.0,\n\t\t\t1.0\n\t\t);\t\t\n\t\t\n\t}\n\t"},
getFragmentShader:function(){return"\n\t::if isES3::#version 300 es::end::\n\t::foreach FRAGMENT_EXTENSIONS::#extension ::EXTENSION:: : enable\n\t::end::\n\t\n\t::if FRAGMENT_INT_PRECISION::precision ::FRAGMENT_INT_PRECISION:: int; ::end::\n\t::if FRAGMENT_FLOAT_PRECISION::precision ::FRAGMENT_FLOAT_PRECISION:: float; ::end::\n\t::if FRAGMENT_SAMPLER_PRECISION::precision ::FRAGMENT_SAMPLER_PRECISION:: sampler2D; ::end::\n\t\n\t// Uniforms -------------------------\t\n\t::FRAGMENT_PROGRAM_UNIFORMS::\n\t\n\t// Varyings ---------------------------\n\t::if isPICKING::\n\t\t::if isINSTANCED::\n\t\t\tflat ::VARIN:: int vElement;\n\t\t::else::\n\t\t\t::VARIN:: vec4 vElement;\n\t\t::end::\n\t::end::\n\n\t\n\t\n\t\t\t\n\t::if (hasTEXTURES || hasFRAGMENT_INJECTION)::\n\t\t::VARIN:: vec2 vTexCoord;\n\t\t\n\t::end::\t\n\t\n\t\n\t::if isES3::\n\t\t::if (isPICKING && isINSTANCED)::\n\t\t\tout int Color;\n\t\t::else::\n\t\t\tout vec4 Color;\n\t\t::end::\n\t::end::\n\n\t::if hasTEXTURE_FUNCTIONS::\n\t\t// function to get texture color\n\t\tvec4 getTextureColor(int TXTNUM, vec2 vTexCoord) {\n\t\t::foreach TEXTURES::\n\t\t\t\n\t\t\t::if (LAYER >= 0)::\n\t\t\t::if USED_ID::\n\t\t\t\tif (TXTNUM == ::LAYER::) {\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\treturn(texture::if !isES3::2D::end::(::TEXTURE::, vec2(vTexCoord.x * ::SLOTS_WIDTH::, vTexCoord.y * ::SLOTS_HEIGHT::)));\n\t\t\t\t\t::end::\n\t\t\t\t}\n\t\t\t::end::\n\t\t\t::end::\n\t\t\t\n\t\t::end::\n\t\t// default values:\n\t\t::foreach TEXTURE_DEFAULTS::\n\t\t\tif (TXTNUM == ::LAYER::) {return(::DEFAULT_VALUE::);}\t\t\n\t\t::end::\n\t\t}\n\t::else:: \n\t\t::if hasFRAGMENT_INJECTION::#define getTextureColor(a,b) vec4(0.0,0.0,0.0,0.0)::end::\n\t::end::\n\n\t::if hasTEXTURE_FUNCTIONS::\n\t\t// function to get full texture size\n\t\tvec2 getTextureResolution(int TXTNUM) {\n\t\t::foreach TEXTURES::\n\t\t\t\n\t\t\t::if (LAYER >= 0)::\n\t\t\t::if USED_ID::\n\t\t\t\tif (TXTNUM == ::LAYER::) {\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\treturn( vec2(::TEXTURE_WIDTH::, ::TEXTURE_HEIGHT::) );\n\t\t\t\t\t::end::\n\t\t\t\t}\n\t\t\t::end::\n\t\t\t::end::\n\t\t\t\n\t\t::end::\n\t\t// default values:\n\t\t::foreach TEXTURE_DEFAULTS::\n\t\t\tif (TXTNUM == ::LAYER::) {return(vec2(0.0,0.0));}\t\t\n\t\t::end::\n\t\t}\n\t::else:: \n\t\t::if hasFRAGMENT_INJECTION::#define getTextureResolution(a) vec2(0.0,0.0)::end::\n\t::end::\n\n\t// custom functions -------------------\n\t::FRAGMENT_INJECTION::\n\t\n\t// --------- fragment main ------------\n\tvoid main(void)\n\t{\t\n\t\t\n\t\t\n\t\t::if hasTEXTURES::\n\t\t\t::foreach TEXTURES::\n\t\t\t\t// ------------- LAYER ::LAYER:: --------------\n\t\t\t\t\n\t\t\t\t::if (LAYER >= 0)::\n\t\t\t\t::if USED::\n\t\t\t\t\tvec4 t::LAYER::;\n\t\t\t\t\t::foreach UNITS::\n\t\t\t\t\t::if !FIRST ::else ::end::::if !LAST ::if (0.0 < ::UNIT_VALUE::)::end::\n\t\t\t\t\t\tt::LAYER:: = texture::if !isES3::2D::end::(::TEXTURE::, vec2(vTexCoord.x * ::SLOTS_WIDTH::, vTexCoord.y * ::SLOTS_HEIGHT::));\n\t\t\t\t\t::end::\n\t\t\t\t::end::\n\t\t\t\t::end::\n\t\t\t\t\n\t\t\t::end::\n\t\t::end::\n\t\t\n\t\t// calc final color from all layers\n\t\tvec4 col = ::FRAGMENT_CALC_LAYER::;\n\t\t\n\t\t::if isDISCARD:: \n\t\t\tif (col.a <= ::DISCARD::) discard;\n\t\t::end::\n\t\t\n\t\t::if isPICKING::\n\t\t\t::if !isES3::gl_Frag::end::Color = vElement;\n\t\t::else::\n\t\t\t::if !isES3::gl_Frag::end::Color = col;\n\t\t\t// this fixing problem on old FF if alpha goes zero\n\t\t\t::if !isES3::gl_Frag::end::Color.w = clamp(::if !isES3::gl_Frag::end::Color.w, 0.003, 1.0);\n\t\t::end::\n\t}\n\t"},
getTextureIdentifiers:function(){return[]},getColorIdentifiers:function(){return[]},getCustomIdentifiers:function(){return[]},getCustomVaryings:function(){return[]},getDefaultColorFormula:function(){return""},getDefaultFormulaVars:function(){return ta.DEFAULT_FORMULA_VARS},getFormulas:function(){return ta.FORMULAS},getAttributes:function(){return ta.ATTRIBUTES},getFormulaNames:function(){return ta.FORMULA_NAMES},getFormulaVaryings:function(){return""==ta.FORMULA_VARYINGS?[]:ta.FORMULA_VARYINGS.split(",")},
getFormulaConstants:function(){return""==ta.FORMULA_CONSTANTS?[]:ta.FORMULA_CONSTANTS.split(",")},getFormulaCustoms:function(){return""==ta.FORMULA_CUSTOMS?[]:ta.FORMULA_CUSTOMS.split(",")},getMaxZindex:function(){return 2097151},hasAlpha:function(){return!1},hasZindex:function(){return!1},hasPicking:function(){return!1},needFragmentPrecision:function(){return!1},bindAttribLocations:function(a,b){a.bindAttribLocation(b,1,"aPos");a.bindAttribLocation(b,2,"aSize");a.bindAttribLocation(b,0,"aPosition")},
render:function(a,b,c){a=this._maxElements;Y.isINSTANCED?(Y.isVAO?this._gl.bindVertexArray(this._glVAO):(b=this._gl,c=this._glBuffer,b.bindBuffer(b.ARRAY_BUFFER,this._glInstanceBuffer),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,2,0),b.bindBuffer(b.ARRAY_BUFFER,c),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.SHORT,!1,8,0),b.vertexAttribDivisor(1,1),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.SHORT,!1,8,4),b.vertexAttribDivisor(2,1)),this._gl.drawArraysInstanced(this._gl.TRIANGLE_STRIP,
0,6,a)):(Y.isVAO?this._gl.bindVertexArray(this._glVAO):(b=this._gl,b.bindBuffer(b.ARRAY_BUFFER,this._glBuffer),b.enableVertexAttribArray(1),b.vertexAttribPointer(1,2,b.SHORT,!1,12,0),b.enableVertexAttribArray(2),b.vertexAttribPointer(2,2,b.SHORT,!1,12,4),b.enableVertexAttribArray(0),b.vertexAttribPointer(0,2,b.UNSIGNED_BYTE,!1,12,8)),this._gl.drawArrays(this._gl.TRIANGLE_STRIP,0,6*a));Y.isVAO?this._gl.bindVertexArray(null):(b=this._gl,b.disableVertexAttribArray(0),b.disableVertexAttribArray(1),b.disableVertexAttribArray(2));
this._gl.bindBuffer(this._gl.ARRAY_BUFFER,null)},__class__:Kd};var Ce=function(a,b,c,e,f){null==f&&(f=0);this.renderFramebufferSkipFrames=this.renderFramebufferFrame=0;this._renderFramebufferEnabled=!1;this.framebufferTextureSlot=0;this.peoteView=this.gl=this.fbTexture=null;this.alpha=1;this.red=this.green=this.blue=0;this.backgroundAlpha=this.backgroundDepth=this.backgroundEnabled=!1;this.isVisible=!0;this.xz=this.yz=1;this.width=this.height=this.x=this.y=this.xOffset=this.yOffset=0;if(Y.isUBO){var h=
this.uniformBuffer,d=this.gl;null!=d&&(h.uniformBytes.b_UFloat32[0]=a+this.xOffset,d.bindBuffer(d.UNIFORM_BUFFER,h.uniformBuffer),d.bufferSubData(d.UNIFORM_BUFFER,0,h.xOffestBufferPointer),d.bindBuffer(d.UNIFORM_BUFFER,null))}this.x=a;Y.isUBO&&(h=this.uniformBuffer,d=this.gl,null!=d&&(h.uniformBytes.b_UFloat32[1]=b+this.yOffset,d.bindBuffer(d.UNIFORM_BUFFER,h.uniformBuffer),d.bufferSubData(d.UNIFORM_BUFFER,4,h.yOffestBufferPointer),d.bindBuffer(d.UNIFORM_BUFFER,null)));this.y=b;this.width=c;this.height=
e;this.red=(f>>24&255)/255;this.green=(f>>16&255)/255;this.blue=(f>>8&255)/255;this.alpha=(f&255)/255;this.backgroundEnabled=0<this.alpha;this.backgroundAlpha=1>this.alpha;this.programList=new Ge(new Rb);Y.isUBO&&(this.uniformBuffer=new Nd,this.uniformBufferFB=new Nd,this.uniformBufferViewFB=new Od)};k["peote.view.Display"]=Ce;Ce.__name__=!0;Ce.prototype={addToPeoteView:function(a,b,c){null==c&&(c=!1);this.peoteView!=a&&(this.peoteView=a,this.setNewGLContext(a.gl));a.displayList.add(this,b,c)},setNewGLContext:function(a){if(null!=
a&&a!=this.gl){null!=this.gl&&Y.isUBO&&(this.uniformBuffer.deleteGLBuffer(this.gl),this.uniformBufferFB.deleteGLBuffer(this.gl),this.uniformBufferViewFB.deleteGLBuffer(this.gl));this.gl=a;Y.isUBO&&(this.uniformBuffer.createGLBuffer(this.gl,this.x+this.xOffset,this.y+this.yOffset,this.xz,this.yz),this.uniformBufferFB.createGLBuffer(this.gl,this.xOffset,this.yOffset-this.height,this.xz,this.yz),this.uniformBufferViewFB.createGLBuffer(this.gl,this.width,-this.height,0,0,1,1));for(var b=this.programList.first;null!=
b;){var c=b.value;b=b.next;if(null!=a&&a!=c.gl){for(var e=0,f=c.displays;e<f.length;){var h=f[e];++e;if(null!=h.gl&&h.gl!=a)throw B.thrown("Error, program can not used inside different gl-contexts");}null!=c.gl&&(c.gl.deleteShader(c.glVertexShader),c.gl.deleteShader(c.glFragmentShader),c.gl.deleteProgram(c.glProgram),c.buffer.hasPicking()&&(c.gl.deleteShader(c.glVertexShaderPicking),c.gl.deleteShader(c.glFragmentShaderPicking),c.gl.deleteProgram(c.glProgramPicking)));c.gl=a;Y.isES3&&(c.glShaderConfig.isES3=
!0,c.glShaderConfig.IN="in",c.glShaderConfig.VARIN="in",c.glShaderConfig.VAROUT="out");Y.isUBO&&(c.glShaderConfig.isUBO=!0);Y.isINSTANCED&&(c.glShaderConfig.isINSTANCED=!0);c.glShaderConfig.FRAGMENT_EXTENSIONS=[];null!=c.gl.getExtension("OES_standard_derivatives")&&c.glShaderConfig.FRAGMENT_EXTENSIONS.push({EXTENSION:"GL_OES_standard_derivatives"});null!=c.gl.getExtension("EXT_color_buffer_float")?c.glShaderConfig.FRAGMENT_EXTENSIONS.push({EXTENSION:"EXT_color_buffer_float"}):null!=c.gl.getExtension("OES_texture_float")&&
c.glShaderConfig.FRAGMENT_EXTENSIONS.push({EXTENSION:"OES_texture_float"});c.buffer.setNewGLContext(c.gl);c.createProg();c.buffer.hasPicking()&&c.createProg(!0);e=0;for(f=c.activeTextures;e<f.length;){h=f[e];++e;var d=c.gl;if(null!=d&&d!=h.gl){for(var g=0,u=h.programs;g<u.length;){var r=u[g];++g;if(null!=r.gl&&r.gl!=d)throw B.thrown("Error, texture can not used inside different gl-contexts");}r=0;for(g=h.displays;r<g.length;)if(u=g[r],++r,null!=u.gl&&u.gl!=d)throw B.thrown("Error, texture can not used inside different gl-contexts");
null!=h.gl&&(h.gl.deleteTexture(h.glTexture),h.glTexture=null,0==h.displays.length&&null!=h.framebuffer&&(h.gl.deleteFramebuffer(h.framebuffer),h.framebuffer=null,null!=h.glDepthBuffer&&h.gl.deleteRenderbuffer(h.glDepthBuffer),h.glDepthBuffer=null));h.gl=d;if(h.width>h.gl.getParameter(h.gl.MAX_TEXTURE_SIZE)||h.height>h.gl.getParameter(h.gl.MAX_TEXTURE_SIZE))throw B.thrown("Error, texture size is greater then gl.MAX_TEXTURE_SIZE");h.glTexture=Yb.createEmptyTexture(h.gl,h.width,h.height,h.colorChannels,
h.createMipmaps,h.magFilter,h.minFilter,h.useFloat);if(0<h.displays.length&&null==h.framebuffer){h.glDepthBuffer=h.gl.createRenderbuffer();d=h.gl;r=h.glTexture;g=h.glDepthBuffer;u=h.width;var v=h.height,q=d.createFramebuffer();d.bindRenderbuffer(d.RENDERBUFFER,g);Qa.clearGlErrorQueue(d);d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_COMPONENT24,u,v);Qa.getLastGlError(d)==d.INVALID_ENUM&&(ia.trace("switching to DEPTH_COMPONENT16 for framebuffer",{fileName:"peote/view/utils/GLTool.hx",lineNumber:41,className:"peote.view.utils.GLTool",
methodName:"createFramebuffer"}),d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_COMPONENT16,u,v));d.bindFramebuffer(d.FRAMEBUFFER,q);d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,g);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,r,0);if(d.checkFramebufferStatus(d.FRAMEBUFFER)!=d.FRAMEBUFFER_COMPLETE)throw B.thrown("Error: Framebuffer not complete!");d.bindFramebuffer(d.FRAMEBUFFER,null);d.bindRenderbuffer(d.RENDERBUFFER,null);h.framebuffer=q;h.updated=
!0}for(d=h.images.keys();d.hasNext();)r=d.next(),h.bufferImage(r,h.images.h[r.__id__])}}}}if(null!=this.fbTexture&&(b=this.fbTexture,null!=a&&a!=b.gl)){e=0;for(f=b.programs;e<f.length;)if(r=f[e],++e,null!=r.gl&&r.gl!=a)throw B.thrown("Error, texture can not used inside different gl-contexts");e=0;for(f=b.displays;e<f.length;)if(h=f[e],++e,null!=h.gl&&h.gl!=a)throw B.thrown("Error, texture can not used inside different gl-contexts");null!=b.gl&&(b.gl.deleteTexture(b.glTexture),b.glTexture=null,0==
b.displays.length&&null!=b.framebuffer&&(b.gl.deleteFramebuffer(b.framebuffer),b.framebuffer=null,null!=b.glDepthBuffer&&b.gl.deleteRenderbuffer(b.glDepthBuffer),b.glDepthBuffer=null));b.gl=a;if(b.width>b.gl.getParameter(b.gl.MAX_TEXTURE_SIZE)||b.height>b.gl.getParameter(b.gl.MAX_TEXTURE_SIZE))throw B.thrown("Error, texture size is greater then gl.MAX_TEXTURE_SIZE");b.glTexture=Yb.createEmptyTexture(b.gl,b.width,b.height,b.colorChannels,b.createMipmaps,b.magFilter,b.minFilter,b.useFloat);if(0<b.displays.length&&
null==b.framebuffer){b.glDepthBuffer=b.gl.createRenderbuffer();d=b.gl;r=b.glTexture;g=b.glDepthBuffer;u=b.width;v=b.height;q=d.createFramebuffer();d.bindRenderbuffer(d.RENDERBUFFER,g);Qa.clearGlErrorQueue(d);d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_COMPONENT24,u,v);Qa.getLastGlError(d)==d.INVALID_ENUM&&(ia.trace("switching to DEPTH_COMPONENT16 for framebuffer",{fileName:"peote/view/utils/GLTool.hx",lineNumber:41,className:"peote.view.utils.GLTool",methodName:"createFramebuffer"}),d.renderbufferStorage(d.RENDERBUFFER,
d.DEPTH_COMPONENT16,u,v));d.bindFramebuffer(d.FRAMEBUFFER,q);d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,g);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,r,0);if(d.checkFramebufferStatus(d.FRAMEBUFFER)!=d.FRAMEBUFFER_COMPLETE)throw B.thrown("Error: Framebuffer not complete!");d.bindFramebuffer(d.FRAMEBUFFER,null);d.bindRenderbuffer(d.RENDERBUFFER,null);b.framebuffer=q;b.updated=!0}for(d=b.images.keys();d.hasNext();)r=d.next(),b.bufferImage(r,b.images.h[r.__id__])}}},
addProgram:function(a,b,c){null==c&&(c=!1);a.addToDisplay(this,b,c)},__class__:Ce};var gf={fromRenderContext:function(a){if(null!=a.webgl2)return ia.trace("WEBGL2 detected.",{fileName:"peote/view/PeoteGL.hx",lineNumber:86,className:"peote.view._PeoteGL.PeoteGL_Impl_",methodName:"fromRenderContext"}),Y.isUBO=!0,Y.isINSTANCED=!0,Y.isVAO=!0,Y.isES3=!0,a.webgl2;if(null!=a.webgl)return ia.trace("WEBGL1 detected.",{fileName:"peote/view/PeoteGL.hx",lineNumber:91,className:"peote.view._PeoteGL.PeoteGL_Impl_",
methodName:"fromRenderContext"}),a.webgl;window.alert("Error: missing webgl context");return null}},Y=function(){};k["peote.view.Version"]=Y;Y.__name__=!0;var Sa=function(){};k["peote.view.Precision"]=Sa;Sa.__name__=!0;var Be=function(a,b,c){null==c&&(c=!0);null==b&&(b=255);this.speed=1;this.startTime=this.stopTime=0;this.isRun=!1;this.xOffset=this.yOffset=0;this.xz=this.yz=1;this.maskState=0;this.glStateAlpha=this.glStateDepth=!1;this.colorState=!0;this.alpha=1;this.red=this.green=this.blue=0;this.gl=
gf.fromRenderContext(a.context);this.width=a.__width;this.height=a.__height;this.red=(b>>24&255)/255;this.green=(b>>16&255)/255;this.blue=(b>>8&255)/255;this.alpha=(b&255)/255;Y.isUBO&&(this.uniformBuffer=new Od,this.uniformBuffer.createGLBuffer(this.gl,this.width,this.height,this.xOffset,this.yOffset,this.xz,this.yz));this.maxTextureImageUnits=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS);this.glStateTexture=b=Array(this.maxTextureImageUnits);b=this.gl;var e=b.VERTEX_SHADER,f=Sa.VertexFloat,
h=b.getShaderPrecisionFormat(e,b.HIGH_FLOAT);null!=h&&(f.high=h.precision);h=b.getShaderPrecisionFormat(e,b.MEDIUM_FLOAT);null!=h&&(f.medium=h.precision);h=b.getShaderPrecisionFormat(e,b.LOW_FLOAT);null!=h&&(f.low=h.precision);e=b.VERTEX_SHADER;f=Sa.VertexInt;h=b.getShaderPrecisionFormat(e,b.HIGH_FLOAT);null!=h&&(f.high=h.precision);h=b.getShaderPrecisionFormat(e,b.MEDIUM_FLOAT);null!=h&&(f.medium=h.precision);h=b.getShaderPrecisionFormat(e,b.LOW_FLOAT);null!=h&&(f.low=h.precision);e=b.VERTEX_SHADER;
f=Sa.VertexSampler;h=b.getShaderPrecisionFormat(e,b.HIGH_FLOAT);null!=h&&(f.high=h.precision);h=b.getShaderPrecisionFormat(e,b.MEDIUM_FLOAT);null!=h&&(f.medium=h.precision);h=b.getShaderPrecisionFormat(e,b.LOW_FLOAT);null!=h&&(f.low=h.precision);e=b.FRAGMENT_SHADER;f=Sa.FragmentFloat;h=b.getShaderPrecisionFormat(e,b.HIGH_FLOAT);null!=h&&(f.high=h.precision);h=b.getShaderPrecisionFormat(e,b.MEDIUM_FLOAT);null!=h&&(f.medium=h.precision);h=b.getShaderPrecisionFormat(e,b.LOW_FLOAT);null!=h&&(f.low=h.precision);
e=b.FRAGMENT_SHADER;f=Sa.FragmentInt;h=b.getShaderPrecisionFormat(e,b.HIGH_FLOAT);null!=h&&(f.high=h.precision);h=b.getShaderPrecisionFormat(e,b.MEDIUM_FLOAT);null!=h&&(f.medium=h.precision);h=b.getShaderPrecisionFormat(e,b.LOW_FLOAT);null!=h&&(f.low=h.precision);e=b.FRAGMENT_SHADER;f=Sa.FragmentSampler;h=b.getShaderPrecisionFormat(e,b.HIGH_FLOAT);null!=h&&(f.high=h.precision);h=b.getShaderPrecisionFormat(e,b.MEDIUM_FLOAT);null!=h&&(f.medium=h.precision);h=b.getShaderPrecisionFormat(e,b.LOW_FLOAT);
null!=h&&(f.low=h.precision);Y.isINSTANCED?(this.pickInt32=b=new Int32Array(4),this.pickTexture=Yb.createPickingTexture(this.gl,!0)):(this.pickUInt8=b=new Uint8Array(4),this.pickTexture=Yb.createPickingTexture(this.gl));this.pickDepthBuffer=this.gl.createRenderbuffer();b=this.gl;e=this.pickTexture;f=this.pickDepthBuffer;h=b.createFramebuffer();b.bindRenderbuffer(b.RENDERBUFFER,f);Qa.clearGlErrorQueue(b);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT24,1,1);Qa.getLastGlError(b)==b.INVALID_ENUM&&
(ia.trace("switching to DEPTH_COMPONENT16 for framebuffer",{fileName:"peote/view/utils/GLTool.hx",lineNumber:41,className:"peote.view.utils.GLTool",methodName:"createFramebuffer"}),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,1,1));b.bindFramebuffer(b.FRAMEBUFFER,h);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,f);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,e,0);if(b.checkFramebufferStatus(b.FRAMEBUFFER)!=b.FRAMEBUFFER_COMPLETE)throw B.thrown("Error: Framebuffer not complete!");
b.bindFramebuffer(b.FRAMEBUFFER,null);b.bindRenderbuffer(b.RENDERBUFFER,null);this.pickFB=h;this.background=new He(this.gl);this.displayList=new Pd(new Rb);this.framebufferDisplayList=new Pd(new Rb);c&&(a.onRender.add(n(this,this.render)),a.onResize.add(n(this,this.resize)))};k["peote.view.PeoteView"]=Be;Be.__name__=!0;Be.prototype={isTextureStateChange:function(a,b){return b.updated?(b.updated=!1,this.glStateTexture=Array(this.maxTextureImageUnits),this.glStateTexture[a]=b.glTexture,!0):this.glStateTexture[a]!=
b.glTexture?(this.glStateTexture[a]=b.glTexture,!0):!1},start:function(){if(!this.isRun){var a=this.stopTime;this.startTime=this.stopTime=(new Date).getTime()/1E3-a;this.isRun=!0}},addDisplay:function(a,b,c){null==c&&(c=!1);a.addToPeoteView(this,b,c)},resize:function(a,b){this.width=a;this.height=b;if(Y.isUBO){var c=this.uniformBuffer,e=this.gl;c.uniformBytes.b_UFloat32[0]=a;c.uniformBytes.b_UFloat32[1]=b;e.bindBuffer(e.UNIFORM_BUFFER,c.uniformBuffer);e.bufferSubData(e.UNIFORM_BUFFER,0,c.resolutionBufferPointer);
e.bindBuffer(e.UNIFORM_BUFFER,null)}},render:function(a){for(this.displayListItem=this.framebufferDisplayList.first;null!=this.displayListItem;){if(this.displayListItem.value._renderFramebufferEnabled)if(this.displayListItem.value.renderFramebufferFrame==this.displayListItem.value.renderFramebufferSkipFrames){var b=this.displayListItem.value;a=null;null==a&&(a=b.framebufferTextureSlot);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,b.fbTexture.framebuffer);this.gl.viewport(a%b.fbTexture.slotsX*b.fbTexture.slotWidth,
b.fbTexture.slotHeight*Math.floor(a/b.fbTexture.slotsX),b.fbTexture.slotWidth,b.fbTexture.slotHeight);this.gl.scissor(a%b.fbTexture.slotsX*b.fbTexture.slotWidth,b.fbTexture.slotHeight*Math.floor(a/b.fbTexture.slotsX),b.fbTexture.slotWidth,b.fbTexture.slotHeight);this.gl.enable(this.gl.SCISSOR_TEST);this.gl.clearColor(0,0,0,0);b.fbTexture.clearOnRenderInto?this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT):this.gl.clear(this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT);
this.gl.stencilMask(255);this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);this.gl.depthFunc(this.gl.LEQUAL);if(b.backgroundEnabled){1!=this.colorState&&(this.colorState=!0,this.gl.colorMask(!0,!0,!0,!0));var c=b.backgroundAlpha;c&&!this.glStateAlpha?(this.glStateAlpha=!0,this.gl.enable(this.gl.BLEND)):!c&&this.glStateAlpha&&(this.glStateAlpha=!1,this.gl.disable(this.gl.BLEND));0!=this.maskState&&(this.gl.disable(this.gl.STENCIL_TEST),this.maskState=this.maskState=0);this.background.render(b.red,
b.green,b.blue,b.alpha)}for(b.programListItem=b.programList.first;null!=b.programListItem;){a=b.programListItem.value;a.gl.useProgram(a.glProgram);for(a.textureListItem=a.textureList.first;null!=a.textureListItem;)this.isTextureStateChange(a.textureListItem.value.unit,a.textureListItem.value.texture)&&(a.gl.activeTexture(a.gl.TEXTURE0+a.textureListItem.value.unit),a.gl.bindTexture(a.gl.TEXTURE_2D,a.textureListItem.value.texture.glTexture)),a.gl.uniform1i(a.textureListItem.value.uniformLoc,a.textureListItem.value.unit),
a.textureListItem=a.textureListItem.next;Y.isUBO?(a.gl.bindBufferBase(a.gl.UNIFORM_BUFFER,0,b.uniformBufferViewFB.uniformBuffer),a.gl.bindBufferBase(a.gl.UNIFORM_BUFFER,1,b.uniformBufferFB.uniformBuffer)):(a.gl.uniform2f(a.uRESOLUTION,b.width,-b.height),a.gl.uniform2f(a.uZOOM,b.xz,b.yz),a.gl.uniform2f(a.uOFFSET,(b.xOffset+this.xOffset)/b.xz,(b.yOffset+this.yOffset-b.height)/b.yz));a.gl.uniform1f(a.uTIME,(this.isRun?(new Date).getTime()/1E3-this.startTime:this.stopTime)*this.speed);c=0;for(var e=a.uniformFloats.length;c<
e;){var f=c++;a.gl.uniform1f(a.uniformFloatLocations[f],a.uniformFloats[f].value)}c=a.colorEnabled;c!=this.colorState&&(this.colorState=c,this.gl.colorMask(c,c,c,c));(c=a.zIndexEnabled)&&!this.glStateDepth?(this.glStateDepth=!0,this.gl.enable(this.gl.DEPTH_TEST)):!c&&this.glStateDepth&&(this.glStateDepth=!1,this.gl.disable(this.gl.DEPTH_TEST));(c=a.alphaEnabled)&&!this.glStateAlpha?(this.glStateAlpha=!0,this.gl.enable(this.gl.BLEND)):!c&&this.glStateAlpha&&(this.glStateAlpha=!1,this.gl.disable(this.gl.BLEND));
c=a.mask;e=a.clearMask;c!=this.maskState&&(0==c?(this.gl.disable(this.gl.STENCIL_TEST),this.maskState=c):2==c?(e&&this.gl.clear(this.gl.STENCIL_BUFFER_BIT),0==this.maskState&&this.gl.enable(this.gl.STENCIL_TEST),this.gl.stencilFunc(this.gl.ALWAYS,1,255),this.gl.stencilOp(this.gl.REPLACE,this.gl.REPLACE,this.gl.REPLACE),this.maskState=c):(0==this.maskState&&this.gl.enable(this.gl.STENCIL_TEST),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP),this.gl.stencilFunc(this.gl.EQUAL,1,255)),this.maskState=
c);a.buffer.render(this,b,a);a.gl.useProgram(null);b.programListItem=b.programListItem.next}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null);b.fbTexture.createMipmaps&&(this.gl.bindTexture(this.gl.TEXTURE_2D,b.fbTexture.glTexture),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.bindTexture(this.gl.TEXTURE_2D,null),b.fbTexture.updated=!0);this.displayListItem.value.renderFramebufferFrame=0}else this.displayListItem.value.renderFramebufferFrame++;this.displayListItem=this.displayListItem.next}b=
this.width;c=this.height;this.gl.viewport(0,0,b,c);this.gl.scissor(0,0,b,c);this.gl.enable(this.gl.SCISSOR_TEST);this.gl.clearColor(this.red,this.green,this.blue,this.alpha);this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT|this.gl.STENCIL_BUFFER_BIT);this.gl.stencilMask(255);this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);this.gl.depthFunc(this.gl.LEQUAL);for(this.displayListItem=this.displayList.first;null!=this.displayListItem;){a=this.displayListItem.value;if(a.isVisible){b=
this.width;c=this.height;var h=this.xz,d=this.yz;e=Math.floor((a.x+this.xOffset)*h);f=Math.floor((a.y+this.yOffset)*d);h=Math.floor(a.width*h);d=Math.floor(a.height*d);0>e&&(h+=e);e=Math.max(0,Math.min(b,e))|0;h=Math.max(0,Math.min(b-e,h))|0;0>f&&(d+=f);f=Math.max(0,Math.min(c,f))|0;d=Math.max(0,Math.min(c-f,d))|0;this.gl.scissor(e,c-d-f,h,d);a.backgroundEnabled&&(1!=this.colorState&&(this.colorState=!0,this.gl.colorMask(!0,!0,!0,!0)),(c=a.backgroundDepth)&&!this.glStateDepth?(this.glStateDepth=!0,
this.gl.enable(this.gl.DEPTH_TEST)):!c&&this.glStateDepth&&(this.glStateDepth=!1,this.gl.disable(this.gl.DEPTH_TEST)),(c=a.backgroundAlpha)&&!this.glStateAlpha?(this.glStateAlpha=!0,this.gl.enable(this.gl.BLEND)):!c&&this.glStateAlpha&&(this.glStateAlpha=!1,this.gl.disable(this.gl.BLEND)),0!=this.maskState&&(this.gl.disable(this.gl.STENCIL_TEST),this.maskState=this.maskState=0),this.background.render(a.red,a.green,a.blue,a.alpha));for(a.programListItem=a.programList.first;null!=a.programListItem;){b=
a.programListItem.value;if(b.isVisible){b.gl.useProgram(b.glProgram);for(b.textureListItem=b.textureList.first;null!=b.textureListItem;)this.isTextureStateChange(b.textureListItem.value.unit,b.textureListItem.value.texture)&&(b.gl.activeTexture(b.gl.TEXTURE0+b.textureListItem.value.unit),b.gl.bindTexture(b.gl.TEXTURE_2D,b.textureListItem.value.texture.glTexture)),b.gl.uniform1i(b.textureListItem.value.uniformLoc,b.textureListItem.value.unit),b.textureListItem=b.textureListItem.next;Y.isUBO?(b.gl.bindBufferBase(b.gl.UNIFORM_BUFFER,
0,this.uniformBuffer.uniformBuffer),b.gl.bindBufferBase(b.gl.UNIFORM_BUFFER,1,a.uniformBuffer.uniformBuffer)):(b.gl.uniform2f(b.uRESOLUTION,this.width,this.height),b.gl.uniform2f(b.uZOOM,this.xz*a.xz,this.yz*a.yz),b.gl.uniform2f(b.uOFFSET,(a.x+a.xOffset+this.xOffset)/a.xz,(a.y+a.yOffset+this.yOffset)/a.yz));b.gl.uniform1f(b.uTIME,(this.isRun?(new Date).getTime()/1E3-this.startTime:this.stopTime)*this.speed);c=0;for(e=b.uniformFloats.length;c<e;)f=c++,b.gl.uniform1f(b.uniformFloatLocations[f],b.uniformFloats[f].value);
c=b.colorEnabled;c!=this.colorState&&(this.colorState=c,this.gl.colorMask(c,c,c,c));(c=b.zIndexEnabled)&&!this.glStateDepth?(this.glStateDepth=!0,this.gl.enable(this.gl.DEPTH_TEST)):!c&&this.glStateDepth&&(this.glStateDepth=!1,this.gl.disable(this.gl.DEPTH_TEST));(c=b.alphaEnabled)&&!this.glStateAlpha?(this.glStateAlpha=!0,this.gl.enable(this.gl.BLEND)):!c&&this.glStateAlpha&&(this.glStateAlpha=!1,this.gl.disable(this.gl.BLEND));c=b.mask;e=b.clearMask;c!=this.maskState&&(0==c?(this.gl.disable(this.gl.STENCIL_TEST),
this.maskState=c):2==c?(e&&this.gl.clear(this.gl.STENCIL_BUFFER_BIT),0==this.maskState&&this.gl.enable(this.gl.STENCIL_TEST),this.gl.stencilFunc(this.gl.ALWAYS,1,255),this.gl.stencilOp(this.gl.REPLACE,this.gl.REPLACE,this.gl.REPLACE),this.maskState=c):(0==this.maskState&&this.gl.enable(this.gl.STENCIL_TEST),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP),this.gl.stencilFunc(this.gl.EQUAL,1,255)),this.maskState=c);b.buffer.render(this,a,b);b.gl.useProgram(null)}a.programListItem=a.programListItem.next}}this.displayListItem=
this.displayListItem.next}},__class__:Be};var Id=function(a,b,c){this.unit=a;this.texture=b;this.uniformLoc=c};k["peote.view.ActiveTexture"]=Id;Id.__name__=!0;Id.prototype={__class__:Id};var Fe=function(a,b,c,e,f,h,d,g,u){null==u&&(u=16384);null==g&&(g=!1);null==d&&(d=0);null==h&&(h=0);null==f&&(f=!1);null==e&&(e=4);null==c&&(c=1);this.displays=[];this.programs=[];this.useFloat=this.updated=!1;this.magFilter=this.minFilter=0;this.createMipmaps=!1;this.images=new Rb;this.imageSlots=this.freeSlots=
this.slotsX=this.slotsY=this.tilesX=this.tilesY=1;this.width=this.height=0;this.colorChannels=4;this.clearOnRenderInto=!0;this.gl=this.glTexture=this.framebuffer=this.glDepthBuffer=null;this.slotWidth=a;this.slotHeight=b;this.imageSlots=this.freeSlots=c;this.colorChannels=e;this.createMipmaps=f;this.magFilter=d;this.minFilter=h;this.useFloat=g;a=Yb.optimalTextureSize(c,a,b,u);this.width=a.width;this.height=a.height;this.slotsX=a.slotsX;this.slotsY=a.slotsY};k["peote.view.Texture"]=Fe;Fe.__name__=
!0;Fe.prototype={setImage:function(a,b,c,e){null==b&&(b=0);if(null!=this.images.h.__keys__[a.__id__])throw B.thrown("Error, image is already inside texture inside slot "+this.images.h[a.__id__].imageSlot);null!=c&&(this.tilesX=c);null!=e&&(this.tilesY=e);this.images.set(a,{imageSlot:b});this.freeSlots--;if(null!=this.gl){if(null==this.glTexture){if(this.width>this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)||this.height>this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE))throw B.thrown("Error, texture size is greater then gl.MAX_TEXTURE_SIZE");
this.glTexture=Yb.createEmptyTexture(this.gl,this.width,this.height,this.colorChannels,this.createMipmaps,this.magFilter,this.minFilter,this.useFloat)}this.bufferImage(a,{imageSlot:b})}},bufferImage:function(a,b){var c=this.gl,e=b.imageSlot%this.slotsX*this.slotWidth;b=this.slotHeight*Math.floor(b.imageSlot/this.slotsX);var f=a.width,h=a.height,d=this.createMipmaps,g=this.useFloat;null==g&&(g=!1);null==d&&(d=!1);c.bindTexture(c.TEXTURE_2D,this.glTexture);if(g){g=f*h*4;g=null!=g?new Float32Array(g):
null;for(var u=0,r=f*h*4;u<r;){var v=u++;g[v]=la.toFloat(a.get_data()[v])/la.toFloat(255)}c.texSubImage2D(c.TEXTURE_2D,0,e,b,f,h,c.RGBA,c.FLOAT,g)}else c.texSubImage2D(c.TEXTURE_2D,0,e,b,f,h,c.RGBA,c.UNSIGNED_BYTE,a.get_data());d&&c.generateMipmap(c.TEXTURE_2D);c.bindTexture(c.TEXTURE_2D,null);this.updated=!0},__class__:Fe};var Nd=function(){var a=this.uniformBytes=new Ab(new ArrayBuffer(32)),b=0;null==b&&(b=0);this.xOffestBufferPointer=a=new Uint8Array(a.b.bufferValue,b);a=this.uniformBytes;b=4;
null==b&&(b=0);this.yOffestBufferPointer=a=new Uint8Array(a.b.bufferValue,b);a=this.uniformBytes;b=8;null==b&&(b=0);this.xZoomBufferPointer=a=new Uint8Array(a.b.bufferValue,b);a=this.uniformBytes;b=12;null==b&&(b=0);this.yZoomBufferPointer=a=new Uint8Array(a.b.bufferValue,b)};k["peote.view.UniformBufferDisplay"]=Nd;Nd.__name__=!0;Nd.prototype={createGLBuffer:function(a,b,c,e,f){this.uniformBuffer=a.createBuffer();this.uniformBytes.b_UFloat32[0]=b;this.uniformBytes.b_UFloat32[1]=c;this.uniformBytes.b_UFloat32[2]=
e;this.uniformBytes.b_UFloat32[3]=f;a.bindBuffer(a.UNIFORM_BUFFER,this.uniformBuffer);b=new Uint8Array(this.uniformBytes.b.bufferValue,0);a.bufferData(a.UNIFORM_BUFFER,b,a.STATIC_DRAW);a.bindBuffer(a.UNIFORM_BUFFER,null)},deleteGLBuffer:function(a){a.deleteBuffer(this.uniformBuffer)},__class__:Nd};var Od=function(){var a=this.uniformBytes=new Ab(new ArrayBuffer(48)),b=0;null==b&&(b=0);this.resolutionBufferPointer=a=new Uint8Array(a.b.bufferValue,b);a=this.uniformBytes;b=8;null==b&&(b=0);this.xOffestBufferPointer=
a=new Uint8Array(a.b.bufferValue,b);a=this.uniformBytes;b=12;null==b&&(b=0);this.yOffestBufferPointer=a=new Uint8Array(a.b.bufferValue,b);a=this.uniformBytes;b=16;null==b&&(b=0);this.xZoomBufferPointer=a=new Uint8Array(a.b.bufferValue,b);a=this.uniformBytes;b=20;null==b&&(b=0);this.yZoomBufferPointer=a=new Uint8Array(a.b.bufferValue,b)};k["peote.view.UniformBufferView"]=Od;Od.__name__=!0;Od.prototype={createGLBuffer:function(a,b,c,e,f,h,d){this.uniformBuffer=a.createBuffer();this.uniformBytes.b_UFloat32[0]=
b;this.uniformBytes.b_UFloat32[1]=c;this.uniformBytes.b_UFloat32[2]=e;this.uniformBytes.b_UFloat32[3]=f;this.uniformBytes.b_UFloat32[4]=h;this.uniformBytes.b_UFloat32[5]=d;a.bindBuffer(a.UNIFORM_BUFFER,this.uniformBuffer);b=new Uint8Array(this.uniformBytes.b.bufferValue,0);a.bufferData(a.UNIFORM_BUFFER,b,a.STATIC_DRAW);a.bindBuffer(a.UNIFORM_BUFFER,null)},deleteGLBuffer:function(a){a.deleteBuffer(this.uniformBuffer)},__class__:Od};var Te=function(a,b){this.name=a;this.value=b};k["peote.view.UniformFloat"]=
Te;Te.__name__=!0;Te.prototype={__class__:Te};var He=function(a){this.gl=a;this.createBuffer();this.createProgram()};k["peote.view.utils.Background"]=He;He.__name__=!0;He.prototype={createBuffer:function(){var a=new Ab(new ArrayBuffer(32));a.b_UFloat32[0]=1;a.b_UFloat32[1]=1;a.b_UFloat32[2]=0;a.b_UFloat32[3]=1;a.b_UFloat32[4]=1;a.b_UFloat32[5]=0;a.b_UFloat32[6]=0;a.b_UFloat32[7]=0;this.buffer=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer);a=new Uint8Array(a.b.bufferValue,
0);this.gl.bufferData(this.gl.ARRAY_BUFFER,a,this.gl.STATIC_DRAW);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},createProgram:function(){var a="",b=Sa.VertexFloat;null!=(0<b.low?"lowp":null)?a="precision lowp float;":(b=Sa.VertexFloat,null!=(0<b.medium?"mediump":0<b.low?"lowp":null)&&(a="precision mediump float;"));b=this.gl;var c=this.gl.VERTEX_SHADER,e=b.createShader(c);b.shaderSource(e,a+"\t\n\t\t\tattribute vec2 aPosition;\n\t\t\tvoid main(void)\n\t\t\t{\n\t\t\t\tgl_Position = mat4 (\n\t\t\t\t\tvec4(2.0, 0.0, 0.0, 0.0),\n\t\t\t\t\tvec4(0.0, -2.0, 0.0, 0.0),\n\t\t\t\t\tvec4(0.0, 0.0, -1.0, 0.0),\n\t\t\t\t\tvec4(-1.0, 1.0, 0.0, 1.0)\n\t\t\t\t) * vec4 (aPosition, -1.0 ,1.0);\n\t\t\t}\n\t\t");
b.compileShader(e);if(0==b.getShaderParameter(e,b.COMPILE_STATUS))throw B.thrown("ERROR compiling "+(c==b.VERTEX_SHADER?"vertex":"fragment")+" shader\n"+z.string(b.getShaderInfoLog(e)));var f=e;b=Sa.FragmentFloat;null!=(0<b.low?"lowp":null)?a="precision lowp float;":(b=Sa.FragmentFloat,null!=(0<b.medium?"mediump":0<b.low?"lowp":null)&&(a="precision mediump float;"));b=this.gl;c=this.gl.FRAGMENT_SHADER;e=b.createShader(c);b.shaderSource(e,a+"\n\t\t\tuniform vec4 uRGBA;\n\t\t\tvoid main(void)\n\t\t\t{\n\t\t\t\tgl_FragColor = uRGBA;\n\t\t\t\t\n\t\t\t\t// TODO: Fix for old FF\n\t\t\t\tgl_FragColor.w = clamp(uRGBA.w, 0.003, 1.0);\n\t\t\t}\n\t\t");
b.compileShader(e);if(0==b.getShaderParameter(e,b.COMPILE_STATUS))throw B.thrown("ERROR compiling "+(c==b.VERTEX_SHADER?"vertex":"fragment")+" shader\n"+z.string(b.getShaderInfoLog(e)));a=e;this.glProgram=this.gl.createProgram();this.gl.attachShader(this.glProgram,f);this.gl.attachShader(this.glProgram,a);this.gl.deleteShader(f);this.gl.deleteShader(a);this.gl.bindAttribLocation(this.glProgram,0,"aPosition");b=this.gl;f=this.glProgram;b.linkProgram(f);if(0==b.getProgramParameter(f,b.LINK_STATUS))throw B.thrown(z.string(b.getProgramInfoLog(f))+
"VALIDATE_STATUS: "+z.string(b.getProgramParameter(f,b.VALIDATE_STATUS))+"ERROR: "+z.string(b.getError()));this.uRGBA=this.gl.getUniformLocation(this.glProgram,"uRGBA")},render:function(a,b,c,e){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer);this.gl.enableVertexAttribArray(0);this.gl.vertexAttribPointer(0,2,this.gl.FLOAT,!1,8,0);this.gl.useProgram(this.glProgram);this.gl.uniform4f(this.uRGBA,a,b,c,e);this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4);this.gl.disableVertexAttribArray(0);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,
null)},__class__:He};var Ab=function(a){this.length=a.byteLength;this.b=new Uint8Array(a);this.b.bufferValue=a;a.hxBytes=this;a.bytes=this.b;this.b_UFloat32=new Float32Array(a);this.b_Int32=new Int32Array(a);this.b_Uint16=new Uint16Array(a)};k["peote.view.utils.BufferBytes"]=Ab;Ab.__name__=!0;Ab.prototype={blit:function(a,b,c,e){0==c&&e==b.b.byteLength?this.b.set(b.b,a):this.b.set(b.b.subarray(c,c+e),a)},fill:function(a,b,c){for(var e=0;e<b;)e++,this.b[a++]=c},__class__:Ab};var Qa=function(){};k["peote.view.utils.GLTool"]=
Qa;Qa.__name__=!0;Qa.clearGlErrorQueue=function(a){for(;a.getError()!=a.NO_ERROR;);};Qa.getLastGlError=function(a){var b=a.getError();b!=a.NO_ERROR&&(b==a.INVALID_ENUM?ia.trace("(GL-Error: INVALID_ENUM)",{fileName:"peote/view/utils/GLTool.hx",lineNumber:22,className:"peote.view.utils.GLTool",methodName:"getLastGlError"}):b==a.INVALID_VALUE?ia.trace("(GL-Error: INVALID_VALUE)",{fileName:"peote/view/utils/GLTool.hx",lineNumber:23,className:"peote.view.utils.GLTool",methodName:"getLastGlError"}):b==
a.INVALID_OPERATION?ia.trace("(GL-Error: INVALID_OPERATION)",{fileName:"peote/view/utils/GLTool.hx",lineNumber:24,className:"peote.view.utils.GLTool",methodName:"getLastGlError"}):b==a.OUT_OF_MEMORY?ia.trace("(GL-Error: OUT_OF_MEMORY)",{fileName:"peote/view/utils/GLTool.hx",lineNumber:25,className:"peote.view.utils.GLTool",methodName:"getLastGlError"}):ia.trace("GL-Error: "+b,{fileName:"peote/view/utils/GLTool.hx",lineNumber:26,className:"peote.view.utils.GLTool",methodName:"getLastGlError"}));return b};
var Zb=function(a,b,c){this.value=a;this.next=c;this.prev=b;null!=b&&(b.next=this);null!=c&&(c.prev=this)};k["peote.view.utils.RenderListItem_peote_view_ActiveTexture"]=Zb;Zb.__name__=!0;Zb.prototype={__class__:Zb};var xc=function(a,b,c){this.value=a;this.next=c;this.prev=b;null!=b&&(b.next=this);null!=c&&(c.prev=this)};k["peote.view.utils.RenderListItem_peote_view_Display"]=xc;xc.__name__=!0;xc.prototype={__class__:xc};var pc=function(a,b,c){this.value=a;this.next=c;this.prev=b;null!=b&&(b.next=
this);null!=c&&(c.prev=this)};k["peote.view.utils.RenderListItem_peote_view_Program"]=pc;pc.__name__=!0;pc.prototype={__class__:pc};var xd=function(a){this.first=this.last=null;this.itemMap=a};k["peote.view.utils.RenderList_peote_view_ActiveTexture"]=xd;xd.__name__=!0;xd.prototype={add:function(a,b,c){if(c)if(null==this.first)b=this.first=this.last=new Zb(a,null,null);else if(null==b)b=this.first=new Zb(a,null,this.first);else if(c=this.itemMap.get(b),null!=c)b=new Zb(a,c.prev,c),c==this.first&&(this.first=
b);else throw B.thrown("Error on add: "+z.string(b)+" is not in list.");else if(null==this.last)b=this.first=this.last=new Zb(a,null,null);else if(null==b)b=this.last=new Zb(a,this.last,null);else if(c=this.itemMap.get(b),null!=c)b=new Zb(a,c,c.next),c==this.last&&(this.last=b);else throw B.thrown("Error on add: "+z.string(b)+" is not in list.");c=this.itemMap.get(a);null!=c&&(c==this.first&&(this.first=c.next),c==this.last&&(this.last=c.prev),null!=c.prev&&(c.prev.next=c.next),null!=c.next&&(c.next.prev=
c.prev));this.itemMap.set(a,b)},clear:function(){for(;null!=this.first;){null!=this.last.value&&this.itemMap.remove(this.last.value);var a=this.last;a==this.first&&(this.first=a.next);a==this.last&&(this.last=a.prev);null!=a.prev&&(a.prev.next=a.next);null!=a.next&&(a.next.prev=a.prev)}},__class__:xd};var Pd=function(a){this.first=this.last=null;this.itemMap=a};k["peote.view.utils.RenderList_peote_view_Display"]=Pd;Pd.__name__=!0;Pd.prototype={add:function(a,b,c){if(c)if(null==this.first)b=this.first=
this.last=new xc(a,null,null);else if(null==b)b=this.first=new xc(a,null,this.first);else if(c=this.itemMap.get(b),null!=c)b=new xc(a,c.prev,c),c==this.first&&(this.first=b);else throw B.thrown("Error on add: "+z.string(b)+" is not in list.");else if(null==this.last)b=this.first=this.last=new xc(a,null,null);else if(null==b)b=this.last=new xc(a,this.last,null);else if(c=this.itemMap.get(b),null!=c)b=new xc(a,c,c.next),c==this.last&&(this.last=b);else throw B.thrown("Error on add: "+z.string(b)+" is not in list.");
c=this.itemMap.get(a);null!=c&&(c==this.first&&(this.first=c.next),c==this.last&&(this.last=c.prev),null!=c.prev&&(c.prev.next=c.next),null!=c.next&&(c.next.prev=c.prev));this.itemMap.set(a,b)},__class__:Pd};var Ge=function(a){this.first=this.last=null;this.itemMap=a};k["peote.view.utils.RenderList_peote_view_Program"]=Ge;Ge.__name__=!0;Ge.prototype={add:function(a,b,c){if(c)if(null==this.first)b=this.first=this.last=new pc(a,null,null);else if(null==b)b=this.first=new pc(a,null,this.first);else if(c=
this.itemMap.get(b),null!=c)b=new pc(a,c.prev,c),c==this.first&&(this.first=b);else throw B.thrown("Error on add: "+z.string(b)+" is not in list.");else if(null==this.last)b=this.first=this.last=new pc(a,null,null);else if(null==b)b=this.last=new pc(a,this.last,null);else if(c=this.itemMap.get(b),null!=c)b=new pc(a,c,c.next),c==this.last&&(this.last=b);else throw B.thrown("Error on add: "+z.string(b)+" is not in list.");c=this.itemMap.get(a);null!=c&&(c==this.first&&(this.first=c.next),c==this.last&&
(this.last=c.prev),null!=c.prev&&(c.prev.next=c.next),null!=c.next&&(c.next.prev=c.prev));this.itemMap.set(a,b)},__class__:Ge};var Yb=function(){};k["peote.view.utils.TexUtils"]=Yb;Yb.__name__=!0;Yb.createEmptyTexture=function(a,b,c,e,f,h,d,g){null==g&&(g=!1);null==d&&(d=0);null==h&&(h=0);null==f&&(f=!1);e=a.createTexture();a.bindTexture(a.TEXTURE_2D,e);Qa.clearGlErrorQueue(a);if(g){g=a.TEXTURE_2D;var l=a.RGBA32F,u=a.RGBA,r=a.FLOAT,q=0;0==q?a.texImage2D(g,0,l,b,c,0,u,r,null):a.texImage2D(g,0,l,b,
c,0,u,r,q);Qa.getLastGlError(a)==a.INVALID_VALUE&&(ia.trace("switching to RGBA16F for float precision texture creation",{fileName:"peote/view/utils/TexUtils.hx",lineNumber:25,className:"peote.view.utils.TexUtils",methodName:"createEmptyTexture"}),g=a.TEXTURE_2D,l=a.RGBA16F,u=a.RGBA,r=a.FLOAT,q=0,0==q?a.texImage2D(g,0,l,b,c,0,u,r,null):a.texImage2D(g,0,l,b,c,0,u,r,q),Qa.getLastGlError(a)==a.INVALID_VALUE&&(ia.trace("switching to RGBA for float precision texture creation",{fileName:"peote/view/utils/TexUtils.hx",
lineNumber:28,className:"peote.view.utils.TexUtils",methodName:"createEmptyTexture"}),g=a.TEXTURE_2D,u=l=a.RGBA,r=a.FLOAT,q=0,0==q?a.texImage2D(g,0,l,b,c,0,u,r,null):a.texImage2D(g,0,l,b,c,0,u,r,q)))}else g=a.TEXTURE_2D,u=l=a.RGBA,r=a.UNSIGNED_BYTE,q=0,0==q?a.texImage2D(g,0,l,b,c,0,u,r,null):a.texImage2D(g,0,l,b,c,0,u,r,q);if(Qa.getLastGlError(a)==a.OUT_OF_MEMORY)throw B.thrown("OUT OF GPU MEMORY while texture creation");1==h?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR):a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,a.NEAREST);if(f)switch(d){case 1:a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_LINEAR);break;case 2:a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST_MIPMAP_NEAREST);break;case 3:a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST_MIPMAP_LINEAR);break;default:a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_NEAREST)}else 1==d?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,
a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);f&&a.generateMipmap(a.TEXTURE_2D);a.bindTexture(a.TEXTURE_2D,null);return e};Yb.createPickingTexture=function(a,b){null==b&&(b=!1);var c=a.createTexture();a.bindTexture(a.TEXTURE_2D,c);if(b){b=a.TEXTURE_2D;var e=a.RGBA32I,f=a.RGBA_INTEGER,h=a.INT,d=0}else b=a.TEXTURE_2D,f=e=a.RGBA,h=a.UNSIGNED_BYTE,d=0;0==d?a.texImage2D(b,0,e,1,1,0,f,h,null):a.texImage2D(b,0,e,1,
1,0,f,h,d);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.bindTexture(a.TEXTURE_2D,null);return c};Yb.optimalTextureSize=function(a,b,c,e,f,h){null==f&&(f=!0);h=Math.ceil(Math.log(e)/Math.log(2));for(var d=Math.ceil(Math.log(a*b*c)/Math.log(2)),g,u=1,r=d-1,v=Math.floor(Math.abs(u-r)),q=(1<<h)*(1<<
h),k=!1,p=Math.floor(Math.min(h,d)),K;1<<p>=b;){for(K=Math.floor(Math.min(h,d-p+1));1<<K>=c&&!(Math.floor((1<<p)/b)*Math.floor((1<<K)/c)<a);){g=(1<<p)*(1<<K)-a*b*c;if(0>g)break;g<=q&&(g==q?Math.abs(p-K)<v&&(v=Math.floor(Math.abs(p-K)),u=p,r=K,k=!0):(u=p,r=K,q=g,k=!0));--K}--p}if(k)u=1<<u,r=1<<r;else{if(f)throw B.thrown("Error: max texture-size ("+e+") is to small for "+a+" images ("+b+" x "+c+")");if(b>e||c>e)throw B.thrown("Error: max texture-size ("+e+") is to small for image ("+b+" x "+c+")");
u=r=e}return{width:u,height:r,slotsX:u/b|0,slotsY:r/c|0,imageSlots:(u/b|0)*(r/c|0)}};var nc=function(){};k["peote.view.utils.Util"]=nc;nc.__name__=!0;nc.resolveFormulaCyclic=function(a){for(var b=[],c=a.h,e=Object.keys(c),f=e.length,h=0;h<f;)if(c=e[h++],c=nc.resolveFormulaKey(c,a,b),null!=c.errKey)throw B.thrown(c);c=a.h;b=Object.keys(c);e=b.length;for(f=0;f<e;)c=b[f++],h=a.h[c].replace(/___:::___/g,""),a.h[c]=h};nc.resolveFormulaKey=function(a,b,c,e){null==e&&(e=[a]);null==c&&(c=[]);var f=b.h[a];
if(0<=c.indexOf(a))return{formula:f,errKey:null,errVar:null};for(var h=Object.keys(b.h),d=h.length,g=0;g<d;){var u=h[g++];if(u!=a){var r=new Z("(^|.*?[^\\w.])"+u+"\\b.*?","g");if(r.match(f)){if(0<=e.indexOf(u))return{formula:f,errKey:a,errVar:u};u=nc.resolveFormulaKey(u,b,c,e.concat([u]));if(null!=u.errKey)return u;f=f.replace(r.r,"$1(___:::___"+u.formula+"___:::___)")}}}b.h[a]=f;c.push(a);return{formula:f,errKey:null,errVar:null}};nc.resolveFormulaVars=function(a,b){for(var c=a.h,e=Object.keys(c),
f=e.length,h=0;h<f;){var d=e[h++],g=a.h[d];c=b.h;c=Object.keys(c);for(var u=c.length,r=0;r<u;){var v=c[r++],q=new Z("(^|.*?[^\\w.])"+v+"\\b.*?","g");q.match(g)&&(g=g.replace(q.r,"$1("+b.h[v]+")"))}a.h[d]=g}};var Ec=function(a,b,c){this.alwaysDraw=!1;this.onInitComplete=function(){};this.data=a;this.assets=b;this.palette=null!=c?c:new Ie(ec.toRGBA(Pb.Versitle));this.layers=[];this.keyboard=new Je([]);this.mouse=new Ke};k["tyke.GlyphLoop"]=Ec;Ec.__name__=!0;Ec.__super__=hc;Ec.prototype=x(hc.prototype,
{onInit:function(a){var b=this;hc.prototype.onInit.call(this,a);this.assets.Preload(function(){b.text=Ue.initText(b.display,b.assets.fontCache[0]);b.display.addProgram(b.text.fontProgram);b.onInitComplete()})},onTick:function(a){for(var b=!1,c=0,e=this.layers;c<e.length;){var f=e[c];++c;f.onTick(a);f.hasChanged&&(b=!0)}return this.alwaysDraw?!0:b},onDraw:function(a){a=0;for(var b=this.layers;a<b.length;){var c=b[a];++a;c.hasChanged&&(c.draw(),c.hasChanged=!1)}this.text.fontProgram._buffer.update()},
onKeyDown:function(a,b){this.keyboard.handle(a,this)},onMouseDown:function(a,b,c){this.mouse.onDown(a,b,c)},onMouseUp:function(a,b,c){this.mouse.onUp(a,b,c)},onMouseMove:function(a,b){this.mouse.onMove(a,b)},__class__:Ec});var yd=function(a,b){this.numColumns=a;this.numRows=b};k["tyke.GridLogic"]=yd;yd.__name__=!0;yd.prototype={column:function(a){return a%this.numColumns|0},row:function(a){return a/this.numColumns|0},index:function(a,b){return a+this.numColumns*b},__class__:yd};var yc=function(a,
b,c){yd.call(this,a,b);this.cellInit=c;this.init()};k["tyke.GridStructure"]=yc;yc.__name__=!0;yc.__super__=yd;yc.prototype=x(yd.prototype,{init:function(){this.cells=[];for(var a=0,b=this.numColumns*this.numRows;a<b;){var c=a++,e=this.column(c);c=this.row(c);this.cells.push(this.cellInit(e,c))}},forEach:function(a,b){null==b&&(b=!1);if(b)for(b=this.cells.length;0<b--;)a(this.column(b),this.row(b),this.cells[b]);else for(var c=0,e=this.cells;c<e.length;){var f=e[c];b=c++;a(this.column(b),this.row(b),
f)}},forSingleCoOrdinate:function(a,b,c){c(a,b,this.cells[this.index(a,b)])},__class__:yc});var Nc=function(a){this.hasChanged=!1;yc.call(this,a.numColumns,a.numRows,a.cellInit);this.palette=a.palette};k["tyke.GridLayer"]=Nc;Nc.__name__=!0;Nc.__super__=yc;Nc.prototype=x(yc.prototype,{onTick:function(a){},__class__:Nc});var Ub=function(a,b){this.fontProgram=b;b.fontStyle.bgColor=0;null==a.cellInit&&(a.cellInit=function(c,e){c*=a.cellWidth;e*=a.cellHeight;var f=b.fontStyle,h=b.font;h=32>=h.rangeMapping.min&&
32<=h.rangeMapping.max?h.rangeMapping:null;if(null!=h){var d=new qa;f=null!=f?f:b.fontStyle;d.width=f.width;d.height=f.height;d.color=f.color;d.bgColor=f.bgColor;d.weight=f.weight;d.tilt=f.tilt;d.zIndex=f.zIndex;d.char=32;d.tile=32-h.min;d.x=c;d.y=e;b._buffer.addElement(d);c=d}else c=null;return new Qd(0,c,10,-1,1)});Nc.call(this,a)};k["tyke.GlyphLayer"]=Ub;Ub.__name__=!0;Ub.__super__=Nc;Ub.prototype=x(Nc.prototype,{draw:function(){for(var a=0,b=this.cells;a<b.length;){var c=b[a];a++;var e=c;e.glyph.color=
this.palette.colorOrDefault(e.paletteIndexFg);c=this.palette.colorOrDefault(e.paletteIndexBg);0<e.paletteIndexBg&&(e.glyph.bgColor=ec.changeAlpha(c,Math.ceil(255*e.bgIntensity)));var f=this.fontProgram;c=e.glyph;e=0==e.char?F.cca(" ",0):e.char;f=f.font;f=e>=f.rangeMapping.min&&e<=f.rangeMapping.max?f.rangeMapping:null;null!=f&&(c.char=e,c.tile=e-f.min)}},__class__:Ub});var fd=function(a,b,c){Ec.call(this,a,b,c);this.onInitComplete=n(this,this.begin)};k["samples.GlyphDemo"]=fd;fd.__name__=!0;fd.__super__=
Ec;fd.prototype=x(Ec.prototype,{getInitFor:function(a,b,c){var e=this;return function(f,h){var d=F.cca(a,0);f*=e.text.fontStyle.width;h*=e.text.fontStyle.height;var g=e.text.fontProgram,u=e.text.fontStyle,r=g.font;r=d>=r.rangeMapping.min&&d<=r.rangeMapping.max?r.rangeMapping:null;if(null!=r){var v=new qa;u=null!=u?u:g.fontStyle;v.width=u.width;v.height=u.height;v.color=u.color;v.bgColor=u.bgColor;v.weight=u.weight;v.tilt=u.tilt;v.zIndex=u.zIndex;v.char=d;v.tile=d-r.min;v.x=f;v.y=h;g._buffer.addElement(v);
d=v}else d=null;return new Qd(0,d,b,c,1)}},begin:function(){var a={numColumns:this.data.numCellsWide,numRows:this.data.numCellsHigh,cellWidth:Math.ceil(this.text.fontStyle.width),cellHeight:Math.ceil(this.text.fontStyle.height),palette:this.palette,cellInit:this.getInitFor(" ",0,3)},b={numColumns:this.data.numCellsWide,numRows:this.data.numCellsHigh,cellWidth:Math.ceil(this.text.fontStyle.width),cellHeight:Math.ceil(this.text.fontStyle.height),palette:this.palette,cellInit:this.getInitFor(" ",0,-1)},
c=new Rd(a,this.text.fontProgram);a=new Sd(b,this.text.fontProgram);this.layers=[c,a];this.keyboard.bind(49,"1","toggle random chars",function(a){c.toggleRandomChars()});this.keyboard.bind(50,"2","toggle colors cycle/random",function(a){c.togglePaletteCycle()});this.keyboard.bind(91,"[","decrease cycle depth",function(a){c.alterPaletteCycleLength(1)});this.keyboard.bind(93,"]","increase cycle depth",function(a){c.alterPaletteCycleLength(-1)});this.keyboard.bind(61,"=","change palette",function(a){c.cyclePalette()});
b=0;for(var e=this.keyboard.listBindings();b<e.length;){var f=e[b];++b;a.addLine(f)}a.refreshDisplay();this.gum.toggleUpdate(!0)},__class__:fd});var Sd=function(a,b){this.lines=[];Ub.call(this,a,b)};k["samples.InfoLayer"]=Sd;Sd.__name__=!0;Sd.__super__=Ub;Sd.prototype=x(Ub.prototype,{addLine:function(a){var b=this.lines,c=[],e=0;for(a=a.split("");e<a.length;){var f=a[e];++e;c.push(F.cca(f,0))}b.push(c)},refreshDisplay:function(){for(var a=0,b=this.lines;a<b.length;){for(var c=b[a],e=a++,f=[],h=0;h<
c.length;){var d=c[h];++h;f.push(String.fromCodePoint(d))}ia.trace(f.join(""),{fileName:"./samples/GlyphDemo.hx",lineNumber:89,className:"samples.InfoLayer",methodName:"refreshDisplay"});for(f=0;f<c.length;)h=c[f],d=f++,this.forSingleCoOrdinate(d,e,function(a){return function(b,c,e){e.char=a[0];e.paletteIndexFg=14;e.paletteIndexBg=15}}([h]))}this.hasChanged=!0},__class__:Sd});var Rd=function(a,b){this.reduceColoursBy=0;this.isPaletteCycle=!1;this.isCharsRandom=!0;this.paletteIndex=0;this.palettes=
[Pb.VanillaMilkshake,Pb.Soldier,Pb.Versitle];Ub.call(this,a,b)};k["samples.DemoLayer"]=Rd;Rd.__name__=!0;Rd.__super__=Ub;Rd.prototype=x(Ub.prototype,{onTick:function(a){var b=this;this.forEach(function(c,e,f){b.isPaletteCycle&&jc.cyclePalette(f,b.palette,b.reduceColoursBy,a);jc.randomise(c,e,f,b.palette,!b.isPaletteCycle,b.isCharsRandom)});this.hasChanged=!0},toggleRandomChars:function(){this.isCharsRandom=!this.isCharsRandom},togglePaletteCycle:function(){this.isPaletteCycle=!this.isPaletteCycle},
cyclePalette:function(){this.paletteIndex++;this.paletteIndex>=this.palettes.length&&(this.paletteIndex=0);this.palette.setColors(ec.toRGBA(this.palettes[this.paletteIndex]))},alterPaletteCycleLength:function(a){this.reduceColoursBy+=a;ia.trace("reduce colours by "+this.reduceColoursBy,{fileName:"./samples/GlyphDemo.hx",lineNumber:141,className:"samples.DemoLayer",methodName:"alterPaletteCycleLength"});0>this.reduceColoursBy&&(this.reduceColoursBy=0);this.reduceColoursBy>this.palette.colors.length-
1&&(this.reduceColoursBy=this.palette.colors.length-1)},__class__:Rd});var Qd=function(a,b,c,e,f){this.char=a;this.glyph=b;this.paletteIndexFg=c;this.paletteIndexBg=e;this.bgIntensity=f};k["tyke.GlyphModel"]=Qd;Qd.__name__=!0;Qd.prototype={__class__:Qd};var Yd=function(a,b){this.numCellsWide=a;this.numCellsHigh=b};k["tyke.GlyphLoopConfig"]=Yd;Yd.__name__=!0;Yd.prototype={__class__:Yd};var jc=function(){};k["tyke.CellWorks"]=jc;jc.__name__=!0;jc.randomise=function(a,b,c,e,f,h){null==h&&(h=!0);null==
f&&(f=!0);f&&(c.paletteIndexFg=e.randomIndex());h&&(c.char=hf+Math.ceil(jf*Math.random()))};jc.cyclePalette=function(a,b,c,e){null==c&&(c=0);a.paletteIndexFg=b.cyclePalette(c);jc.cycle++;a.bgIntensity=Math.ceil(255*Math.abs(Math.sin(.01*jc.cycle)))};var Ie=function(a,b){null==b&&(b=-1);this.paletteCycleIndex=this.transparent=0;this.defaultBgIndex=b;this.colors=a};k["tyke.Palette"]=Ie;Ie.__name__=!0;Ie.prototype={cyclePalette:function(a){null==a&&(a=0);var b=this.paletteCycleIndex;a=this.colors.length-
a;this.paletteCycleIndex++;this.paletteCycleIndex>=a&&(this.paletteCycleIndex=0);return b>=this.colors.length?this.colors.length-1:b},randomIndex:function(){return Math.ceil((this.colors.length-1)*Math.random())},setColors:function(a){this.colors=a},colorOrDefault:function(a){return 0>a?this.transparent:this.colors[a]},__class__:Ie};var Je=function(a){this.sortOrder=[];this.bindings=new Bb;for(var b=0;b<a.length;){var c=a[b];++b;this._bind(c)}};k["tyke.KeyPresses_tyke_GlyphLoop"]=Je;Je.__name__=!0;
Je.prototype={handle:function(a,b){this.lastHandled=a;this.bindings.exists(a)&&this.bindings.get(a).handle(b)},_bind:function(a){this.sortOrder.push(a.code);this.bindings.set(a.code,a)},bind:function(a,b,c,e){this._bind({description:c,label:b,code:a,handle:e})},describe:function(a){return""+a.label+" "+a.description},listBindings:function(){for(var a=[],b=0,c=this.sortOrder;b<c.length;){var e=c[b];++b;a.push(this.describe(this.bindings.get(e)))}return a},__class__:Je};var Le=function(a,b,c){this.font=
a;this.fontStyle=b;this.fontProgram=c};k["tyke.Text"]=Le;Le.__name__=!0;Le.prototype={__class__:Le};var Ue=function(){};k["tyke.Glyphs"]=Ue;Ue.__name__=!0;Ue.initText=function(a,b){var c=b.createFontStyle();c.width=b.config.width;c.height=b.config.height;var e=b.createFontProgram(c);null!=a&&a.addProgram(e);return new Le(b,c,e)};var Ke=function(){this.onMove=function(a,b){};this.onUp=function(a,b,c){ia.trace("mouse up "+a+" "+b+" "+c,{fileName:"tyke/Mouse.hx",lineNumber:11,className:"tyke.Mouse",
methodName:"onUp"})};this.onDown=function(a,b,c){ia.trace("mouse down "+a+" "+b+" "+c,{fileName:"tyke/Mouse.hx",lineNumber:7,className:"tyke.Mouse",methodName:"onDown"})}};k["tyke.Mouse"]=Ke;Ke.__name__=!0;Ke.prototype={__class__:Ke};var Pb=function(){};k["tyke.Sixteen"]=Pb;Pb.__name__=!0;var Ja=function(){};k["utils.Loader"]=Ja;Ja.__name__=!0;Ja.onProgressDebug=function(a,b,c){ia.trace("...loading "+a+"/"+b+' of "'+c+'"',{fileName:"utils/Loader.hx",lineNumber:11,className:"utils.Loader",methodName:"onProgressDebug"})};
Ja.onErrorDebug=function(a){ia.trace("Error - "+a,{fileName:"utils/Loader.hx",lineNumber:15,className:"utils.Loader",methodName:"onErrorDebug"})};Ja.onCompleteDebug=function(a){ia.trace('Loading complete "'+a+'"',{fileName:"utils/Loader.hx",lineNumber:19,className:"utils.Loader",methodName:"onCompleteDebug"})};var Vb=v["utils._MultipassTemplate.TemplateExpr"]={__ename__:!0,__constructs__:null,OpVar:(g=function(a){return{_hx_index:0,v:a,__enum__:"utils._MultipassTemplate.TemplateExpr",toString:d}},
g._hx_name="OpVar",g.__params__=["v"],g),OpExpr:(g=function(a){return{_hx_index:1,expr:a,__enum__:"utils._MultipassTemplate.TemplateExpr",toString:d}},g._hx_name="OpExpr",g.__params__=["expr"],g),OpIf:(g=function(a,b,c){return{_hx_index:2,expr:a,eif:b,eelse:c,__enum__:"utils._MultipassTemplate.TemplateExpr",toString:d}},g._hx_name="OpIf",g.__params__=["expr","eif","eelse"],g),OpStr:(g=function(a){return{_hx_index:3,str:a,__enum__:"utils._MultipassTemplate.TemplateExpr",toString:d}},g._hx_name="OpStr",
g.__params__=["str"],g),OpBlock:(g=function(a){return{_hx_index:4,l:a,__enum__:"utils._MultipassTemplate.TemplateExpr",toString:d}},g._hx_name="OpBlock",g.__params__=["l"],g),OpForeach:(g=function(a,b){return{_hx_index:5,expr:a,loop:b,__enum__:"utils._MultipassTemplate.TemplateExpr",toString:d}},g._hx_name="OpForeach",g.__params__=["expr","loop"],g),OpMacro:(g=function(a,b){return{_hx_index:6,name:a,params:b,__enum__:"utils._MultipassTemplate.TemplateExpr",toString:d}},g._hx_name="OpMacro",g.__params__=
["name","params"],g)};Vb.__constructs__=[Vb.OpVar,Vb.OpExpr,Vb.OpIf,Vb.OpStr,Vb.OpBlock,Vb.OpForeach,Vb.OpMacro];var Fa=function(a){a=this.parseTokens(a);this.expr=this.parseBlock(a);if(!a.isEmpty())throw B.thrown("Unexpected '"+z.string(a.first().s)+"'");};k["utils.MultipassTemplate"]=Fa;Fa.__name__=!0;Fa.prototype={execute:function(a,b){this.macros=null==b?{}:b;this.context=a;this.stack=new Sb;this.buf=new Ua;this.run(this.expr);return this.buf.b},resolve:function(a){if("__current__"==a)return this.context;
var b=G.getProperty(this.context,a);if(null!=b||Object.prototype.hasOwnProperty.call(this.context,a))return b;for(var c=this.stack.h;null!=c;){b=c.item;c=c.next;var e=b;b=G.getProperty(e,a);if(null!=b||Object.prototype.hasOwnProperty.call(e,a))return b}if(!Object.prototype.hasOwnProperty.call(Fa.globals,a))throw B.thrown(a);return G.field(Fa.globals,a)},parseTokens:function(a){for(var b=new Sb;Fa.splitter.match(a);){var c=Fa.splitter.matchedPos();0<c.pos&&b.add({p:F.substr(a,0,c.pos),s:!0,l:null});
if(58==F.cca(a,c.pos))b.add({p:F.substr(a,c.pos+2,c.len-4),s:!1,l:null}),a=Fa.splitter.matchedRight();else{c=c.pos+c.len;for(var e=1,f=[],h="";;){var d=F.cca(a,c);++c;if(40==d)++e;else if(41==d){if(--e,0>=e)break}else if(null==d)throw B.thrown("Unclosed macro parenthesis");44==d&&1==e?(f.push(h),h=""):h+=String.fromCodePoint(d)}f.push(h);b.add({p:Fa.splitter.matched(2),s:!1,l:f});a=F.substr(a,c,a.length-c)}}0<a.length&&b.add({p:a,s:!0,l:null});return b},parseBlock:function(a){for(var b=new Sb;;){var c=
a.first();if(null==c)break;if(!c.s&&("end"==c.p||"else"==c.p||"elseif "==F.substr(c.p,0,7)))break;b.add(this.parse(a))}return 1==b.length?b.first():Vb.OpBlock(b)},parse:function(a){var b=a.pop(),c=b.p;if(b.s)return Vb.OpStr(c);if(null!=b.l){a=new Sb;var e=0;for(b=b.l;e<b.length;){var f=b[e];++e;a.add(this.parseBlock(this.parseTokens(f)))}return Vb.OpMacro(c,a)}if("if "==F.substr(c,0,3)){c=F.substr(c,3,c.length-3);e=null;try{e=this.parseExpr(c)}catch(h){ka.lastError=h;b=B.caught(h).unwrap();if("string"==
typeof b)throw ia.trace(b,{fileName:"utils/MultipassTemplate.hx",lineNumber:211,className:"utils.MultipassTemplate",methodName:"parse"}),B.thrown(b);throw h;}c=this.parseBlock(a);b=a.first();if(null==b)throw B.thrown("Unclosed 'if'");if("end"==b.p)a.pop(),f=null;else if("else"==b.p){if(a.pop(),f=this.parseBlock(a),b=a.pop(),null==b||"end"!=b.p)throw B.thrown("Unclosed 'else'");}else b.p=F.substr(b.p,4,b.p.length-4),f=this.parse(a);return Vb.OpIf(e,c,f)}if("foreach "==F.substr(c,0,8)){c=F.substr(c,
8,c.length-8);e=this.parseExpr(c);c=this.parseBlock(a);b=a.pop();if(null==b||"end"!=b.p)throw B.thrown("Unclosed 'foreach'");return Vb.OpForeach(e,c)}return Fa.expr_splitter.match(c)?Vb.OpExpr(this.parseExpr(c)):Vb.OpVar(c)},parseExpr:function(a){for(var b=new Sb,c=a;Fa.expr_splitter.match(a);){var e=Fa.expr_splitter.matchedPos();0!=e.pos&&b.add({p:F.substr(a,0,e.pos),s:!0});a=Fa.expr_splitter.matched(0);b.add({p:a,s:0<=a.indexOf('"')});a=Fa.expr_splitter.matchedRight()}0!=a.length&&b.add({p:a,s:!0});
try{var f=this.makeExpr(b);if(!b.isEmpty())throw B.thrown(b.first().p);}catch(h){ka.lastError=h;b=B.caught(h).unwrap();if("string"==typeof b)throw B.thrown("Unexpected '"+b+"' in "+c);throw h;}return function(){try{return f()}catch(t){ka.lastError=t;var a=B.caught(t).unwrap();throw B.thrown({v:a,expr:c});}}},makeConst:function(a){Fa.expr_trim.match(a);a=Fa.expr_trim.matched(1);if(34==F.cca(a,0)){var b=F.substr(a,1,a.length-2);return function(){return b}}if(Fa.expr_int.match(a)){var c=z.parseInt(a);
return function(){return c}}if(Fa.expr_float.match(a)){var e=parseFloat(a);return function(){return e}}var f=this;return function(){return f.resolve(a)}},makePath:function(a,b){var c=b.first();if(null==c||"."!=c.p)return a;b.pop();c=b.pop();if(null==c||!c.s)throw B.thrown(c.p);var e=c.p;Fa.expr_trim.match(e);e=Fa.expr_trim.matched(1);return this.makePath(function(){return G.field(a(),e)},b)},makeExpr:function(a){return this.makePath(this.makeExpr2(a),a)},makeExpr2:function(a){var b=a.pop();if(null==
b)throw B.thrown("<eof>");if(b.s)return this.makeConst(b.p);switch(b.p){case "!":var c=this.makeExpr(a);return function(){var a=c();return null!=a?0==a:!0};case "(":var e=this.makeExpr(a);b=a.pop();if(null==b||b.s)throw B.thrown(b);if(")"==b.p)return e;var f=this.makeExpr(a);a=a.pop();if(null==a||")"!=a.p)throw B.thrown(a);switch(b.p){case "!=":return function(){return e()!=f()};case "&&":return function(){return e()&&f()};case "*":return function(){return e()*f()};case "+":return function(){return e()+
f()};case "-":return function(){return e()-f()};case "/":return function(){return e()/f()};case "<":return function(){return e()<f()};case "<=":return function(){return e()<=f()};case "==":return function(){return e()==f()};case ">":return function(){return e()>f()};case ">=":return function(){return e()>=f()};case "||":return function(){return e()||f()};default:throw B.thrown("Unknown operation "+b.p);}case "-":var h=this.makeExpr(a);return function(){return-h()}}throw B.thrown(b.p);},run:function(a){switch(a._hx_index){case 0:var b=
a.v;try{var c=this.buf,e=z.string(this.resolve(b));c.b+=z.string(e)}catch(rc){ka.lastError=rc,this.buf.b+=z.string("::"+b+"::")}break;case 1:var f=a.expr;try{c=this.buf,e=z.string(f()),c.b+=z.string(e)}catch(rc){ka.lastError=rc,b=B.caught(rc).unwrap(),this.buf.b+=z.string("::("+z.string(b.expr)+")::")}break;case 2:f=a.expr;e=a.eif;c=a.eelse;try{b=f(),null==b||0==b?null!=c&&this.run(c):this.run(e)}catch(rc){ka.lastError=rc,b=B.caught(rc).unwrap(),this.buf.b+=z.string("::if "+z.string(b.expr)+"::"),
this.run(e),null!=c&&(this.buf.b+="::else::",this.run(c)),this.buf.b+="::end::"}break;case 3:b=a.str;this.buf.b+=null==b?"null":""+b;break;case 4:for(a=a.l.h;null!=a;){var h=a.item;a=a.next;f=h;this.run(f)}break;case 5:f=a.expr;c=a.loop;try{b=f();try{e=y(b);if(null==e.hasNext)throw B.thrown(null);b=e}catch(rc){ka.lastError=rc;try{if(null==b.hasNext)throw B.thrown(null);}catch(C){throw B.thrown("Cannot iter on "+z.string(b));}}for(this.stack.push(this.context);b.hasNext();)this.context=b.next(),this.run(c);
this.context=this.stack.pop()}catch(rc){ka.lastError=rc,b=B.caught(rc).unwrap(),this.buf.b+=z.string("::foreach "+z.string(b.v)+"::"),this.run(c),this.buf.b+="::end::"}break;case 6:f=a.name;a=a.params;b=G.field(this.macros,f);var d=[],g=this.buf;d.push(n(this,this.resolve));for(a=a.h;null!=a;)h=a.item,a=a.next,0==h._hx_index?(h=h.v,d.push(this.resolve(h))):(this.buf=new Ua,this.run(h),d.push(this.buf.b));this.buf=g;try{c=this.buf,e=z.string(b.apply(this.macros,d)),c.b+=z.string(e)}catch(rc){ka.lastError=
rc;a=B.caught(rc).unwrap();try{var u=d.join(",")}catch(C){u="???"}b="Macro call "+f+"("+u+") failed ("+z.string(a)+")";throw B.thrown(b);}}},__class__:Fa};w.$haxeUID|=0;"undefined"!=typeof performance&&"function"==typeof performance.now&&(F.now=performance.now.bind(performance));k.Math=Math;null==String.fromCodePoint&&(String.fromCodePoint=function(a){return 65536>a?String.fromCharCode(a):String.fromCharCode((a>>10)+55232)+String.fromCharCode((a&1023)+56320)});String.prototype.__class__=k.String=
String;String.__name__=!0;k.Array=Array;Array.__name__=!0;Date.prototype.__class__=k.Date=Date;Date.__name__="Date";var cf={},af={},bf=Number,$e=Boolean,df={},ef={};Rb.count=0;na.__toStr={}.toString;var Xe=new Uint32Array(256);vb.__alpha16=Xe;for(var qc=0;256>qc;){var dd=qc++;vb.__alpha16[dd]=Math.ceil(257.00392156862745*dd)}Xe=new Uint8Array(511);vb.__clamp=Xe;for(qc=0;255>qc;)dd=qc++,vb.__clamp[dd]=dd;for(qc=255;511>qc;)dd=qc++,vb.__clamp[dd]=255;za.level=3;"undefined"==typeof console&&(console=
{});null==console.log&&(console.log=function(){});ea.default_mass=-1;ea.minimum_mass=1E-4;ea.ids=0;K.qr=[];K.sqr=[];H.cached_listeners=new r;H.cached_collisions=[];H.cached_body=new ea({mass:1});mb.pool=new sa(mb);$a.global=new $a(null,null,null,null,null);kc.pool=new Zc(kc);tc.pool=new Tc(tc);Qb.pool=new Hc(Qb);Gb.pool=new hd(Gb);fc.pool=new Oc(fc);Ya.pool=new Ic(Ya);Jb.pool=new id(Jb);ab.pool=new Ad(ab);Ma.pool=new Bd(Ma);pa.norm=new P(0,0);pa.closest=new P(0,0);zb.DEFAULT_RESOLVER=new Ed;zb.BASE64=
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";Za.LEN_EXTRA_BITS_TBL=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1];Za.LEN_BASE_VAL_TBL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];Za.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1];Za.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];Za.CODE_LENGTHS_POS=
[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];L.activeRequests=0;L.requestLimit=17;L.requestQueue=new Sb;Wc.windowID=0;bc.DICTIONARY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");bc.EXTENDED_DICTIONARY=function(a){a=[];for(var b=0,c=bc.DICTIONARY;b<c.length;){var e=c[b];++b;for(var f=0,h=bc.DICTIONARY;f<h.length;){var d=h[f];++f;a.push(e+d)}}return a}(this);lc.sensorByID=new Bb;lc.sensors=[];Ra.devices=new Bb;Ra.onConnect=new we;fb.devices=new Bb;fb.onConnect=new xe;
Eb.onCancel=new Cc;Eb.onEnd=new Cc;Eb.onMove=new Cc;Eb.onStart=new Cc;ba.cache=new Ae;ba.onChange=new Va;ba.bundlePaths=new W;ba.libraries=new W;ba.libraryPaths=new W;za.throwErrors=!0;Ba.FORMULAS=new W;Ba.ATTRIBUTES=function(a){a=new W;a.h.zStart="aRotZ";a.h.zEnd="aRotZ";a.h.z="aRotZ";a.h.yStart="aPos.y";a.h.yEnd="aPos.y";a.h.y="aPos.y";a.h.xStart="aPos.x";a.h.xEnd="aPos.x";a.h.x="aPos.x";a.h.wStart="aSize.x";a.h.wEnd="aSize.x";a.h.w="aSize.x";a.h.hStart="aSize.y";a.h.hEnd="aSize.y";a.h.h="aSize.y";
return a}(this);Ba.FORMULA_NAMES=function(a){a=new W;a.h.sizeX="w";a.h.sizeY="h";a.h.posX="x";a.h.posY="y";a.h.zIndex="z";return a}(this);Ba.FORMULA_VARYINGS="";Ba.FORMULA_CONSTANTS="";Ba.FORMULA_CUSTOMS="";Ba.DEFAULT_FORMULA_VARS=new W;qa.__meta__={fields:{x:{posX:null},y:{posY:null},color:{color:null},bgColor:{color:null},weight:{custom:null,varying:null},tilt:{custom:null},zIndex:{zIndex:null},width:{sizeX:null,varying:null},height:{sizeY:null},tile:{texTile:null}}};qa.FORMULAS=new W;qa.ATTRIBUTES=
function(a){a=new W;a.h.zIndexStart="aRotZ";a.h.zIndexEnd="aRotZ";a.h.zIndex="aRotZ";a.h.yStart="aPos.y";a.h.yEnd="aPos.y";a.h.y="aPos.y";a.h.xStart="aPos.x";a.h.xEnd="aPos.x";a.h.x="aPos.x";a.h.widthStart="aSize.x";a.h.widthEnd="aSize.x";a.h.width="aSize.x";a.h.weightStart="aFloat0.x";a.h.weightEnd="aFloat0.x";a.h.weight="aFloat0.x";a.h.tiltStart="aFloat0.y";a.h.tiltEnd="aFloat0.y";a.h.tilt="aFloat0.y";a.h.tileStart="aShort0";a.h.tileEnd="aShort0";a.h.tile="aShort0";a.h.heightStart="aSize.y";a.h.heightEnd=
"aSize.y";a.h.height="aSize.y";return a}(this);qa.FORMULA_NAMES=function(a){a=new W;a.h.sizeX="width";a.h.sizeY="height";a.h.posX="x";a.h.posY="y";a.h.zIndex="zIndex";return a}(this);qa.FORMULA_VARYINGS="weight,tile";qa.FORMULA_CONSTANTS="";qa.FORMULA_CUSTOMS="tilt";qa.DEFAULT_FORMULA_VARS=new W;ta.FORMULAS=new W;ta.ATTRIBUTES=function(a){a=new W;a.h.yStart="aPos.y";a.h.yEnd="aPos.y";a.h.y="aPos.y";a.h.xStart="aPos.x";a.h.xEnd="aPos.x";a.h.x="aPos.x";a.h.wStart="aSize.x";a.h.wEnd="aSize.x";a.h.w=
"aSize.x";a.h.hStart="aSize.y";a.h.hEnd="aSize.y";a.h.h="aSize.y";return a}(this);ta.FORMULA_NAMES=function(a){a=new W;a.h.sizeX="w";a.h.sizeY="h";a.h.posX="x";a.h.posY="y";return a}(this);ta.FORMULA_VARYINGS="";ta.FORMULA_CONSTANTS="";ta.FORMULA_CUSTOMS="";ta.DEFAULT_FORMULA_VARS=new W;Y.isES3=!1;Y.isUBO=!1;Y.isINSTANCED=!1;Y.isVAO=!1;Sa.VertexFloat={high:0,medium:0,low:0};Sa.VertexInt={high:0,medium:0,low:0};Sa.VertexSampler={high:0,medium:0,low:0};Sa.FragmentFloat={high:0,medium:0,low:0};Sa.FragmentInt=
{high:0,medium:0,low:0};Sa.FragmentSampler={high:0,medium:0,low:0};Qa.rEmptylines=new Z("([ \t]*\r?\n)+","g");Qa.rStartspaces=new Z("^([ \t]*\r?\n)+","g");jc.cycle=0;var hf=32,jf=96;Pb.Versitle=[789263,11485010,6240601,3025207,9460890,14126402,9656635,9278124,13926320,14540112,7714118,4877746,15977364,15724777,10999514,5677512];Pb.Soldier=[16776666,15848094,11897966,7031361,3875874,6707539,10722679,15457388,14258237,10965293,7022375,3873571,1511181,1978151,5333837,10336876];Pb.VanillaMilkshake=[2631726,
7100017,14272703,16351876,11577828,11324644,11789274,16689892,8890505,11594643,15332765,16770758,14590859,16761732,16775072,16775140];Ja.corsServer="";Fa.splitter=new Z('(::[A-Za-z0-9_ ()&|!+=/><*."-]+::|\\$\\$([A-Za-z0-9_-]+)\\()',"");Fa.expr_splitter=new Z('(\\(|\\)|[ \r\n\t]*"[^"]*"[ \r\n\t]*|[!+=/><*.&|-]+)',"");Fa.expr_trim=new Z("^[ ]*([^ ]+)[ ]*$","");Fa.expr_int=new Z("^[0-9]+$","");Fa.expr_float=new Z("^([+-]?)(?=\\d|,\\d)\\d*(,\\d*)?([Ee]([+-]?\\d+))?$","");Fa.globals={};ra.main()})("undefined"!=
typeof m?m:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof y?y:"undefined"!=typeof self?self:this)};I.lime.embed=function(w){var y={},A=I.lime.$scripts[w];if(!A)throw Error('Cannot find project name "'+w+'"');A(y,m);for(var D in y)I[D]=I[D]||y[D];(A=y.lime||window.lime)&&A.embed&&this!=A.embed&&A.embed.apply(A,arguments);return y};"function"==typeof define&&define.amd&&(define([],function(){return I.lime}),define.__amd=define.amd,
define.amd=null)})("undefined"!=typeof exports?exports:"function"==typeof define&&define.amd?{}:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
!function(){var I=function(){this.init()};I.prototype={init:function(){var d=this||m;return d._counter=1E3,d._html5AudioPool=[],d.html5PoolSize=10,d._codecs={},d._howls=[],d._muted=!1,d._volume=1,d._canPlayEvent="canplaythrough",d._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,d.masterGain=null,d.noAudio=!1,d.usingWebAudio=!0,d.autoSuspend=!0,d.ctx=null,d.autoUnlock=!0,d._setup(),d},volume:function(d){var v=this||m;if(d=parseFloat(d),v.ctx||k(),void 0!==d&&0<=d&&1>=
d){if(v._volume=d,v._muted)return v;v.usingWebAudio&&v.masterGain.gain.setValueAtTime(d,m.ctx.currentTime);for(var g=0;g<v._howls.length;g++)if(!v._howls[g]._webAudio)for(var n=v._howls[g]._getSoundIds(),x=0;x<n.length;x++){var S=v._howls[g]._soundById(n[x]);S&&S._node&&(S._node.volume=S._volume*d)}return v}return v._volume},mute:function(d){var v=this||m;v.ctx||k();v._muted=d;v.usingWebAudio&&v.masterGain.gain.setValueAtTime(d?0:v._volume,m.ctx.currentTime);for(var g=0;g<v._howls.length;g++)if(!v._howls[g]._webAudio)for(var n=
v._howls[g]._getSoundIds(),x=0;x<n.length;x++){var S=v._howls[g]._soundById(n[x]);S&&S._node&&(S._node.muted=!!d||S._muted)}return v},unload:function(){for(var d=this||m,v=d._howls.length-1;0<=v;v--)d._howls[v].unload();return d.usingWebAudio&&d.ctx&&void 0!==d.ctx.close&&(d.ctx.close(),d.ctx=null,k()),d},codecs:function(d){return(this||m)._codecs[d.replace(/^x-/,"")]},_setup:function(){var d=this||m;if(d.state=d.ctx?d.ctx.state||"suspended":"suspended",d._autoSuspend(),!d.usingWebAudio)if("undefined"!=
typeof Audio)try{var v=new Audio;void 0===v.oncanplaythrough&&(d._canPlayEvent="canplay")}catch(g){d.noAudio=!0}else d.noAudio=!0;try{v=new Audio,v.muted&&(d.noAudio=!0)}catch(g){}return d.noAudio||d._setupCodecs(),d},_setupCodecs:function(){var d=this||m,v=null;try{v="undefined"!=typeof Audio?new Audio:null}catch(ca){return d}if(!v||"function"!=typeof v.canPlayType)return d;var g=v.canPlayType("audio/mpeg;").replace(/^no$/,""),k=d._navigator&&d._navigator.userAgent.match(/OPR\/([0-6].)/g);k=k&&33>
parseInt(k[0].split("/")[1],10);return d._codecs={mp3:!(k||!g&&!v.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!g,opus:!!v.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!v.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!v.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!v.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!v.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!v.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(v.canPlayType("audio/x-m4a;")||
v.canPlayType("audio/m4a;")||v.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(v.canPlayType("audio/x-mp4;")||v.canPlayType("audio/mp4;")||v.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!v.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!v.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!v.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(v.canPlayType("audio/x-flac;")||v.canPlayType("audio/flac;")).replace(/^no$/,"")},d},_unlockAudio:function(){var d=
this||m,v=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome|Safari/i.test(d._navigator&&d._navigator.userAgent);if(!d._audioUnlocked&&d.ctx&&v){d._audioUnlocked=!1;d.autoUnlock=!1;d._mobileUnloaded||44100===d.ctx.sampleRate||(d._mobileUnloaded=!0,d.unload());d._scratchBuffer=d.ctx.createBuffer(1,1,22050);var g=function(v){for(v=0;v<d.html5PoolSize;v++){var k=new Audio;k._unlocked=!0;d._releaseHtml5Audio(k)}for(v=0;v<d._howls.length;v++)if(!d._howls[v]._webAudio){k=d._howls[v]._getSoundIds();
for(var m=0;m<k.length;m++){var n=d._howls[v]._soundById(k[m]);n&&n._node&&!n._node._unlocked&&(n._node._unlocked=!0,n._node.load())}}d._autoResume();var x=d.ctx.createBufferSource();x.buffer=d._scratchBuffer;x.connect(d.ctx.destination);void 0===x.start?x.noteOn(0):x.start(0);"function"==typeof d.ctx.resume&&d.ctx.resume();x.onended=function(){x.disconnect(0);d._audioUnlocked=!0;document.removeEventListener("touchstart",g,!0);document.removeEventListener("touchend",g,!0);document.removeEventListener("click",
g,!0);for(var v=0;v<d._howls.length;v++)d._howls[v]._emit("unlock")}};return document.addEventListener("touchstart",g,!0),document.addEventListener("touchend",g,!0),document.addEventListener("click",g,!0),d}},_obtainHtml5Audio:function(){var d=this||m;if(d._html5AudioPool.length)return d._html5AudioPool.pop();d=(new Audio).play();return d&&"undefined"!=typeof Promise&&(d instanceof Promise||"function"==typeof d.then)&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),
new Audio},_releaseHtml5Audio:function(d){var v=this||m;return d._unlocked&&v._html5AudioPool.push(d),v},_autoSuspend:function(){var d=this;if(d.autoSuspend&&d.ctx&&void 0!==d.ctx.suspend&&m.usingWebAudio){for(var v=0;v<d._howls.length;v++)if(d._howls[v]._webAudio)for(var g=0;g<d._howls[v]._sounds.length;g++)if(!d._howls[v]._sounds[g]._paused)return d;return d._suspendTimer&&clearTimeout(d._suspendTimer),d._suspendTimer=setTimeout(function(){d.autoSuspend&&(d._suspendTimer=null,d.state="suspending",
d.ctx.suspend().then(function(){d.state="suspended";d._resumeAfterSuspend&&(delete d._resumeAfterSuspend,d._autoResume())}))},3E4),d}},_autoResume:function(){var d=this;if(d.ctx&&void 0!==d.ctx.resume&&m.usingWebAudio)return"running"===d.state&&d._suspendTimer?(clearTimeout(d._suspendTimer),d._suspendTimer=null):"suspended"===d.state?(d.ctx.resume().then(function(){d.state="running";for(var v=0;v<d._howls.length;v++)d._howls[v]._emit("resume")}),d._suspendTimer&&(clearTimeout(d._suspendTimer),d._suspendTimer=
null)):"suspending"===d.state&&(d._resumeAfterSuspend=!0),d}};var m=new I,w=function(d){if(!d.src||0===d.src.length)return void console.error("An array of source files must be passed with any new Howl.");this.init(d)};w.prototype={init:function(d){var v=this;return m.ctx||k(),v._autoplay=d.autoplay||!1,v._format="string"!=typeof d.format?d.format:[d.format],v._html5=d.html5||!1,v._muted=d.mute||!1,v._loop=d.loop||!1,v._pool=d.pool||5,v._preload="boolean"!=typeof d.preload||d.preload,v._rate=d.rate||
1,v._sprite=d.sprite||{},v._src="string"!=typeof d.src?d.src:[d.src],v._volume=void 0!==d.volume?d.volume:1,v._xhrWithCredentials=d.xhrWithCredentials||!1,v._duration=0,v._state="unloaded",v._sounds=[],v._endTimers={},v._queue=[],v._playLock=!1,v._onend=d.onend?[{fn:d.onend}]:[],v._onfade=d.onfade?[{fn:d.onfade}]:[],v._onload=d.onload?[{fn:d.onload}]:[],v._onloaderror=d.onloaderror?[{fn:d.onloaderror}]:[],v._onplayerror=d.onplayerror?[{fn:d.onplayerror}]:[],v._onpause=d.onpause?[{fn:d.onpause}]:[],
v._onplay=d.onplay?[{fn:d.onplay}]:[],v._onstop=d.onstop?[{fn:d.onstop}]:[],v._onmute=d.onmute?[{fn:d.onmute}]:[],v._onvolume=d.onvolume?[{fn:d.onvolume}]:[],v._onrate=d.onrate?[{fn:d.onrate}]:[],v._onseek=d.onseek?[{fn:d.onseek}]:[],v._onunlock=d.onunlock?[{fn:d.onunlock}]:[],v._onresume=[],v._webAudio=m.usingWebAudio&&!v._html5,void 0!==m.ctx&&m.ctx&&m.autoUnlock&&m._unlockAudio(),m._howls.push(v),v._autoplay&&v._queue.push({event:"play",action:function(){v.play()}}),v._preload&&v.load(),v},load:function(){var d=
null;if(m.noAudio)return void this._emit("loaderror",null,"No audio support.");"string"==typeof this._src&&(this._src=[this._src]);for(var v=0;v<this._src.length;v++){var g;if(this._format&&this._format[v])var k=this._format[v];else{if("string"!=typeof(g=this._src[v])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(k=/^data:audio\/([^;,]+);/i.exec(g))||(k=/\.([^.]+)$/.exec(g.split("?",1)[0]));k&&(k=k[1].toLowerCase())}if(k||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),
k&&m.codecs(k)){d=this._src[v];break}}return d?(this._src=d,this._state="loading","https:"===window.location.protocol&&"http:"===d.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new y(this),this._webAudio&&D(this),this):void this._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(d,v){var g=this,k=null;if("number"==typeof d)k=d,d=null;else{if("string"==typeof d&&"loaded"===g._state&&!g._sprite[d])return null;if(void 0===d&&(d="__default",!g._playLock)){for(var n=
0,x=0;x<g._sounds.length;x++)g._sounds[x]._paused&&!g._sounds[x]._ended&&(n++,k=g._sounds[x]._id);1===n?d=null:k=null}}var w=k?g._soundById(k):g._inactiveSound();if(!w)return null;if(k&&!d&&(d=w._sprite||"__default"),"loaded"!==g._state){w._sprite=d;w._ended=!1;var A=w._id;return g._queue.push({event:"play",action:function(){g.play(A)}}),A}if(k&&!w._paused)return v||g._loadQueue("play"),w._id;g._webAudio&&m._autoResume();var y=Math.max(0,0<w._seek?w._seek:g._sprite[d][0]/1E3),D=Math.max(0,(g._sprite[d][0]+
g._sprite[d][1])/1E3-y),J=1E3*D/Math.abs(w._rate),I=g._sprite[d][0]/1E3,F=(g._sprite[d][0]+g._sprite[d][1])/1E3,M=!(!w._loop&&!g._sprite[d][2]);w._sprite=d;w._ended=!1;var N=function(){w._paused=!1;w._seek=y;w._start=I;w._stop=F;w._loop=M};if(y>=F)return void g._ended(w);var T=w._node;if(g._webAudio)k=function(){g._playLock=!1;N();g._refreshBuffer(w);T.gain.setValueAtTime(w._muted||g._muted?0:w._volume,m.ctx.currentTime);w._playStart=m.ctx.currentTime;void 0===T.bufferSource.start?w._loop?T.bufferSource.noteGrainOn(0,
y,86400):T.bufferSource.noteGrainOn(0,y,D):w._loop?T.bufferSource.start(0,y,86400):T.bufferSource.start(0,y,D);J!==1/0&&(g._endTimers[w._id]=setTimeout(g._ended.bind(g,w),J));v||setTimeout(function(){g._emit("play",w._id);g._loadQueue()},0)},"running"===m.state?k():(g._playLock=!0,g.once("resume",k),g._clearTimer(w._id));else{var ma=function(){T.currentTime=y;T.muted=w._muted||g._muted||m._muted||T.muted;T.volume=w._volume*m.volume();T.playbackRate=w._rate;try{var k=T.play();if(k&&"undefined"!=typeof Promise&&
(k instanceof Promise||"function"==typeof k.then)?(g._playLock=!0,N(),k.then(function(){g._playLock=!1;T._unlocked=!0;v||(g._emit("play",w._id),g._loadQueue())}).catch(function(){g._playLock=!1;g._emit("playerror",w._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");w._ended=!0;w._paused=!0})):v||(g._playLock=!1,N(),g._emit("play",w._id),g._loadQueue()),T.playbackRate=w._rate,T.paused)return void g._emit("playerror",
w._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==d||w._loop?g._endTimers[w._id]=setTimeout(g._ended.bind(g,w),J):(g._endTimers[w._id]=function(){g._ended(w);T.removeEventListener("ended",g._endTimers[w._id],!1)},T.addEventListener("ended",g._endTimers[w._id],!1))}catch(Pa){g._emit("playerror",w._id,Pa)}};k=window&&window.ejecta||!T.readyState&&m._navigator.isCocoonJS;if(3<=T.readyState||
k)ma();else{g._playLock=!0;var R=function(){ma();T.removeEventListener(m._canPlayEvent,R,!1)};T.addEventListener(m._canPlayEvent,R,!1);g._clearTimer(w._id)}}return w._id},pause:function(d,v){var g=this;if("loaded"!==g._state||g._playLock)return g._queue.push({event:"pause",action:function(){g.pause(d)}}),g;for(var k=g._getSoundIds(d),m=0;m<k.length;m++){g._clearTimer(k[m]);var n=g._soundById(k[m]);if(n&&!n._paused&&(n._seek=g.seek(k[m]),n._rateSeek=0,n._paused=!0,g._stopFade(k[m]),n._node))if(g._webAudio){if(!n._node.bufferSource)continue;
void 0===n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0);g._cleanBuffer(n._node)}else isNaN(n._node.duration)&&n._node.duration!==1/0||n._node.pause();v||g._emit("pause",n?n._id:null)}return g},stop:function(d,v){var g=this;if("loaded"!==g._state||g._playLock)return g._queue.push({event:"stop",action:function(){g.stop(d)}}),g;for(var k=g._getSoundIds(d),m=0;m<k.length;m++){g._clearTimer(k[m]);var n=g._soundById(k[m]);n&&(n._seek=n._start||0,n._rateSeek=0,n._paused=
!0,n._ended=!0,g._stopFade(k[m]),n._node&&(g._webAudio?n._node.bufferSource&&(void 0===n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),g._cleanBuffer(n._node)):isNaN(n._node.duration)&&n._node.duration!==1/0||(n._node.currentTime=n._start||0,n._node.pause())),v||g._emit("stop",n._id))}return g},mute:function(d,v){var g=this;if("loaded"!==g._state||g._playLock)return g._queue.push({event:"mute",action:function(){g.mute(d,v)}}),g;if(void 0===v){if("boolean"!=typeof d)return g._muted;
g._muted=d}for(var k=g._getSoundIds(v),n=0;n<k.length;n++){var x=g._soundById(k[n]);x&&(x._muted=d,x._interval&&g._stopFade(x._id),g._webAudio&&x._node?x._node.gain.setValueAtTime(d?0:x._volume,m.ctx.currentTime):x._node&&(x._node.muted=!!m._muted||d),g._emit("mute",x._id))}return g},volume:function(){var d,v,g=this,k=arguments;if(0===k.length)return g._volume;1===k.length||2===k.length&&void 0===k[1]?0<=g._getSoundIds().indexOf(k[0])?v=parseInt(k[0],10):d=parseFloat(k[0]):2<=k.length&&(d=parseFloat(k[0]),
v=parseInt(k[1],10));var n;if(!(void 0!==d&&0<=d&&1>=d))return n=v?g._soundById(v):g._sounds[0],n?n._volume:0;if("loaded"!==g._state||g._playLock)return g._queue.push({event:"volume",action:function(){g.volume.apply(g,k)}}),g;void 0===v&&(g._volume=d);v=g._getSoundIds(v);for(var x=0;x<v.length;x++)(n=g._soundById(v[x]))&&(n._volume=d,k[2]||g._stopFade(v[x]),g._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(d,m.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=d*m.volume()),g._emit("volume",
n._id));return g},fade:function(d,k,g,n){var v=this;if("loaded"!==v._state||v._playLock)return v._queue.push({event:"fade",action:function(){v.fade(d,k,g,n)}}),v;d=parseFloat(d);k=parseFloat(k);g=parseFloat(g);v.volume(d,n);for(var x=v._getSoundIds(n),w=0;w<x.length;w++){var A=v._soundById(x[w]);if(A){if(n||v._stopFade(x[w]),v._webAudio&&!A._muted){var y=m.ctx.currentTime,Q=y+g/1E3;A._volume=d;A._node.gain.setValueAtTime(d,y);A._node.gain.linearRampToValueAtTime(k,Q)}v._startFadeInterval(A,d,k,g,
x[w],void 0===n)}}return v},_startFadeInterval:function(d,k,g,n,m,x){var v=this,w=k,A=g-k;m=Math.abs(A/.01);m=Math.max(4,0<m?n/m:n);var y=Date.now();d._fadeTo=g;d._interval=setInterval(function(){var m=(Date.now()-y)/n;y=Date.now();w+=A*m;w=Math.max(0,w);w=Math.min(1,w);w=Math.round(100*w)/100;v._webAudio?d._volume=w:v.volume(w,d._id,!0);x&&(v._volume=w);(g<k&&w<=g||g>k&&w>=g)&&(clearInterval(d._interval),d._interval=null,d._fadeTo=null,v.volume(g,d._id),v._emit("fade",d._id))},m)},_stopFade:function(d){var k=
this._soundById(d);return k&&k._interval&&(this._webAudio&&k._node.gain.cancelScheduledValues(m.ctx.currentTime),clearInterval(k._interval),k._interval=null,this.volume(k._fadeTo,d),k._fadeTo=null,this._emit("fade",d)),this},loop:function(){var d,k,g,m=arguments;if(0===m.length)return this._loop;if(1===m.length){if("boolean"!=typeof m[0])return!!(g=this._soundById(parseInt(m[0],10)))&&g._loop;this._loop=d=m[0]}else 2===m.length&&(d=m[0],k=parseInt(m[1],10));k=this._getSoundIds(k);for(m=0;m<k.length;m++)(g=
this._soundById(k[m]))&&(g._loop=d,this._webAudio&&g._node&&g._node.bufferSource&&(g._node.bufferSource.loop=d,d&&(g._node.bufferSource.loopStart=g._start||0,g._node.bufferSource.loopEnd=g._stop)));return this},rate:function(){var d,k,g=this,n=arguments;0===n.length?k=g._sounds[0]._id:1===n.length?0<=g._getSoundIds().indexOf(n[0])?k=parseInt(n[0],10):d=parseFloat(n[0]):2===n.length&&(d=parseFloat(n[0]),k=parseInt(n[1],10));var x;if("number"!=typeof d)return x=g._soundById(k),x?x._rate:g._rate;if("loaded"!==
g._state||g._playLock)return g._queue.push({event:"rate",action:function(){g.rate.apply(g,n)}}),g;void 0===k&&(g._rate=d);k=g._getSoundIds(k);for(var w=0;w<k.length;w++)if(x=g._soundById(k[w])){g.playing(k[w])&&(x._rateSeek=g.seek(k[w]),x._playStart=g._webAudio?m.ctx.currentTime:x._playStart);x._rate=d;g._webAudio&&x._node&&x._node.bufferSource?x._node.bufferSource.playbackRate.setValueAtTime(d,m.ctx.currentTime):x._node&&(x._node.playbackRate=d);var A=g.seek(k[w]);A=1E3*((g._sprite[x._sprite][0]+
g._sprite[x._sprite][1])/1E3-A)/Math.abs(x._rate);!g._endTimers[k[w]]&&x._paused||(g._clearTimer(k[w]),g._endTimers[k[w]]=setTimeout(g._ended.bind(g,x),A));g._emit("rate",x._id)}return g},seek:function(){var d,k,g=this,n=arguments;0===n.length?k=g._sounds[0]._id:1===n.length?0<=g._getSoundIds().indexOf(n[0])?k=parseInt(n[0],10):g._sounds.length&&(k=g._sounds[0]._id,d=parseFloat(n[0])):2===n.length&&(d=parseFloat(n[0]),k=parseInt(n[1],10));if(void 0===k)return g;if("loaded"!==g._state||g._playLock)return g._queue.push({event:"seek",
action:function(){g.seek.apply(g,n)}}),g;var x=g._soundById(k);if(x){if(!("number"==typeof d&&0<=d))return g._webAudio?(d=g.playing(k)?m.ctx.currentTime-x._playStart:0,x._seek+((x._rateSeek?x._rateSeek-x._seek:0)+d*Math.abs(x._rate))):x._node.currentTime;var w=g.playing(k);w&&g.pause(k,!0);x._seek=d;x._ended=!1;g._clearTimer(k);g._webAudio||!x._node||isNaN(x._node.duration)||(x._node.currentTime=d);var A=function(){g._emit("seek",k);w&&g.play(k,!0)};if(w&&!g._webAudio){var y=function(){g._playLock?
setTimeout(y,0):A()};setTimeout(y,0)}else A()}return g},playing:function(d){if("number"==typeof d)return d=this._soundById(d),!!d&&!d._paused;for(d=0;d<this._sounds.length;d++)if(!this._sounds[d]._paused)return!0;return!1},duration:function(d){var k=this._duration;d=this._soundById(d);return d&&(k=this._sprite[d._sprite][1]/1E3),k},state:function(){return this._state},unload:function(){for(var d=this._sounds,k=0;k<d.length;k++)(d[k]._paused||this.stop(d[k]._id),this._webAudio)||(/MSIE |Trident\//.test(m._navigator&&
m._navigator.userAgent)||(d[k]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),d[k]._node.removeEventListener("error",d[k]._errorFn,!1),d[k]._node.removeEventListener(m._canPlayEvent,d[k]._loadFn,!1),m._releaseHtml5Audio(d[k]._node)),delete d[k]._node,this._clearTimer(d[k]._id);k=m._howls.indexOf(this);0<=k&&m._howls.splice(k,1);d=!0;for(k=0;k<m._howls.length;k++)if(m._howls[k]._src===this._src||0<=this._src.indexOf(m._howls[k]._src)){d=!1;break}return A&&
d&&delete A[this._src],m.noAudio=!1,this._state="unloaded",this._sounds=[],null},on:function(d,k,g,n){d=this["_on"+d];return"function"==typeof k&&d.push(n?{id:g,fn:k,once:n}:{id:g,fn:k}),this},off:function(d,k,g){var v=this["_on"+d];if("number"==typeof k&&(g=k,k=null),k||g)for(d=0;d<v.length;d++){var n=g===v[d].id;if(k===v[d].fn&&n||!k&&n){v.splice(d,1);break}}else if(d)this["_on"+d]=[];else for(k=Object.keys(this),d=0;d<k.length;d++)0===k[d].indexOf("_on")&&Array.isArray(this[k[d]])&&(this[k[d]]=
[]);return this},once:function(d,k,g){return this.on(d,k,g,1),this},_emit:function(d,k,g){for(var v=this["_on"+d],n=v.length-1;0<=n;n--)v[n].id&&v[n].id!==k&&"load"!==d||(setTimeout(function(d){d.call(this,k,g)}.bind(this,v[n].fn),0),v[n].once&&this.off(d,v[n].fn,v[n].id));return this._loadQueue(d),this},_loadQueue:function(d){if(0<this._queue.length){var k=this._queue[0];k.event===d&&(this._queue.shift(),this._loadQueue());d||k.action()}return this},_ended:function(d){var k=d._sprite;if(!this._webAudio&&
d._node&&!d._node.paused&&!d._node.ended&&d._node.currentTime<d._stop)return setTimeout(this._ended.bind(this,d),100),this;k=!(!d._loop&&!this._sprite[k][2]);if(this._emit("end",d._id),!this._webAudio&&k&&this.stop(d._id,!0).play(d._id),this._webAudio&&k){this._emit("play",d._id);d._seek=d._start||0;d._rateSeek=0;d._playStart=m.ctx.currentTime;var g=1E3*(d._stop-d._start)/Math.abs(d._rate);this._endTimers[d._id]=setTimeout(this._ended.bind(this,d),g)}return this._webAudio&&!k&&(d._paused=!0,d._ended=
!0,d._seek=d._start||0,d._rateSeek=0,this._clearTimer(d._id),this._cleanBuffer(d._node),m._autoSuspend()),this._webAudio||k||this.stop(d._id,!0),this},_clearTimer:function(d){if(this._endTimers[d]){if("function"!=typeof this._endTimers[d])clearTimeout(this._endTimers[d]);else{var k=this._soundById(d);k&&k._node&&k._node.removeEventListener("ended",this._endTimers[d],!1)}delete this._endTimers[d]}return this},_soundById:function(d){for(var k=0;k<this._sounds.length;k++)if(d===this._sounds[k]._id)return this._sounds[k];
return null},_inactiveSound:function(){this._drain();for(var d=0;d<this._sounds.length;d++)if(this._sounds[d]._ended)return this._sounds[d].reset();return new y(this)},_drain:function(){var d=this._pool,k=0,g;if(!(this._sounds.length<d)){for(g=0;g<this._sounds.length;g++)this._sounds[g]._ended&&k++;for(g=this._sounds.length-1;0<=g&&!(k<=d);g--)this._sounds[g]._ended&&(this._webAudio&&this._sounds[g]._node&&this._sounds[g]._node.disconnect(0),this._sounds.splice(g,1),k--)}},_getSoundIds:function(d){if(void 0===
d){d=[];for(var k=0;k<this._sounds.length;k++)d.push(this._sounds[k]._id);return d}return[d]},_refreshBuffer:function(d){return d._node.bufferSource=m.ctx.createBufferSource(),d._node.bufferSource.buffer=A[this._src],d._panner?d._node.bufferSource.connect(d._panner):d._node.bufferSource.connect(d._node),d._node.bufferSource.loop=d._loop,d._loop&&(d._node.bufferSource.loopStart=d._start||0,d._node.bufferSource.loopEnd=d._stop||0),d._node.bufferSource.playbackRate.setValueAtTime(d._rate,m.ctx.currentTime),
this},_cleanBuffer:function(d){var k=m._navigator&&0<=m._navigator.vendor.indexOf("Apple");if(m._scratchBuffer&&d.bufferSource&&(d.bufferSource.onended=null,d.bufferSource.disconnect(0),k))try{d.bufferSource.buffer=m._scratchBuffer}catch(g){}return d.bufferSource=null,this}};var y=function(d){this._parent=d;this.init()};y.prototype={init:function(){var d=this._parent;return this._muted=d._muted,this._loop=d._loop,this._volume=d._volume,this._rate=d._rate,this._seek=0,this._paused=!0,this._ended=!0,
this._sprite="__default",this._id=++m._counter,d._sounds.push(this),this.create(),this},create:function(){var d=this._parent,k=m._muted||this._muted||this._parent._muted?0:this._volume;return d._webAudio?(this._node=void 0===m.ctx.createGain?m.ctx.createGainNode():m.ctx.createGain(),this._node.gain.setValueAtTime(k,m.ctx.currentTime),this._node.paused=!0,this._node.connect(m.masterGain)):(this._node=m._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",
this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(m._canPlayEvent,this._loadFn,!1),this._node.src=d._src,this._node.preload="auto",this._node.volume=k*m.volume(),this._node.load()),this},reset:function(){var d=this._parent;return this._muted=d._muted,this._loop=d._loop,this._volume=d._volume,this._rate=d._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++m._counter,this},_errorListener:function(){this._parent._emit("loaderror",
this._id,this._node.error?this._node.error.code:0);this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var d=this._parent;d._duration=Math.ceil(10*this._node.duration)/10;0===Object.keys(d._sprite).length&&(d._sprite={__default:[0,1E3*d._duration]});"loaded"!==d._state&&(d._state="loaded",d._emit("load"),d._loadQueue());this._node.removeEventListener(m._canPlayEvent,this._loadFn,!1)}};var A={},D=function(d){var k=d._src;if(A[k])return d._duration=A[k].duration,void n(d);
if(/^data:[^;]+;base64,/.test(k)){for(var g=atob(k.split(",")[1]),m=new Uint8Array(g.length),w=0;w<g.length;++w)m[w]=g.charCodeAt(w);J(m.buffer,d)}else{var y=new XMLHttpRequest;y.open("GET",k,!0);y.withCredentials=d._xhrWithCredentials;y.responseType="arraybuffer";y.onload=function(){var g=(y.status+"")[0];if("0"!==g&&"2"!==g&&"3"!==g)return void d._emit("loaderror",null,"Failed loading audio file with status: "+y.status+".");J(y.response,d)};y.onerror=function(){d._webAudio&&(d._html5=!0,d._webAudio=
!1,d._sounds=[],delete A[k],d.load())};x(y)}},x=function(d){try{d.send()}catch(v){d.onerror()}},J=function(d,k){var g=function(){k._emit("loaderror",null,"Decoding audio data failed.")},v=function(d){d&&0<k._sounds.length?(A[k._src]=d,n(k,d)):g()};"undefined"!=typeof Promise&&1===m.ctx.decodeAudioData.length?m.ctx.decodeAudioData(d).then(v).catch(g):m.ctx.decodeAudioData(d,v,g)},n=function(d,k){k&&!d._duration&&(d._duration=k.duration);0===Object.keys(d._sprite).length&&(d._sprite={__default:[0,1E3*
d._duration]});"loaded"!==d._state&&(d._state="loaded",d._emit("load"),d._loadQueue())},k=function(){if(m.usingWebAudio){try{"undefined"!=typeof AudioContext?m.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?m.ctx=new webkitAudioContext:m.usingWebAudio=!1}catch(g){m.usingWebAudio=!1}m.ctx||(m.usingWebAudio=!1);var d=/iP(hone|od|ad)/.test(m._navigator&&m._navigator.platform),k=m._navigator&&m._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);k=k?parseInt(k[1],10):null;d&&k&&9>k&&(d=
/safari/.test(m._navigator&&m._navigator.userAgent.toLowerCase()),(m._navigator&&m._navigator.standalone&&!d||m._navigator&&!m._navigator.standalone&&!d)&&(m.usingWebAudio=!1));m.usingWebAudio&&(m.masterGain=void 0===m.ctx.createGain?m.ctx.createGainNode():m.ctx.createGain(),m.masterGain.gain.setValueAtTime(m._muted?0:1,m.ctx.currentTime),m.masterGain.connect(m.ctx.destination));m._setup()}};"function"==typeof define&&define.amd&&define([],function(){return{Howler:m,Howl:w}});"undefined"!=typeof exports&&
(exports.Howler=m,exports.Howl=w);"undefined"!=typeof window?(window.HowlerGlobal=I,window.Howler=m,window.Howl=w,window.Sound=y):"undefined"!=typeof global&&(global.HowlerGlobal=I,global.Howler=m,global.Howl=w,global.Sound=y)}();
!function(){HowlerGlobal.prototype._pos=[0,0,0];HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0];HowlerGlobal.prototype.stereo=function(m){if(!this.ctx||!this.ctx.listener)return this;for(var w=this._howls.length-1;0<=w;w--)this._howls[w].stereo(m);return this};HowlerGlobal.prototype.pos=function(m,w,y){return this.ctx&&this.ctx.listener?(w="number"!=typeof w?this._pos[1]:w,y="number"!=typeof y?this._pos[2]:y,"number"!=typeof m?this._pos:(this._pos=[m,w,y],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],
Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this};HowlerGlobal.prototype.orientation=function(m,w,y,A,D,x){if(!this.ctx||!this.ctx.listener)return this;var J=this._orientation;return w="number"!=typeof w?J[1]:w,y="number"!=typeof y?J[2]:y,A="number"!=typeof A?J[3]:A,D="number"!=
typeof D?J[4]:D,x="number"!=typeof x?J[5]:x,"number"!=typeof m?J:(this._orientation=[m,w,y,A,D,x],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(m,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(w,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(y,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(m,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(w,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(y,
Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(m,w,y,A,D,x),this)};Howl.prototype.init=function(m){return function(w){return this._orientation=w.orientation||[1,0,0],this._stereo=w.stereo||null,this._pos=w.pos||null,this._pannerAttr={coneInnerAngle:void 0!==w.coneInnerAngle?w.coneInnerAngle:360,coneOuterAngle:void 0!==w.coneOuterAngle?w.coneOuterAngle:360,coneOuterGain:void 0!==w.coneOuterGain?w.coneOuterGain:0,distanceModel:void 0!==w.distanceModel?w.distanceModel:"inverse",maxDistance:void 0!==
w.maxDistance?w.maxDistance:1E4,panningModel:void 0!==w.panningModel?w.panningModel:"HRTF",refDistance:void 0!==w.refDistance?w.refDistance:1,rolloffFactor:void 0!==w.rolloffFactor?w.rolloffFactor:1},this._onstereo=w.onstereo?[{fn:w.onstereo}]:[],this._onpos=w.onpos?[{fn:w.onpos}]:[],this._onorientation=w.onorientation?[{fn:w.onorientation}]:[],m.call(this,w)}}(Howl.prototype.init);Howl.prototype.stereo=function(m,w){var y=this;if(!y._webAudio)return y;if("loaded"!==y._state)return y._queue.push({event:"stereo",
action:function(){y.stereo(m,w)}}),y;var A=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===w){if("number"!=typeof m)return y._stereo;y._stereo=m;y._pos=[m,0,0]}for(var D=y._getSoundIds(w),x=0;x<D.length;x++){var J=y._soundById(D[x]);if(J){if("number"!=typeof m)return J._stereo;J._stereo=m;J._pos=[m,0,0];J._node&&(J._pannerAttr.panningModel="equalpower",J._panner&&J._panner.pan||I(J,A),"spatial"===A?void 0!==J._panner.positionX?(J._panner.positionX.setValueAtTime(m,Howler.ctx.currentTime),
J._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),J._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):J._panner.setPosition(m,0,0):J._panner.pan.setValueAtTime(m,Howler.ctx.currentTime));y._emit("stereo",J._id)}}return y};Howl.prototype.pos=function(m,w,y,A){var D=this;if(!D._webAudio)return D;if("loaded"!==D._state)return D._queue.push({event:"pos",action:function(){D.pos(m,w,y,A)}}),D;if(w="number"!=typeof w?0:w,y="number"!=typeof y?-.5:y,void 0===A){if("number"!=typeof m)return D._pos;
D._pos=[m,w,y]}for(var x=D._getSoundIds(A),J=0;J<x.length;J++){var n=D._soundById(x[J]);if(n){if("number"!=typeof m)return n._pos;n._pos=[m,w,y];n._node&&(n._panner&&!n._panner.pan||I(n,"spatial"),void 0!==n._panner.positionX?(n._panner.positionX.setValueAtTime(m,Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(w,Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(y,Howler.ctx.currentTime)):n._panner.setPosition(m,w,y));D._emit("pos",n._id)}}return D};Howl.prototype.orientation=function(m,
w,y,A){var D=this;if(!D._webAudio)return D;if("loaded"!==D._state)return D._queue.push({event:"orientation",action:function(){D.orientation(m,w,y,A)}}),D;if(w="number"!=typeof w?D._orientation[1]:w,y="number"!=typeof y?D._orientation[2]:y,void 0===A){if("number"!=typeof m)return D._orientation;D._orientation=[m,w,y]}for(var x=D._getSoundIds(A),J=0;J<x.length;J++){var n=D._soundById(x[J]);if(n){if("number"!=typeof m)return n._orientation;n._orientation=[m,w,y];n._node&&(n._panner||(n._pos||(n._pos=
D._pos||[0,0,-.5]),I(n,"spatial")),void 0!==n._panner.orientationX?(n._panner.orientationX.setValueAtTime(m,Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(w,Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(y,Howler.ctx.currentTime)):n._panner.setOrientation(m,w,y));D._emit("orientation",n._id)}}return D};Howl.prototype.pannerAttr=function(){var m,w,y=arguments;if(!this._webAudio)return this;if(0===y.length)return this._pannerAttr;if(1===y.length){if("object"!=typeof y[0])return w=
this._soundById(parseInt(y[0],10)),w?w._pannerAttr:this._pannerAttr;var A=y[0];void 0===m&&(A.pannerAttr||(A.pannerAttr={coneInnerAngle:A.coneInnerAngle,coneOuterAngle:A.coneOuterAngle,coneOuterGain:A.coneOuterGain,distanceModel:A.distanceModel,maxDistance:A.maxDistance,refDistance:A.refDistance,rolloffFactor:A.rolloffFactor,panningModel:A.panningModel}),this._pannerAttr={coneInnerAngle:void 0!==A.pannerAttr.coneInnerAngle?A.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:void 0!==A.pannerAttr.coneOuterAngle?
A.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:void 0!==A.pannerAttr.coneOuterGain?A.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:void 0!==A.pannerAttr.distanceModel?A.pannerAttr.distanceModel:this._distanceModel,maxDistance:void 0!==A.pannerAttr.maxDistance?A.pannerAttr.maxDistance:this._maxDistance,refDistance:void 0!==A.pannerAttr.refDistance?A.pannerAttr.refDistance:this._refDistance,rolloffFactor:void 0!==A.pannerAttr.rolloffFactor?A.pannerAttr.rolloffFactor:this._rolloffFactor,
panningModel:void 0!==A.pannerAttr.panningModel?A.pannerAttr.panningModel:this._panningModel})}else 2===y.length&&(A=y[0],m=parseInt(y[1],10));m=this._getSoundIds(m);for(y=0;y<m.length;y++)if(w=this._soundById(m[y])){var D=w._pannerAttr;D={coneInnerAngle:void 0!==A.coneInnerAngle?A.coneInnerAngle:D.coneInnerAngle,coneOuterAngle:void 0!==A.coneOuterAngle?A.coneOuterAngle:D.coneOuterAngle,coneOuterGain:void 0!==A.coneOuterGain?A.coneOuterGain:D.coneOuterGain,distanceModel:void 0!==A.distanceModel?A.distanceModel:
D.distanceModel,maxDistance:void 0!==A.maxDistance?A.maxDistance:D.maxDistance,refDistance:void 0!==A.refDistance?A.refDistance:D.refDistance,rolloffFactor:void 0!==A.rolloffFactor?A.rolloffFactor:D.rolloffFactor,panningModel:void 0!==A.panningModel?A.panningModel:D.panningModel};var x=w._panner;x?(x.coneInnerAngle=D.coneInnerAngle,x.coneOuterAngle=D.coneOuterAngle,x.coneOuterGain=D.coneOuterGain,x.distanceModel=D.distanceModel,x.maxDistance=D.maxDistance,x.refDistance=D.refDistance,x.rolloffFactor=
D.rolloffFactor,x.panningModel=D.panningModel):(w._pos||(w._pos=this._pos||[0,0,-.5]),I(w,"spatial"))}return this};Sound.prototype.init=function(m){return function(){var w=this._parent;this._orientation=w._orientation;this._stereo=w._stereo;this._pos=w._pos;this._pannerAttr=w._pannerAttr;m.call(this);this._stereo?w.stereo(this._stereo):this._pos&&w.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init);Sound.prototype.reset=function(m){return function(){var w=this._parent;return this._orientation=
w._orientation,this._stereo=w._stereo,this._pos=w._pos,this._pannerAttr=w._pannerAttr,this._stereo?w.stereo(this._stereo):this._pos?w.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,w._refreshBuffer(this)),m.call(this)}}(Sound.prototype.reset);var I=function(m,w){"spatial"===(w||"spatial")?(m._panner=Howler.ctx.createPanner(),m._panner.coneInnerAngle=m._pannerAttr.coneInnerAngle,m._panner.coneOuterAngle=m._pannerAttr.coneOuterAngle,
m._panner.coneOuterGain=m._pannerAttr.coneOuterGain,m._panner.distanceModel=m._pannerAttr.distanceModel,m._panner.maxDistance=m._pannerAttr.maxDistance,m._panner.refDistance=m._pannerAttr.refDistance,m._panner.rolloffFactor=m._pannerAttr.rolloffFactor,m._panner.panningModel=m._pannerAttr.panningModel,void 0!==m._panner.positionX?(m._panner.positionX.setValueAtTime(m._pos[0],Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(m._pos[1],Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(m._pos[2],
Howler.ctx.currentTime)):m._panner.setPosition(m._pos[0],m._pos[1],m._pos[2]),void 0!==m._panner.orientationX?(m._panner.orientationX.setValueAtTime(m._orientation[0],Howler.ctx.currentTime),m._panner.orientationY.setValueAtTime(m._orientation[1],Howler.ctx.currentTime),m._panner.orientationZ.setValueAtTime(m._orientation[2],Howler.ctx.currentTime)):m._panner.setOrientation(m._orientation[0],m._orientation[1],m._orientation[2])):(m._panner=Howler.ctx.createStereoPanner(),m._panner.pan.setValueAtTime(m._stereo,
Howler.ctx.currentTime));m._panner.connect(m._node);m._paused||m._parent.pause(m._id,!0).play(m._id,!0)}}();
!function(I){"object"==typeof exports&&"undefined"!=typeof module?module.exports=I():"function"==typeof define&&define.amd?define([],I):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=I()}(function(){return function A(m,w,y){function D(n,k){if(!w[n]){if(!m[n]){var d="function"==typeof require&&require;if(!k&&d)return d(n,!0);if(x)return x(n,!0);k=Error("Cannot find module '"+n+"'");throw k.code="MODULE_NOT_FOUND",k;}k=w[n]={exports:{}};
m[n][0].call(k.exports,function(d){var g=m[n][1][d];return D(g?g:d)},k,k.exports,A,m,w,y)}return w[n].exports}for(var x="function"==typeof require&&require,J=0;J<y.length;J++)D(y[J]);return D}({1:[function(m,w,y){function A(m){if(!(this instanceof A))return new A(m);m=this.options=J.assign({level:Q,method:S,chunkSize:16384,windowBits:15,memLevel:8,strategy:ca,to:""},m||{});m.raw&&0<m.windowBits?m.windowBits=-m.windowBits:m.gzip&&0<m.windowBits&&16>m.windowBits&&(m.windowBits+=16);this.err=0;this.msg=
"";this.ended=!1;this.chunks=[];this.strm=new d;this.strm.avail_out=0;var w=x.deflateInit2(this.strm,m.level,m.method,m.windowBits,m.memLevel,m.strategy);if(w!==g)throw Error(k[w]);if(m.header&&x.deflateSetHeader(this.strm,m.header),m.dictionary){var y;if(y="string"==typeof m.dictionary?n.string2buf(m.dictionary):"[object ArrayBuffer]"===v.call(m.dictionary)?new Uint8Array(m.dictionary):m.dictionary,w=x.deflateSetDictionary(this.strm,y),w!==g)throw Error(k[w]);this._dict_set=!0}}function D(d,g){g=
new A(g);if(g.push(d,!0),g.err)throw g.msg;return g.result}var x=m("./zlib/deflate"),J=m("./utils/common"),n=m("./utils/strings"),k=m("./zlib/messages"),d=m("./zlib/zstream"),v=Object.prototype.toString,g=0,Q=-1,ca=0,S=8;A.prototype.push=function(d,k){var m,w=this.strm,y=this.options.chunkSize;if(this.ended)return!1;k=k===~~k?k:!0===k?4:0;"string"==typeof d?w.input=n.string2buf(d):"[object ArrayBuffer]"===v.call(d)?w.input=new Uint8Array(d):w.input=d;w.next_in=0;w.avail_in=w.input.length;do{if(0===
w.avail_out&&(w.output=new J.Buf8(y),w.next_out=0,w.avail_out=y),m=x.deflate(w,k),1!==m&&m!==g)return this.onEnd(m),this.ended=!0,!1;0!==w.avail_out&&(0!==w.avail_in||4!==k&&2!==k)||("string"===this.options.to?this.onData(n.buf2binstring(J.shrinkBuf(w.output,w.next_out))):this.onData(J.shrinkBuf(w.output,w.next_out)))}while((0<w.avail_in||0===w.avail_out)&&1!==m);return 4===k?(m=x.deflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===g):2!==k||(this.onEnd(g),w.avail_out=0,!0)};A.prototype.onData=
function(d){this.chunks.push(d)};A.prototype.onEnd=function(d){d===g&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=J.flattenChunks(this.chunks));this.chunks=[];this.err=d;this.msg=this.strm.msg};y.Deflate=A;y.deflate=D;y.deflateRaw=function(d,g){return g=g||{},g.raw=!0,D(d,g)};y.gzip=function(d,g){return g=g||{},g.gzip=!0,D(d,g)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(m,w,y){function A(m){if(!(this instanceof
A))return new A(m);var n=this.options=J.assign({chunkSize:16384,windowBits:0,to:""},m||{});n.raw&&0<=n.windowBits&&16>n.windowBits&&(n.windowBits=-n.windowBits,0===n.windowBits&&(n.windowBits=-15));!(0<=n.windowBits&&16>n.windowBits)||m&&m.windowBits||(n.windowBits+=32);15<n.windowBits&&48>n.windowBits&&0===(15&n.windowBits)&&(n.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new v;this.strm.avail_out=0;m=x.inflateInit2(this.strm,n.windowBits);if(m!==k.Z_OK)throw Error(d[m]);
this.header=new g;x.inflateGetHeader(this.strm,this.header)}function D(d,g){g=new A(g);if(g.push(d,!0),g.err)throw g.msg;return g.result}var x=m("./zlib/inflate"),J=m("./utils/common"),n=m("./utils/strings"),k=m("./zlib/constants"),d=m("./zlib/messages"),v=m("./zlib/zstream"),g=m("./zlib/gzheader"),Q=Object.prototype.toString;A.prototype.push=function(d,g){var m,v,w,y,A,D=this.strm,F=this.options.chunkSize,S=this.options.dictionary,N=!1;if(this.ended)return!1;g=g===~~g?g:!0===g?k.Z_FINISH:k.Z_NO_FLUSH;
"string"==typeof d?D.input=n.binstring2buf(d):"[object ArrayBuffer]"===Q.call(d)?D.input=new Uint8Array(d):D.input=d;D.next_in=0;D.avail_in=D.input.length;do{if(0===D.avail_out&&(D.output=new J.Buf8(F),D.next_out=0,D.avail_out=F),m=x.inflate(D,k.Z_NO_FLUSH),m===k.Z_NEED_DICT&&S&&(A="string"==typeof S?n.string2buf(S):"[object ArrayBuffer]"===Q.call(S)?new Uint8Array(S):S,m=x.inflateSetDictionary(this.strm,A)),m===k.Z_BUF_ERROR&&!0===N&&(m=k.Z_OK,N=!1),m!==k.Z_STREAM_END&&m!==k.Z_OK)return this.onEnd(m),
this.ended=!0,!1;D.next_out&&(0!==D.avail_out&&m!==k.Z_STREAM_END&&(0!==D.avail_in||g!==k.Z_FINISH&&g!==k.Z_SYNC_FLUSH)||("string"===this.options.to?(v=n.utf8border(D.output,D.next_out),w=D.next_out-v,y=n.buf2string(D.output,v),D.next_out=w,D.avail_out=F-w,w&&J.arraySet(D.output,D.output,v,w,0),this.onData(y)):this.onData(J.shrinkBuf(D.output,D.next_out))));0===D.avail_in&&0===D.avail_out&&(N=!0)}while((0<D.avail_in||0===D.avail_out)&&m!==k.Z_STREAM_END);return m===k.Z_STREAM_END&&(g=k.Z_FINISH),
g===k.Z_FINISH?(m=x.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===k.Z_OK):g!==k.Z_SYNC_FLUSH||(this.onEnd(k.Z_OK),D.avail_out=0,!0)};A.prototype.onData=function(d){this.chunks.push(d)};A.prototype.onEnd=function(d){d===k.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=J.flattenChunks(this.chunks));this.chunks=[];this.err=d;this.msg=this.strm.msg};y.Inflate=A;y.inflate=D;y.inflateRaw=function(d,g){return g=g||{},g.raw=!0,D(d,g)};y.ungzip=D},{"./utils/common":3,
"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(m,w,y){m="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;y.assign=function(m){for(var x=Array.prototype.slice.call(arguments,1);x.length;){var n=x.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var k in n)n.hasOwnProperty(k)&&(m[k]=n[k])}}return m};y.shrinkBuf=function(m,w){return m.length===
w?m:m.subarray?m.subarray(0,w):(m.length=w,m)};var A={arraySet:function(m,w,n,k,d){if(w.subarray&&m.subarray)return void m.set(w.subarray(n,n+k),d);for(var v=0;v<k;v++)m[d+v]=w[n+v]},flattenChunks:function(m){var w,n;var k=n=0;for(w=m.length;k<w;k++)n+=m[k].length;var d=new Uint8Array(n);k=n=0;for(w=m.length;k<w;k++){var v=m[k];d.set(v,n);n+=v.length}return d}},D={arraySet:function(m,w,n,k,d){for(var v=0;v<k;v++)m[d+v]=w[n+v]},flattenChunks:function(m){return[].concat.apply([],m)}};y.setTyped=function(m){m?
(y.Buf8=Uint8Array,y.Buf16=Uint16Array,y.Buf32=Int32Array,y.assign(y,A)):(y.Buf8=Array,y.Buf16=Array,y.Buf32=Array,y.assign(y,D))};y.setTyped(m)},{}],4:[function(m,w,y){function A(k,d){if(65537>d&&(k.subarray&&J||!k.subarray&&x))return String.fromCharCode.apply(null,D.shrinkBuf(k,d));for(var m="",g=0;g<d;g++)m+=String.fromCharCode(k[g]);return m}var D=m("./common"),x=!0,J=!0;try{String.fromCharCode.apply(null,[0])}catch(k){x=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(k){J=!1}var n=
new D.Buf8(256);for(m=0;256>m;m++)n[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;n[254]=n[254]=1;y.string2buf=function(k){var d,m,g,n=k.length,w=0;for(m=0;m<n;m++){var x=k.charCodeAt(m);55296===(64512&x)&&m+1<n&&(d=k.charCodeAt(m+1),56320===(64512&d)&&(x=65536+(x-55296<<10)+(d-56320),m++));w+=128>x?1:2048>x?2:65536>x?3:4}var y=new D.Buf8(w);for(m=g=0;g<w;m++)x=k.charCodeAt(m),55296===(64512&x)&&m+1<n&&(d=k.charCodeAt(m+1),56320===(64512&d)&&(x=65536+(x-55296<<10)+(d-56320),m++)),128>x?y[g++]=
x:2048>x?(y[g++]=192|x>>>6,y[g++]=128|63&x):65536>x?(y[g++]=224|x>>>12,y[g++]=128|x>>>6&63,y[g++]=128|63&x):(y[g++]=240|x>>>18,y[g++]=128|x>>>12&63,y[g++]=128|x>>>6&63,y[g++]=128|63&x);return y};y.buf2binstring=function(k){return A(k,k.length)};y.binstring2buf=function(k){for(var d=new D.Buf8(k.length),m=0,g=d.length;m<g;m++)d[m]=k.charCodeAt(m);return d};y.buf2string=function(k,d){var m,g,w,x=d||k.length,y=Array(2*x);for(d=m=0;d<x;)if(g=k[d++],128>g)y[m++]=g;else if(w=n[g],4<w)y[m++]=65533,d+=w-
1;else{for(g&=2===w?31:3===w?15:7;1<w&&d<x;)g=g<<6|63&k[d++],w--;1<w?y[m++]=65533:65536>g?y[m++]=g:(g-=65536,y[m++]=55296|g>>10&1023,y[m++]=56320|1023&g)}return A(y,m)};y.utf8border=function(k,d){var m;d=d||k.length;d>k.length&&(d=k.length);for(m=d-1;0<=m&&128===(192&k[m]);)m--;return 0>m?d:0===m?d:m+n[k[m]]>d?m:d}},{"./common":3}],5:[function(m,w,y){w.exports=function(m,w,x,y){var n=65535&m|0;m=m>>>16&65535|0;for(var k;0!==x;){k=2E3<x?2E3:x;x-=k;do n=n+w[y++]|0,m=m+n|0;while(--k);n%=65521;m%=65521}return n|
m<<16|0}},{}],6:[function(m,w,y){w.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(m,w,y){var A=function(){for(var m,w=[],y=0;256>y;y++){m=y;
for(var n=0;8>n;n++)m=1&m?3988292384^m>>>1:m>>>1;w[y]=m}return w}();w.exports=function(m,w,y,n){y=n+y;for(m^=-1;n<y;n++)m=m>>>8^A[255&(m^w[n])];return m^-1}},{}],8:[function(m,w,y){function A(d,g){return d.msg=M[g],g}function D(d){for(var g=d.length;0<=--g;)d[g]=0}function x(d){var g=d.state,u=g.pending;u>d.avail_out&&(u=d.avail_out);0!==u&&(oa.arraySet(d.output,g.pending_buf,g.pending_out,u,d.next_out),d.next_out+=u,g.pending_out+=u,d.total_out+=u,d.avail_out-=u,g.pending-=u,0===g.pending&&(g.pending_out=
0))}function J(d,g){ra._tr_flush_block(d,0<=d.block_start?d.block_start:-1,d.strstart-d.block_start,g);d.block_start=d.strstart;x(d.strm)}function n(d,g){d.pending_buf[d.pending++]=g}function k(d,g){d.pending_buf[d.pending++]=g>>>8&255;d.pending_buf[d.pending++]=255&g}function d(d,g){var u,k,m=d.max_chain_length,n=d.strstart,p=d.prev_length,v=d.nice_match,w=d.strstart>d.w_size-O?d.strstart-(d.w_size-O):0,x=d.window,z=d.w_mask,y=d.prev,A=d.strstart+V,N=x[n+p-1],E=x[n+p];d.prev_length>=d.good_match&&
(m>>=2);v>d.lookahead&&(v=d.lookahead);do if(u=g,x[u+p]===E&&x[u+p-1]===N&&x[u]===x[n]&&x[++u]===x[n+1]){n+=2;for(u++;x[++n]===x[++u]&&x[++n]===x[++u]&&x[++n]===x[++u]&&x[++n]===x[++u]&&x[++n]===x[++u]&&x[++n]===x[++u]&&x[++n]===x[++u]&&x[++n]===x[++u]&&n<A;);if(k=V-(A-n),n=A-V,k>p){if(d.match_start=g,p=k,k>=v)break;N=x[n+p-1];E=x[n+p]}}while((g=y[g&z])>w&&0!==--m);return p<=d.lookahead?p:d.lookahead}function v(d){var g,u,k=d.w_size;do{if(u=d.window_size-d.lookahead-d.strstart,d.strstart>=k+(k-O)){oa.arraySet(d.window,
d.window,k,k,0);d.match_start-=k;d.strstart-=k;d.block_start-=k;var m=g=d.hash_size;do{var n=d.head[--m];d.head[m]=n>=k?n-k:0}while(--g);m=g=k;do n=d.prev[--m],d.prev[m]=n>=k?n-k:0;while(--g);u+=k}if(0===d.strm.avail_in)break;m=d.strm;n=d.window;var p=d.strstart+d.lookahead,v=m.avail_in;if(g=(v>u&&(v=u),0===v?0:(m.avail_in-=v,oa.arraySet(n,m.input,m.next_in,v,p),1===m.state.wrap?m.adler=Z(m.adler,n,v,p):2===m.state.wrap&&(m.adler=F(m.adler,n,v,p)),m.next_in+=v,m.total_in+=v,v)),d.lookahead+=g,d.lookahead+
d.insert>=ha)for(u=d.strstart-d.insert,d.ins_h=d.window[u],d.ins_h=(d.ins_h<<d.hash_shift^d.window[u+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[u+ha-1])&d.hash_mask,d.prev[u&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=u,u++,d.insert--,!(d.lookahead+d.insert<ha)););}while(d.lookahead<O&&0!==d.strm.avail_in)}function g(g,k){for(var u,r;;){if(g.lookahead<O){if(v(g),g.lookahead<O&&k===N)return E;if(0===g.lookahead)break}if(u=0,g.lookahead>=ha&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+
ha-1])&g.hash_mask,u=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),0!==u&&g.strstart-u<=g.w_size-O&&(g.match_length=d(g,u)),g.match_length>=ha)if(r=ra._tr_tally(g,g.strstart-g.match_start,g.match_length-ha),g.lookahead-=g.match_length,g.match_length<=g.max_lazy_match&&g.lookahead>=ha){g.match_length--;do g.strstart++,g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+ha-1])&g.hash_mask,u=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart;while(0!==--g.match_length);
g.strstart++}else g.strstart+=g.match_length,g.match_length=0,g.ins_h=g.window[g.strstart],g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+1])&g.hash_mask;else r=ra._tr_tally(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++;if(r&&(J(g,!1),0===g.strm.avail_out))return E}return g.insert=g.strstart<ha-1?g.strstart:ha-1,k===T?(J(g,!0),0===g.strm.avail_out?X:ja):g.last_lit&&(J(g,!1),0===g.strm.avail_out)?E:Ua}function Q(g,k){for(var m,r,u;;){if(g.lookahead<O){if(v(g),g.lookahead<O&&k===N)return E;
if(0===g.lookahead)break}if(m=0,g.lookahead>=ha&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+ha-1])&g.hash_mask,m=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),g.prev_length=g.match_length,g.prev_match=g.match_start,g.match_length=ha-1,0!==m&&g.prev_length<g.max_lazy_match&&g.strstart-m<=g.w_size-O&&(g.match_length=d(g,m),5>=g.match_length&&(g.strategy===Pa||g.match_length===ha&&4096<g.strstart-g.match_start)&&(g.match_length=ha-1)),g.prev_length>=ha&&g.match_length<=
g.prev_length){u=g.strstart+g.lookahead-ha;r=ra._tr_tally(g,g.strstart-1-g.prev_match,g.prev_length-ha);g.lookahead-=g.prev_length-1;g.prev_length-=2;do++g.strstart<=u&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+ha-1])&g.hash_mask,m=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart);while(0!==--g.prev_length);if(g.match_available=0,g.match_length=ha-1,g.strstart++,r&&(J(g,!1),0===g.strm.avail_out))return E}else if(g.match_available){if(r=ra._tr_tally(g,0,g.window[g.strstart-
1]),r&&J(g,!1),g.strstart++,g.lookahead--,0===g.strm.avail_out)return E}else g.match_available=1,g.strstart++,g.lookahead--}return g.match_available&&(ra._tr_tally(g,0,g.window[g.strstart-1]),g.match_available=0),g.insert=g.strstart<ha-1?g.strstart:ha-1,k===T?(J(g,!0),0===g.strm.avail_out?X:ja):g.last_lit&&(J(g,!1),0===g.strm.avail_out)?E:Ua}function ca(d,g,k,r,m){this.good_length=d;this.max_lazy=g;this.nice_length=k;this.max_chain=r;this.func=m}function S(){this.strm=null;this.status=0;this.pending_buf=
null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=Ga;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=
this.hash_size=this.ins_h=0;this.dyn_ltree=new oa.Buf16(2*xa);this.dyn_dtree=new oa.Buf16(2*(2*gb+1));this.bl_tree=new oa.Buf16(2*(2*p+1));D(this.dyn_ltree);D(this.dyn_dtree);D(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new oa.Buf16(La+1);this.heap=new oa.Buf16(2*Ea+1);D(this.heap);this.heap_max=this.heap_len=0;this.depth=new oa.Buf16(2*Ea+1);D(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=
this.l_buf=0}function da(d){var g;return d&&d.state?(d.total_in=d.total_out=0,d.data_type=Xa,g=d.state,g.pending=0,g.pending_out=0,0>g.wrap&&(g.wrap=-g.wrap),g.status=g.wrap?G:z,d.adler=2===g.wrap?0:1,g.last_flush=N,ra._tr_init(g),ma):A(d,R)}function wa(d){var g=da(d);g===ma&&(d=d.state,d.window_size=2*d.w_size,D(d.head),d.max_lazy_match=la[d.level].max_lazy,d.good_match=la[d.level].good_length,d.nice_match=la[d.level].nice_length,d.max_chain_length=la[d.level].max_chain,d.strstart=0,d.block_start=
0,d.lookahead=0,d.insert=0,d.match_length=d.prev_length=ha-1,d.match_available=0,d.ins_h=0);return g}function Oa(d,g,k,r,m,n){if(!d)return R;var u=1;if(g===U&&(g=6),0>r?(u=0,r=-r):15<r&&(u=2,r-=16),1>m||m>Ta||k!==Ga||8>r||15<r||0>g||9<g||0>n||n>Da)return A(d,R);8===r&&(r=9);var p=new S;return d.state=p,p.strm=d,p.wrap=u,p.gzhead=null,p.w_bits=r,p.w_size=1<<p.w_bits,p.w_mask=p.w_size-1,p.hash_bits=m+7,p.hash_size=1<<p.hash_bits,p.hash_mask=p.hash_size-1,p.hash_shift=~~((p.hash_bits+ha-1)/ha),p.window=
new oa.Buf8(2*p.w_size),p.head=new oa.Buf16(p.hash_size),p.prev=new oa.Buf16(p.w_size),p.lit_bufsize=1<<m+6,p.pending_buf_size=4*p.lit_bufsize,p.pending_buf=new oa.Buf8(p.pending_buf_size),p.d_buf=1*p.lit_bufsize,p.l_buf=3*p.lit_bufsize,p.level=g,p.strategy=n,p.method=k,wa(d)}var oa=m("../utils/common"),ra=m("./trees"),Z=m("./adler32"),F=m("./crc32"),M=m("./messages"),N=0,T=4,ma=0,R=-2,U=-1,Pa=1,Da=4,Xa=2,Ga=8,Ta=9,Ea=286,gb=30,p=19,xa=2*Ea+1,La=15,ha=3,V=258,O=V+ha+1,G=42,z=113,E=1,Ua=2,X=3,ja=4;
var la=[new ca(0,0,0,0,function(d,g){var k=65535;for(k>d.pending_buf_size-5&&(k=d.pending_buf_size-5);;){if(1>=d.lookahead){if(v(d),0===d.lookahead&&g===N)return E;if(0===d.lookahead)break}d.strstart+=d.lookahead;d.lookahead=0;var m=d.block_start+k;if((0===d.strstart||d.strstart>=m)&&(d.lookahead=d.strstart-m,d.strstart=m,J(d,!1),0===d.strm.avail_out)||d.strstart-d.block_start>=d.w_size-O&&(J(d,!1),0===d.strm.avail_out))return E}return d.insert=0,g===T?(J(d,!0),0===d.strm.avail_out?X:ja):(d.strstart>
d.block_start&&J(d,!1),E)}),new ca(4,4,8,4,g),new ca(4,5,16,8,g),new ca(4,6,32,32,g),new ca(4,4,16,16,Q),new ca(8,16,32,32,Q),new ca(8,16,128,128,Q),new ca(8,32,128,256,Q),new ca(32,128,258,1024,Q),new ca(32,258,258,4096,Q)];y.deflateInit=function(d,g){return Oa(d,g,Ga,15,8,0)};y.deflateInit2=Oa;y.deflateReset=wa;y.deflateResetKeep=da;y.deflateSetHeader=function(d,g){return d&&d.state?2!==d.state.wrap?R:(d.state.gzhead=g,ma):R};y.deflate=function(d,g){var m,r;if(!d||!d.state||5<g||0>g)return d?A(d,
R):R;if(r=d.state,!d.output||!d.input&&0!==d.avail_in||666===r.status&&g!==T)return A(d,0===d.avail_out?-5:R);if(r.strm=d,m=r.last_flush,r.last_flush=g,r.status===G)if(2===r.wrap)d.adler=0,n(r,31),n(r,139),n(r,8),r.gzhead?(n(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),n(r,255&r.gzhead.time),n(r,r.gzhead.time>>8&255),n(r,r.gzhead.time>>16&255),n(r,r.gzhead.time>>24&255),n(r,9===r.level?2:2<=r.strategy||2>r.level?4:0),n(r,255&r.gzhead.os),
r.gzhead.extra&&r.gzhead.extra.length&&(n(r,255&r.gzhead.extra.length),n(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(d.adler=F(d.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(n(r,0),n(r,0),n(r,0),n(r,0),n(r,0),n(r,9===r.level?2:2<=r.strategy||2>r.level?4:0),n(r,3),r.status=z);else{var p=Ga+(r.w_bits-8<<4)<<8;p|=(2<=r.strategy||2>r.level?0:6>r.level?1:6===r.level?2:3)<<6;0!==r.strstart&&(p|=32);r.status=z;k(r,p+(31-p%31));0!==r.strstart&&(k(r,d.adler>>>16),k(r,65535&d.adler));d.adler=
1}if(69===r.status)if(r.gzhead.extra){for(p=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>p&&(d.adler=F(d.adler,r.pending_buf,r.pending-p,p)),x(d),p=r.pending,r.pending!==r.pending_buf_size));)n(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>p&&(d.adler=F(d.adler,r.pending_buf,r.pending-p,p));r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){p=r.pending;
do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>p&&(d.adler=F(d.adler,r.pending_buf,r.pending-p,p)),x(d),p=r.pending,r.pending===r.pending_buf_size)){var u=1;break}u=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0;n(r,u)}while(0!==u);r.gzhead.hcrc&&r.pending>p&&(d.adler=F(d.adler,r.pending_buf,r.pending-p,p));0===u&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){p=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&
r.pending>p&&(d.adler=F(d.adler,r.pending_buf,r.pending-p,p)),x(d),p=r.pending,r.pending===r.pending_buf_size)){u=1;break}u=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0;n(r,u)}while(0!==u);r.gzhead.hcrc&&r.pending>p&&(d.adler=F(d.adler,r.pending_buf,r.pending-p,p));0===u&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&x(d),r.pending+2<=r.pending_buf_size&&(n(r,255&d.adler),n(r,d.adler>>8&255),d.adler=0,r.status=
z)):r.status=z),0!==r.pending){if(x(d),0===d.avail_out)return r.last_flush=-1,ma}else if(0===d.avail_in&&(g<<1)-(4<g?9:0)<=(m<<1)-(4<m?9:0)&&g!==T)return A(d,-5);if(666===r.status&&0!==d.avail_in)return A(d,-5);if(0!==d.avail_in||0!==r.lookahead||g!==N&&666!==r.status){if(2===r.strategy)a:{for(var w;;){if(0===r.lookahead&&(v(r),0===r.lookahead)){if(g===N){var y=E;break a}break}if(r.match_length=0,w=ra._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++,w&&(J(r,!1),0===r.strm.avail_out)){y=
E;break a}}y=(r.insert=0,g===T?(J(r,!0),0===r.strm.avail_out?X:ja):r.last_lit&&(J(r,!1),0===r.strm.avail_out)?E:Ua)}else if(3===r.strategy)a:{var Q,U;for(w=r.window;;){if(r.lookahead<=V){if(v(r),r.lookahead<=V&&g===N){y=E;break a}if(0===r.lookahead)break}if(r.match_length=0,r.lookahead>=ha&&0<r.strstart&&(U=r.strstart-1,Q=w[U],Q===w[++U]&&Q===w[++U]&&Q===w[++U])){for(m=r.strstart+V;Q===w[++U]&&Q===w[++U]&&Q===w[++U]&&Q===w[++U]&&Q===w[++U]&&Q===w[++U]&&Q===w[++U]&&Q===w[++U]&&U<m;);r.match_length=
V-(m-U);r.match_length>r.lookahead&&(r.match_length=r.lookahead)}if(r.match_length>=ha?(y=ra._tr_tally(r,1,r.match_length-ha),r.lookahead-=r.match_length,r.strstart+=r.match_length,r.match_length=0):(y=ra._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++),y&&(J(r,!1),0===r.strm.avail_out)){y=E;break a}}y=(r.insert=0,g===T?(J(r,!0),0===r.strm.avail_out?X:ja):r.last_lit&&(J(r,!1),0===r.strm.avail_out)?E:Ua)}else y=la[r.level].func(r,g);if(y!==X&&y!==ja||(r.status=666),y===E||y===X)return 0===
d.avail_out&&(r.last_flush=-1),ma;if(y===Ua&&(1===g?ra._tr_align(r):5!==g&&(ra._tr_stored_block(r,0,0,!1),3===g&&(D(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),x(d),0===d.avail_out))return r.last_flush=-1,ma}return g!==T?ma:0>=r.wrap?1:(2===r.wrap?(n(r,255&d.adler),n(r,d.adler>>8&255),n(r,d.adler>>16&255),n(r,d.adler>>24&255),n(r,255&d.total_in),n(r,d.total_in>>8&255),n(r,d.total_in>>16&255),n(r,d.total_in>>24&255)):(k(r,d.adler>>>16),k(r,65535&d.adler)),x(d),0<r.wrap&&(r.wrap=
-r.wrap),0!==r.pending?ma:1)};y.deflateEnd=function(d){var g;return d&&d.state?(g=d.state.status,g!==G&&69!==g&&73!==g&&91!==g&&103!==g&&g!==z&&666!==g?A(d,R):(d.state=null,g===z?A(d,-3):ma)):R};y.deflateSetDictionary=function(d,g){var k,m,p;var n=g.length;if(!d||!d.state||(k=d.state,m=k.wrap,2===m||1===m&&k.status!==G||k.lookahead))return R;1===m&&(d.adler=Z(d.adler,g,n,0));k.wrap=0;n>=k.w_size&&(0===m&&(D(k.head),k.strstart=0,k.block_start=0,k.insert=0),p=new oa.Buf8(k.w_size),oa.arraySet(p,g,n-
k.w_size,k.w_size,0),g=p,n=k.w_size);p=d.avail_in;var u=d.next_in;var w=d.input;d.avail_in=n;d.next_in=0;d.input=g;for(v(k);k.lookahead>=ha;){g=k.strstart;n=k.lookahead-(ha-1);do k.ins_h=(k.ins_h<<k.hash_shift^k.window[g+ha-1])&k.hash_mask,k.prev[g&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=g,g++;while(--n);k.strstart=g;k.lookahead=ha-1;v(k)}return k.strstart+=k.lookahead,k.block_start=k.strstart,k.insert=k.lookahead,k.lookahead=0,k.match_length=k.prev_length=ha-1,k.match_available=0,d.next_in=u,d.input=
w,d.avail_in=p,k.wrap=m,ma};y.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(m,w,y){w.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},{}],10:[function(m,w,y){w.exports=function(m,w){var x,y,n;var k=m.state;var d=m.next_in;var v=m.input;var g=d+(m.avail_in-5);var A=m.next_out;var D=m.output;w=A-(w-m.avail_out);
var S=A+(m.avail_out-257);var da=k.dmax;var wa=k.wsize;var Oa=k.whave;var oa=k.wnext;var ra=k.window;var Z=k.hold;var F=k.bits;var M=k.lencode;var N=k.distcode;var T=(1<<k.lenbits)-1;var ma=(1<<k.distbits)-1;a:do{15>F&&(Z+=v[d++]<<F,F+=8,Z+=v[d++]<<F,F+=8);var R=M[Z&T];b:for(;;){if(x=R>>>24,Z>>>=x,F-=x,x=R>>>16&255,0===x)D[A++]=65535&R;else{if(!(16&x)){if(0===(64&x)){R=M[(65535&R)+(Z&(1<<x)-1)];continue b}if(32&x){k.mode=12;break a}m.msg="invalid literal/length code";k.mode=30;break a}var U=65535&
R;(x&=15)&&(F<x&&(Z+=v[d++]<<F,F+=8),U+=Z&(1<<x)-1,Z>>>=x,F-=x);15>F&&(Z+=v[d++]<<F,F+=8,Z+=v[d++]<<F,F+=8);R=N[Z&ma];c:for(;;){if(x=R>>>24,Z>>>=x,F-=x,x=R>>>16&255,!(16&x)){if(0===(64&x)){R=N[(65535&R)+(Z&(1<<x)-1)];continue c}m.msg="invalid distance code";k.mode=30;break a}if(y=65535&R,x&=15,F<x&&(Z+=v[d++]<<F,F+=8,F<x&&(Z+=v[d++]<<F,F+=8)),y+=Z&(1<<x)-1,y>da){m.msg="invalid distance too far back";k.mode=30;break a}if(Z>>>=x,F-=x,x=A-w,y>x){if(x=y-x,x>Oa&&k.sane){m.msg="invalid distance too far back";
k.mode=30;break a}if(R=0,n=ra,0===oa){if(R+=wa-x,x<U){U-=x;do D[A++]=ra[R++];while(--x);R=A-y;n=D}}else if(oa<x){if(R+=wa+oa-x,x-=oa,x<U){U-=x;do D[A++]=ra[R++];while(--x);if(R=0,oa<U){x=oa;U-=x;do D[A++]=ra[R++];while(--x);R=A-y;n=D}}}else if(R+=oa-x,x<U){U-=x;do D[A++]=ra[R++];while(--x);R=A-y;n=D}for(;2<U;)D[A++]=n[R++],D[A++]=n[R++],D[A++]=n[R++],U-=3;U&&(D[A++]=n[R++],1<U&&(D[A++]=n[R++]))}else{R=A-y;do D[A++]=D[R++],D[A++]=D[R++],D[A++]=D[R++],U-=3;while(2<U);U&&(D[A++]=D[R++],1<U&&(D[A++]=
D[R++]))}break}}break}}while(d<g&&A<S);U=F>>3;d-=U;F-=U<<3;m.next_in=d;m.next_out=A;m.avail_in=d<g?5+(g-d):5-(d-g);m.avail_out=A<S?257+(S-A):257-(A-S);k.hold=Z&(1<<F)-1;k.bits=F}},{}],11:[function(m,w,y){function A(d){return(d>>>24&255)+(d>>>8&65280)+((65280&d)<<8)+((255&d)<<24)}function D(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=
this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new Q.Buf16(320);this.work=new Q.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function x(d){var g;return d&&d.state?(g=d.state,d.total_in=d.total_out=g.total=0,d.msg="",g.wrap&&(d.adler=1&g.wrap),g.mode=ra,g.last=0,g.havedict=0,g.dmax=32768,g.head=null,g.hold=0,g.bits=0,g.lencode=g.lendyn=new Q.Buf32(Z),g.distcode=g.distdyn=
new Q.Buf32(F),g.sane=1,g.back=-1,Oa):oa}function J(d){var g;return d&&d.state?(g=d.state,g.wsize=0,g.whave=0,g.wnext=0,x(d)):oa}function n(d,g){var k,m;return d&&d.state?(m=d.state,0>g?(k=0,g=-g):(k=(g>>4)+1,48>g&&(g&=15)),g&&(8>g||15<g)?oa:(null!==m.window&&m.wbits!==g&&(m.window=null),m.wrap=k,m.wbits=g,J(d))):oa}function k(d,g){var k,m;return d?(m=new D,d.state=m,m.window=null,k=n(d,g),k!==Oa&&(d.state=null),k):oa}function d(d,g,k,m){var n;d=d.state;return null===d.window&&(d.wsize=1<<d.wbits,
d.wnext=0,d.whave=0,d.window=new Q.Buf8(d.wsize)),m>=d.wsize?(Q.arraySet(d.window,g,k-d.wsize,d.wsize,0),d.wnext=0,d.whave=d.wsize):(n=d.wsize-d.wnext,n>m&&(n=m),Q.arraySet(d.window,g,k-m,n,d.wnext),m-=n,m?(Q.arraySet(d.window,g,k-m,m,0),d.wnext=m,d.whave=d.wsize):(d.wnext+=n,d.wnext===d.wsize&&(d.wnext=0),d.whave<d.wsize&&(d.whave+=n))),0}var v,g,Q=m("../utils/common"),ca=m("./adler32"),S=m("./crc32"),da=m("./inffast"),wa=m("./inftrees"),Oa=0,oa=-2,ra=1,Z=852,F=592,M=!0;y.inflateReset=J;y.inflateReset2=
n;y.inflateResetKeep=x;y.inflateInit=function(d){return k(d,15)};y.inflateInit2=k;y.inflate=function(k,m){var n,w,x,y,D,F,J,N=0,T=new Q.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!k||!k.state||!k.output||!k.input&&0!==k.avail_in)return oa;var p=k.state;12===p.mode&&(p.mode=13);var xa=k.next_out;var La=k.output;var ha=k.avail_out;var V=k.next_in;var O=k.input;var G=k.avail_in;var z=p.hold;var E=p.bits;var Ua=G;var X=ha;var ja=Oa;a:for(;;)switch(p.mode){case ra:if(0===p.wrap){p.mode=
13;break}for(;16>E;){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}if(2&p.wrap&&35615===z){p.check=0;T[0]=255&z;T[1]=z>>>8&255;p.check=S(p.check,T,2,0);E=z=0;p.mode=2;break}if(p.flags=0,p.head&&(p.head.done=!1),!(1&p.wrap)||(((255&z)<<8)+(z>>8))%31){k.msg="incorrect header check";p.mode=30;break}if(8!==(15&z)){k.msg="unknown compression method";p.mode=30;break}if(z>>>=4,E-=4,F=(15&z)+8,0===p.wbits)p.wbits=F;else if(F>p.wbits){k.msg="invalid window size";p.mode=30;break}p.dmax=1<<F;k.adler=p.check=1;p.mode=
512&z?10:12;E=z=0;break;case 2:for(;16>E;){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}if(p.flags=z,8!==(255&p.flags)){k.msg="unknown compression method";p.mode=30;break}if(57344&p.flags){k.msg="unknown header flags set";p.mode=30;break}p.head&&(p.head.text=z>>8&1);512&p.flags&&(T[0]=255&z,T[1]=z>>>8&255,p.check=S(p.check,T,2,0));E=z=0;p.mode=3;case 3:for(;32>E;){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}p.head&&(p.head.time=z);512&p.flags&&(T[0]=255&z,T[1]=z>>>8&255,T[2]=z>>>16&255,T[3]=z>>>24&255,p.check=
S(p.check,T,4,0));E=z=0;p.mode=4;case 4:for(;16>E;){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}p.head&&(p.head.xflags=255&z,p.head.os=z>>8);512&p.flags&&(T[0]=255&z,T[1]=z>>>8&255,p.check=S(p.check,T,2,0));E=z=0;p.mode=5;case 5:if(1024&p.flags){for(;16>E;){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}p.length=z;p.head&&(p.head.extra_len=z);512&p.flags&&(T[0]=255&z,T[1]=z>>>8&255,p.check=S(p.check,T,2,0));E=z=0}else p.head&&(p.head.extra=null);p.mode=6;case 6:if(1024&p.flags&&(n=p.length,n>G&&(n=G),n&&(p.head&&
(F=p.head.extra_len-p.length,p.head.extra||(p.head.extra=Array(p.head.extra_len)),Q.arraySet(p.head.extra,O,V,n,F)),512&p.flags&&(p.check=S(p.check,O,n,V)),G-=n,V+=n,p.length-=n),p.length))break a;p.length=0;p.mode=7;case 7:if(2048&p.flags){if(0===G)break a;n=0;do F=O[V+n++],p.head&&F&&65536>p.length&&(p.head.name+=String.fromCharCode(F));while(F&&n<G);if(512&p.flags&&(p.check=S(p.check,O,n,V)),G-=n,V+=n,F)break a}else p.head&&(p.head.name=null);p.length=0;p.mode=8;case 8:if(4096&p.flags){if(0===
G)break a;n=0;do F=O[V+n++],p.head&&F&&65536>p.length&&(p.head.comment+=String.fromCharCode(F));while(F&&n<G);if(512&p.flags&&(p.check=S(p.check,O,n,V)),G-=n,V+=n,F)break a}else p.head&&(p.head.comment=null);p.mode=9;case 9:if(512&p.flags){for(;16>E;){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}if(z!==(65535&p.check)){k.msg="header crc mismatch";p.mode=30;break}E=z=0}p.head&&(p.head.hcrc=p.flags>>9&1,p.head.done=!0);k.adler=p.check=0;p.mode=12;break;case 10:for(;32>E;){if(0===G)break a;G--;z+=O[V++]<<
E;E+=8}k.adler=p.check=A(z);E=z=0;p.mode=11;case 11:if(0===p.havedict)return k.next_out=xa,k.avail_out=ha,k.next_in=V,k.avail_in=G,p.hold=z,p.bits=E,2;k.adler=p.check=1;p.mode=12;case 12:if(5===m||6===m)break a;case 13:if(p.last){z>>>=7&E;E-=7&E;p.mode=27;break}for(;3>E;){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}switch(p.last=1&z,z>>>=1,--E,3&z){case 0:p.mode=14;break;case 1:var la=p;if(M){v=new Q.Buf32(512);g=new Q.Buf32(32);for(x=0;144>x;)la.lens[x++]=8;for(;256>x;)la.lens[x++]=9;for(;280>x;)la.lens[x++]=
7;for(;288>x;)la.lens[x++]=8;wa(1,la.lens,0,288,v,0,la.work,{bits:9});for(x=0;32>x;)la.lens[x++]=5;wa(2,la.lens,0,32,g,0,la.work,{bits:5});M=!1}la.lencode=v;la.lenbits=9;la.distcode=g;la.distbits=5;if(p.mode=20,6===m){z>>>=2;E-=2;break a}break;case 2:p.mode=17;break;case 3:k.msg="invalid block type",p.mode=30}z>>>=2;E-=2;break;case 14:z>>>=7&E;for(E-=7&E;32>E;){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}if((65535&z)!==(z>>>16^65535)){k.msg="invalid stored block lengths";p.mode=30;break}if(p.length=65535&
z,z=0,E=0,p.mode=15,6===m)break a;case 15:p.mode=16;case 16:if(n=p.length){if(n>G&&(n=G),n>ha&&(n=ha),0===n)break a;Q.arraySet(La,O,V,n,xa);G-=n;V+=n;ha-=n;xa+=n;p.length-=n;break}p.mode=12;break;case 17:for(;14>E;){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}if(p.nlen=(31&z)+257,z>>>=5,E-=5,p.ndist=(31&z)+1,z>>>=5,E-=5,p.ncode=(15&z)+4,z>>>=4,E-=4,286<p.nlen||30<p.ndist){k.msg="too many length or distance symbols";p.mode=30;break}p.have=0;p.mode=18;case 18:for(;p.have<p.ncode;){for(;3>E;){if(0===G)break a;
G--;z+=O[V++]<<E;E+=8}p.lens[Z[p.have++]]=7&z;z>>>=3;E-=3}for(;19>p.have;)p.lens[Z[p.have++]]=0;if(p.lencode=p.lendyn,p.lenbits=7,J={bits:p.lenbits},ja=wa(0,p.lens,0,19,p.lencode,0,p.work,J),p.lenbits=J.bits,ja){k.msg="invalid code lengths set";p.mode=30;break}p.have=0;p.mode=19;case 19:for(;p.have<p.nlen+p.ndist;){for(;N=p.lencode[z&(1<<p.lenbits)-1],y=N>>>24,la=65535&N,!(y<=E);){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}if(16>la)z>>>=y,E-=y,p.lens[p.have++]=la;else{if(16===la){for(x=y+2;E<x;){if(0===
G)break a;G--;z+=O[V++]<<E;E+=8}if(z>>>=y,E-=y,0===p.have){k.msg="invalid bit length repeat";p.mode=30;break}F=p.lens[p.have-1];n=3+(3&z);z>>>=2;E-=2}else if(17===la){for(x=y+3;E<x;){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}z>>>=y;E-=y;F=0;n=3+(7&z);z>>>=3;E-=3}else{for(x=y+7;E<x;){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}z>>>=y;E-=y;F=0;n=11+(127&z);z>>>=7;E-=7}if(p.have+n>p.nlen+p.ndist){k.msg="invalid bit length repeat";p.mode=30;break}for(;n--;)p.lens[p.have++]=F}}if(30===p.mode)break;if(0===p.lens[256]){k.msg=
"invalid code -- missing end-of-block";p.mode=30;break}if(p.lenbits=9,J={bits:p.lenbits},ja=wa(1,p.lens,0,p.nlen,p.lencode,0,p.work,J),p.lenbits=J.bits,ja){k.msg="invalid literal/lengths set";p.mode=30;break}if(p.distbits=6,p.distcode=p.distdyn,J={bits:p.distbits},ja=wa(2,p.lens,p.nlen,p.ndist,p.distcode,0,p.work,J),p.distbits=J.bits,ja){k.msg="invalid distances set";p.mode=30;break}if(p.mode=20,6===m)break a;case 20:p.mode=21;case 21:if(6<=G&&258<=ha){k.next_out=xa;k.avail_out=ha;k.next_in=V;k.avail_in=
G;p.hold=z;p.bits=E;da(k,X);xa=k.next_out;La=k.output;ha=k.avail_out;V=k.next_in;O=k.input;G=k.avail_in;z=p.hold;E=p.bits;12===p.mode&&(p.back=-1);break}for(p.back=0;N=p.lencode[z&(1<<p.lenbits)-1],y=N>>>24,x=N>>>16&255,la=65535&N,!(y<=E);){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}if(x&&0===(240&x)){var u=y;var ea=x;for(D=la;N=p.lencode[D+((z&(1<<u+ea)-1)>>u)],y=N>>>24,x=N>>>16&255,la=65535&N,!(u+y<=E);){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}z>>>=u;E-=u;p.back+=u}if(z>>>=y,E-=y,p.back+=y,p.length=
la,0===x){p.mode=26;break}if(32&x){p.back=-1;p.mode=12;break}if(64&x){k.msg="invalid literal/length code";p.mode=30;break}p.extra=15&x;p.mode=22;case 22:if(p.extra){for(x=p.extra;E<x;){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}p.length+=z&(1<<p.extra)-1;z>>>=p.extra;E-=p.extra;p.back+=p.extra}p.was=p.length;p.mode=23;case 23:for(;N=p.distcode[z&(1<<p.distbits)-1],y=N>>>24,x=N>>>16&255,la=65535&N,!(y<=E);){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}if(0===(240&x)){u=y;ea=x;for(D=la;N=p.distcode[D+((z&(1<<
u+ea)-1)>>u)],y=N>>>24,x=N>>>16&255,la=65535&N,!(u+y<=E);){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}z>>>=u;E-=u;p.back+=u}if(z>>>=y,E-=y,p.back+=y,64&x){k.msg="invalid distance code";p.mode=30;break}p.offset=la;p.extra=15&x;p.mode=24;case 24:if(p.extra){for(x=p.extra;E<x;){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}p.offset+=z&(1<<p.extra)-1;z>>>=p.extra;E-=p.extra;p.back+=p.extra}if(p.offset>p.dmax){k.msg="invalid distance too far back";p.mode=30;break}p.mode=25;case 25:if(0===ha)break a;if(n=X-ha,p.offset>
n){if(n=p.offset-n,n>p.whave&&p.sane){k.msg="invalid distance too far back";p.mode=30;break}n>p.wnext?(n-=p.wnext,w=p.wsize-n):w=p.wnext-n;n>p.length&&(n=p.length);x=p.window}else x=La,w=xa-p.offset,n=p.length;n>ha&&(n=ha);ha-=n;p.length-=n;do La[xa++]=x[w++];while(--n);0===p.length&&(p.mode=21);break;case 26:if(0===ha)break a;La[xa++]=p.length;ha--;p.mode=21;break;case 27:if(p.wrap){for(;32>E;){if(0===G)break a;G--;z|=O[V++]<<E;E+=8}if(X-=ha,k.total_out+=X,p.total+=X,X&&(k.adler=p.check=p.flags?
S(p.check,La,X,xa-X):ca(p.check,La,X,xa-X)),X=ha,(p.flags?z:A(z))!==p.check){k.msg="incorrect data check";p.mode=30;break}E=z=0}p.mode=28;case 28:if(p.wrap&&p.flags){for(;32>E;){if(0===G)break a;G--;z+=O[V++]<<E;E+=8}if(z!==(4294967295&p.total)){k.msg="incorrect length check";p.mode=30;break}E=z=0}p.mode=29;case 29:ja=1;break a;case 30:ja=-3;break a;case 31:return-4;default:return oa}return k.next_out=xa,k.avail_out=ha,k.next_in=V,k.avail_in=G,p.hold=z,p.bits=E,(p.wsize||X!==k.avail_out&&30>p.mode&&
(27>p.mode||4!==m))&&d(k,k.output,k.next_out,X-k.avail_out)?(p.mode=31,-4):(Ua-=k.avail_in,X-=k.avail_out,k.total_in+=Ua,k.total_out+=X,p.total+=X,p.wrap&&X&&(k.adler=p.check=p.flags?S(p.check,La,X,k.next_out-X):ca(p.check,La,X,k.next_out-X)),k.data_type=p.bits+(p.last?64:0)+(12===p.mode?128:0)+(20===p.mode||15===p.mode?256:0),(0===Ua&&0===X||4===m)&&ja===Oa&&(ja=-5),ja)};y.inflateEnd=function(d){if(!d||!d.state)return oa;var g=d.state;return g.window&&(g.window=null),d.state=null,Oa};y.inflateGetHeader=
function(d,g){var k;return d&&d.state?(k=d.state,0===(2&k.wrap)?oa:(k.head=g,g.done=!1,Oa)):oa};y.inflateSetDictionary=function(g,k){var m,n,v=k.length;return g&&g.state?(m=g.state,0!==m.wrap&&11!==m.mode?oa:11===m.mode&&(n=1,n=ca(n,k,v,0),n!==m.check)?-3:d(g,k,v,v)?(m.mode=31,-4):(m.havedict=1,Oa)):oa};y.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(m,w,y){var A=m("../utils/common"),D=[3,4,5,6,7,8,9,
10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],x=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],J=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],n=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];w.exports=function(k,d,m,g,w,y,S,da){var v,Q,ca,ra,Z,F,M=da.bits,N,T,ma,R,U,Pa=0,Da,Xa=null,Ga=0,Ta=new A.Buf16(16);
var Ea=new A.Buf16(16);var gb=null,p=0;for(N=0;15>=N;N++)Ta[N]=0;for(T=0;T<g;T++)Ta[d[m+T]]++;var xa=M;for(ma=15;1<=ma&&0===Ta[ma];ma--);if(xa>ma&&(xa=ma),0===ma)return w[y++]=20971520,w[y++]=20971520,da.bits=1,0;for(M=1;M<ma&&0===Ta[M];M++);xa<M&&(xa=M);for(N=v=1;15>=N;N++)if(v<<=1,v-=Ta[N],0>v)return-1;if(0<v&&(0===k||1!==ma))return-1;Ea[1]=0;for(N=1;15>N;N++)Ea[N+1]=Ea[N]+Ta[N];for(T=0;T<g;T++)0!==d[m+T]&&(S[Ea[d[m+T]]++]=T);if(0===k?(Xa=gb=S,ra=19):1===k?(Xa=D,Ga-=257,gb=x,p-=257,ra=256):(Xa=
J,gb=n,ra=-1),Da=0,T=0,N=M,Ea=y,R=xa,U=0,ca=-1,Pa=1<<xa,g=Pa-1,1===k&&852<Pa||2===k&&592<Pa)return 1;for(var La=0;;){La++;var ha=N-U;S[T]<ra?(Z=0,F=S[T]):S[T]>ra?(Z=gb[p+S[T]],F=Xa[Ga+S[T]]):(Z=96,F=0);v=1<<N-U;M=Q=1<<R;do Q-=v,w[Ea+(Da>>U)+Q]=ha<<24|Z<<16|F|0;while(0!==Q);for(v=1<<N-1;Da&v;)v>>=1;if(0!==v?(Da&=v-1,Da+=v):Da=0,T++,0===--Ta[N]){if(N===ma)break;N=d[m+S[T]]}if(N>xa&&(Da&g)!==ca){0===U&&(U=xa);Ea+=M;R=N-U;for(v=1<<R;R+U<ma&&(v-=Ta[R+U],!(0>=v));)R++,v<<=1;if(Pa+=1<<R,1===k&&852<Pa||2===
k&&592<Pa)return 1;ca=Da&g;w[ca]=xa<<24|R<<16|Ea-y|0}}return 0!==Da&&(w[Ea+Da]=N-U<<24|4194304),da.bits=xa,0}},{"../utils/common":3}],13:[function(m,w,y){w.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(m,w,y){function A(d){for(var g=d.length;0<=--g;)d[g]=0}function D(d,g,k,m,n){this.static_tree=d;this.extra_bits=g;this.extra_base=k;this.elems=m;this.max_length=
n;this.has_stree=d&&d.length}function x(d,g){this.dyn_tree=d;this.max_code=0;this.stat_desc=g}function J(d,g){d.pending_buf[d.pending++]=255&g;d.pending_buf[d.pending++]=g>>>8&255}function n(d,g,k){d.bi_valid>Ga-k?(d.bi_buf|=g<<d.bi_valid&65535,J(d,d.bi_buf),d.bi_buf=g>>Ga-d.bi_valid,d.bi_valid+=k-Ga):(d.bi_buf|=g<<d.bi_valid&65535,d.bi_valid+=k)}function k(d,g,k){n(d,k[2*g],k[2*g+1])}function d(d,g){var k=0;do k|=1&d,d>>>=1,k<<=1;while(0<--g);return k>>>1}function v(g,k,m){var n,r=Array(Xa+1),p=
0;for(n=1;n<=Xa;n++)r[n]=p=p+m[n-1]<<1;for(m=0;m<=k;m++)n=g[2*m+1],0!==n&&(g[2*m]=d(r[n]++,n))}function g(d){var g;for(g=0;g<R;g++)d.dyn_ltree[2*g]=0;for(g=0;g<U;g++)d.dyn_dtree[2*g]=0;for(g=0;g<Pa;g++)d.bl_tree[2*g]=0;d.dyn_ltree[2*Ta]=1;d.opt_len=d.static_len=0;d.last_lit=d.matches=0}function Q(d){8<d.bi_valid?J(d,d.bi_buf):0<d.bi_valid&&(d.pending_buf[d.pending++]=d.bi_buf);d.bi_buf=0;d.bi_valid=0}function ca(d,g,k,m){var n=2*g,r=2*k;return d[n]<d[r]||d[n]===d[r]&&m[g]<=m[k]}function S(d,g,k){for(var m=
d.heap[k],n=k<<1;n<=d.heap_len&&(n<d.heap_len&&ca(g,d.heap[n+1],d.heap[n],d.depth)&&n++,!ca(g,m,d.heap[n],d.depth));)d.heap[k]=d.heap[n],k=n,n<<=1;d.heap[k]=m}function da(d,g,m){var r,p,u=0;if(0!==d.last_lit){do{var v=d.pending_buf[d.d_buf+2*u]<<8|d.pending_buf[d.d_buf+2*u+1];var x=d.pending_buf[d.l_buf+u];u++;0===v?k(d,x,g):(r=E[x],k(d,r+ma+1,g),p=xa[r],0!==p&&(x-=Ua[r],n(d,x,p)),v--,r=256>v?z[v]:z[256+(v>>>7)],k(d,r,m),p=La[r],0!==p&&(v-=X[r],n(d,v,p)))}while(u<d.last_lit)}k(d,Ta,g)}function wa(d,
g){var k,m=g.dyn_tree;var n=g.stat_desc.static_tree;var p=g.stat_desc.has_stree,r=g.stat_desc.elems,u=-1;d.heap_len=0;d.heap_max=Da;for(k=0;k<r;k++)0!==m[2*k]?(d.heap[++d.heap_len]=u=k,d.depth[k]=0):m[2*k+1]=0;for(;2>d.heap_len;){var x=d.heap[++d.heap_len]=2>u?++u:0;m[2*x]=1;d.depth[x]=0;d.opt_len--;p&&(d.static_len-=n[2*x+1])}g.max_code=u;for(k=d.heap_len>>1;1<=k;k--)S(d,m,k);x=r;do k=d.heap[1],d.heap[1]=d.heap[d.heap_len--],S(d,m,1),n=d.heap[1],d.heap[--d.heap_max]=k,d.heap[--d.heap_max]=n,m[2*
x]=m[2*k]+m[2*n],d.depth[x]=(d.depth[k]>=d.depth[n]?d.depth[k]:d.depth[n])+1,m[2*k+1]=m[2*n+1]=x,d.heap[1]=x++,S(d,m,1);while(2<=d.heap_len);d.heap[--d.heap_max]=d.heap[1];var w,y;k=g.dyn_tree;x=g.max_code;r=g.stat_desc.static_tree;var z=g.stat_desc.has_stree,A=g.stat_desc.extra_bits,K=g.stat_desc.extra_base,D=g.stat_desc.max_length,E=0;for(p=0;p<=Xa;p++)d.bl_count[p]=0;k[2*d.heap[d.heap_max]+1]=0;for(g=d.heap_max+1;g<Da;g++)n=d.heap[g],p=k[2*k[2*n+1]+1]+1,p>D&&(p=D,E++),k[2*n+1]=p,n>x||(d.bl_count[p]++,
w=0,n>=K&&(w=A[n-K]),y=k[2*n],d.opt_len+=y*(p+w),z&&(d.static_len+=y*(r[2*n+1]+w)));if(0!==E){do{for(p=D-1;0===d.bl_count[p];)p--;d.bl_count[p]--;d.bl_count[p+1]+=2;d.bl_count[D]--;E-=2}while(0<E);for(p=D;0!==p;p--)for(n=d.bl_count[p];0!==n;)w=d.heap[--g],w>x||(k[2*w+1]!==p&&(d.opt_len+=(p-k[2*w+1])*k[2*w],k[2*w+1]=p),n--)}v(m,u,d.bl_count)}function Oa(d,g,k){var m,n=-1,r=g[1],u=0,v=7,x=4;0===r&&(v=138,x=3);g[2*(k+1)+1]=65535;for(m=0;m<=k;m++){var w=r;r=g[2*(m+1)+1];++u<v&&w===r||(u<x?d.bl_tree[2*
w]+=u:0!==w?(w!==n&&d.bl_tree[2*w]++,d.bl_tree[2*Ea]++):10>=u?d.bl_tree[2*gb]++:d.bl_tree[2*p]++,u=0,n=w,0===r?(v=138,x=3):w===r?(v=6,x=3):(v=7,x=4))}}function oa(d,g,m){var r,u,v=-1,x=g[1],w=0,y=7,z=4;0===x&&(y=138,z=3);for(r=0;r<=m;r++)if(u=x,x=g[2*(r+1)+1],!(++w<y&&u===x)){if(w<z){do k(d,u,d.bl_tree);while(0!==--w)}else 0!==u?(u!==v&&(k(d,u,d.bl_tree),w--),k(d,Ea,d.bl_tree),n(d,w-3,2)):10>=w?(k(d,gb,d.bl_tree),n(d,w-3,3)):(k(d,p,d.bl_tree),n(d,w-11,7));w=0;v=u;0===x?(y=138,z=3):u===x?(y=6,z=3):
(y=7,z=4)}}function ra(d){var g,k=4093624447;for(g=0;31>=g;g++,k>>>=1)if(1&k&&0!==d.dyn_ltree[2*g])return M;if(0!==d.dyn_ltree[18]||0!==d.dyn_ltree[20]||0!==d.dyn_ltree[26])return N;for(g=32;g<ma;g++)if(0!==d.dyn_ltree[2*g])return N;return M}function Z(d,g,k,m){n(d,(T<<1)+(m?1:0),3);Q(d);J(d,k);J(d,~k);F.arraySet(d.pending_buf,d.window,g,k,d.pending);d.pending+=k}var F=m("../utils/common"),M=0,N=1,T=0,ma=256,R=ma+1+29,U=30,Pa=19,Da=2*R+1,Xa=15,Ga=16,Ta=256,Ea=16,gb=17,p=18,xa=[0,0,0,0,0,0,0,0,1,1,
1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],La=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ha=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=Array(2*(R+2));A(O);var G=Array(2*U);A(G);var z=Array(512);A(z);var E=Array(256);A(E);var Ua=Array(29);A(Ua);var X=Array(U);A(X);var ja,la,u,ea=!1;y._tr_init=function(k){if(!ea){var m,n,p,w=Array(Xa+1);for(p=n=0;28>p;p++)for(Ua[p]=n,m=0;m<1<<xa[p];m++)E[n++]=p;E[n-1]=p;for(p=n=0;16>p;p++)for(X[p]=
n,m=0;m<1<<La[p];m++)z[n++]=p;for(n>>=7;p<U;p++)for(X[p]=n<<7,m=0;m<1<<La[p]-7;m++)z[256+n++]=p;for(m=0;m<=Xa;m++)w[m]=0;for(m=0;143>=m;)O[2*m+1]=8,m++,w[8]++;for(;255>=m;)O[2*m+1]=9,m++,w[9]++;for(;279>=m;)O[2*m+1]=7,m++,w[7]++;for(;287>=m;)O[2*m+1]=8,m++,w[8]++;v(O,R+1,w);for(m=0;m<U;m++)G[2*m+1]=5,G[2*m]=d(m,5);ja=new D(O,xa,ma+1,R,Xa);la=new D(G,La,0,U,Xa);u=new D([],ha,0,Pa,7);ea=!0}k.l_desc=new x(k.dyn_ltree,ja);k.d_desc=new x(k.dyn_dtree,la);k.bl_desc=new x(k.bl_tree,u);k.bi_buf=0;k.bi_valid=
0;g(k)};y._tr_stored_block=Z;y._tr_flush_block=function(d,k,m,p){var r=0;if(0<d.level){2===d.strm.data_type&&(d.strm.data_type=ra(d));wa(d,d.l_desc);wa(d,d.d_desc);Oa(d,d.dyn_ltree,d.l_desc.max_code);Oa(d,d.dyn_dtree,d.d_desc.max_code);wa(d,d.bl_desc);for(r=Pa-1;3<=r&&0===d.bl_tree[2*V[r]+1];r--);r=(d.opt_len+=3*(r+1)+14,r);var u=d.opt_len+3+7>>>3;var v=d.static_len+3+7>>>3;v<=u&&(u=v)}else u=v=m+5;if(m+4<=u&&-1!==k)Z(d,k,m,p);else if(4===d.strategy||v===u)n(d,2+(p?1:0),3),da(d,O,G);else{n(d,4+(p?
1:0),3);k=d.l_desc.max_code+1;m=d.d_desc.max_code+1;r+=1;n(d,k-257,5);n(d,m-1,5);n(d,r-4,4);for(u=0;u<r;u++)n(d,d.bl_tree[2*V[u]+1],3);oa(d,d.dyn_ltree,k-1);oa(d,d.dyn_dtree,m-1);da(d,d.dyn_ltree,d.dyn_dtree)}g(d);p&&Q(d)};y._tr_tally=function(d,g,k){return d.pending_buf[d.d_buf+2*d.last_lit]=g>>>8&255,d.pending_buf[d.d_buf+2*d.last_lit+1]=255&g,d.pending_buf[d.l_buf+d.last_lit]=255&k,d.last_lit++,0===g?d.dyn_ltree[2*k]++:(d.matches++,g--,d.dyn_ltree[2*(E[k]+ma+1)]++,d.dyn_dtree[2*(256>g?z[g]:z[256+
(g>>>7)])]++),d.last_lit===d.lit_bufsize-1};y._tr_align=function(d){n(d,2,3);k(d,Ta,O);16===d.bi_valid?(J(d,d.bi_buf),d.bi_buf=0,d.bi_valid=0):8<=d.bi_valid&&(d.pending_buf[d.pending++]=255&d.bi_buf,d.bi_buf>>=8,d.bi_valid-=8)}},{"../utils/common":3}],15:[function(m,w,y){w.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},{}],"/":[function(m,w,y){y=
m("./lib/utils/common").assign;var A=m("./lib/deflate"),D=m("./lib/inflate");m=m("./lib/zlib/constants");var x={};y(x,A,D,m);w.exports=x},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")});
var saveAs=saveAs||function(I){if(!("undefined"===typeof I||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var m=I.document.createElementNS("http://www.w3.org/1999/xhtml","a"),w="download"in m,y=/constructor/i.test(I.HTMLElement)||I.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent),D=function(d){(I.setImmediate||I.setTimeout)(function(){throw d;},0)},x=function(d){setTimeout(function(){"string"===typeof d?(I.URL||I.webkitURL||I).revokeObjectURL(d):d.remove()},4E4)},J=function(d){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?
new Blob([String.fromCharCode(65279),d],{type:d.type}):d},n=function(d,k,g){g||(d=J(d));var n=this,v="application/octet-stream"===d.type,S=function(){var d=["writestart","progress","write","writeend"];d=[].concat(d);for(var g=d.length;g--;){var k=n["on"+d[g]];if("function"===typeof k)try{k.call(n,n)}catch(ra){D(ra)}}};n.readyState=n.INIT;if(w){var da=(I.URL||I.webkitURL||I).createObjectURL(d);setTimeout(function(){m.href=da;m.download=k;var d=new MouseEvent("click");m.dispatchEvent(d);S();x(da);n.readyState=
n.DONE})}else(function(){if((A||v&&y)&&I.FileReader){var g=new FileReader;g.onloadend=function(){var d=A?g.result:g.result.replace(/^data:[^;]*;/,"data:attachment/file;");I.open(d,"_blank")||(I.location.href=d);n.readyState=n.DONE;S()};g.readAsDataURL(d);n.readyState=n.INIT}else da||(da=(I.URL||I.webkitURL||I).createObjectURL(d)),v?I.location.href=da:I.open(da,"_blank")||(I.location.href=da),n.readyState=n.DONE,S(),x(da)})()},k=n.prototype;if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)return function(d,
k,g){k=k||d.name||"download";g||(d=J(d));return navigator.msSaveOrOpenBlob(d,k)};k.abort=function(){};k.readyState=k.INIT=0;k.WRITING=1;k.DONE=2;k.error=k.onwritestart=k.onprogress=k.onwrite=k.onabort=k.onerror=k.onwriteend=null;return function(d,k,g){return new n(d,k||d.name||"download",g)}}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);
"undefined"!==typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!==typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs});"function"==typeof define&&define.__amd&&(define.amd=define.__amd,delete define.__amd);
